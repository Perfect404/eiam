/*
 * eiam-portal - Employee Identity and Access Management Program
 * Copyright Â© 2020-2022 TopIAM (support@topiam.cn)
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
"use strict";(self.webpackChunktopiam_portal=self.webpackChunktopiam_portal||[]).push([[790],{26041:function(P,g,r){r.r(g),r.d(g,{default:function(){return L}});var A=r(97983),o=r.n(A),C=r(40794),v=r.n(C),y=r(25035),I=r(19847),S=r(65767),x=r(76521),E=r(86738),R=r(2453),T=r(27414),j=r(26713),Z=r(67294),F=r(98971);function B(i){return p.apply(this,arguments)}function p(){return p=v()(o()().mark(function i(c){return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,F.request)("/api/session/list",{method:"get",params:c}).then(function(t){var e={data:t!=null&&t.result?t==null?void 0:t.result:[],success:t==null?void 0:t.success};return Promise.resolve(e)}));case 1:case"end":return n.stop()}},i)})),p.apply(this,arguments)}function w(i){return h.apply(this,arguments)}function h(){return h=v()(o()().mark(function i(c){return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,F.request)("/api/session/remove",{method:"delete",requestType:"form",data:{sessionIds:c}}));case 1:case"end":return n.stop()}},i)})),h.apply(this,arguments)}var s=r(85893),L=function(){var i=(0,Z.useRef)(),c=[{title:"\u4F1A\u8BDD ID",dataIndex:"sessionId",ellipsis:!0,copyable:!0,align:"center",width:150,fixed:"left",search:!1},{title:"\u7528\u6237\u540D",dataIndex:"username",width:120,ellipsis:!0,fieldProps:{autoComplete:"off"}},{title:"\u6D3B\u52A8IP\u5730\u5740",width:130,dataIndex:"ip",ellipsis:!0,search:!1,render:function(n,t){var e=t.geoLocation;return e.ip?(0,s.jsx)(x.Z,{status:"success",text:e.ip}):(0,s.jsx)(x.Z,{status:"error",text:"\u672A\u77E5"})}},{title:"\u6D3B\u52A8\u5730\u70B9",width:120,ellipsis:!0,search:!1,render:function(n,t){var e=t.geoLocation;return e&&e.country&&e.province&&e.city&&e.country+"."+e.province+"."+e.city||"-"}},{title:"\u8BBE\u5907\u7C7B\u578B",ellipsis:!0,width:110,search:!1,render:function(n,t){var e=t.userAgent;return(e==null?void 0:e.deviceType)||"-"}},{title:"\u64CD\u4F5C\u7CFB\u7EDF",ellipsis:!0,width:110,search:!1,render:function(n,t){var e=t.userAgent;return(e==null?void 0:e.platform)+" "+(e==null?void 0:e.platformVersion)||"-"}},{title:"\u6D4F\u89C8\u5668",ellipsis:!0,width:110,search:!1,render:function(n,t){var e=t.userAgent;return(e==null?void 0:e.browser)+" "+(e==null?void 0:e.browserMajorVersion)||"-"}},{title:"\u767B\u5F55\u65F6\u95F4",ellipsis:!0,dataIndex:"loginTime",align:"center",width:200,valueType:"dateTime",search:!1},{title:"\u6700\u540E\u64CD\u4F5C\u65F6\u95F4",ellipsis:!0,dataIndex:"lastRequest",width:170,valueType:"dateTime",search:!1},{title:"\u64CD\u4F5C",valueType:"option",width:60,align:"center",fixed:"right",render:function(n,t){var e=t.sessionId;return[(0,s.jsx)(E.Z,{title:"\u60A8\u786E\u5B9A\u8981\u4E0B\u7EBF\u8BE5\u7528\u6237\u5417\uFF1F",placement:"bottomRight",icon:(0,s.jsx)(y.Z,{style:{color:"red"}}),onConfirm:v()(o()().mark(function f(){var u,m,l;return o()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,w(e);case 2:u=d.sent,m=u.success,m&&(R.ZP.success("\u64CD\u4F5C\u6210\u529F"),(l=i.current)===null||l===void 0||l.reload());case 5:case"end":return d.stop()}},f)})),okText:"\u662F",cancelText:"\u5426",children:(0,s.jsx)("a",{target:"_blank",style:{color:"red"},children:"\u4E0B\u7EBF"},"remove")},"offline")]}}];return(0,s.jsx)(I._z,{content:`\u4F1A\u8BDD\u7BA1\u7406\u53EF\u4EE5\u67E5\u770B\u6240\u6709\u5F53\u524D\u4ECD\u7136\u6709\u6548\u7684\u4F1A\u8BDD\u5217\u8868\uFF0C\u5E76\u4E14\u53EF\u4EE5\u5F3A\u5236\u6CE8\u9500\u67D0\u4E2A\u7528\u6237\u7684\u4F1A\u8BDD\u3002\u6CE8\u9500\u540E\uFF0C\u8BE5\u7528\u6237\u51ED\u8BC1\u5373\u523B\u5931\u6548\uFF0C\u4E4B\u540E\u7684\u6240\u6709\u64CD\u4F5C\u90FD\u9700\u8981\u91CD\u65B0\u8BA4\u8BC1\u3002
`,children:(0,s.jsx)(S.Z,{search:!1,options:{density:!1,setting:!0,reload:!0,search:!1},cardProps:{style:{overflow:"auto"}},scroll:{x:700},columns:c,rowSelection:{selections:[T.Z.SELECTION_ALL,T.Z.SELECTION_INVERT]},tableAlertRender:function(n){var t=n.selectedRowKeys,e=n.onCleanSelected;return(0,s.jsx)(j.Z,{size:24,children:(0,s.jsxs)("span",{children:["\u5DF2\u9009 ",t.length," \u9879",(0,s.jsx)("a",{style:{marginLeft:8},onClick:e,children:"\u53D6\u6D88\u9009\u62E9"})]})})},tableAlertOptionRender:function(n){return(0,s.jsx)(j.Z,{size:16,children:(0,s.jsx)(E.Z,{title:"\u60A8\u786E\u5B9A\u8981\u6279\u91CF\u4E0B\u7EBF\u9009\u4E2D\u7528\u6237\u5417\uFF1F",placement:"bottomRight",icon:(0,s.jsx)(y.Z,{style:{color:"red"}}),onConfirm:v()(o()().mark(function t(){var e,f,u;return o()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,w(n.selectedRowKeys.join(","));case 2:e=l.sent,f=e.success,f&&(R.ZP.success("\u64CD\u4F5C\u6210\u529F"),n.onCleanSelected(),(u=i.current)===null||u===void 0||u.reload());case 5:case"end":return l.stop()}},t)})),okText:"\u662F",cancelText:"\u5426",children:(0,s.jsx)("a",{target:"_blank",style:{color:"red"},children:"\u6279\u91CF\u4E0B\u7EBF"},"remove")},"offline")})},actionRef:i,pagination:{defaultPageSize:10},request:B,rowKey:"sessionId",dateFormatter:"string"})})}}}]);
