/*
 * eiam-portal - Employee Identity and Access Management Program
 * Copyright Â© 2020-2023 TopIAM (support@topiam.cn)
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
"use strict";(self.webpackChunktopiam_portal=self.webpackChunktopiam_portal||[]).push([[956],{73685:function(Ee,ee,s){s.r(ee),s.d(ee,{default:function(){return In}});var Y=s(84019),U=s.n(Y),ne=s(32061),B=s.n(ne),oe=s(7863),X=s.n(oe),D=s(5903),k=s(86855),x=s(79685),fe={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"},xe=fe,Oe=s(20165),pe=function(r,p){return x.createElement(Oe.Z,(0,k.Z)((0,k.Z)({},r),{},{ref:p,icon:xe}))};pe.displayName="CaretRightOutlined";var Se=x.forwardRef(pe),Fe=s(24558),Ce=s(44143),Ie=s(79357),Le=s(15457),De=s(36389),$e=s(87390),ie=s(9200),we=s(96597),Te=s(12715),i=s(66939),R=s.n(i),T=s(70453),C=s(88073),E=s(68591),u=s.n(E),L=s(98529),ve=s(9645),e=s(45267),n=s(31498),t=s(15129),a=s(4203),l=s(53085),c=s(5375),m=s(33666),N=s(74430),z=x.forwardRef(function(o,r){var p,S=o.prefixCls,P=o.forceRender,w=o.className,b=o.style,$=o.children,g=o.isActive,f=o.role,O=x.useState(g||P),y=(0,L.Z)(O,2),Z=y[0],j=y[1];return x.useEffect(function(){(P||g)&&j(!0)},[P,g]),Z?x.createElement("div",{ref:r,className:u()("".concat(S,"-content"),(p={},(0,a.Z)(p,"".concat(S,"-content-active"),g),(0,a.Z)(p,"".concat(S,"-content-inactive"),!g),p),w),style:b,role:f},x.createElement("div",{className:"".concat(S,"-content-box")},$)):null});z.displayName="PanelContent";var h=z,A=["showArrow","headerClass","isActive","onItemClick","forceRender","className","prefixCls","collapsible","accordion","panelKey","extra","header","expandIcon","openMotion","destroyInactivePanel","children"],I=x.forwardRef(function(o,r){var p,S,P=o.showArrow,w=P===void 0?!0:P,b=o.headerClass,$=o.isActive,g=o.onItemClick,f=o.forceRender,O=o.className,y=o.prefixCls,Z=o.collapsible,j=o.accordion,K=o.panelKey,re=o.extra,be=o.header,de=o.expandIcon,le=o.openMotion,q=o.destroyInactivePanel,he=o.children,je=(0,c.Z)(o,A),_=Z==="disabled",G=Z==="header",Q=Z==="icon",M=re!=null&&typeof re!="boolean",ce=function(){g==null||g(K)},se=function(ue){(ue.key==="Enter"||ue.keyCode===N.Z.ENTER||ue.which===N.Z.ENTER)&&ce()},W=typeof de=="function"?de(o):x.createElement("i",{className:"arrow"});W&&(W=x.createElement("div",{className:"".concat(y,"-expand-icon"),onClick:["header","icon"].includes(Z)?ce:void 0},W));var Be=u()((p={},(0,a.Z)(p,"".concat(y,"-item"),!0),(0,a.Z)(p,"".concat(y,"-item-active"),$),(0,a.Z)(p,"".concat(y,"-item-disabled"),_),p),O),Ve=u()((S={},(0,a.Z)(S,"".concat(y,"-header"),!0),(0,a.Z)(S,"headerClass",b),(0,a.Z)(S,"".concat(y,"-header-collapsible-only"),G),(0,a.Z)(S,"".concat(y,"-icon-collapsible-only"),Q),S)),ge={className:Ve,"aria-expanded":$,"aria-disabled":_,onKeyPress:se};return!G&&!Q&&(ge.onClick=ce,ge.role=j?"tab":"button",ge.tabIndex=_?-1:0),x.createElement("div",(0,l.Z)({},je,{ref:r,className:Be}),x.createElement("div",ge,w&&W,x.createElement("span",{className:"".concat(y,"-header-text"),onClick:Z==="header"?ce:void 0},be),M&&x.createElement("div",{className:"".concat(y,"-extra")},re)),x.createElement(m.default,(0,l.Z)({visible:$,leavedClassName:"".concat(y,"-content-hidden")},le,{forceRender:f,removeOnLeave:q}),function(ye,ue){var Re=ye.className,ze=ye.style;return x.createElement(h,{ref:ue,prefixCls:y,className:Re,style:ze,isActive:$,forceRender:f,role:j?"tabpanel":void 0},he)}))}),F=I;function V(o){var r=o;if(!Array.isArray(r)){var p=(0,e.Z)(r);r=p==="number"||p==="string"?[r]:[]}return r.map(function(S){return String(S)})}var te=x.forwardRef(function(o,r){var p=o.prefixCls,S=p===void 0?"rc-collapse":p,P=o.destroyInactivePanel,w=P===void 0?!1:P,b=o.style,$=o.accordion,g=o.className,f=o.children,O=o.collapsible,y=o.openMotion,Z=o.expandIcon,j=o.activeKey,K=o.defaultActiveKey,re=o.onChange,be=u()(S,g),de=(0,t.Z)([],{value:j,onChange:function(M){return re==null?void 0:re(M)},defaultValue:K,postState:V}),le=(0,L.Z)(de,2),q=le[0],he=le[1],je=function(M){return he(function(){if($)return q[0]===M?[]:[M];var ce=q.indexOf(M),se=ce>-1;return se?q.filter(function(W){return W!==M}):[].concat((0,ve.Z)(q),[M])})},_=function(M,ce){if(!M)return null;var se=M.key||String(ce),W=M.props,Be=W.header,Ve=W.headerClass,ge=W.destroyInactivePanel,ye=W.collapsible,ue=W.onItemClick,Re=!1;$?Re=q[0]===se:Re=q.indexOf(se)>-1;var ze=ye!=null?ye:O,wn=function(tn){ze!=="disabled"&&(je(tn),ue==null||ue(tn))},He={key:se,panelKey:se,header:Be,headerClass:Ve,isActive:Re,prefixCls:S,destroyInactivePanel:ge!=null?ge:w,openMotion:y,accordion:$,children:M.props.children,onItemClick:wn,expandIcon:Z,collapsible:ze};return typeof M.type=="string"?M:(Object.keys(He).forEach(function(Je){typeof He[Je]=="undefined"&&delete He[Je]}),x.cloneElement(M,He))},G=(0,n.Z)(f).map(_);return x.createElement("div",{ref:r,className:be,style:b,role:$?"tablist":void 0},G)}),J=Object.assign(te,{Panel:F}),ae=J,me=J.Panel,Ae=s(57231),Ze=s(14981),Me=s(9642),Ne=s(61478),an=s(25937),rn=x.forwardRef((o,r)=>{const{getPrefixCls:p}=x.useContext(Ze.E_),{prefixCls:S,className:P="",showArrow:w=!0}=o,b=p("collapse",S),$=u()({[`${b}-no-arrow`]:!w},P);return x.createElement(ae.Panel,Object.assign({ref:r},o,{prefixCls:b,className:$}))}),on=s(8534),ln=s(53650),cn=s(67920),Qe=s(45680);const sn=o=>{const{componentCls:r,collapseContentBg:p,padding:S,collapseContentPaddingHorizontal:P,collapseHeaderBg:w,collapseHeaderPadding:b,collapseHeaderPaddingSM:$,collapseHeaderPaddingLG:g,collapsePanelBorderRadius:f,lineWidth:O,lineType:y,colorBorder:Z,colorText:j,colorTextHeading:K,colorTextDisabled:re,fontSize:be,fontSizeLG:de,lineHeight:le,marginSM:q,paddingSM:he,paddingLG:je,motionDurationSlow:_,fontSizeIcon:G}=o,Q=`${O}px ${y} ${Z}`;return{[r]:Object.assign(Object.assign({},(0,Qe.Wf)(o)),{backgroundColor:w,border:Q,borderBottom:0,borderRadius:`${f}px`,["&-rtl"]:{direction:"rtl"},[`& > ${r}-item`]:{borderBottom:Q,["&:last-child"]:{[`
            &,
            & > ${r}-header`]:{borderRadius:`0 0 ${f}px ${f}px`}},[`> ${r}-header`]:{position:"relative",display:"flex",flexWrap:"nowrap",alignItems:"flex-start",padding:b,color:K,lineHeight:le,cursor:"pointer",transition:`all ${_}, visibility 0s`,[`> ${r}-header-text`]:{flex:"auto"},"&:focus":{outline:"none"},[`${r}-expand-icon`]:{height:be*le,display:"flex",alignItems:"center",paddingInlineEnd:q},[`${r}-arrow`]:Object.assign(Object.assign({},(0,Qe.Ro)()),{fontSize:G,svg:{transition:`transform ${_}`}}),[`${r}-header-text`]:{marginInlineEnd:"auto"}},[`${r}-header-collapsible-only`]:{cursor:"default",[`${r}-header-text`]:{flex:"none",cursor:"pointer"}},[`${r}-icon-collapsible-only`]:{cursor:"default",[`${r}-expand-icon`]:{cursor:"pointer"}},[`&${r}-no-arrow`]:{[`> ${r}-header`]:{paddingInlineStart:he}}},[`${r}-content`]:{color:j,backgroundColor:p,borderTop:Q,[`& > ${r}-content-box`]:{padding:`${S}px ${P}px`},["&-hidden"]:{display:"none"}},["&-small"]:{[`> ${r}-item`]:{[`> ${r}-header`]:{padding:$},[`> ${r}-content > ${r}-content-box`]:{padding:he}}},["&-large"]:{[`> ${r}-item`]:{fontSize:de,[`> ${r}-header`]:{padding:g,[`> ${r}-expand-icon`]:{height:de*le}},[`> ${r}-content > ${r}-content-box`]:{padding:je}}},[`${r}-item:last-child`]:{[`> ${r}-content`]:{borderRadius:`0 0 ${f}px ${f}px`}},[`& ${r}-item-disabled > ${r}-header`]:{[`
          &,
          & > .arrow
        `]:{color:re,cursor:"not-allowed"}},[`&${r}-icon-position-end`]:{[`& > ${r}-item`]:{[`> ${r}-header`]:{[`${r}-expand-icon`]:{order:1,paddingInlineEnd:0,paddingInlineStart:q}}}}})}},dn=o=>{const{componentCls:r}=o,p=`> ${r}-item > ${r}-header ${r}-arrow svg`;return{[`${r}-rtl`]:{[p]:{transform:"rotate(180deg)"}}}},un=o=>{const{componentCls:r,collapseHeaderBg:p,paddingXXS:S,colorBorder:P}=o;return{[`${r}-borderless`]:{backgroundColor:p,border:0,[`> ${r}-item`]:{borderBottom:`1px solid ${P}`},[`
        > ${r}-item:last-child,
        > ${r}-item:last-child ${r}-header
      `]:{borderRadius:0},[`> ${r}-item:last-child`]:{borderBottom:0},[`> ${r}-item > ${r}-content`]:{backgroundColor:"transparent",borderTop:0},[`> ${r}-item > ${r}-content > ${r}-content-box`]:{paddingTop:S}}}},fn=o=>{const{componentCls:r,paddingSM:p}=o;return{[`${r}-ghost`]:{backgroundColor:"transparent",border:0,[`> ${r}-item`]:{borderBottom:0,[`> ${r}-content`]:{backgroundColor:"transparent",border:0,[`> ${r}-content-box`]:{paddingBlock:p}}}}}};var pn=(0,ln.Z)("Collapse",o=>{const r=(0,cn.TS)(o,{collapseContentBg:o.colorBgContainer,collapseHeaderBg:o.colorFillAlter,collapseHeaderPadding:`${o.paddingSM}px ${o.padding}px`,collapseHeaderPaddingSM:`${o.paddingXS}px ${o.paddingSM}px`,collapseHeaderPaddingLG:`${o.padding}px ${o.paddingLG}px`,collapsePanelBorderRadius:o.borderRadiusLG,collapseContentPaddingHorizontal:16});return[sn(r),un(r),fn(r),dn(r),(0,on.Z)(r)]}),vn=Object.assign(x.forwardRef((o,r)=>{const{getPrefixCls:p,direction:S}=x.useContext(Ze.E_),P=x.useContext(an.Z),{prefixCls:w,className:b,rootClassName:$,bordered:g=!0,ghost:f,size:O,expandIconPosition:y="start"}=o,Z=O||P||"middle",j=p("collapse",w),K=p(),[re,be]=pn(j),de=x.useMemo(()=>y==="left"?"start":y==="right"?"end":y,[y]),le=function(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{expandIcon:G}=o,Q=G?G(_):x.createElement(C.Z,{rotate:_.isActive?90:void 0});return(0,Ne.Tm)(Q,()=>({className:u()(Q.props.className,`${j}-arrow`)}))},q=u()(`${j}-icon-position-${de}`,{[`${j}-borderless`]:!g,[`${j}-rtl`]:S==="rtl",[`${j}-ghost`]:!!f,[`${j}-${Z}`]:Z!=="middle"},b,$,be),he=Object.assign(Object.assign({},(0,Me.ZP)(K)),{motionAppear:!1,leavedClassName:`${j}-content-hidden`}),je=()=>{const{children:_}=o;return(0,n.Z)(_).map((G,Q)=>{var M;if(!((M=G.props)===null||M===void 0)&&M.disabled){const ce=G.key||String(Q),{disabled:se,collapsible:W}=G.props,Be=Object.assign(Object.assign({},(0,Ae.Z)(G.props,["disabled"])),{key:ce,collapsible:W!=null?W:se?"disabled":void 0});return(0,Ne.Tm)(G,Be)}return G})};return re(x.createElement(ae,Object.assign({ref:r,openMotion:he},(0,Ae.Z)(o,["rootClassName"]),{expandIcon:le,prefixCls:j,className:q}),je()))}),{Panel:rn}),Ke=vn,mn=s(96323),Ge;(function(o){o.admin="admin",o.user="user"})(Ge||(Ge={}));var Pe;(function(o){o.success="success",o.fail="fail"})(Pe||(Pe={}));var hn=s(39620),H=s.n(hn),ke=s(18639),qe=s(76505),gn=qe.ZP.ConfigContext;function yn(o){var r=".".concat(o),p=(0,x.useContext)(gn),S=p.getPrefixCls,P=".".concat(S()),w=(0,ke.l)(function(){var b,$,g;return H()({},"".concat(r),(g={display:"flex",paddingLeft:"10px"},H()(g,"&-line-user",{flex:1,marginRight:"24px"}),H()(g,"&-line-event",{flex:1,marginRight:"24px"}),H()(g,"&-line-geo",{flex:1,marginRight:"24px"}),H()(g,"&-label",(b={display:"block",minWidth:"80px",color:"#878a95",fontSize:"14px"},H()(b,"".concat(P,"-collapse-header"),{paddingTop:"0 !important",paddingBottom:"0 !important"}),H()(b,"".concat(P,"-collapse-header-text"),{color:"#878a95"}),b)),H()(g,"&-panel",($={fontSize:"14px"},H()($,"".concat(P,"-collapse-header"),{paddingTop:"0 !important",paddingBottom:"0 !important"}),H()($,"".concat(P,"-collapse-header-text"),{color:"#878a95"}),H()($,"".concat(P,"-collapse-content>").concat(P,"-collapse-content-box"),{paddingTop:"6px  !important",paddingBottom:"6px  !important"}),H()($,"&-content",H()({padding:"0px 24px  !important"},"p",{marginBottom:"6px   !important"})),$)),H()(g,"&-content",{display:"block",flexWrap:"wrap",overflowX:"auto",color:"#293350",fontSize:"14px"}),H()(g,"&-each-line",{display:"flex",marginBottom:"14px"}),H()(g,"&-target",{flex:1}),g))});return{className:w}}var d=s(63342),v="audit-expanded-card",xn=T.Z.Text,We=Ke.Panel,Cn=function(r){var p,S,P,w,b,$,g,f=r.record,O=yn(v),y=O.className,Z=function(K){return!K||K==="null"||K==="-"||K==="undefined"?"-":K};return(0,d.jsx)("div",{className:y,children:(0,d.jsxs)("div",{className:u()("".concat(v)),children:[(0,d.jsxs)("div",{className:u()("".concat(v,"-line-user")),children:[(0,d.jsxs)("div",{className:u()("".concat(v,"-each-line")),children:[(0,d.jsx)("span",{className:u()("".concat(v,"-label")),children:"\u64CD\u4F5C\u8005 ID"}),(0,d.jsx)("span",{className:u()("".concat(v,"-content")),children:(0,d.jsx)(mn.Z,{style:{marginBottom:0},className:u()("".concat(v,"-content")),copyable:!0,children:Z(f.userId)})})]}),(0,d.jsxs)("div",{className:u()("".concat(v,"-each-line")),children:[(0,d.jsx)("span",{className:u()("".concat(v,"-label")),children:"\u64CD\u4F5C\u8005\u540D\u79F0"}),(0,d.jsx)("span",{className:u()("".concat(v,"-content")),children:Z(f.username)})]})]}),(0,d.jsxs)("div",{className:u()("".concat(v,"-line-geo")),children:[(0,d.jsxs)("div",{className:u()("".concat(v,"-each-line")),children:[(0,d.jsx)("span",{className:u()("".concat(v,"-label")),children:"\u8BBE\u5907\u7C7B\u578B"}),(0,d.jsx)("span",{className:u()("".concat(v,"-content")),children:f.userAgent&&((p=f.userAgent)===null||p===void 0?void 0:p.deviceType)||"-"})]}),(0,d.jsxs)("div",{className:u()("".concat(v,"-each-line")),children:[(0,d.jsx)("span",{className:u()("".concat(v,"-label")),children:"\u64CD\u4F5C\u7CFB\u7EDF"}),(0,d.jsx)("span",{className:u()("".concat(v,"-content")),children:f.userAgent&&((S=f.userAgent)===null||S===void 0?void 0:S.platform)||"-"})]}),(0,d.jsxs)("div",{className:u()("".concat(v,"-each-line")),children:[(0,d.jsx)("span",{className:u()("".concat(v,"-label")),children:"\u5BA2\u6237\u7AEFIP"}),(0,d.jsx)("span",{className:u()("".concat(v,"-content")),children:((P=f.geoLocation)===null||P===void 0?void 0:P.ip)||"-"})]}),(0,d.jsxs)("div",{className:u()("".concat(v,"-each-line")),children:[(0,d.jsx)("span",{className:u()("".concat(v,"-label")),children:"\u6D4F\u89C8\u5668"}),(0,d.jsx)("span",{className:u()("".concat(v,"-content")),children:f.userAgent&&((w=f.userAgent)===null||w===void 0?void 0:w.browser)||"-"})]}),(0,d.jsxs)("div",{className:u()("".concat(v,"-each-line")),children:[(0,d.jsx)("span",{className:u()("".concat(v,"-label")),children:"\u56FD\u5BB6"}),(0,d.jsx)("span",{className:u()("".concat(v,"-content")),children:f.geoLocation&&((b=f.geoLocation)===null||b===void 0?void 0:b.countryName)||"-"})]}),(0,d.jsxs)("div",{className:u()("".concat(v,"-each-line")),children:[(0,d.jsx)("span",{className:u()("".concat(v,"-label")),children:"\u7701\u4EFD"}),(0,d.jsx)("span",{className:u()("".concat(v,"-content")),children:f.geoLocation&&(($=f.geoLocation)===null||$===void 0?void 0:$.provinceName)||"-"})]}),(0,d.jsxs)("div",{className:u()("".concat(v,"-each-line")),children:[(0,d.jsx)("span",{className:u()("".concat(v,"-label")),children:"\u57CE\u5E02"}),(0,d.jsx)("span",{className:u()("".concat(v,"-content")),children:f.geoLocation&&((g=f.geoLocation)===null||g===void 0?void 0:g.cityName)||"-"})]})]}),(0,d.jsxs)("div",{className:u()("".concat(v,"-line-event")),children:[(0,d.jsxs)("div",{className:u()("".concat(v,"-each-line")),children:[(0,d.jsx)("span",{className:u()("".concat(v,"-label")),children:"\u4E8B\u4EF6\u65F6\u95F4"}),(0,d.jsx)("span",{className:u()("".concat(v,"-content")),children:(0,d.jsx)(xn,{style:{maxWidth:"100%"},ellipsis:!0,children:R()(f.eventTime).format("YYYY.MM.DD HH:mm:ss")})})]}),(0,d.jsxs)("div",{className:u()("".concat(v,"-each-line")),children:[(0,d.jsx)("span",{className:u()("".concat(v,"-label")),children:"\u4E8B\u4EF6\u7C7B\u578B"}),(0,d.jsx)("span",{className:u()("".concat(v,"-content")),children:f.eventType})]}),(0,d.jsxs)("div",{className:u()("".concat(v,"-each-line")),children:[(0,d.jsx)("span",{className:u()("".concat(v,"-label")),children:"\u4E8B\u4EF6\u72B6\u6001"}),(0,d.jsxs)("span",{className:u()("".concat(v,"-content")),children:[f.eventStatus===Pe.success&&(0,d.jsx)("span",{style:{color:"#87d068"},children:"\u6210\u529F"}),f.eventStatus===Pe.fail&&(0,d.jsx)("span",{style:{color:"#e54545"},children:"\u5931\u8D25"})]})]})]}),f.targets&&(0,d.jsx)("div",{className:u()("".concat(v,"-line-target")),children:(0,d.jsx)("div",{className:u()("".concat(v,"-each-line")),children:(0,d.jsx)(Ke,{ghost:!0,children:(0,d.jsx)(We,{header:"\u64CD\u4F5C\u5BF9\u8C61",className:u()("".concat(v,"-panel")),children:f.targets.map(function(j){return(0,d.jsx)(Ke,{ghost:!0,children:j!=null&&j.name?(0,d.jsx)(We,{header:j.name,className:u()("".concat(v,"-panel")),children:(0,d.jsxs)("div",{className:u()("".concat(v,"-panel-content")),children:[(0,d.jsxs)("p",{children:["\u5BF9\u8C61 ID\uFF1A",j.id]}),(0,d.jsxs)("p",{children:["\u5BF9\u8C61\u7C7B\u578B\uFF1A",j.typeName]})]})},j.type):(0,d.jsx)(We,{header:j.typeName,className:u()("".concat(v,"-panel")),children:(0,d.jsx)("div",{className:u()("".concat(v,"-panel-content")),children:(0,d.jsxs)("p",{children:["\u5BF9\u8C61\u7C7B\u578B\uFF1A",j.typeName]})})},j.type)},j.type)})},"1")})})})]})})},bn=s(76091),Ye=s.n(bn),_e=s(7058),en=s(96104);function jn(o,r,p){return Ue.apply(this,arguments)}function Ue(){return Ue=B()(U()().mark(function o(r,p,S){return U()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",(0,en.request)("/api/audit/list",{params:Ye()(Ye()(Ye()({},r),{},{userType:"user",startEventTime:r.eventTime&&r.eventTime[0],endEventTime:r.eventTime&&r.eventTime[1]},(0,_e.YE)(p)),(0,_e.oH)(S))}).then(function(b){var $,g,f,O,y={data:b!=null&&($=b.result)!==null&&$!==void 0&&$.list?b==null||(g=b.result)===null||g===void 0?void 0:g.list:[],success:b==null?void 0:b.success,total:b!=null&&(f=b.result)!==null&&f!==void 0&&f.pagination?b==null||(O=b.result)===null||O===void 0?void 0:O.pagination.total:0};return Promise.resolve(y)}));case 1:case"end":return w.stop()}},o)})),Ue.apply(this,arguments)}function Sn(){return Xe.apply(this,arguments)}function Xe(){return Xe=B()(U()().mark(function o(){return U()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,en.request)("/api/audit/types/user"));case 1:case"end":return p.stop()}},o)})),Xe.apply(this,arguments)}var $n=qe.ZP.ConfigContext;function Nn(o){var r=".".concat(o),p=(0,x.useContext)($n),S=p.getPrefixCls,P=".".concat(S()),w=(0,ke.l)(function(){return H()({},"".concat(r),H()({},"".concat(P,"-table-expanded-row-fixed"),{width:"auto !important"}))});return{className:w}}var Pn=De.Z.RangePicker,En=$e.Z.OptGroup,On=$e.Z.Option,nn="audit-user",In=function(){var o=(0,x.useRef)(),r=(0,Ie.Z)(),p=X()(r,2),S=p[0],P=p[1],w=Nn(nn),b=w.className;(0,Le.Z)(B()(U()().mark(function g(){var f,O,y;return U()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,Sn();case 2:f=j.sent,O=f.result,y=f.success,y&&P(O);case 6:case"end":return j.stop()}},g)})),[]);var $=[{title:"\u4E8B\u4EF6\u7C7B\u578B",dataIndex:"eventType",fixed:"left",renderFormItem:function(){return(0,d.jsx)($e.Z,{placeholder:"\u8BF7\u9009\u62E9\u4E8B\u4EF6\u7C7B\u578B",showSearch:!0,allowClear:!0,mode:"multiple",maxTagCount:"responsive",children:S&&S.map(function(f){return(0,d.jsx)(En,{label:f.name,children:f.types&&f.types.map(function(O){return(0,d.jsx)(On,{value:O.code,children:O.name},O.code)})},f.code)})},"select")}},{title:"\u64CD\u4F5C\u8005",ellipsis:!0,dataIndex:"username",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"}},{title:"\u5BA2\u6237\u7AEFIP",dataIndex:"geoLocation",ellipsis:!0,valueType:"text",hideInSearch:!0,render:function(f,O){var y=O.geoLocation;return y?(0,d.jsx)(ie.Z,{status:"success",text:y.ip}):(0,d.jsx)(ie.Z,{status:"error",text:"\u672A\u77E5"})}},{title:"\u64CD\u4F5C\u7CFB\u7EDF",ellipsis:!0,dataIndex:"platform",render:function(f,O){var y=O.userAgent;return y.platform}},{title:"\u6D4F\u89C8\u5668",ellipsis:!0,dataIndex:"browser",render:function(f,O){var y=O.userAgent;return y.browser}},{title:"\u4E8B\u4EF6\u65F6\u95F4",sorter:!0,defaultSortOrder:"descend",ellipsis:!0,align:"center",dataIndex:"eventTime",valueType:"dateTime",renderFormItem:function(){return(0,d.jsx)(Pn,{showTime:{hideDisabledOptions:!0,defaultValue:[R()("00:00:00","HH:mm:ss"),R()("11:59:59","HH:mm:ss")]},placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],format:"YYYY-MM-DD HH:mm:ss"})}},{title:"\u4E8B\u4EF6\u72B6\u6001",dataIndex:"eventStatus",hideInSearch:!0,align:"center",fixed:"right",width:150,render:function(f){return(0,d.jsxs)(we.Z,{children:[f===Pe.success&&(0,d.jsx)(Te.Z,{color:"#87d068",children:"\u6210\u529F"}),f===Pe.fail&&(0,d.jsx)(Te.Z,{color:"#e54545",children:"\u5931\u8D25"})]})}}];return(0,d.jsx)(Fe._z,{className:b,content:"\u5BA1\u8BA1\u65E5\u5FD7\u8BB0\u5F55\u4E86\u6240\u6709\u5E73\u53F0\u7528\u6237\u8FDB\u884C\u7684\u5173\u952E\u64CD\u4F5C\uFF0C\u65E0\u8BBA\u662F\u7BA1\u7406\u5458\u8FDB\u884C\u7684\u6279\u91CF\u64CD\u4F5C\u3001\u8FD8\u662F\u7528\u6237\u4FA7\u8FDB\u884C\u7684\u591A\u56E0\u7D20\u8BA4\u8BC1\uFF0C\u90FD\u53EF\u4EE5\u5728\u8FD9\u91CC\u627E\u5230\u5BF9\u5E94\u7684\u8BB0\u5F55\uFF0C\u4EE5\u5BF9\u67D0\u6B21\u6539\u53D8\u63D0\u4F9B\u5145\u5206\u7684\u6EAF\u6E90\u6570\u636E\u3002",children:(0,d.jsx)(Ce.Z,{columns:$,scroll:{x:1200},pagination:{showQuickJumper:!0,defaultPageSize:10},search:{},expandable:{expandRowByClick:!0,expandedRowClassName:function(){return u()("".concat(nn))},expandedRowRender:function(f,O){return(0,d.jsx)(Cn,{record:f,index:O})},expandIcon:function(f){var O=f.expanded,y=f.onExpand,Z=f.record;return O?(0,d.jsx)(D.Z,{onClick:function(K){return y(Z,K)}}):(0,d.jsx)(Se,{onClick:function(K){return y(Z,K)}})}},actionRef:o,params:{userType:Ge.user},request:jn,rowKey:"id",dateFormatter:"string"})})}},15457:function(Ee,ee,s){var Y=s(29268),U=s(79685),ne=s(43865);function B(oe,X){function D(k){return(0,ne.mf)(k[Symbol.asyncIterator])}(0,U.useEffect)(()=>{const k=oe();let x=!1;function fe(){return(0,Y.mG)(this,void 0,void 0,function*(){if(D(k))for(;!((yield k.next()).done||x););else yield k})}return fe(),()=>{x=!0}},X)}ee.Z=B},79357:function(Ee,ee,s){s.d(ee,{Z:function(){return oe}});var Y=s(79685),ne=()=>{const X=(0,Y.useRef)(!1);return(0,Y.useEffect)(()=>(X.current=!1,()=>{X.current=!0}),[]),X};function B(X){const D=ne(),[k,x]=(0,Y.useState)(X),fe=(0,Y.useCallback)(xe=>{D.current||x(xe)},[]);return[k,fe]}var oe=B},43865:function(Ee,ee,s){s.d(ee,{mf:function(){return U}});const Y=D=>D!==null&&typeof D=="object",U=D=>typeof D=="function",ne=D=>typeof D=="string",B=D=>typeof D=="boolean",oe=D=>typeof D=="number",X=D=>typeof D=="undefined"},12715:function(Ee,ee,s){s.d(ee,{Z:function(){return Te}});var Y=s(35632),U=s(68591),ne=s.n(U),B=s(79685),oe=s(14981),X=s(43356),D=s(56626),k=s(53650),x=s(67920);function fe(i){return typeof i!="string"?i:i.charAt(0).toUpperCase()+i.slice(1)}var xe=s(14128),Oe=s(45680);const pe=(i,R,T)=>{const C=fe(T);return{[`${i.componentCls}-${R}`]:{color:i[`color${T}`],background:i[`color${C}Bg`],borderColor:i[`color${C}Border`]}}},Se=i=>(0,xe.j)(i,(R,T)=>{let{textColor:C,lightBorderColor:E,lightColor:u,darkColor:L}=T;return{[`${i.componentCls}-${R}`]:{color:C,background:u,borderColor:E,"&-inverse":{color:i.colorTextLightSolid,background:L,borderColor:L}}}}),Fe=i=>{const{paddingXXS:R,lineWidth:T,tagPaddingHorizontal:C,componentCls:E}=i,u=C-T,L=R-T;return{[E]:Object.assign(Object.assign({},(0,Oe.Wf)(i)),{display:"inline-block",height:"auto",marginInlineEnd:i.marginXS,paddingInline:u,fontSize:i.tagFontSize,lineHeight:`${i.tagLineHeight}px`,whiteSpace:"nowrap",background:i.tagDefaultBg,border:`${i.lineWidth}px ${i.lineType} ${i.colorBorder}`,borderRadius:i.borderRadiusSM,opacity:1,transition:`all ${i.motionDurationMid}`,textAlign:"start",[`&${E}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:i.tagDefaultColor},[`${E}-close-icon`]:{marginInlineStart:L,color:i.colorTextDescription,fontSize:i.tagIconSize,cursor:"pointer",transition:`all ${i.motionDurationMid}`,"&:hover":{color:i.colorTextHeading}},[`&${E}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${i.iconCls}-close, ${i.iconCls}-close:hover`]:{color:i.colorTextLightSolid}},["&-checkable"]:{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${E}-checkable-checked):hover`]:{color:i.colorPrimary,backgroundColor:i.colorFillSecondary},"&:active, &-checked":{color:i.colorTextLightSolid},"&-checked":{backgroundColor:i.colorPrimary,"&:hover":{backgroundColor:i.colorPrimaryHover}},"&:active":{backgroundColor:i.colorPrimaryActive}},["&-hidden"]:{display:"none"},[`> ${i.iconCls} + span, > span + ${i.iconCls}`]:{marginInlineStart:u}})}};var Ce=(0,k.Z)("Tag",i=>{const{fontSize:R,lineHeight:T,lineWidth:C,fontSizeIcon:E}=i,u=Math.round(R*T),L=i.fontSizeSM,ve=u-C*2,e=i.colorFillAlter,n=i.colorText,t=(0,x.TS)(i,{tagFontSize:L,tagLineHeight:ve,tagDefaultBg:e,tagDefaultColor:n,tagIconSize:E-2*C,tagPaddingHorizontal:8});return[Fe(t),Se(t),pe(t,"success","Success"),pe(t,"processing","Info"),pe(t,"error","Error"),pe(t,"warning","Warning")]}),Ie=function(i,R){var T={};for(var C in i)Object.prototype.hasOwnProperty.call(i,C)&&R.indexOf(C)<0&&(T[C]=i[C]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var E=0,C=Object.getOwnPropertySymbols(i);E<C.length;E++)R.indexOf(C[E])<0&&Object.prototype.propertyIsEnumerable.call(i,C[E])&&(T[C[E]]=i[C[E]]);return T},De=i=>{var{prefixCls:R,className:T,checked:C,onChange:E,onClick:u}=i,L=Ie(i,["prefixCls","className","checked","onChange","onClick"]);const{getPrefixCls:ve}=B.useContext(oe.E_),e=c=>{E==null||E(!C),u==null||u(c)},n=ve("tag",R),[t,a]=Ce(n),l=ne()(n,{[`${n}-checkable`]:!0,[`${n}-checkable-checked`]:C},T,a);return t(B.createElement("span",Object.assign({},L,{className:l,onClick:e})))},$e=function(i,R){var T={};for(var C in i)Object.prototype.hasOwnProperty.call(i,C)&&R.indexOf(C)<0&&(T[C]=i[C]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var E=0,C=Object.getOwnPropertySymbols(i);E<C.length;E++)R.indexOf(C[E])<0&&Object.prototype.propertyIsEnumerable.call(i,C[E])&&(T[C[E]]=i[C[E]]);return T};const ie=(i,R)=>{var{prefixCls:T,className:C,rootClassName:E,style:u,children:L,icon:ve,color:e,onClose:n,closeIcon:t,closable:a=!1}=i,l=$e(i,["prefixCls","className","rootClassName","style","children","icon","color","onClose","closeIcon","closable"]);const{getPrefixCls:c,direction:m}=B.useContext(oe.E_),[N,z]=B.useState(!0);B.useEffect(()=>{"visible"in l&&z(l.visible)},[l.visible]);const h=(0,X.o2)(e)||(0,X.yT)(e),A=Object.assign({backgroundColor:e&&!h?e:void 0},u),I=c("tag",T),[F,V]=Ce(I),te=ne()(I,{[`${I}-${e}`]:h,[`${I}-has-color`]:e&&!h,[`${I}-hidden`]:!N,[`${I}-rtl`]:m==="rtl"},C,E,V),J=Ne=>{Ne.stopPropagation(),n==null||n(Ne),!Ne.defaultPrevented&&z(!1)},ae=()=>a?t?B.createElement("span",{className:`${I}-close-icon`,onClick:J},t):B.createElement(Y.Z,{className:`${I}-close-icon`,onClick:J}):null,me=typeof l.onClick=="function"||L&&L.type==="a",Ae=ve||null,Ze=Ae?B.createElement(B.Fragment,null,Ae,B.createElement("span",null,L)):L,Me=B.createElement("span",Object.assign({},l,{ref:R,className:te,style:A}),Ze,ae());return F(me?B.createElement(D.Z,null,Me):Me)},we=B.forwardRef(ie);we.CheckableTag=De;var Te=we},29268:function(Ee,ee,s){s.d(ee,{_T:function(){return B},mG:function(){return Oe}});var Y=function(e,n){return Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(t[l]=a[l])},Y(e,n)};function U(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");Y(e,n);function t(){this.constructor=e}e.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}var ne=function(){return ne=Object.assign||function(n){for(var t,a=1,l=arguments.length;a<l;a++){t=arguments[a];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(n[c]=t[c])}return n},ne.apply(this,arguments)};function B(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)n.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(t[a[l]]=e[a[l]]);return t}function oe(e,n,t,a){var l=arguments.length,c=l<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,t):a,m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(e,n,t,a);else for(var N=e.length-1;N>=0;N--)(m=e[N])&&(c=(l<3?m(c):l>3?m(n,t,c):m(n,t))||c);return l>3&&c&&Object.defineProperty(n,t,c),c}function X(e,n){return function(t,a){n(t,a,e)}}function D(e,n,t,a,l,c){function m(me){if(me!==void 0&&typeof me!="function")throw new TypeError("Function expected");return me}for(var N=a.kind,z=N==="getter"?"get":N==="setter"?"set":"value",h=!n&&e?a.static?e:e.prototype:null,A=n||(h?Object.getOwnPropertyDescriptor(h,a.name):{}),I,F=!1,V=t.length-1;V>=0;V--){var te={};for(var J in a)te[J]=J==="access"?{}:a[J];for(var J in a.access)te.access[J]=a.access[J];te.addInitializer=function(me){if(F)throw new TypeError("Cannot add initializers after decoration has completed");c.push(m(me||null))};var ae=(0,t[V])(N==="accessor"?{get:A.get,set:A.set}:A[z],te);if(N==="accessor"){if(ae===void 0)continue;if(ae===null||typeof ae!="object")throw new TypeError("Object expected");(I=m(ae.get))&&(A.get=I),(I=m(ae.set))&&(A.set=I),(I=m(ae.init))&&l.push(I)}else(I=m(ae))&&(N==="field"?l.push(I):A[z]=I)}h&&Object.defineProperty(h,a.name,A),F=!0}function k(e,n,t){for(var a=arguments.length>2,l=0;l<n.length;l++)t=a?n[l].call(e,t):n[l].call(e);return a?t:void 0}function x(e){return typeof e=="symbol"?e:"".concat(e)}function fe(e,n,t){return typeof n=="symbol"&&(n=n.description?"[".concat(n.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:t?"".concat(t," ",n):n})}function xe(e,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,n)}function Oe(e,n,t,a){function l(c){return c instanceof t?c:new t(function(m){m(c)})}return new(t||(t=Promise))(function(c,m){function N(A){try{h(a.next(A))}catch(I){m(I)}}function z(A){try{h(a.throw(A))}catch(I){m(I)}}function h(A){A.done?c(A.value):l(A.value).then(N,z)}h((a=a.apply(e,n||[])).next())})}function pe(e,n){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},a,l,c,m;return m={next:N(0),throw:N(1),return:N(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function N(h){return function(A){return z([h,A])}}function z(h){if(a)throw new TypeError("Generator is already executing.");for(;m&&(m=0,h[0]&&(t=0)),t;)try{if(a=1,l&&(c=h[0]&2?l.return:h[0]?l.throw||((c=l.return)&&c.call(l),0):l.next)&&!(c=c.call(l,h[1])).done)return c;switch(l=0,c&&(h=[h[0]&2,c.value]),h[0]){case 0:case 1:c=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,l=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!c||h[1]>c[0]&&h[1]<c[3])){t.label=h[1];break}if(h[0]===6&&t.label<c[1]){t.label=c[1],c=h;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(h);break}c[2]&&t.ops.pop(),t.trys.pop();continue}h=n.call(e,t)}catch(A){h=[6,A],l=0}finally{a=c=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}var Se=Object.create?function(e,n,t,a){a===void 0&&(a=t);var l=Object.getOwnPropertyDescriptor(n,t);(!l||("get"in l?!n.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return n[t]}}),Object.defineProperty(e,a,l)}:function(e,n,t,a){a===void 0&&(a=t),e[a]=n[t]};function Fe(e,n){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(n,t)&&Se(n,e,t)}function Ce(e){var n=typeof Symbol=="function"&&Symbol.iterator,t=n&&e[n],a=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ie(e,n){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var a=t.call(e),l,c=[],m;try{for(;(n===void 0||n-- >0)&&!(l=a.next()).done;)c.push(l.value)}catch(N){m={error:N}}finally{try{l&&!l.done&&(t=a.return)&&t.call(a)}finally{if(m)throw m.error}}return c}function Le(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(Ie(arguments[n]));return e}function De(){for(var e=0,n=0,t=arguments.length;n<t;n++)e+=arguments[n].length;for(var a=Array(e),l=0,n=0;n<t;n++)for(var c=arguments[n],m=0,N=c.length;m<N;m++,l++)a[l]=c[m];return a}function $e(e,n,t){if(t||arguments.length===2)for(var a=0,l=n.length,c;a<l;a++)(c||!(a in n))&&(c||(c=Array.prototype.slice.call(n,0,a)),c[a]=n[a]);return e.concat(c||Array.prototype.slice.call(n))}function ie(e){return this instanceof ie?(this.v=e,this):new ie(e)}function we(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=t.apply(e,n||[]),l,c=[];return l={},m("next"),m("throw"),m("return"),l[Symbol.asyncIterator]=function(){return this},l;function m(F){a[F]&&(l[F]=function(V){return new Promise(function(te,J){c.push([F,V,te,J])>1||N(F,V)})})}function N(F,V){try{z(a[F](V))}catch(te){I(c[0][3],te)}}function z(F){F.value instanceof ie?Promise.resolve(F.value.v).then(h,A):I(c[0][2],F)}function h(F){N("next",F)}function A(F){N("throw",F)}function I(F,V){F(V),c.shift(),c.length&&N(c[0][0],c[0][1])}}function Te(e){var n,t;return n={},a("next"),a("throw",function(l){throw l}),a("return"),n[Symbol.iterator]=function(){return this},n;function a(l,c){n[l]=e[l]?function(m){return(t=!t)?{value:ie(e[l](m)),done:!1}:c?c(m):m}:c}}function i(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e[Symbol.asyncIterator],t;return n?n.call(e):(e=typeof Ce=="function"?Ce(e):e[Symbol.iterator](),t={},a("next"),a("throw"),a("return"),t[Symbol.asyncIterator]=function(){return this},t);function a(c){t[c]=e[c]&&function(m){return new Promise(function(N,z){m=e[c](m),l(N,z,m.done,m.value)})}}function l(c,m,N,z){Promise.resolve(z).then(function(h){c({value:h,done:N})},m)}}function R(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}var T=Object.create?function(e,n){Object.defineProperty(e,"default",{enumerable:!0,value:n})}:function(e,n){e.default=n};function C(e){if(e&&e.__esModule)return e;var n={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&Se(n,e,t);return T(n,e),n}function E(e){return e&&e.__esModule?e:{default:e}}function u(e,n,t,a){if(t==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?e!==n||!a:!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?a:t==="a"?a.call(e):a?a.value:n.get(e)}function L(e,n,t,a,l){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!l)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?e!==n||!l:!n.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?l.call(e,t):l?l.value=t:n.set(e,t),t}function ve(e,n){if(n===null||typeof n!="object"&&typeof n!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?n===e:e.has(n)}}}]);
