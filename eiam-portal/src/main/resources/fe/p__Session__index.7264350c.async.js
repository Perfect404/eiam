/*
 * eiam-portal - Employee Identity and Access Management Program
 * Copyright Â© 2020-2023 TopIAM (support@topiam.cn)
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
"use strict";(self.webpackChunktopiam_portal=self.webpackChunktopiam_portal||[]).push([[790],{10035:function(P,g,n){n.r(g),n.d(g,{default:function(){return L}});var A=n(84019),o=n.n(A),C=n(32061),v=n.n(C),y=n(12210),I=n(53448),S=n(18189),x=n(81381),j=n(18054),E=n(90914),R=n(28755),T=n(93973),Z=n(79685),w=n(84530);function B(i){return p.apply(this,arguments)}function p(){return p=v()(o()().mark(function i(d){return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,w.request)("/api/session/list",{method:"get",params:d}).then(function(t){var e={data:t!=null&&t.result?t==null?void 0:t.result:[],success:t==null?void 0:t.success};return Promise.resolve(e)}));case 1:case"end":return r.stop()}},i)})),p.apply(this,arguments)}function F(i){return h.apply(this,arguments)}function h(){return h=v()(o()().mark(function i(d){return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,w.request)("/api/session/remove",{method:"delete",requestType:"form",data:{sessionIds:d}}));case 1:case"end":return r.stop()}},i)})),h.apply(this,arguments)}var s=n(63342),L=function(){var i=(0,Z.useRef)(),d=[{title:"\u4F1A\u8BDD ID",dataIndex:"sessionId",ellipsis:!0,copyable:!0,align:"center",width:150,fixed:"left",search:!1},{title:"\u7528\u6237\u540D",dataIndex:"username",width:120,ellipsis:!0,fieldProps:{autoComplete:"off"}},{title:"\u6D3B\u52A8IP\u5730\u5740",width:130,dataIndex:"ip",ellipsis:!0,search:!1,render:function(r,t){var e=t.geoLocation;return e.ip?(0,s.jsx)(x.Z,{status:"success",text:e.ip}):(0,s.jsx)(x.Z,{status:"error",text:"\u672A\u77E5"})}},{title:"\u6D3B\u52A8\u5730\u70B9",width:120,ellipsis:!0,search:!1,render:function(r,t){var e=t.geoLocation;return e&&e.country&&e.province&&e.city&&e.country+"."+e.province+"."+e.city||"-"}},{title:"\u8BBE\u5907\u7C7B\u578B",ellipsis:!0,width:110,search:!1,render:function(r,t){var e=t.userAgent;return(e==null?void 0:e.deviceType)||"-"}},{title:"\u64CD\u4F5C\u7CFB\u7EDF",ellipsis:!0,width:110,search:!1,render:function(r,t){var e=t.userAgent;return e!=null&&e.platform&&e!==null&&e!==void 0&&e.platformVersion&&(e==null?void 0:e.platform)+" "+(e==null?void 0:e.platformVersion)||"-"}},{title:"\u6D4F\u89C8\u5668",ellipsis:!0,width:110,search:!1,render:function(r,t){var e=t.userAgent;return e!=null&&e.browser&&e!==null&&e!==void 0&&e.browserMajorVersion&&(e==null?void 0:e.browser)+" "+(e==null?void 0:e.browserMajorVersion)||"-"}},{title:"\u767B\u5F55\u65F6\u95F4",ellipsis:!0,dataIndex:"loginTime",align:"center",width:200,valueType:"dateTime",search:!1},{title:"\u6700\u540E\u64CD\u4F5C\u65F6\u95F4",ellipsis:!0,dataIndex:"lastRequest",width:170,valueType:"dateTime",search:!1},{title:"\u64CD\u4F5C",valueType:"option",width:60,align:"center",fixed:"right",render:function(r,t){var e=t.sessionId;return[(0,s.jsx)(j.Z,{title:"\u60A8\u786E\u5B9A\u8981\u4E0B\u7EBF\u8BE5\u7528\u6237\u5417\uFF1F",placement:"bottomRight",icon:(0,s.jsx)(y.Z,{style:{color:"red"}}),onConfirm:v()(o()().mark(function f(){var u,m,a;return o()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,F(e);case 2:u=c.sent,m=u.success,m&&(E.ZP.success("\u64CD\u4F5C\u6210\u529F"),(a=i.current)===null||a===void 0||a.reload());case 5:case"end":return c.stop()}},f)})),okText:"\u662F",cancelText:"\u5426",children:(0,s.jsx)("a",{target:"_blank",style:{color:"red"},children:"\u4E0B\u7EBF"},"remove")},"offline")]}}];return(0,s.jsx)(I._z,{content:`\u4F1A\u8BDD\u7BA1\u7406\u53EF\u4EE5\u67E5\u770B\u6240\u6709\u5F53\u524D\u4ECD\u7136\u6709\u6548\u7684\u4F1A\u8BDD\u5217\u8868\uFF0C\u5E76\u4E14\u53EF\u4EE5\u5F3A\u5236\u6CE8\u9500\u67D0\u4E2A\u7528\u6237\u7684\u4F1A\u8BDD\u3002\u6CE8\u9500\u540E\uFF0C\u8BE5\u7528\u6237\u51ED\u8BC1\u5373\u523B\u5931\u6548\uFF0C\u4E4B\u540E\u7684\u6240\u6709\u64CD\u4F5C\u90FD\u9700\u8981\u91CD\u65B0\u8BA4\u8BC1\u3002
`,children:(0,s.jsx)(S.Z,{search:!1,options:{density:!1,setting:!0,reload:!0,search:!1},cardProps:{style:{overflow:"auto"}},scroll:{x:700},columns:d,rowSelection:{selections:[R.Z.SELECTION_ALL,R.Z.SELECTION_INVERT]},tableAlertRender:function(r){var t=r.selectedRowKeys,e=r.onCleanSelected;return(0,s.jsx)(T.Z,{size:24,children:(0,s.jsxs)("span",{children:["\u5DF2\u9009 ",t.length," \u9879",(0,s.jsx)("a",{style:{marginLeft:8},onClick:e,children:"\u53D6\u6D88\u9009\u62E9"})]})})},tableAlertOptionRender:function(r){return(0,s.jsx)(T.Z,{size:16,children:(0,s.jsx)(j.Z,{title:"\u60A8\u786E\u5B9A\u8981\u6279\u91CF\u4E0B\u7EBF\u9009\u4E2D\u7528\u6237\u5417\uFF1F",placement:"bottomRight",icon:(0,s.jsx)(y.Z,{style:{color:"red"}}),onConfirm:v()(o()().mark(function t(){var e,f,u;return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,F(r.selectedRowKeys.join(","));case 2:e=a.sent,f=e.success,f&&(E.ZP.success("\u64CD\u4F5C\u6210\u529F"),r.onCleanSelected(),(u=i.current)===null||u===void 0||u.reload());case 5:case"end":return a.stop()}},t)})),okText:"\u662F",cancelText:"\u5426",children:(0,s.jsx)("a",{target:"_blank",style:{color:"red"},children:"\u6279\u91CF\u4E0B\u7EBF"},"remove")},"offline")})},actionRef:i,pagination:{defaultPageSize:10},request:B,rowKey:"sessionId",dateFormatter:"string"})})}}}]);
