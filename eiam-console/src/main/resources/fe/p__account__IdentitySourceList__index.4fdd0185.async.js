/*
 * eiam-console - Employee Identity and Access Management Program
 * Copyright Â© 2020-2023 TopIAM (support@topiam.cn)
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
"use strict";(self.webpackChunktopiam_console=self.webpackChunktopiam_console||[]).push([[9902],{27747:function(ie,R,n){n.r(R),n.d(R,{default:function(){return se}});var N=n(97983),h=n.n(N),M=n(40794),C=n.n(M),z=n(11281),T=n.n(z),k=n(12741),$=n.n(k),g=n(137),P=n(84865),O=n(24969),A=n(25035),G=n(14459),H=n(96495),I=n(51904),Q=n(71577),U=n(98293),D=n(86738),S=n(2453),V=n(69400),y=n(67294),X=n(37476),Y=n(64317),J=n(5966),K=n(90672),W=n(57953),t=n(85893),w=function(o){var p=(0,y.useRef)(),x=o.visible,v=o.onClose,F=o.onFinish,j=(0,y.useState)(!1),l=$()(j,2),E=l[0],u=l[1];return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(X.Y,{title:"\u65B0\u589E\u8EAB\u4EFD\u6E90",width:"500px",layout:"horizontal",labelCol:{span:4},wrapperCol:{span:19},onFinish:function(){var s=C()(h()().mark(function r(f){var c;return h()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return u(!0),i.next=3,F(f);case 3:return c=i.sent,u(!1),i.abrupt("return",!!c);case 6:case"end":return i.stop()}},r)}));return function(r){return s.apply(this,arguments)}}(),modalProps:{destroyOnClose:!0,onCancel:function(){var r;(r=p.current)===null||r===void 0||r.resetFields(),v()}},open:x,children:(0,t.jsxs)(W.Z,{spinning:E,children:[(0,t.jsx)(Y.Z,{name:"provider",label:"\u63D0\u4F9B\u8005",fieldProps:{placeholder:"\u8BF7\u9009\u62E9\u8EAB\u4EFD\u6E90\u63D0\u4F9B\u8005"},options:[{value:"dingtalk",label:"\u9489\u9489"},{value:"wechat_work",label:"\u4F01\u4E1A\u5FAE\u4FE1"},{value:"feishu",label:"\u98DE\u4E66"}],rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u8EAB\u4EFD\u6E90\u63D0\u4F9B\u8005"}]}),(0,t.jsx)(J.Z,{name:"name",label:"\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u6E90\u540D\u79F0",rules:[{required:!0,message:"\u8EAB\u4EFD\u6E90\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}]}),(0,t.jsx)(K.Z,{name:"remark",label:"\u5907\u6CE8",placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",fieldProps:{rows:2,maxLength:20}})]})})})},q=n(12812),a=n.n(q),_=n(46986),ee=n(38755),ne=_.ZP.ConfigContext;function te(o){var p=(0,y.useContext)(ne),x=p.getPrefixCls,v=".".concat(x()),F=(0,ee.l)(function(j){var l,E,u,s=j.token;return u={},a()(u,".".concat(o),(l={},a()(l,"&-content",{marginInlineStart:"15px","& > div":{marginInlineStart:"0"}}),a()(l,"&-item-content",{display:"block",flex:"none",width:"100%"}),a()(l,"".concat(v,"-avatar > img"),{objectFit:"fill"}),a()(l,"".concat(v,"-card-head"),{borderBottom:"none"}),a()(l,"".concat(v,"-card-head-title"),{padding:"24px 0",lineHeight:"32px"}),a()(l,"".concat(v,"-card-extra"),{padding:"24px 0"}),a()(l,"".concat(v,"-list-pagination"),{marginTop:"24px"}),a()(l,"".concat(v,"-avatar-lg"),{width:"48px",height:"48px",lineHeight:"48px"}),a()(l,"".concat(v,"-list-item-action"),{marginInlineStart:"15px"}),a()(l,".ant-pro-list .ant-pro-list-row",{paddingLeft:"10px",paddingRight:"10px"}),a()(l,".ant-pro-list .ant-pro-list-row-content",{flex:0,margin:"0"}),l)),a()(u,"@media  (max-width: ".concat(s.screenXS,"px)"),a()({},".".concat(o),(E={},a()(E,"&-content",{marginInlineStart:"0","& > div":{marginInlineStart:"0"}}),a()(E,"&-item-content",{display:"block",flex:"none",width:"100%"}),E))),a()(u,"@media  (max-width: ".concat(s.screenSM,"px)"),a()({},".".concat(o),{})),a()(u,"@media  (max-width: ".concat(s.screenMD,"px)"),a()({},".".concat(o),a()({},"&-content",{"& > div":{display:"block","&:last-child":{top:"0",width:"100%"}}}))),a()(u,"@media (max-width: ".concat(s.screenLG,"px) and @media (min-width: ").concat(s.screenMD,"px)"),a()({},".".concat(o),a()({},"&-content",{"& > div":{display:"block","&:last-child":{top:"0",width:"100%"}}}))),a()(u,"@media  (max-width: ".concat(s.screenXL,"px)"),a()({},".".concat(o),a()({},"&-content",{"& > div":{marginInlineStart:"24px","&:last-child":{top:"0"}}}))),a()(u,"@media  (max-width: 1400px)",a()({},".".concat(o),a()({},"&-content",{"& > div":{"&:last-child":{top:"0"}}}))),u});return{className:F}}var ae=n(94184),b=n.n(ae),re=n(60918),B="identity-source-list",L=function(p,x){P.m.push("/account/identity-source/detail?id=".concat(p,"&tab=config&provider=").concat(x))},ue=function(){var o=(0,y.useState)(!1),p=$()(o,2),x=p[0],v=p[1],F=(0,y.useRef)(),j=te(B),l=j.className,E=function(s){return(0,t.jsx)("div",{className:b()("".concat(B,"-content")),children:(0,t.jsx)("div",{className:b()("".concat(B,"-item-content")),children:s.enabled?(0,t.jsx)(I.Z,{color:"#5BD8A6",children:"\u5DF2\u542F\u7528"}):(0,t.jsx)(I.Z,{color:"#e54545",children:"\u672A\u542F\u7528"})})})};return(0,t.jsx)("div",{className:l,children:(0,t.jsxs)(G._z,{content:"\u652F\u6301\u4F01\u4E1A\u4EE5\u591A\u79CD\u8EAB\u4EFD\u6E90\u9014\u5F84\u540C\u6B65\u7528\u6237\u548C\u7EC4\u7EC7\u4FE1\u606F\u5230\u7CFB\u7EDF\uFF0C\u5728\u9AD8\u7EA7\u914D\u7F6E\u4E2D\u53EF\u4EE5\u5BF9\u5BFC\u5165\u7684\u5904\u7406\u903B\u8F91\u8FDB\u884C\u7075\u6D3B\u914D\u7F6E \uFF0C\u5B9E\u73B0\u4ECE\u591A\u4E2A\u6570\u636E\u6E90\u7684\u6C47\u805A\u4E3A\u4E00\u4E2A\u5B8C\u6574\u7684\u7528\u6237\u76EE\u5F55\uFF0C\u90E8\u5206\u8EAB\u4EFD\u6E90\u8FD8\u53EF\u4EE5\u901A\u8FC7\u56DE\u8C03\u7684\u65B9\u5F0F\u652F\u6301\u5B9E\u65F6\u540C\u6B65\u3002",className:"".concat(B),children:[(0,t.jsx)(H.Rs,{toolBarRender:function(){return[(0,t.jsxs)(Q.Z,{type:"primary",onClick:function(){v(!0)},children:[(0,t.jsx)(O.Z,{}),"\u6DFB\u52A0\u8EAB\u4EFD\u6E90"]},"add")]},search:{},rowKey:"id",headerTitle:"\u8EAB\u4EFD\u6E90\u5217\u8868",actionRef:F,split:!0,pagination:{showQuickJumper:!1,defaultPageSize:5,size:"small"},showActions:"always",request:g.SN,form:{syncToUrl:function(s,r){return r==="get"?T()({},s):s}},metas:{title:{title:"\u8EAB\u4EFD\u6E90\u540D\u79F0",dataIndex:"name",render:function(s,r){return(0,t.jsx)("span",{onClick:function(){L(r.id,r.provider)},children:r.name})}},avatar:{search:!1,render:function(s,r){return(0,t.jsx)(U.C,{shape:"square",size:50,src:re.Y[r.provider]},r.id)}},description:{search:!1,render:function(s,r){return r.remark?(0,t.jsx)("span",{children:r.remark}):(0,t.jsx)("span",{children:r.desc})}},content:{search:!1,render:function(s,r){return[(0,t.jsx)(E,T()({},r),"context")]}},actions:{render:function(s,r){return[r.enabled?(0,t.jsx)(D.Z,{title:"\u786E\u5B9A\u7981\u7528\u8BE5\u8EAB\u4EFD\u6E90\u5417\uFF1F",placement:"bottomRight",icon:(0,t.jsx)(A.Z,{style:{color:"red"}}),onConfirm:C()(h()().mark(function f(){var c,m,i,d;return h()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.lz)(r.id);case 2:if(c=e.sent,m=c.success,i=c.result,!(m&&i)){e.next=10;break}return S.ZP.success("\u64CD\u4F5C\u6210\u529F"),e.next=9,(d=F.current)===null||d===void 0?void 0:d.reload();case 9:return e.abrupt("return");case 10:case"end":return e.stop()}},f)})),okText:"\u662F",cancelText:"\u5426",children:(0,t.jsx)("a",{children:"\u7981\u7528"},"disabled")},"disabled"):(0,t.jsx)(D.Z,{title:"\u786E\u5B9A\u542F\u7528\u8BE5\u8EAB\u4EFD\u6E90\u5417\uFF1F",placement:"bottomRight",icon:(0,t.jsx)(A.Z,{}),onConfirm:C()(h()().mark(function f(){var c,m,i,d;return h()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.Cj)(r.id);case 2:if(c=e.sent,m=c.success,i=c.result,!(m&&i)){e.next=10;break}return S.ZP.success("\u64CD\u4F5C\u6210\u529F").then(),e.next=9,(d=F.current)===null||d===void 0?void 0:d.reload();case 9:return e.abrupt("return");case 10:case"end":return e.stop()}},f)})),okText:"\u662F",cancelText:"\u5426",children:(0,t.jsx)("a",{children:"\u542F\u7528"},"enabled")},"disabled"),(0,t.jsx)("a",{onClick:function(){L(r.id,r.provider)},children:"\u8BE6\u60C5"},"detail"),(0,t.jsx)(D.Z,{title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8EAB\u4EFD\u6E90\u5417\uFF1F",placement:"bottomRight",icon:(0,t.jsx)(A.Z,{style:{color:"red"}}),onConfirm:C()(h()().mark(function f(){var c,m,i,d;return h()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g._p)(r.id);case 2:if(c=e.sent,m=c.success,i=c.result,!(m&&i)){e.next=10;break}return S.ZP.success("\u64CD\u4F5C\u6210\u529F"),e.next=9,(d=F.current)===null||d===void 0?void 0:d.reload();case 9:return e.abrupt("return");case 10:case"end":return e.stop()}},f)})),okText:"\u662F",cancelText:"\u5426",children:(0,t.jsx)("a",{target:"_blank",style:{color:"red"},children:"\u5220\u9664"},"remove")},"delete")]}}}}),(0,t.jsx)(w,{visible:x,onClose:function(){v(!1)},onFinish:function(){var u=C()(h()().mark(function s(r){var f,c,m,i,d;return h()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,g.gD)(r);case 3:if(f=e.sent,c=f.result,m=f.success,!m){e.next=11;break}return v(!1),(i=F.current)===null||i===void 0||i.reload(),d=V.Z.success({title:"\u6DFB\u52A0\u6210\u529F",content:"\u8BF7\u8FDB\u5165\u8EAB\u4EFD\u6E90\u8BE6\u60C5\u9875\u9762\u5B8C\u5584\u8EAB\u4EFD\u6E90\u914D\u7F6E\u4FE1\u606F",okText:"\u5B8C\u5584\u914D\u7F6E",onOk:function(){d.destroy(),P.m.push("/account/identity-source/detail?id=".concat(c.id))}}),e.abrupt("return",!0);case 11:return e.abrupt("return",!1);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",!1);case 17:case"end":return e.stop()}},s,null,[[0,14]])}));return function(s){return u.apply(this,arguments)}}()})]})})},se=ue}}]);
