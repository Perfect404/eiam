/*
 * eiam-console - Employee Identity and Access Management Program
 * Copyright Â© 2020-2023 TopIAM (support@topiam.cn)
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
(self.webpackChunktopiam_console=self.webpackChunktopiam_console||[]).push([[91],{29113:function(Ie,pe,m){"use strict";m.d(pe,{Z:function(){return me}});var Y=m(86855),v=m(79685),ue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M811.4 368.9C765.6 248 648.9 162 512.2 162S258.8 247.9 213 368.8C126.9 391.5 63.5 470.2 64 563.6 64.6 668 145.6 752.9 247.6 762c4.7.4 8.7-3.3 8.7-8v-60.4c0-4-3-7.4-7-7.9-27-3.4-52.5-15.2-72.1-34.5-24-23.5-37.2-55.1-37.2-88.6 0-28 9.1-54.4 26.2-76.4 16.7-21.4 40.2-36.9 66.1-43.7l37.9-10 13.9-36.7c8.6-22.8 20.6-44.2 35.7-63.5 14.9-19.2 32.6-36 52.4-50 41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.3c19.9 14 37.5 30.8 52.4 50 15.1 19.3 27.1 40.7 35.7 63.5l13.8 36.6 37.8 10c54.2 14.4 92.1 63.7 92.1 120 0 33.6-13.2 65.1-37.2 88.6-19.5 19.2-44.9 31.1-71.9 34.5-4 .5-6.9 3.9-6.9 7.9V754c0 4.7 4.1 8.4 8.8 8 101.7-9.2 182.5-94 183.2-198.2.6-93.4-62.7-172.1-148.6-194.9z"}},{tag:"path",attrs:{d:"M376.9 656.4c1.8-33.5 15.7-64.7 39.5-88.6 25.4-25.5 60-39.8 96-39.8 36.2 0 70.3 14.1 96 39.8 1.4 1.4 2.7 2.8 4.1 4.3l-25 19.6a8 8 0 003 14.1l98.2 24c5 1.2 9.9-2.6 9.9-7.7l.5-101.3c0-6.7-7.6-10.5-12.9-6.3L663 532.7c-36.6-42-90.4-68.6-150.5-68.6-107.4 0-195 85.1-199.4 191.7-.2 4.5 3.4 8.3 8 8.3H369c4.2-.1 7.7-3.4 7.9-7.7zM703 664h-47.9c-4.2 0-7.7 3.3-8 7.6-1.8 33.5-15.7 64.7-39.5 88.6-25.4 25.5-60 39.8-96 39.8-36.2 0-70.3-14.1-96-39.8-1.4-1.4-2.7-2.8-4.1-4.3l25-19.6a8 8 0 00-3-14.1l-98.2-24c-5-1.2-9.9 2.6-9.9 7.7l-.4 101.4c0 6.7 7.6 10.5 12.9 6.3l23.2-18.2c36.6 42 90.4 68.6 150.5 68.6 107.4 0 195-85.1 199.4-191.7.2-4.5-3.4-8.3-8-8.3z"}}]},name:"cloud-sync",theme:"outlined"},L=ue,ce=m(20165),ee=function(Ee,B){return v.createElement(ce.Z,(0,Y.Z)((0,Y.Z)({},Ee),{},{ref:B,icon:L}))};ee.displayName="CloudSyncOutlined";var me=v.forwardRef(ee)},75827:function(Ie,pe,m){"use strict";var Y=m(86855),v=m(79685),ue=m(43370),L=m(20165),ce=function(me,N){return v.createElement(L.Z,(0,Y.Z)((0,Y.Z)({},me),{},{ref:N,icon:ue.Z}))};ce.displayName="DeleteOutlined",pe.Z=v.forwardRef(ce)},16228:function(Ie,pe,m){"use strict";var Y=m(86855),v=m(79685),ue=m(53353),L=m(20165),ce=function(me,N){return v.createElement(L.Z,(0,Y.Z)((0,Y.Z)({},me),{},{ref:N,icon:ue.Z}))};ce.displayName="SafetyCertificateOutlined",pe.Z=v.forwardRef(ce)},36489:function(Ie,pe,m){"use strict";m.d(pe,{Z:function(){return me}});var Y=m(86855),v=m(79685),ue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"},L=ue,ce=m(20165),ee=function(Ee,B){return v.createElement(ce.Z,(0,Y.Z)((0,Y.Z)({},Ee),{},{ref:B,icon:L}))};ee.displayName="WarningOutlined";var me=v.forwardRef(ee)},31632:function(Ie,pe,m){"use strict";var Y=m(86855),v=m(5375),ue=m(41572),L=m(98879),ce=m(79685),ee=m(26275),me=m(4847),N=m(63342),Ee=["options","fieldProps","proFieldProps","valueEnum"],B=ce.forwardRef(function(Ae,Te){var be=Ae.options,Ue=Ae.fieldProps,Je=Ae.proFieldProps,Ye=Ae.valueEnum,Ne=(0,v.Z)(Ae,Ee);return(0,N.jsx)(me.Z,(0,Y.Z)({ref:Te,valueType:"checkbox",valueEnum:(0,ue.h)(Ye,void 0),fieldProps:(0,Y.Z)({options:be},Ue),lightProps:(0,Y.Z)({labelFormatter:function(){return(0,N.jsx)(me.Z,(0,Y.Z)({ref:Te,valueType:"checkbox",mode:"read",valueEnum:(0,ue.h)(Ye,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,Y.Z)({options:be},Ue),proFieldProps:Je},Ne))}},Ne.lightProps),proFieldProps:Je},Ne))}),Fe=ce.forwardRef(function(Ae,Te){var be=Ae.fieldProps,Ue=Ae.children;return(0,N.jsx)(L.Z,(0,Y.Z)((0,Y.Z)({ref:Te},be),{},{children:Ue}))}),fe=(0,ee.G)(Fe,{valuePropName:"checked"}),i=fe;i.Group=B,pe.Z=i},61872:function(Ie,pe,m){"use strict";var Y=m(86855),v=m(5375),ue=m(79685),L=m(4847),ce=m(63342),ee=["fieldProps","proFieldProps"],me=["fieldProps","proFieldProps"],N="text",Ee=function(i){var Ae=i.fieldProps,Te=i.proFieldProps,be=(0,v.Z)(i,ee);return(0,ce.jsx)(L.Z,(0,Y.Z)({valueType:N,fieldProps:Ae,filedConfig:{valueType:N},proFieldProps:Te},be))},B=function(i){var Ae=i.fieldProps,Te=i.proFieldProps,be=(0,v.Z)(i,me);return(0,ce.jsx)(L.Z,(0,Y.Z)({valueType:"password",fieldProps:Ae,proFieldProps:Te,filedConfig:{valueType:N}},be))},Fe=Ee;Fe.Password=B,Fe.displayName="ProFormComponent",pe.Z=Fe},63820:function(Ie,pe,m){"use strict";var Y=m(86855),v=m(5375),ue=m(79685),L=m(4847),ce=m(63342),ee=["fieldProps","proFieldProps"],me=function(Ee,B){var Fe=Ee.fieldProps,fe=Ee.proFieldProps,i=(0,v.Z)(Ee,ee);return(0,ce.jsx)(L.Z,(0,Y.Z)({ref:B,valueType:"textarea",fieldProps:Fe,proFieldProps:fe},i))};pe.Z=ue.forwardRef(me)},19162:function(Ie,pe,m){"use strict";m.d(pe,{Z:function(){return ce}});var Y=m(50673),v=m(57928),ue=m(63342),L=function(ee){var me=ee.avatar,N=ee.username,Ee=ee.size,B=Ee===void 0?"small":Ee;return(0,ue.jsx)(ue.Fragment,{children:me?(0,ue.jsx)(Y.C,{size:B,src:(0,ue.jsx)(v.Z,{placeholder:!0,src:me,fallback:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg=="})}):(0,ue.jsx)(Y.C,{style:{color:"#f56a00",backgroundColor:"#fde3cf",verticalAlign:"middle"},size:"small",gap:1,children:N.substring(0,1).toLocaleUpperCase()})})},ce=L},60132:function(Ie,pe,m){"use strict";m.r(pe),m.d(pe,{default:function(){return Ps}});var Y=m(84019),v=m.n(Y),ue=m(32061),L=m.n(ue),ce=m(77566),ee=m.n(ce),me=m(76091),N=m.n(me),Ee=m(7863),B=m.n(Ee),Fe=m(59251),fe=m(86855),i=m(79685),Ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656zM492 400h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H492c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0 144h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H492c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0 144h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H492c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zM340 368a40 40 0 1080 0 40 40 0 10-80 0zm0 144a40 40 0 1080 0 40 40 0 10-80 0zm0 144a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"profile",theme:"outlined"},Te=Ae,be=m(20165),Ue=function(n,t){return i.createElement(be.Z,(0,fe.Z)((0,fe.Z)({},n),{},{ref:t,icon:Te}))};Ue.displayName="ProfileOutlined";var Je=i.forwardRef(Ue),Ye={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 140H96c-17.7 0-32 14.3-32 32v496c0 17.7 14.3 32 32 32h380v112H304c-8.8 0-16 7.2-16 16v48c0 4.4 3.6 8 8 8h432c4.4 0 8-3.6 8-8v-48c0-8.8-7.2-16-16-16H548V700h380c17.7 0 32-14.3 32-32V172c0-17.7-14.3-32-32-32zm-40 488H136V212h752v416z"}}]},name:"desktop",theme:"outlined"},Ne=Ye,Cr=function(n,t){return i.createElement(be.Z,(0,fe.Z)((0,fe.Z)({},n),{},{ref:t,icon:Ne}))};Cr.displayName="DesktopOutlined";var zr=i.forwardRef(Cr),wr=m(29113),Zr=m(16228),Xe=m(90649),Ir=m(45597),se=m(15457),J=m(92479),Rr=m(92188),sr=m(25830),xr=m(59779),e=m(63342),Dr=function(n){var t=(0,i.useState)(),a=B()(t,2),d=a[0],l=a[1];(0,se.Z)(L()(v()().mark(function o(){var p,u,c;return v()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,(0,sr.mB)();case 2:if(C.t0=C.sent,C.t0){C.next=5;break}C.t0={};case 5:p=C.t0,u=p.success,c=p.result,u&&c&&l([c]);case 9:case"end":return C.stop()}},o)})),[]);var s=function(){var o=L()(v()().mark(function p(u){var c,w,C,F;return v()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return c=u[u.length-1],c.loading=!0,T.next=4,(0,sr.z3)(c.id);case 4:w=T.sent,C=w.success,F=w.result,C&&F&&(c.children=ee()(F),l(ee()(d))),c.loading=!1;case 9:case"end":return T.stop()}},p)}));return function(u){return o.apply(this,arguments)}}();return(0,e.jsx)(xr.Z,N()({fieldNames:{value:"id",label:"name"},options:d,loadData:s,changeOnSelect:!0,showCheckedStrategy:"SHOW_CHILD"},n))},Qr=Dr,yr=Qr,lr=m(87390),Pe=m(81262),Se=m(97207),Or=lr.Z.Option,br,ut=function(){var r=L()(v()().mark(function n(t){var a,d;return v()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return br=t,s.next=3,(0,sr.S4)({name:t});case 3:if(a=s.sent,d=a.data,br!==t){s.next=7;break}return s.abrupt("return",d==null?void 0:d.map(function(o){return{value:o.id,label:"".concat(o.name)}}));case 7:return s.abrupt("return",[]);case 8:case"end":return s.stop()}},n)}));return function(t){return r.apply(this,arguments)}}(),Kr=function(n){var t=(0,i.useState)([]),a=B()(t,2),d=a[0],l=a[1],s=(0,i.useState)(!1),o=B()(s,2),p=o[0],u=o[1],c=(0,i.useRef)(0),w=(0,i.useMemo)(function(){var O=function(j){c.current+=1;var g=c.current;l([]),u(!0),ut(j).then(function(A){g===c.current&&(l(A),u(!1))})};return(0,Se.debounce)(O,600)},[]),C=function(){var O=L()(v()().mark(function T(j){return v()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:j?w(j):l([]);case 1:case"end":return A.stop()}},T)}));return function(j){return O.apply(this,arguments)}}(),F=d.map(function(O){return(0,e.jsx)(Or,{value:O.value,children:O.label},O.value)});return(0,e.jsx)(lr.Z,N()(N()({showSearch:!0,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onSearch:C,allowClear:!0,notFoundContent:p?(0,e.jsx)(Pe.Z,{size:"small"}):null},n),{},{children:F}))},R=Kr,k=R,H=m(23571),Re=m(39620),te=m.n(Re),Le=m(27478),qe=m(76505),mr=qe.ZP.ConfigContext,Ht=function(n){var t=n.prefixCls,a=n.antCls;return te()({},"".concat(t,"-popup"),te()({},"span".concat(a,"-select-item-option-state"),{display:"contents !important"}))};function Wt(r){var n=(0,i.useContext)(mr),t=n.getPrefixCls,a=".".concat(t());return(0,Le.Xj)("UserSelectComponent",function(d){var l=N()(N()({},d),{},{prefixCls:".".concat(r),antCls:a});return[Ht(l)]})}var Jt=m(68591),Ce=m.n(Jt),Yt=m(19162),ct="topiam-user-select",dt,Xt=function(){var r=L()(v()().mark(function n(t){var a,d;return v()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return dt=t,s.next=3,(0,sr.lE)({username:t});case 3:if(a=s.sent,d=a.data,dt!==t){s.next=7;break}return s.abrupt("return",d==null?void 0:d.map(function(o){return{id:o.id,username:"".concat(o.username),fullName:"".concat(o.fullName),avatar:"".concat(o.avatar),orgDisplayPath:"".concat(o.orgDisplayPath)}}));case 7:return s.abrupt("return",[]);case 8:case"end":return s.stop()}},n)}));return function(t){return r.apply(this,arguments)}}(),qt=function(n){var t=Wt(ct),a=t.wrapSSR,d=t.hashId,l=(0,i.useState)([]),s=B()(l,2),o=s[0],p=s[1],u=(0,i.useState)(!1),c=B()(u,2),w=c[0],C=c[1],F=(0,i.useRef)(0),O=(0,i.useMemo)(function(){var g=function(f){F.current+=1;var Z=F.current;p([]),C(!0),Xt(f).then(function(h){Z===F.current&&(p(h),C(!1))})};return(0,Se.debounce)(g,600)},[]),T=function(){var g=L()(v()().mark(function A(f){return v()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:f?O(f):p([]);case 1:case"end":return h.stop()}},A)}));return function(f){return g.apply(this,arguments)}}(),j=o.map(function(g){return{fullName:g.fullName,label:(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{style:{display:"inline-flex",alignItems:"center"},children:[(0,e.jsx)("div",{style:{marginRight:"0.5rem"},children:(0,e.jsx)(Yt.Z,{avatar:g.avatar,username:g.fullName})}),(0,e.jsxs)("div",{style:{display:"block"},children:[(0,e.jsx)("span",{children:g.fullName}),(0,e.jsx)("br",{}),(0,e.jsx)("span",{children:g.username})]})]}),(0,e.jsx)(H.Z,{style:{margin:3}})]}),value:g.id}});return(0,se.Z)(L()(v()().mark(function g(){return v()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:case"end":return f.stop()}},g)})),[]),a((0,e.jsx)(lr.Z,N()(N()({showSearch:!0,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onSearch:T,optionLabelProp:"fullName",allowClear:!0,notFoundContent:w?(0,e.jsx)(Pe.Z,{size:"small"}):null,options:j},n),{},{popupClassName:Ce()("".concat(ct,"-popup"),d,n.popupClassName)})))},_t=qt,Vr=_t,le=m(50102),Q=m(83664),or=m(80591),fr=m(43637),pt=m(55178),Gr=m(41326),K=m(61872),ze=m(67457),Er=m(19904),re=m(4485),ir=m(75098),_e=m(61898),ke=m(87101),en=function(n){var t=re.Z.useForm(),a=B()(t,1),d=a[0],l=n.open,s=n.onCancel,o=n.onFinish;return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(pt.Y,{title:"\u6DFB\u52A0\u6388\u6743",width:600,open:l,form:d,scrollToFirstError:!0,layout:"horizontal",labelCol:{span:4},wrapperCol:{span:20},autoFocusFirstInput:!0,preserve:!1,modalProps:{forceRender:!0,destroyOnClose:!0,onCancel:function(u){d.resetFields(),s==null||s(u)}},onFinish:o,children:[(0,e.jsx)(Gr.Z.Group,{name:"subjectType",label:"\u6388\u6743\u7C7B\u578B",initialValue:le.SC.USER,fieldProps:{onChange:function(){d.resetFields(["subjectIds"]),d.setFieldsValue({effect:le.Gh.ALLOW})}},options:[{value:le.SC.USER,label:"\u7528\u6237"},{value:le.SC.USER_GROUP,label:"\u7528\u6237\u7EC4"},{value:le.SC.ORGANIZATION,label:"\u7EC4\u7EC7\u673A\u6784"}],rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6388\u6743\u7C7B\u578B"}]}),(0,e.jsx)(K.Z,{name:"effect",hidden:!0}),(0,e.jsx)(ze.Z,{name:["subjectType"],children:function(u){var c=u.subjectType;return c===le.SC.USER?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(re.Z.Item,{label:"\u6388\u6743\u7528\u6237",name:"subjectIds",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6388\u6743\u7528\u6237"}],children:(0,e.jsx)(Vr,{placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\u641C\u7D22\u7528\u6237",mode:"multiple"})})}):c===le.SC.USER_GROUP?(0,e.jsx)(re.Z.Item,{label:"\u6388\u6743\u5206\u7EC4",name:"subjectIds",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6388\u6743\u5206\u7EC4"}],children:(0,e.jsx)(k,{placeholder:"\u8BF7\u9009\u62E9\u6388\u6743\u5206\u7EC4",mode:"multiple"})}):c===le.SC.ORGANIZATION?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(re.Z.Item,{label:"\u6388\u6743\u7EC4\u7EC7",name:"subjectIds",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u9009\u62E9\u7EC4\u7EC7\u8282\u70B9"}],children:(0,e.jsx)(yr,{placeholder:"\u9009\u62E9\u7EC4\u7EC7\u8282\u70B9"})})}):(0,e.jsx)(e.Fragment,{})}})]})})},rn=function(r){var n=(0,i.useRef)(),t=r.appId,a=(0,i.useState)(!1),d=B()(a,2),l=d[0],s=d[1],o=[{title:"\u6388\u6743\u4E3B\u4F53",dataIndex:"subjectName",ellipsis:!0,fixed:"left"},{title:"\u4E3B\u4F53\u7C7B\u578B",dataIndex:"subjectType",valueType:"select",ellipsis:!0,valueEnum:{USER:{text:"\u7528\u6237"},USER_GROUP:{text:"\u7528\u6237\u7EC4"},ORGANIZATION:{text:"\u7EC4\u7EC7\u673A\u6784"}}},{title:"\u6388\u6743\u65F6\u95F4",align:"center",ellipsis:!0,dataIndex:"createTime",valueType:"dateTime",search:!1},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:80,align:"center",fixed:"right",render:function(u,c){return[(0,e.jsx)(ir.Z,{title:"\u60A8\u786E\u5B9A\u8981\u53D6\u6D88\u4E3B\u4F53\u6388\u6743\uFF1F\u53D6\u6D88\u6388\u6743\u540E\u4E0D\u53EF\u81EA\u52A8\u6062\u590D\u3002",placement:"bottomRight",icon:(0,e.jsx)(or.Z,{style:{color:"red"}}),onConfirm:L()(v()().mark(function w(){var C,F,O;return v()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,(0,Q.AY)(c.id);case 2:if(C=j.sent,F=C.success,!F){j.next=8;break}return J.ZP.success("\u64CD\u4F5C\u6210\u529F"),(O=n.current)===null||O===void 0||O.reload(),j.abrupt("return");case 8:case"end":return j.stop()}},w)})),okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)("a",{target:"_blank",style:{color:"red"},children:"\u53D6\u6D88\u6388\u6743"},"remove")},"delete")]}}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Er.Z,{columns:o,actionRef:n,scroll:{x:700},rowSelection:{selections:[_e.Z.SELECTION_ALL,_e.Z.SELECTION_INVERT]},request:Q.Je,params:{appId:t},rowKey:"id",search:{},options:!1,pagination:{defaultPageSize:5},style:{height:"calc(100vh - 190px)",overflow:"auto"},cardProps:{style:{minHeight:"100%"}},dateFormatter:"string",toolBarRender:function(){return[(0,e.jsx)(ke.ZP,{icon:(0,e.jsx)(fr.Z,{}),type:"primary",onClick:function(){s(!0)},children:"\u6DFB\u52A0\u6388\u6743"},"add")]}}),(0,e.jsx)(en,{open:l,onCancel:function(){s(!1)},onFinish:function(){var p=L()(v()().mark(function u(c){var w,C,F;return v()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,(0,Q.gI)(N()({appId:t},c));case 2:if(w=T.sent,C=w.success,!C){T.next=8;break}return J.ZP.success("\u64CD\u4F5C\u6210\u529F"),(F=n.current)===null||F===void 0||F.reload(),T.abrupt("return",!0);case 8:return J.ZP.error("\u64CD\u4F5C\u5931\u8D25"),T.abrupt("return",!1);case 10:case"end":return T.stop()}},u)}));return function(u){return p.apply(this,arguments)}}()})]})},tn=rn,Hr=m(49678),$e=m(10071),nn=function(){return(0,e.jsx)(Hr.Z,{style:{height:"calc(100vh - 190px)",overflow:"auto"},bodyStyle:{height:"100%"},children:(0,e.jsx)($e.Z,{style:{backgroundColor:"#f1f1f2",border:"1px solid #f1f1f2"},message:"\u6682\u672A\u5B9E\u73B0"})})},an=m(80840),sn=function(r){var n=(0,i.useRef)(),t=r.appId,a=r.protocol,d=[{title:"\u7CFB\u7EDF\u7528\u6237",dataIndex:"username",ellipsis:!0,fixed:"left"},{title:"\u5E94\u7528\u8D26\u6237",dataIndex:"account",ellipsis:!0},{title:"\u6DFB\u52A0\u65F6\u95F4",dataIndex:"createTime",valueType:"dateTime",search:!1,ellipsis:!0},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:80,align:"center",fixed:"right",render:function(o,p){return[(0,e.jsx)(ir.Z,{title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u6B64\u5E94\u7528\u8D26\u6237\uFF1F",placement:"bottomRight",icon:(0,e.jsx)(or.Z,{style:{color:"red"}}),onConfirm:L()(v()().mark(function u(){var c,w,C;return v()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,Q.Zd)(p.id);case 2:if(c=O.sent,w=c.success,!w){O.next=8;break}return J.ZP.success("\u64CD\u4F5C\u6210\u529F"),(C=n.current)===null||C===void 0||C.reload(),O.abrupt("return");case 8:case"end":return O.stop()}},u)})),okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)("a",{target:"_blank",style:{color:"red"},children:"\u5220\u9664"},"remove")},"delete")]}}],l=function(){var o=re.Z.useForm(),p=B()(o,1),u=p[0];return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(pt.Y,{title:"\u6DFB\u52A0\u5E94\u7528\u8D26\u6237",width:500,form:u,scrollToFirstError:!0,trigger:(0,e.jsx)(ke.ZP,{icon:(0,e.jsx)(fr.Z,{}),type:"primary",children:"\u6DFB\u52A0\u5E94\u7528\u8D26\u6237"},"button"),layout:"vertical",autoFocusFirstInput:!0,preserve:!1,modalProps:{destroyOnClose:!0,onCancel:function(){u.resetFields()}},onFinish:function(){var c=L()(v()().mark(function w(C){var F,O,T,j,g;return v()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return O=C,(F=O)!==null&&F!==void 0&&F.password&&(O=N()(N()({},O),{},{password:an.DS.encode(C.password,!0)})),f.next=4,(0,Q.o1)(N()({appId:t},O));case 4:if(T=f.sent,j=T.success,!j){f.next=10;break}return J.ZP.success("\u6DFB\u52A0\u6210\u529F"),(g=n.current)===null||g===void 0||g.reload(),f.abrupt("return",!0);case 10:return J.ZP.error("\u6DFB\u52A0\u5931\u8D25"),f.abrupt("return",!1);case 12:case"end":return f.stop()}},w)}));return function(w){return c.apply(this,arguments)}}(),children:[(0,e.jsx)(re.Z.Item,{label:"\u7CFB\u7EDF\u7528\u6237",name:"userId",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7CFB\u7EDF\u7528\u6237"}],children:(0,e.jsx)(Vr,{placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\u3001\u624B\u673A\u6216\u90AE\u7BB1\u641C\u7D22\u7528\u6237"})}),a===le.gD.FORM?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(K.Z,{label:"\u5E94\u7528\u7528\u6237\u540D",name:"account",placeholder:"\u8BF7\u8F93\u5165\u8D26\u6237\u8BBF\u95EE\u5E94\u7528\u65F6\u6240\u4F7F\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u6237\u8BBF\u95EE\u5E94\u7528\u65F6\u6240\u4F7F\u7528\u6237\u540D"}]}),(0,e.jsx)(K.Z.Password,{label:"\u5E94\u7528\u7528\u6237\u5BC6\u7801",name:"password",placeholder:"\u8BF7\u8F93\u5165\u8D26\u6237\u8BBF\u95EE\u5E94\u7528\u65F6\u6240\u4F7F\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u6237\u8BBF\u95EE\u5E94\u7528\u65F6\u6240\u4F7F\u5BC6\u7801"}]})]}):(0,e.jsx)(K.Z,{label:"\u5E94\u7528\u8EAB\u4EFD",name:"account",placeholder:"\u8BF7\u8F93\u5165\u8D26\u6237\u8BBF\u95EE\u5E94\u7528\u65F6\u6240\u4F7F\u8EAB\u4EFD",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u6237\u8BBF\u95EE\u5E94\u7528\u65F6\u6240\u4F7F\u8EAB\u4EFD"}]})]})})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)($e.Z,{banner:!0,type:"info",message:" \u5982\u679C\u60A8\u914D\u7F6E\u4F7F\u7528\u3010\u7CFB\u7EDF\u8D26\u6237\u540D\u3011\uFF0C\u5E94\u7528\u8D26\u6237\u5C5E\u6027\u914D\u7F6E\u540E\u4E0D\u4F1A\u751F\u6548\uFF1B\u5982\u9700\u53D8\u66F4\uFF0C\u8BF7\u5728 \u534F\u8BAE\u914D\u7F6E \u66F4\u6539\u914D\u7F6E\u3002",style:{marginBottom:16}}),(0,e.jsx)(Er.Z,{columns:d,actionRef:n,scroll:{x:700},rowSelection:{selections:[_e.Z.SELECTION_ALL,_e.Z.SELECTION_INVERT]},request:Q.IC,params:{appId:t},rowKey:"id",search:{},style:{height:"calc(100vh - 244px)",overflow:"auto"},cardProps:{style:{minHeight:"100%"}},options:!1,pagination:{defaultPageSize:5},dateFormatter:"string",toolBarRender:function(){return[(0,e.jsx)(l,{},"create")]}})]})},ln=sn,Qe=m(50435),mt=m(96845),Wr=m(96104),Tr=m(18541),ft=m(18639),on=qe.ZP.ConfigContext;function un(r){var n=(0,i.useContext)(on),t=n.getPrefixCls,a=".".concat(t()),d=(0,ft.l)(function(l){var s,o=l.token;return s={height:"calc(100vh - 190px)"},te()(s,".".concat(r,"-descriptions"),te()({},"".concat(a,"-descriptions-small ").concat(a,"-descriptions-row > th, ").concat(a,"-descriptions-small ").concat(a,"-descriptions-row > td"),{paddingBottom:"16px"})),te()(s,"@media screen and (max-width: ".concat(o.screenXL,"px)"),{height:"calc(100vh - 252px)"}),s});return{className:d}}var vt="app-basic-info",cn=function(n){var t=n.appId,a=(0,i.useState)(!0),d=B()(a,2),l=d[0],s=d[1],o=(0,i.useState)(),p=B()(o,2),u=p[0],c=p[1],w=(0,Wr.useLocation)(),C=Tr.Z.parse(w.search),F=un(vt),O=F.className;(0,se.Z)(L()(v()().mark(function j(){var g,A,f;return v()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return s(!0),h.next=3,(0,Q.Mq)(t);case 3:g=h.sent,A=g.result,f=g.success,f&&A&&c(A),s(!1);case 8:case"end":return h.stop()}},j)})),[t]);var T=function(){var j=L()(v()().mark(function g(A,f){var Z,h;return v()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,(0,Q.KT)({id:f.id,name:f.name,remark:f.remark});case 2:if(Z=b.sent,h=Z.success,!h){b.next=9;break}return J.ZP.success("\u64CD\u4F5C\u6210\u529F"),c(N()({},f)),Wr.history.replace("/app/config?id=".concat(C.id,"&name=").concat(f.name,"&type=").concat(C.type)),b.abrupt("return",Promise.resolve(!0));case 9:return b.abrupt("return",Promise.resolve(!1));case 10:case"end":return b.stop()}},g)}));return function(A,f){return j.apply(this,arguments)}}();return(0,e.jsx)(Hr.Z,{title:"\u57FA\u672C\u914D\u7F6E",headerBordered:!0,className:O,children:(0,e.jsx)(mt.Z,{loading:l,active:!0,paragraph:{rows:5},children:(0,e.jsx)("div",{className:Ce()("".concat(vt,"-descriptions")),children:(0,e.jsxs)(Qe.vY,{size:"small",column:2,dataSource:(0,Se.omit)(u,"config"),editable:{onSave:T},children:[(0,e.jsx)(Qe.vY.Item,{dataIndex:"name",label:"\u5E94\u7528\u540D\u79F0",copyable:!1,formItemProps:{rules:[{required:!0,message:"\u5E94\u7528\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}]}}),(0,e.jsx)(Qe.vY.Item,{dataIndex:"enabled",label:"\u5E94\u7528\u72B6\u6001",editable:!1,valueEnum:{true:{text:"\u6B63\u5E38",status:"Success"},false:{text:"\u7981\u7528",status:"Error"}}}),(0,e.jsx)(Qe.vY.Item,{dataIndex:"type",label:"\u5E94\u7528\u7C7B\u578B",editable:!1,valueEnum:{custom_made:{text:"\u5B9A\u5236\u5E94\u7528"},standard:{text:"\u6807\u51C6\u5E94\u7528"},self_developed:{text:"\u81EA\u7814\u5E94\u7528"}}}),(0,e.jsx)(Qe.vY.Item,{dataIndex:"protocolName",label:"\u5E94\u7528\u534F\u8BAE",editable:!1}),(u==null?void 0:u.clientId)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Qe.vY.Item,{dataIndex:"clientId",label:"\u5BA2\u6237\u7AEF ID",valueType:"text",editable:!1,copyable:!0}),(0,e.jsx)(Qe.vY.Item,{dataIndex:"clientSecret",label:"\u5BA2\u6237\u7AEF\u79D8\u94A5",valueType:"password",editable:!1,copyable:!0})]}),(0,e.jsx)(Qe.vY.Item,{dataIndex:"createTime",label:"\u521B\u5EFA\u65F6\u95F4",valueType:"dateTime",copyable:!1,editable:!1}),(0,e.jsx)(Qe.vY.Item,{dataIndex:"remark",label:"\u5907\u6CE8",valueType:"textarea",fieldProps:{rows:2,maxLength:20},copyable:!1})]})})})})},dn=cn,de;(function(r){r.BASIC="basic",r.PROTOCOL_CONFIG="protocol_config",r.ACCOUNT_SYNC="account_sync",r.ACCESS_POLICY="access_policy",r.LOGIN_ACCESS="login_access",r.PERMISSION_RESOURCE="permission_resource",r.PERMISSION_ROLE="permission_role",r.PERMISSION_POLICY="permission_policy",r.APP_PERMISSION="app_permission",r.APP_ACCOUNT="app_account"})(de||(de={}));var Ke;(function(r){r.APP="only_app_init_sso",r.PORTAL_OR_APP="portal_or_app_init_sso"})(Ke||(Ke={}));var De;(function(r){r.AUTHORIZATION="authorization",r.ALL_ACCESS="all_access"})(De||(De={}));var vr;(function(r){r.SAML_SIGN="saml_sign",r.JWT_ENCRYPT="jwt_encrypt"})(vr||(vr={}));var ve=m(43187),$r=m(33331),ht=m(66644),oe=m(31632),pn=ve.Z.Panel,mn=function(n){var t=(0,i.useState)(!1),a=B()(t,2),d=a[0],l=a[1],s=(0,i.useState)(),o=B()(s,2),p=o[0],u=o[1],c=(0,i.useState)([]),w=B()(c,2),C=w[0],F=w[1],O=n.open,T=n.appId,j=n.onCancel,g=n.subjectType;(0,se.Z)(L()(v()().mark(function f(){var Z,h;return v()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!O){b.next=8;break}return l(!0),b.next=4,(0,Q.Sf)({appId:T});case 4:Z=b.sent,h=Z.result,u(h),l(!1);case 8:case"end":return b.stop()}},f)})),[O,g]);var A=function(Z){if(Z.target.checked){F([].concat(ee()(C),[Z.target.value]));return}F(C==null?void 0:C.filter(function(h){return h!==Z.target.value}))};return(0,e.jsx)(ht.a,{title:"\u6388\u6743",width:650,layout:"horizontal",labelCol:{span:4},open:O,wrapperCol:{span:19},onFinish:function(Z){return l(!0),console.log("roles",Z.roles),console.log("subjectIds",Z.subjectIds),console.log("permissions",C),F([]),l(!1),Promise.resolve(!1)},drawerProps:{destroyOnClose:!0,onClose:function(Z){F([]),j(Z)}},children:(0,e.jsxs)(Pe.Z,{spinning:d,children:[(0,e.jsx)($e.Z,{message:"\u652F\u6301\u4E24\u79CD\u6743\u9650\u6A21\u578B\uFF1A\u57FA\u4E8E\u89D2\u8272\u7684\u8BBF\u95EE\u63A7\u5236\uFF08RBAC\uFF09\u548C\u57FA\u4E8E\u5C5E\u6027\u7684\u8BBF\u95EE\u63A7\u5236\uFF08ABAC\uFF09"}),(0,e.jsx)("br",{}),g===le.SC.USER&&(0,e.jsx)(re.Z.Item,{label:"\u6388\u6743\u7528\u6237",name:"subjectIds",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6388\u6743\u7528\u6237"}],children:(0,e.jsx)(Vr,{placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\u3001\u624B\u673A\u6216\u90AE\u7BB1\u641C\u7D22\u7528\u6237",mode:"multiple"})}),g===le.SC.USER_GROUP&&(0,e.jsx)(re.Z.Item,{label:"\u6388\u6743\u7528\u6237\u7EC4",name:"subjectIds",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6388\u6743\u5206\u7EC4"}],children:(0,e.jsx)(k,{placeholder:"\u8BF7\u9009\u62E9\u6388\u6743\u5206\u7EC4",mode:"multiple"})}),g===le.SC.ORGANIZATION&&(0,e.jsx)(re.Z.Item,{label:"\u6388\u6743\u7EC4\u7EC7",name:"subjectIds",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u9009\u62E9\u7EC4\u7EC7\u8282\u70B9"}],children:(0,e.jsx)(yr,{placeholder:"\u9009\u62E9\u7EC4\u7EC7\u8282\u70B9"})}),(0,e.jsxs)($r.Z,{bodyStyle:{paddingBottom:0,paddingTop:0},children:[(0,e.jsx)(H.Z,{orientation:"left",children:"\u5E94\u7528\u89D2\u8272"}),(0,e.jsx)(oe.Z.Group,{name:"roles",layout:"vertical",options:["\u8682\u8681\u533A\u5757\u94FEBaaS\u5E73\u53F0-\u7BA1\u7406\u5458","\u5BA1\u8BA1\u7BA1\u7406\u5458","Captain-\u96C6\u7FA4\u6269\u5BB9\u5DE5\u7A0B\u5E08","Captain-\u96C6\u7FA4\u8FD0\u7EF4\u5DE5\u7A0B\u5E08","Captain-\u96C6\u7FA4\u7BA1\u7406\u5458","Captain-\u8D85\u7EA7\u7BA1\u7406\u5458","\u51FD\u6570\u8BA1\u7B97\u7BA1\u7406\u5458","\u51FD\u6570\u8BA1\u7B97\u89C2\u5BDF\u8005"]})]}),(0,e.jsx)("br",{}),(0,e.jsxs)($r.Z,{bodyStyle:{paddingBottom:0,paddingTop:0},children:[(0,e.jsx)(H.Z,{orientation:"left",children:"\u5E94\u7528\u8D44\u6E90"}),p==null?void 0:p.map(function(f){var Z,h,y,b,P;return(0,e.jsxs)("div",{children:[(0,e.jsx)(ve.Z,{bordered:!1,children:(0,e.jsxs)(pn,{header:f.name,children:[f.menus.length>0&&(0,e.jsx)(oe.Z.Group,{name:"menu_".concat(f.id),label:"\u83DC\u5355\u6743\u9650",layout:"vertical",options:(Z=f.menus)===null||Z===void 0?void 0:Z.map(function(x){return{label:x.name,value:x.id,onChange:A}})}),f.buttons.length>0&&(0,e.jsx)(oe.Z.Group,{name:"button_".concat(f.id),label:"\u6309\u94AE\u6743\u9650",layout:"vertical",options:(h=f.buttons)===null||h===void 0?void 0:h.map(function(x){return{label:x.name,value:x.id,onChange:A}})}),f.apis.length>0&&(0,e.jsx)(oe.Z.Group,{name:"api_".concat(f.id),layout:"vertical",label:"\u63A5\u53E3\u6743\u9650",options:(y=f.apis)===null||y===void 0?void 0:y.map(function(x){return{label:x.name,value:x.id,onChange:A}})}),f.datas.length>0&&(0,e.jsx)(oe.Z.Group,{name:"data_".concat(f.id),layout:"vertical",label:"\u6570\u636E\u6743\u9650",options:(b=f.apis)===null||b===void 0?void 0:b.map(function(x){return{label:x.name,value:x.id,onChange:A}})}),f.others.length>0&&(0,e.jsx)(oe.Z.Group,{name:"other_".concat(f.id),layout:"vertical",label:"\u5176\u4ED6\u6743\u9650",options:(P=f.apis)===null||P===void 0?void 0:P.map(function(x){return{label:x.name,value:x.id,onChange:A}})})]},f.id)},f.id),(0,e.jsx)("br",{})]},f.id)})]})]})},"create_permission")},fn=mn,vn=ve.Z.Panel,hn=function(n){var t=re.Z.useForm(),a=B()(t,1),d=a[0],l=(0,i.useState)(!1),s=B()(l,2),o=s[0],p=s[1],u=(0,i.useState)(),c=B()(u,2),w=c[0],C=c[1],F=n.open,O=n.onCancel,T=n.subjectType,j=n.subjectId,g=(0,i.useState)([]),A=B()(g,2),f=A[0],Z=A[1];(0,se.Z)(L()(v()().mark(function y(){return v()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:F&&(p(!0),console.log(j),C([]),p(!1));case 1:case"end":return P.stop()}},y)})),[F,T,j]);var h=function(b){if(b.target.checked){Z([].concat(ee()(f),[b.target.value]));return}Z(f==null?void 0:f.filter(function(P){return P!==b.target.value}))};return(0,e.jsx)(ht.a,{title:"\u6388\u6743",width:650,layout:"horizontal",labelCol:{span:4},wrapperCol:{span:19},form:d,scrollToFirstError:!0,trigger:(0,e.jsx)("a",{type:"primary",children:"\u4FEE\u6539"},"update"),onFinish:function(b){return p(!0),console.log("roles",b.roles),console.log("permissions",f),Z([]),p(!1),Promise.resolve(!1)},drawerProps:{afterOpenChange:function(b){},destroyOnClose:!0,onClose:function(b){Z([]),O(b)}},children:(0,e.jsxs)(Pe.Z,{spinning:o,children:[(0,e.jsx)($e.Z,{message:"\u652F\u6301\u4E24\u79CD\u6743\u9650\u6A21\u578B\uFF1A\u57FA\u4E8E\u89D2\u8272\u7684\u8BBF\u95EE\u63A7\u5236\uFF08RBAC\uFF09\u548C\u57FA\u4E8E\u5C5E\u6027\u7684\u8BBF\u95EE\u63A7\u5236\uFF08ABAC\uFF09"}),(0,e.jsx)("br",{}),(0,e.jsxs)($r.Z,{bodyStyle:{paddingBottom:0,paddingTop:0},children:[(0,e.jsx)(H.Z,{orientation:"left",children:"\u5E94\u7528\u89D2\u8272"}),(0,e.jsx)(oe.Z.Group,{name:"roles",layout:"vertical",options:["\u8682\u8681\u533A\u5757\u94FEBaaS\u5E73\u53F0-\u7BA1\u7406\u5458","\u5BA1\u8BA1\u7BA1\u7406\u5458","Captain-\u96C6\u7FA4\u6269\u5BB9\u5DE5\u7A0B\u5E08","Captain-\u96C6\u7FA4\u8FD0\u7EF4\u5DE5\u7A0B\u5E08","Captain-\u96C6\u7FA4\u7BA1\u7406\u5458","Captain-\u8D85\u7EA7\u7BA1\u7406\u5458","\u51FD\u6570\u8BA1\u7B97\u7BA1\u7406\u5458","\u51FD\u6570\u8BA1\u7B97\u89C2\u5BDF\u8005"]})]}),(0,e.jsx)("br",{}),(0,e.jsxs)($r.Z,{bodyStyle:{paddingBottom:0,paddingTop:0},children:[(0,e.jsx)(H.Z,{orientation:"left",children:"\u5E94\u7528\u8D44\u6E90"}),w==null?void 0:w.map(function(y){var b,P,x,E,D;return(0,e.jsxs)("div",{children:[(0,e.jsx)(ve.Z,{bordered:!1,children:(0,e.jsxs)(vn,{header:y.name,children:[y.menus.length>0&&(0,e.jsx)(oe.Z.Group,{name:"menu_".concat(y.id),label:"\u83DC\u5355\u6743\u9650",layout:"vertical",options:(b=y.menus)===null||b===void 0?void 0:b.map(function(M){return{label:M.name,value:M.id,onChange:h}})}),y.buttons.length>0&&(0,e.jsx)(oe.Z.Group,{name:"button_".concat(y.id),label:"\u6309\u94AE\u6743\u9650",layout:"vertical",options:(P=y.buttons)===null||P===void 0?void 0:P.map(function(M){return{label:M.name,value:M.id,onChange:h}})}),y.apis.length>0&&(0,e.jsx)(oe.Z.Group,{name:"api_".concat(y.id),layout:"vertical",label:"\u63A5\u53E3\u6743\u9650",options:(x=y.apis)===null||x===void 0?void 0:x.map(function(M){return{label:M.name,value:M.id,onChange:h}})}),y.datas.length>0&&(0,e.jsx)(oe.Z.Group,{name:"data_".concat(y.id),layout:"vertical",label:"\u6570\u636E\u6743\u9650",options:(E=y.apis)===null||E===void 0?void 0:E.map(function(M){return{label:M.name,value:M.id,onChange:h}})}),y.others.length>0&&(0,e.jsx)(oe.Z.Group,{name:"other_".concat(y.id),layout:"vertical",label:"\u5176\u4ED6\u6743\u9650",options:(D=y.apis)===null||D===void 0?void 0:D.map(function(M){return{label:M.name,value:M.id,onChange:h}})})]},y.id)},y.id),(0,e.jsx)("br",{})]},y.id)})]})]})},"update_permission")},gn=hn,Cn=function(r){var n=(0,i.useState)(le.SC.USER),t=B()(n,2),a=t[0],d=t[1],l=(0,i.useState)(!1),s=B()(l,2),o=s[0],p=s[1],u=(0,i.useRef)(),c=r.appId,w=[{title:"\u540D\u79F0",dataIndex:"name",ellipsis:!0,width:"300",fixed:"left"},{title:"\u6388\u6743\u65F6\u95F4",align:"center",dataIndex:"desc",search:!1},{title:"\u64CD\u4F5C",align:"center",valueType:"option",fixed:"right",width:150,render:function(F,O){return[(0,e.jsx)(gn,{onCancel:function(){},open:!0,subjectType:a,subjectId:O.id},O.id),(0,e.jsx)(ir.Z,{title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",placement:"bottomRight",icon:(0,e.jsx)(or.Z,{style:{color:"red"}}),onConfirm:L()(v()().mark(function T(){return v()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:(0,Q.IV)(O.id).then(function(A){if(A.success&&A.result){var f;J.ZP.success("\u64CD\u4F5C\u6210\u529F"),(f=u.current)===null||f===void 0||f.reload();return}});case 1:case"end":return g.stop()}},T)})),okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)("a",{target:"_blank",style:{color:"red"},children:"\u5220\u9664"},"remove")},"delete")]}}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Er.Z,{columns:w,options:!1,scroll:{x:700},pagination:{showQuickJumper:!0,defaultPageSize:10},style:{height:"calc(100vh - 190px)",overflow:"auto"},cardProps:{style:{minHeight:"100%"}},actionRef:u,request:Q.zr,params:{appId:c,subjectType:a},rowKey:"id",dateFormatter:"string",toolbar:{menu:{type:"tab",activeKey:a,items:[{key:le.SC.USER,label:(0,e.jsx)("span",{children:"\u7528\u6237"})},{key:le.SC.USER_GROUP,label:(0,e.jsx)("span",{children:"\u7528\u6237\u7EC4"})},{key:le.SC.ORGANIZATION,label:(0,e.jsx)("span",{children:"\u7EC4\u7EC7\u673A\u6784"})}],onChange:function(F){d(F)}},actions:[(0,e.jsx)(ke.ZP,{icon:(0,e.jsx)(fr.Z,{}),type:"primary",onClick:function(){p(!0)},children:"\u65B0\u589E\u6388\u6743"},"create")]}}),(0,e.jsx)(fn,{subjectType:a,open:o,onCancel:function(){p(!1)},appId:c},"create")]})},xn=Cn,gt=m(36489),Ct=m(27101),xt=m(93977),Ve=m(96597),Me=m(21843),ur=m(63820),we=m(50157),Br=m(93179),Lr=m(34006),yn=function(n){var t=n.open,a=n.onCancel,d=n.onFinish,l=n.appId,s=(0,i.useState)(function(){return[]}),o=B()(s,2),p=o[0],u=o[1],c=(0,i.useState)(!1),w=B()(c,2),C=w[0],F=w[1],O=(0,i.useState)(0),T=B()(O,2),j=T[0],g=T[1],A=(0,i.useRef)([]),f=re.Z.useForm(),Z=B()(f,1),h=Z[0],y=(0,i.useRef)();(0,i.useEffect)(function(){},[t]);var b=[{title:"\u6743\u9650\u7C7B\u578B",key:"type",dataIndex:"type",valueType:"select",width:80,fieldProps:{allowClear:!1,options:[{value:"DATA",label:"\u6570\u636E"},{value:"MENU",label:"\u83DC\u5355"},{value:"BUTTON",label:"\u6309\u94AE"},{value:"API",label:"API"},{value:"OTHER",label:"\u5176\u4ED6"}]},formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u6743\u9650\u503C",dataIndex:"value",width:150,formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u63CF\u8FF0",dataIndex:"name",width:150,formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u64CD\u4F5C",fixed:"right",align:"center",width:30,valueType:"option"}];return(0,e.jsxs)(Me.L,{formMapRef:A,current:j,onCurrentChange:g,stepsFormRender:function(x,E){return(0,e.jsx)(Lr.Z,{title:"\u521B\u5EFA\u8D44\u6E90",width:600,maskClosable:!0,destroyOnClose:!0,onClose:function(M){g(0),a(M)},open:t,footer:(0,e.jsx)(Ve.Z,{style:{float:"right"},children:E}),children:(0,e.jsx)(Pe.Z,{spinning:C,children:x})})},onFinish:function(){var P=L()(v()().mark(function x(E){var D;return v()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return F(!0),$.next=3,d==null?void 0:d(E);case 3:return D=$.sent,F(!1),g(0),$.abrupt("return",D);case 7:case"end":return $.stop()}},x)}));return function(x){return P.apply(this,arguments)}}(),children:[(0,e.jsxs)(Me.L.StepForm,{scrollToFirstError:!0,name:"basic",title:"\u57FA\u672C\u4FE1\u606F",layout:"horizontal",labelCol:{span:4},wrapperCol:{span:19},labelAlign:"right",children:[(0,e.jsx)(K.Z,{name:"name",label:"\u8D44\u6E90\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u8D44\u6E90\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D44\u6E90\u540D\u79F0"},{validator:function(){var P=L()(v()().mark(function E(D,M){var $,S,I;return v()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(M){U.next=2;break}return U.abrupt("return",Promise.resolve());case 2:return U.next=4,(0,Q.OR)(l,"NAME",M);case 4:if($=U.sent,S=$.success,I=$.result,S){U.next=9;break}return U.abrupt("return",Promise.reject());case 9:if(I){U.next=11;break}return U.abrupt("return",Promise.reject(new Error("\u8D44\u6E90\u540D\u79F0\u5DF2\u5B58\u5728")));case 11:case"end":return U.stop()}},E)}));function x(E,D){return P.apply(this,arguments)}return x}(),validateTrigger:["onBlur"]}]}),(0,e.jsx)(K.Z,{name:"code",label:"\u8D44\u6E90\u7F16\u7801",placeholder:"\u8BF7\u8F93\u5165\u8D44\u6E90\u7F16\u7801",rules:[{required:!0,message:"\u8D44\u6E90\u7F16\u7801\u4E3A\u5FC5\u586B\u9879"},{validator:function(){var P=L()(v()().mark(function E(D,M){var $,S,I;return v()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(M){U.next=2;break}return U.abrupt("return",Promise.resolve());case 2:return F(!0),U.next=5,(0,Q.OR)(l,"CODE",M);case 5:if($=U.sent,S=$.success,I=$.result,F(!1),S){U.next=11;break}return U.abrupt("return",Promise.reject());case 11:if(I){U.next=13;break}return U.abrupt("return",Promise.reject(new Error("\u8D44\u6E90\u7F16\u7801\u5DF2\u5B58\u5728")));case 13:case"end":return U.stop()}},E)}));function x(E,D){return P.apply(this,arguments)}return x}(),validateTrigger:["onBlur"]}],extra:"\u8D44\u6E90\u7F16\u7801\u5728\u5F53\u524D\u5E94\u7528\u4E2D\u7684\u552F\u4E00\u6807\u8BC6\uFF0C\u4E0D\u80FD\u91CD\u590D\uFF0C\u4EC5\u652F\u6301\u82F1\u6587\u3001\u6570\u5B57\u3001\u4E0B\u5212\u7EBF\uFF0C\u521B\u5EFA\u540E\u4E0D\u53EF\u4FEE\u6539\u3002"}),(0,e.jsx)(ur.Z,{name:"desc",fieldProps:{rows:2},label:"\u8D44\u6E90\u63CF\u8FF0",placeholder:"\u8BF7\u8F93\u5165\u8D44\u6E90\u63CF\u8FF0",rules:[{required:!0,message:"\u8D44\u6E90\u63CF\u8FF0\u4E3A\u5FC5\u586B\u9879"}]})]}),(0,e.jsx)(Me.L.StepForm,{scrollToFirstError:!0,name:"actions",title:"\u6743\u9650\u9879",layout:"vertical",labelAlign:"right",onFinish:L()(v()().mark(function P(){var x;return v()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return F(!0),D.next=3,h.validateFields();case 3:if(x=D.sent,F(!1),!x){D.next=7;break}return D.abrupt("return",Promise.resolve(!0));case 7:return D.abrupt("return",Promise.resolve(!1));case 8:case"end":return D.stop()}},P)})),children:(0,e.jsx)(we.A.Item,{label:"\u8D44\u6E90\u6743\u9650",name:"actions",trigger:"onValuesChange",rules:[{required:!0,message:"\u8D44\u6E90\u6743\u9650\u4E3A\u5FC5\u586B\u9879"}],tooltip:"\u4E3A\u8D44\u6E90\u5B9A\u4E49\u6743\u9650\uFF0C\u8BF7\u9009\u62E9\u6743\u9650\u7C7B\u578B\uFF0C\u5E76\u914D\u7F6E\u6743\u9650\u503C\u3002",children:(0,e.jsx)(Br.Z,{rowKey:"key",scroll:{x:700},actionRef:y,toolBarRender:!1,columns:b,recordCreatorProps:{creatorButtonText:"\u6DFB\u52A0\u8D44\u6E90\u6743\u9650",newRecordType:"dataSource",position:"bottom",record:function(){return{key:Date.now()}}},editable:{form:h,type:"multiple",editableKeys:p,onChange:u,deletePopconfirmMessage:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u6B64\u6743\u9650\u8D44\u6E90\u5417\uFF1F",actionRender:function(x,E,D){return[D.delete]}}})})})]})},bn=yn,yt=m(96323),En=function(n){var t=n.open,a=n.onCancel,d=n.onFinish,l=n.id,s=n.appId,o=(0,i.useState)(!1),p=B()(o,2),u=p[0],c=p[1],w=(0,i.useState)(0),C=B()(w,2),F=C[0],O=C[1],T=(0,i.useState)(function(){return[]}),j=B()(T,2),g=j[0],A=j[1],f=(0,i.useRef)([]),Z=re.Z.useForm(),h=B()(Z,1),y=h[0],b=(0,i.useRef)();(0,se.Z)(L()(v()().mark(function x(){var E,D,M,$,S;return v()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!(t&&l)){z.next=14;break}return c(!0),z.next=4,(0,Q.NZ)(l);case 4:if(E=z.sent,D=E.success,M=E.result,!(D&&M)){z.next=12;break}return f==null||($=f.current)===null||$===void 0||$.forEach(function(U){var V;U==null||(V=U.current)===null||V===void 0||V.setFieldsValue(N()(N()({},M),{},{id:l}))}),A((S=M.actions)===null||S===void 0?void 0:S.map(function(U){return U.id})),c(!1),z.abrupt("return");case 12:a(),J.ZP.warning("\u672A\u83B7\u53D6\u5230\u8BE5".concat(l,"\u8D44\u6E90\u6570\u636E\uFF01"));case 14:case"end":return z.stop()}},x)})),[l,a,t]);var P=[{title:"\u6743\u9650\u7C7B\u578B",key:"type",dataIndex:"type",valueType:"select",width:80,fieldProps:{allowClear:!1,options:[{value:"DATA",label:"\u6570\u636E"},{value:"MENU",label:"\u83DC\u5355"},{value:"BUTTON",label:"\u6309\u94AE"},{value:"API",label:"API"},{value:"OTHER",label:"\u5176\u4ED6"}]},formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u6743\u9650\u503C",dataIndex:"value",copyable:!0,width:150,formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u63CF\u8FF0",dataIndex:"name",width:150,formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u64CD\u4F5C",fixed:"right",align:"center",width:30,valueType:"option"}];return(0,e.jsxs)(Me.L,{formMapRef:f,current:F,onCurrentChange:O,stepsFormRender:function(E,D){return(0,e.jsx)(Lr.Z,{title:"\u4FEE\u6539\u8D44\u6E90",width:600,maskClosable:!0,destroyOnClose:!0,onClose:function($){O(0),a($)},open:t,footer:(0,e.jsx)(Ve.Z,{style:{float:"right"},children:D}),children:(0,e.jsx)(Pe.Z,{spinning:u,children:E})})},onFinish:function(){var x=L()(v()().mark(function E(D){var M;return v()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return c(!0),S.next=3,d==null?void 0:d(D);case 3:return M=S.sent,c(!1),O(0),S.abrupt("return",M);case 7:case"end":return S.stop()}},E)}));return function(E){return x.apply(this,arguments)}}(),children:[(0,e.jsxs)(Me.L.StepForm,{scrollToFirstError:!0,name:"basic",title:"\u57FA\u672C\u4FE1\u606F",layout:"horizontal",labelCol:{span:4},wrapperCol:{span:19},labelAlign:"right",children:[(0,e.jsx)(K.Z,{name:"id",hidden:!0}),(0,e.jsx)(K.Z,{name:"name",label:"\u8D44\u6E90\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u8D44\u6E90\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D44\u6E90\u540D\u79F0"},{validator:function(){var x=L()(v()().mark(function D(M,$){var S,I,z;return v()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if($){V.next=2;break}return V.abrupt("return",Promise.resolve());case 2:return c(!0),V.next=5,(0,Q.OR)(s,"NAME",$,l);case 5:if(S=V.sent,I=S.success,z=S.result,c(!1),I){V.next=11;break}return V.abrupt("return",Promise.reject());case 11:if(z){V.next=13;break}return V.abrupt("return",Promise.reject(new Error("\u8D44\u6E90\u540D\u79F0\u5DF2\u5B58\u5728")));case 13:case"end":return V.stop()}},D)}));function E(D,M){return x.apply(this,arguments)}return E}(),validateTrigger:["onBlur"]}]}),(0,e.jsx)(K.Z,{name:"code",label:"\u8D44\u6E90\u7F16\u7801",placeholder:"\u8BF7\u8F93\u5165\u8D44\u6E90\u7F16\u7801",proFieldProps:{render:function(E){return E&&(0,e.jsx)(yt.Z,{copyable:{text:E},style:{marginBottom:"0"},children:(0,e.jsx)("span",{dangerouslySetInnerHTML:{__html:"<span>".concat(E,"</span>")}})})}},readonly:!0,extra:"\u8D44\u6E90\u7F16\u7801\u5728\u5F53\u524D\u5E94\u7528\u4E2D\u7684\u552F\u4E00\u6807\u8BC6\uFF0C\u4E0D\u80FD\u91CD\u590D\uFF0C\u4EC5\u652F\u6301\u82F1\u6587\u3001\u6570\u5B57\u3001\u4E0B\u5212\u7EBF\uFF0C\u521B\u5EFA\u540E\u4E0D\u53EF\u4FEE\u6539\u3002"}),(0,e.jsx)(ur.Z,{name:"desc",fieldProps:{rows:2},label:"\u8D44\u6E90\u63CF\u8FF0",placeholder:"\u8BF7\u8F93\u5165\u8D44\u6E90\u63CF\u8FF0"})]}),(0,e.jsx)(Me.L.StepForm,{scrollToFirstError:!0,name:"actions",title:"\u6743\u9650\u9879",layout:"vertical",labelAlign:"right",onFinish:L()(v()().mark(function x(){var E;return v()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return c(!0),M.next=3,y.validateFields();case 3:if(E=M.sent,c(!1),!E){M.next=7;break}return M.abrupt("return",Promise.resolve(!0));case 7:return M.abrupt("return",Promise.resolve(!1));case 8:case"end":return M.stop()}},x)})),children:(0,e.jsx)(we.A.Item,{label:"\u8D44\u6E90\u6743\u9650",name:"actions",trigger:"onValuesChange",rules:[{required:!0,message:"\u8D44\u6E90\u6743\u9650\u4E3A\u5FC5\u586B\u9879"}],tooltip:"\u4E3A\u8D44\u6E90\u5B9A\u4E49\u6743\u9650\uFF0C\u8BF7\u9009\u62E9\u6743\u9650\u7C7B\u578B\uFF0C\u5E76\u914D\u7F6E\u6743\u9650\u503C\u3002",children:(0,e.jsx)(Br.Z,{rowKey:"id",scroll:{x:700},actionRef:b,toolBarRender:!1,columns:P,recordCreatorProps:{creatorButtonText:"\u6DFB\u52A0\u8D44\u6E90\u6743\u9650",newRecordType:"dataSource",position:"bottom",record:function(){return{id:Date.now()}}},editable:{form:y,type:"multiple",editableKeys:g,onChange:A,deletePopconfirmMessage:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u6B64\u6743\u9650\u8D44\u6E90\u5417\uFF1F",actionRender:function(E,D,M){return[M.delete]}}})})})]})},Fn=En,An=Ct.Z.confirm,Sn=function(r){var n=(0,i.useRef)(),t=r.appId,a=(0,i.useState)(!1),d=B()(a,2),l=d[0],s=d[1],o=(0,i.useState)(!1),p=B()(o,2),u=p[0],c=p[1],w=(0,i.useState)(),C=B()(w,2),F=C[0],O=C[1],T=[{title:"\u8D44\u6E90\u540D\u79F0",dataIndex:"name",ellipsis:!0,fixed:"left",copyable:!1},{title:"\u8D44\u6E90\u7F16\u7801",dataIndex:"code",ellipsis:!0,copyable:!0},{title:"\u8D44\u6E90\u63CF\u8FF0",dataIndex:"desc",search:!1,ellipsis:!0,copyable:!1},{title:"\u72B6\u6001",dataIndex:"enabled",search:!1,align:"center",render:function(g,A){return(0,e.jsx)(xt.Z,{checked:g,onChange:function(){var f=L()(v()().mark(function Z(h){var y,b,P;return v()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!h){E.next=9;break}return E.next=3,(0,Q.PE)(A.id);case 3:if(y=E.sent,b=y.success,!b){E.next=9;break}return J.ZP.success("\u64CD\u4F5C\u6210\u529F"),(P=n.current)===null||P===void 0||P.reload(),E.abrupt("return");case 9:An({title:"\u8B66\u544A",icon:(0,e.jsx)(gt.Z,{}),content:"\u786E\u5B9A\u7981\u7528\u6B64\u8D44\u6E90\uFF1F",okText:"\u786E\u5B9A",okType:"danger",cancelText:"\u53D6\u6D88",centered:!0,onOk:function(){var D=L()(v()().mark(function $(){var S,I,z;return v()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,(0,Q._G)(A.id);case 2:if(S=V.sent,I=S.success,!I){V.next=8;break}return J.ZP.success("\u64CD\u4F5C\u6210\u529F"),(z=n.current)===null||z===void 0||z.reload(),V.abrupt("return");case 8:case"end":return V.stop()}},$)}));function M(){return D.apply(this,arguments)}return M}(),onCancel:function(){}});case 10:case"end":return E.stop()}},Z)}));return function(Z){return f.apply(this,arguments)}}()})}},{title:"\u64CD\u4F5C",align:"center",valueType:"option",fixed:"right",width:150,render:function(g,A){return[(0,e.jsx)("a",{target:"_blank",onClick:function(){O(A.id),c(!0)},children:"\u4FEE\u6539"},"update"),(0,e.jsx)(ir.Z,{title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",placement:"bottomRight",icon:(0,e.jsx)(or.Z,{style:{color:"red"}}),onConfirm:L()(v()().mark(function f(){return v()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:(0,Q.IV)(A.id).then(function(y){if(y.success&&y.result){var b;J.ZP.success("\u64CD\u4F5C\u6210\u529F"),(b=n.current)===null||b===void 0||b.reload();return}});case 1:case"end":return h.stop()}},f)})),okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)("a",{target:"_blank",style:{color:"red"},children:"\u5220\u9664"},"remove")},"delete")]}}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Er.Z,{columns:T,actionRef:n,request:Q.UK,params:{appId:t},rowKey:"id",options:!1,scroll:{x:650},style:{height:"calc(100vh - 190px)",overflow:"auto"},cardProps:{style:{minHeight:"100%"}},toolbar:{actions:[(0,e.jsx)(ke.ZP,{type:"primary",icon:(0,e.jsx)(fr.Z,{}),onClick:function(){s(!0)},children:"\u65B0\u589E\u8D44\u6E90"},"create")]},pagination:{showQuickJumper:!0,defaultPageSize:10},rowSelection:{selections:[_e.Z.SELECTION_ALL,_e.Z.SELECTION_INVERT]},tableAlertRender:function(g){var A=g.selectedRowKeys,f=g.onCleanSelected;return(0,e.jsx)(Ve.Z,{size:24,children:(0,e.jsxs)("span",{children:["\u5DF2\u9009 ",A.length," \u9879",(0,e.jsx)("a",{style:{marginLeft:8},onClick:f,children:"\u53D6\u6D88\u9009\u62E9"})]})})},tableAlertOptionRender:function(g){return(0,e.jsx)(Ve.Z,{size:16,children:(0,e.jsx)(ir.Z,{title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",placement:"bottomRight",icon:(0,e.jsx)(or.Z,{style:{color:"red"}}),onConfirm:L()(v()().mark(function A(){var f,Z,h;return v()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,(0,Q.O0)(g.selectedRowKeys);case 2:if(f=b.sent,Z=f.success,!Z){b.next=9;break}return J.ZP.success("\u64CD\u4F5C\u6210\u529F"),g.onCleanSelected(),(h=n.current)===null||h===void 0||h.reload(),b.abrupt("return");case 9:case"end":return b.stop()}},A)})),okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)("a",{target:"_blank",style:{color:"red"},children:"\u6279\u91CF\u5220\u9664"},"remove")},"delete")})}}),(0,e.jsx)(bn,{appId:t,open:l,onCancel:function(){s(!1)},onFinish:function(){var j=L()(v()().mark(function g(A){var f,Z,h;return v()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,(0,Q.bm)(N()(N()({},A),{},{appId:t}));case 2:if(f=b.sent,Z=f.success,!Z){b.next=9;break}return J.ZP.success("\u64CD\u4F5C\u6210\u529F"),(h=n.current)===null||h===void 0||h.reload(),s(!1),b.abrupt("return",Promise.resolve(!0));case 9:return b.abrupt("return",Promise.resolve(!1));case 10:case"end":return b.stop()}},g)}));return function(g){return j.apply(this,arguments)}}()}),(0,e.jsx)(Fn,{id:F,appId:t,open:u,onCancel:function(){c(!1)},onFinish:function(){var j=L()(v()().mark(function g(A){var f,Z,h;return v()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,(0,Q.Y3)(N()(N()({},A),{},{appId:t}));case 2:f=b.sent,Z=f.success,Z&&((h=n.current)===null||h===void 0||h.reload(),c(!1),J.ZP.success("\u64CD\u4F5C\u6210\u529F"));case 5:case"end":return b.stop()}},g)}));return function(g){return j.apply(this,arguments)}}()})]})},jn=m(74958),Pn=ve.Z.Panel,wn=function(n){var t=n.open,a=n.onCancel,d=n.onFinish,l=n.appId,s=(0,i.useRef)([]),o=(0,i.useState)(),p=B()(o,2),u=p[0],c=p[1],w=(0,i.useState)(!1),C=B()(w,2),F=C[0],O=C[1],T=(0,i.useState)(0),j=B()(T,2),g=j[0],A=j[1],f=(0,i.useState)([]),Z=B()(f,2),h=Z[0],y=Z[1];(0,se.Z)(L()(v()().mark(function P(){var x,E,D;return v()().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(!t){$.next=9;break}return O(!0),s==null||(x=s.current)===null||x===void 0||x.forEach(function(S){var I;(I=S.current)===null||I===void 0||I.setFieldsValue({code:(0,jn.MX)(9),appId:l})}),$.next=5,(0,Q.Sf)({appId:l});case 5:E=$.sent,D=E.result,c(D),O(!1);case 9:case"end":return $.stop()}},P)})),[l,t]);var b=function(x){if(x.target.checked){y([].concat(ee()(h),[x.target.value]));return}y(h==null?void 0:h.filter(function(E){return E!==x.target.value}))};return(0,e.jsxs)(Me.L,{onFinish:function(){var P=L()(v()().mark(function x(E){var D;return v()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return O(!0),console.log("permissions",h),$.next=4,d==null?void 0:d(E);case 4:return D=$.sent,O(!1),A(0),$.abrupt("return",D);case 8:case"end":return $.stop()}},x)}));return function(x){return P.apply(this,arguments)}}(),current:g,onCurrentChange:A,formProps:{validateMessages:{required:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}},formMapRef:s,stepsFormRender:function(x,E){return(0,e.jsx)(Lr.Z,{title:"\u65B0\u589E\u89D2\u8272",width:600,forceRender:!0,onClose:function(){A(0),a()},open:t,footer:(0,e.jsx)(Ve.Z,{style:{float:"right"},children:E}),destroyOnClose:!0,children:(0,e.jsx)(Pe.Z,{spinning:F,children:x})})},children:[(0,e.jsxs)(Me.L.StepForm,{scrollToFirstError:!0,name:"basic",title:"\u57FA\u672C\u4FE1\u606F",layout:"horizontal",labelCol:{span:4},wrapperCol:{span:19},labelAlign:"right",children:[(0,e.jsx)(K.Z,{name:"appId",hidden:!0}),(0,e.jsx)(K.Z,{name:"name",label:"\u89D2\u8272\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0",rules:[{required:!0,message:"\u89D2\u8272\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"},{validator:function(){var P=L()(v()().mark(function E(D,M){var $,S,I;return v()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(M){U.next=2;break}return U.abrupt("return",Promise.resolve());case 2:return O(!0),U.next=5,(0,Q.ld)(l,"NAME",M);case 5:if($=U.sent,S=$.success,I=$.result,O(!1),S){U.next=11;break}return U.abrupt("return",Promise.reject());case 11:if(I){U.next=13;break}return U.abrupt("return",Promise.reject(new Error("\u89D2\u8272\u540D\u79F0\u5DF2\u5B58\u5728")));case 13:case"end":return U.stop()}},E)}));function x(E,D){return P.apply(this,arguments)}return x}(),validateTrigger:["onBlur"]}]}),(0,e.jsx)(K.Z,{name:"code",label:"\u89D2\u8272\u6807\u8BC6",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u6807\u8BC6",rules:[{required:!0,message:"\u89D2\u8272\u6807\u8BC6\u4E3A\u5FC5\u586B\u9879"},{validator:function(){var P=L()(v()().mark(function E(D,M){var $,S,I;return v()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(M){U.next=2;break}return U.abrupt("return",Promise.resolve());case 2:return O(!0),U.next=5,(0,Q.ld)(l,"CODE",M);case 5:if($=U.sent,S=$.success,I=$.result,O(!1),S){U.next=11;break}return U.abrupt("return",Promise.reject());case 11:if(I){U.next=13;break}return U.abrupt("return",Promise.reject(new Error("\u89D2\u8272\u6807\u8BC6\u5DF2\u5B58\u5728")));case 13:case"end":return U.stop()}},E)}));function x(E,D){return P.apply(this,arguments)}return x}(),validateTrigger:["onBlur"]}],extra:"\u89D2\u8272\u7F16\u7801\u5728\u5F53\u524D\u5E94\u7528\u4E2D\u7684\u552F\u4E00\u6807\u8BC6\uFF0C\u4E0D\u80FD\u91CD\u590D\uFF0C\u4EC5\u652F\u6301\u82F1\u6587\u3001\u6570\u5B57\u3001\u4E0B\u5212\u7EBF\uFF0C\u521B\u5EFA\u540E\u4E0D\u53EF\u4FEE\u6539\u3002"}),(0,e.jsx)(ur.Z,{name:"remark",label:"\u89D2\u8272\u63CF\u8FF0",fieldProps:{rows:2},placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u63CF\u8FF0"})]}),(0,e.jsx)(Me.L.StepForm,{scrollToFirstError:!0,name:"permission",title:"\u5206\u914D\u6743\u9650",layout:"horizontal",labelCol:{span:4},wrapperCol:{span:19},children:u==null?void 0:u.map(function(P){var x,E,D,M,$;return(0,e.jsxs)("div",{children:[(0,e.jsx)(ve.Z,{bordered:!1,children:(0,e.jsxs)(Pn,{header:P.name,children:[P.menus.length>0&&(0,e.jsx)(oe.Z.Group,{name:"menu_".concat(P.id),label:"\u83DC\u5355\u6743\u9650",layout:"vertical",options:(x=P.menus)===null||x===void 0?void 0:x.map(function(S){return{label:S.name,value:S.id,onChange:b}})}),P.buttons.length>0&&(0,e.jsx)(oe.Z.Group,{name:"button_".concat(P.id),label:"\u6309\u94AE\u6743\u9650",layout:"vertical",options:(E=P.buttons)===null||E===void 0?void 0:E.map(function(S){return{label:S.name,value:S.id,onChange:b}})}),P.apis.length>0&&(0,e.jsx)(oe.Z.Group,{name:"api_".concat(P.id),layout:"vertical",label:"\u63A5\u53E3\u6743\u9650",options:(D=P.apis)===null||D===void 0?void 0:D.map(function(S){return{label:S.name,value:S.id,onChange:b}})}),P.datas.length>0&&(0,e.jsx)(oe.Z.Group,{name:"data_".concat(P.id),layout:"vertical",label:"\u6570\u636E\u6743\u9650",options:(M=P.apis)===null||M===void 0?void 0:M.map(function(S){return{label:S.name,value:S.id,onChange:b}})}),P.others.length>0&&(0,e.jsx)(oe.Z.Group,{name:"other_".concat(P.id),layout:"vertical",label:"\u5176\u4ED6\u6743\u9650",options:($=P.apis)===null||$===void 0?void 0:$.map(function(S){return{label:S.name,value:S.id,onChange:b}})})]},P.id)},P.id),(0,e.jsx)("br",{})]},P.id)})})]},"create")},Zn=wn,In=ve.Z.Panel,Rn=function(n){var t=n.open,a=n.onCancel,d=n.onFinish,l=n.id,s=(0,i.useState)(!1),o=B()(s,2),p=o[0],u=o[1],c=(0,i.useState)(),w=B()(c,2),C=w[0],F=w[1],O=(0,i.useRef)(),T=(0,i.useRef)([]),j=(0,i.useState)(0),g=B()(j,2),A=g[0],f=g[1],Z=(0,i.useState)([]),h=B()(Z,2),y=h[0],b=h[1];(0,se.Z)(L()(v()().mark(function x(){var E,D,M,$;return v()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!(t&&l)){I.next=14;break}return u(!0),F([]),I.next=5,(0,Q.Yq)(l);case 5:if(E=I.sent,D=E.success,M=E.result,!(D&&M)){I.next=12;break}return T==null||($=T.current)===null||$===void 0||$.forEach(function(z){var U;(U=z.current)===null||U===void 0||U.setFieldsValue(N()({},M))}),u(!1),I.abrupt("return");case 12:a(),J.ZP.warning("\u672A\u83B7\u53D6\u5230\u8BE5".concat(l,"\u89D2\u8272\u6570\u636E\uFF01")).then();case 14:case"end":return I.stop()}},x)})),[l,a,t]);var P=function(E){if(E.target.checked){b([].concat(ee()(y),[E.target.value]));return}b(y==null?void 0:y.filter(function(D){return D!==E.target.value}))};return(0,e.jsxs)(Me.L,{onFinish:function(){var x=L()(v()().mark(function E(D){var M;return v()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return u(!0),console.log("permissions",y),S.next=4,d==null?void 0:d(D);case 4:return M=S.sent,u(!1),f(0),S.abrupt("return",M);case 8:case"end":return S.stop()}},E)}));return function(E){return x.apply(this,arguments)}}(),current:A,onCurrentChange:f,formProps:{validateMessages:{required:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}},formMapRef:T,stepsFormRender:function(E,D){return(0,e.jsx)(Lr.Z,{title:"\u4FEE\u6539\u89D2\u8272",width:600,onClose:function(){f(0),a()},open:t,footer:(0,e.jsx)(Ve.Z,{style:{float:"right"},children:D}),destroyOnClose:!0,children:(0,e.jsxs)(Pe.Z,{spinning:p,children:[" ",E]})})},children:[(0,e.jsxs)(Me.L.StepForm,{scrollToFirstError:!0,name:"basic",title:"\u57FA\u672C\u4FE1\u606F",layout:"horizontal",labelCol:{span:4},wrapperCol:{span:19},labelAlign:"right",formRef:O,children:[(0,e.jsx)(K.Z,{name:"id",hidden:!0}),(0,e.jsx)(K.Z,{name:"appId",hidden:!0}),(0,e.jsx)(K.Z,{name:"name",label:"\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0"},{validator:function(){var x=L()(v()().mark(function D(M,$){var S,I,z,U;return v()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if($){X.next=2;break}return X.abrupt("return",Promise.resolve());case 2:return u(!0),X.next=5,(0,Q.ld)((S=O.current)===null||S===void 0?void 0:S.getFieldValue("appId"),"NAME",$,l);case 5:if(I=X.sent,z=I.success,U=I.result,u(!1),z){X.next=11;break}return X.abrupt("return",Promise.reject());case 11:if(U){X.next=13;break}return X.abrupt("return",Promise.reject(new Error("\u624B\u673A\u53F7\u5DF2\u5B58\u5728")));case 13:case"end":return X.stop()}},D)}));function E(D,M){return x.apply(this,arguments)}return E}(),validateTrigger:["onBlur"]}],placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0"}),(0,e.jsx)(K.Z,{name:"code",label:"\u6807\u8BC6",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u6807\u8BC6",readonly:!0,proFieldProps:{render:function(E){return E&&(0,e.jsx)(yt.Z,{copyable:{text:E},style:{marginBottom:"0"},children:(0,e.jsx)("span",{dangerouslySetInnerHTML:{__html:"<span>".concat(E,"</span>")}})})}},extra:"\u89D2\u8272\u7F16\u7801\u5728\u5F53\u524D\u5E94\u7528\u4E2D\u7684\u552F\u4E00\u6807\u8BC6\uFF0C\u4E0D\u80FD\u91CD\u590D\uFF0C\u4EC5\u652F\u6301\u82F1\u6587\u3001\u6570\u5B57\u3001\u4E0B\u5212\u7EBF\uFF0C\u521B\u5EFA\u540E\u4E0D\u53EF\u4FEE\u6539\u3002"}),(0,e.jsx)(ur.Z,{name:"remark",fieldProps:{rows:2},label:"\u63CF\u8FF0",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u63CF\u8FF0"})]}),(0,e.jsx)(Me.L.StepForm,{scrollToFirstError:!0,name:"permission",title:"\u5206\u914D\u6743\u9650",layout:"horizontal",labelCol:{span:4},wrapperCol:{span:19},children:C==null?void 0:C.map(function(x){var E,D,M,$,S;return(0,e.jsxs)("div",{children:[(0,e.jsx)(ve.Z,{bordered:!1,children:(0,e.jsxs)(In,{header:x.name,children:[x.menus.length>0&&(0,e.jsx)(oe.Z.Group,{name:"menu_".concat(x.id),label:"\u83DC\u5355\u6743\u9650",layout:"vertical",options:(E=x.menus)===null||E===void 0?void 0:E.map(function(I){return{label:I.name,value:I.id,onChange:P}})}),x.buttons.length>0&&(0,e.jsx)(oe.Z.Group,{name:"button_".concat(x.id),label:"\u6309\u94AE\u6743\u9650",layout:"vertical",options:(D=x.buttons)===null||D===void 0?void 0:D.map(function(I){return{label:I.name,value:I.id,onChange:P}})}),x.apis.length>0&&(0,e.jsx)(oe.Z.Group,{name:"api_".concat(x.id),layout:"vertical",label:"\u63A5\u53E3\u6743\u9650",options:(M=x.apis)===null||M===void 0?void 0:M.map(function(I){return{label:I.name,value:I.id,onChange:P}})}),x.datas.length>0&&(0,e.jsx)(oe.Z.Group,{name:"data_".concat(x.id),layout:"vertical",label:"\u6570\u636E\u6743\u9650",options:($=x.apis)===null||$===void 0?void 0:$.map(function(I){return{label:I.name,value:I.id,onChange:P}})}),x.others.length>0&&(0,e.jsx)(oe.Z.Group,{name:"other_".concat(x.id),layout:"vertical",label:"\u5176\u4ED6\u6743\u9650",options:(S=x.apis)===null||S===void 0?void 0:S.map(function(I){return{label:I.name,value:I.id,onChange:P}})})]},x.id)},x.id),(0,e.jsx)("br",{})]},x.id)})})]},"update")},Dn=Rn,On=Ct.Z.confirm,Tn=function(r){var n=(0,i.useRef)(),t=r.appId,a=(0,i.useState)(!1),d=B()(a,2),l=d[0],s=d[1],o=(0,i.useState)(!1),p=B()(o,2),u=p[0],c=p[1],w=(0,i.useState)(),C=B()(w,2),F=C[0],O=C[1],T=[{title:"\u89D2\u8272\u540D\u79F0",dataIndex:"name",ellipsis:!0,fixed:"left"},{title:"\u89D2\u8272\u7F16\u7801",dataIndex:"code",copyable:!0,search:!1},{title:"\u72B6\u6001",dataIndex:"enabled",search:!1,align:"center",render:function(g,A){return(0,e.jsx)(xt.Z,{checked:g,onChange:function(){var f=L()(v()().mark(function Z(h){var y,b,P;return v()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!h){E.next=9;break}return E.next=3,(0,Q.Ko)(A.id);case 3:if(y=E.sent,b=y.success,!b){E.next=9;break}return J.ZP.success("\u64CD\u4F5C\u6210\u529F"),(P=n.current)===null||P===void 0||P.reload(),E.abrupt("return");case 9:On({title:"\u8B66\u544A",icon:(0,e.jsx)(gt.Z,{}),content:"\u786E\u5B9A\u7981\u7528\u6B64\u89D2\u8272\uFF1F",okText:"\u786E\u5B9A",okType:"danger",cancelText:"\u53D6\u6D88",centered:!0,onOk:function(){var D=L()(v()().mark(function $(){var S,I,z;return v()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,(0,Q.RN)(A.id);case 2:if(S=V.sent,I=S.success,!I){V.next=8;break}return J.ZP.success("\u64CD\u4F5C\u6210\u529F"),(z=n.current)===null||z===void 0||z.reload(),V.abrupt("return");case 8:case"end":return V.stop()}},$)}));function M(){return D.apply(this,arguments)}return M}(),onCancel:function(){}});case 10:case"end":return E.stop()}},Z)}));return function(Z){return f.apply(this,arguments)}}()})}},{title:"\u89D2\u8272\u63CF\u8FF0",ellipsis:!0,dataIndex:"remark",search:!1,copyable:!1},{title:"\u64CD\u4F5C",align:"center",valueType:"option",width:180,fixed:"right",render:function(g,A){return[(0,e.jsx)("a",{target:"_blank",onClick:function(){c(!0),O(A.id)},children:"\u4FEE\u6539"},"update"),(0,e.jsx)(ir.Z,{title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",placement:"bottomRight",icon:(0,e.jsx)(or.Z,{style:{color:"red"}}),onConfirm:L()(v()().mark(function f(){var Z,h,y;return v()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,Q.AO)(A.id);case 2:if(Z=P.sent,h=Z.success,!h){P.next=8;break}return J.ZP.success("\u64CD\u4F5C\u6210\u529F"),(y=n.current)===null||y===void 0||y.reload(),P.abrupt("return");case 8:case"end":return P.stop()}},f)})),okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)("a",{target:"_blank",style:{color:"red"},children:"\u5220\u9664"},"remove")},"delete")]}}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Er.Z,{columns:T,pagination:{showQuickJumper:!0,defaultPageSize:10},rowSelection:{selections:[_e.Z.SELECTION_ALL,_e.Z.SELECTION_INVERT]},style:{height:"calc(100vh - 190px)",overflow:"auto"},cardProps:{style:{minHeight:"100%"}},scroll:{x:700},options:!1,tableAlertRender:function(g){var A=g.selectedRowKeys,f=g.onCleanSelected;return(0,e.jsx)(Ve.Z,{size:24,children:(0,e.jsxs)("span",{children:["\u5DF2\u9009 ",A.length," \u9879",(0,e.jsx)("a",{style:{marginLeft:8},onClick:f,children:"\u53D6\u6D88\u9009\u62E9"})]})})},tableAlertOptionRender:function(g){return(0,e.jsx)(Ve.Z,{size:16,children:(0,e.jsx)(ir.Z,{title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",placement:"bottomRight",icon:(0,e.jsx)(or.Z,{style:{color:"red"}}),onConfirm:L()(v()().mark(function A(){var f,Z,h;return v()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,(0,Q.O0)(g.selectedRowKeys);case 2:if(f=b.sent,Z=f.success,!Z){b.next=9;break}return J.ZP.success("\u64CD\u4F5C\u6210\u529F"),g.onCleanSelected(),(h=n.current)===null||h===void 0||h.reload(),b.abrupt("return");case 9:case"end":return b.stop()}},A)})),okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)("a",{target:"_blank",style:{color:"red"},children:"\u6279\u91CF\u5220\u9664"},"remove")},"delete")})},actionRef:n,params:{appId:t},request:Q.TT,rowKey:"id",dateFormatter:"string",toolbar:{search:!1,actions:[(0,e.jsx)(ke.ZP,{type:"primary",icon:(0,e.jsx)(fr.Z,{}),onClick:function(){s(!0)},children:"\u65B0\u589E\u89D2\u8272"},"create")]}}),(0,e.jsx)(Zn,{appId:t,open:l,onCancel:function(){s(!1)},onFinish:function(){var j=L()(v()().mark(function g(A){var f,Z,h,y;return v()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,Q.pW)(A);case 2:if(f=P.sent,Z=f.success,h=f.result,!(Z&&h)){P.next=10;break}return J.ZP.success("\u64CD\u4F5C\u6210\u529F"),(y=n.current)===null||y===void 0||y.reload(),s(!1),P.abrupt("return");case 10:case"end":return P.stop()}},g)}));return function(g){return j.apply(this,arguments)}}()}),(0,e.jsx)(Dn,{id:F,open:u,onCancel:function(){c(!1)},onFinish:function(){var j=L()(v()().mark(function g(A){var f,Z,h,y;return v()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,Q.UC)(A);case 2:f=P.sent,Z=f.success,h=f.result,Z&&h&&((y=n.current)===null||y===void 0||y.reload(),c(!1),J.ZP.success("\u64CD\u4F5C\u6210\u529F"));case 6:case"end":return P.stop()}},g)}));return function(g){return j.apply(this,arguments)}}()})]})},hr=m(53425),ye=m(53804),Fr=m(98597),he=m(70453),$n=ve.Z.Panel,Bn=function(r){var n=re.Z.useForm(),t=B()(n,1),a=t[0],d=r.protocolEndpoint,l=r.appId,s=r.collapsed,o=s===void 0?!0:s;return(0,se.Z)(L()(v()().mark(function p(){return v()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:a.setFieldsValue(d);case 1:case"end":return c.stop()}},p)})),[l,d]),(0,e.jsx)(we.A,{layout:"horizontal",labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:12}},labelAlign:"right",labelWrap:!0,submitter:!1,form:a,children:(0,e.jsx)(ve.Z,{ghost:!0,expandIconPosition:"start",defaultActiveKey:o?void 0:"config",children:(0,e.jsx)($n,{header:(0,e.jsx)("a",{children:"\u5E94\u7528\u914D\u7F6E\u4FE1\u606F"}),children:(0,e.jsx)($e.Z,{style:{backgroundColor:"#f1f1f2",border:"1px solid #f1f1f2"},description:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(K.Z,{label:"CAS \u670D\u52A1\u5730\u5740\u524D\u7F00",name:"casServerUrlPrefix",readonly:!0,proFieldProps:{render:function(u){return u&&(0,e.jsx)(he.Z.Text,{copyable:!0,children:u})}},fieldProps:{autoComplete:"off"}}),(0,e.jsx)(K.Z,{label:"IdP SSO \u5730\u5740",name:"casSsoEndpoint",extra:"\u5E94\u7528\u53D1\u8D77\u5355\u70B9\u767B\u5F55\u7684\u5730\u5740\u3002",readonly:!0,proFieldProps:{render:function(u){return u&&(0,e.jsx)(he.Z.Text,{copyable:!0,children:u})}},fieldProps:{autoComplete:"off"}}),(0,e.jsx)(K.Z,{label:"\u767B\u51FA\u7AEF\u70B9",name:"casSloEndpoint",extra:"\u5E94\u7528\u53D1\u8D77\u5355\u70B9\u767B\u51FA\u7684\u5730\u5740\u3002",readonly:!0,proFieldProps:{render:function(u){return u&&(0,e.jsx)(he.Z.Text,{copyable:!0,children:u})}},fieldProps:{autoComplete:"off"}}),(0,e.jsx)(K.Z,{label:"service ticket \u68C0\u9A8C\u7AEF\u70B9\uFF08CAS 1.0\uFF09",name:"casValidateEndpoint",readonly:!0,proFieldProps:{render:function(u){return u&&(0,e.jsx)(he.Z.Text,{copyable:!0,children:u})}},fieldProps:{autoComplete:"off"}}),(0,e.jsx)(K.Z,{label:"service ticket \u68C0\u9A8C\u7AEF\u70B9\uFF08CAS 2.0\uFF09",name:"casValidateV2Endpoint",readonly:!0,proFieldProps:{render:function(u){return u&&(0,e.jsx)(he.Z.Text,{copyable:!0,children:u})}},fieldProps:{autoComplete:"off"}}),(0,e.jsx)(K.Z,{label:"service ticket \u68C0\u9A8C\u7AEF\u70B9\uFF08CAS 3.0\uFF09",name:"casValidateV3Endpoint",readonly:!0,proFieldProps:{render:function(u){return u&&(0,e.jsx)(he.Z.Text,{copyable:!0,children:u})}},fieldProps:{autoComplete:"off"}})]})})},"config")})})},Ln={labelCol:{xs:{span:24},sm:{span:7},md:{span:6}},wrapperCol:{xs:{span:24},sm:{span:13},md:{span:14}}},Mn=function(r){var n=r.app,t=n.id,a=n.template,d=re.Z.useForm(),l=B()(d,1),s=l[0],o=(0,i.useState)(!0),p=B()(o,2),u=p[0],c=p[1],w=(0,i.useState)({}),C=B()(w,2),F=C[0],O=C[1],T=function(){var j=L()(v()().mark(function g(){var A,f,Z;return v()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return c(!0),y.next=3,(0,Q.hq)(t);case 3:A=y.sent,f=A.result,Z=A.success,Z&&f&&(s.setFieldsValue(N()(N()({},(0,Se.omit)(f,"protocolEndpoint")),{},{appId:t})),O(f.protocolEndpoint)),c(!1);case 8:case"end":return y.stop()}},g)}));return function(){return j.apply(this,arguments)}}();return(0,se.Z)(L()(v()().mark(function j(){return v()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,T();case 2:case"end":return A.stop()}},j)})),[]),(0,e.jsxs)(Pe.Z,{spinning:u,children:[(0,e.jsxs)(we.A,N()(N()({layout:"horizontal"},Ln),{},{form:s,scrollToFirstError:!0,onFinish:function(){var j=L()(v()().mark(function g(A){var f,Z;return v()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return c(!0),y.next=3,(0,Q.$c)({id:t,template:a,config:(0,Se.omit)(A,"id","template")}).finally(function(){c(!1)});case 3:if(f=y.sent,Z=f.success,!Z){y.next=10;break}return J.ZP.success("\u4FDD\u5B58\u6210\u529F"),y.next=9,T();case 9:return y.abrupt("return",!0);case 10:return J.ZP.error("\u4FDD\u5B58\u5931\u8D25"),y.abrupt("return",!1);case 12:case"end":return y.stop()}},g)}));return function(g){return j.apply(this,arguments)}}(),submitter:{render:function(g,A){return(0,e.jsx)(hr.S,{children:A})}},children:[(0,e.jsx)(K.Z,{label:"CAS \u5BA2\u6237\u7AEF\u7684\u5730\u5740",name:"clientServiceUrl",fieldProps:{allowClear:!1},extra:"\u5355\u70B9\u767B\u5F55\u65F6\uFF0C\u5C06\u9009\u4E2D\u9879\u4F5C\u4E3A CAS \u7528\u6237\u6807\u8BC6\uFF0C\u4F20\u9012\u7ED9\u4E1A\u52A1\u7CFB\u7EDF\u3002",rules:[{required:!0,message:"\u8BF7\u8F93\u5165 CAS \u5BA2\u6237\u7AEF\u7684\u5730\u5740"},{type:"url",message:"CAS \u5BA2\u6237\u7AEF\u5730\u5740\u683C\u5F0F\u4E0D\u6B63\u786E"}]}),(0,e.jsx)(ye.Z,{label:"CAS \u7528\u6237\u6807\u8BC6",name:"userIdentityType",options:[{value:"user.username",label:"\u7528\u6237\u540D"},{value:"user.fullName",label:"\u7528\u6237\u59D3\u540D"},{value:"user.nickName",label:"\u7528\u6237\u6635\u79F0"},{value:"user.email",label:"\u90AE\u7BB1\u5730\u5740"},{value:"app_user.username",label:"\u5E94\u7528\u8D26\u6237"}],fieldProps:{allowClear:!1},extra:"\u5355\u70B9\u767B\u5F55\u65F6\uFF0C\u5C06\u9009\u4E2D\u9879\u4F5C\u4E3A CAS \u7528\u6237\u6807\u8BC6\uFF0C\u4F20\u9012\u7ED9\u4E1A\u52A1\u7CFB\u7EDF\u3002",rules:[{required:!0,message:"\u8BF7\u9009\u62E9 CAS \u7528\u6237\u6807\u8BC6"}]}),(0,e.jsx)(Fr.Z,{name:"serviceTicketExpireTime",label:"ST \u8FC7\u671F\u65F6\u95F4",addonAfter:"\u79D2",extra:"ServiceTicket \u8FC7\u671F\u65F6\u95F4",rules:[{required:!0,message:"\u8BF7\u914D\u7F6E ServiceTicket \u8FC7\u671F\u65F6\u95F4"}]}),(0,e.jsx)(H.Z,{}),(0,e.jsx)(ye.Z,{label:"\u6388\u6743\u8303\u56F4",name:"authorizationType",allowClear:!1,extra:"\u82E5\u9009\u62E9\u624B\u52A8\u6388\u6743\uFF0C\u9700\u8981\u5728 \u8BBF\u95EE\u6388\u6743 \u4E2D\u8FDB\u884C\u6743\u9650\u5206\u914D\u3002",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6388\u6743\u8303\u56F4"}],options:[{value:De.AUTHORIZATION,label:"\u624B\u52A8\u6388\u6743"},{value:De.ALL_ACCESS,label:"\u5168\u5458\u53EF\u8BBF\u95EE"}]}),(0,e.jsx)(ye.Z,{label:"SSO \u53D1\u8D77\u65B9",name:"initLoginType",allowClear:!1,rules:[{required:!0,message:"\u8BF7\u914D\u7F6E SSO \u53D1\u8D77\u65B9"}],options:[{value:Ke.APP,label:"\u53EA\u5141\u8BB8\u5E94\u7528\u53D1\u8D77"},{value:Ke.PORTAL_OR_APP,label:"\u652F\u6301\u95E8\u6237\u548C\u5E94\u7528\u53D1\u8D77"}],extra:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{children:"\u95E8\u6237\u53D1\u8D77\uFF1A\u7531 IAM \u95E8\u6237\u9875\u70B9\u51FB\u8FDB\u884C SSO \u3002"}),(0,e.jsx)("br",{}),(0,e.jsx)("span",{children:"\u5E94\u7528\u53D1\u8D77\uFF1A\u7531\u5E94\u7528\u767B\u5F55\u4E3B\u52A8\u53D1\u8D77\u3002"})]})}),(0,e.jsx)(ze.Z,{name:["initLoginType"],children:function(){return(0,e.jsx)(K.Z,{label:"\u767B\u5F55\u53D1\u8D77\u5730\u5740",name:"initLoginUrl",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u94FE\u63A5"},extra:"\u82E5\u5E94\u7528\u4EC5\u652F\u6301 SP \u53D1\u8D77 SSO\uFF0C\u60A8\u53C8\u5E0C\u671B\u5B9E\u73B0\u7531 IAM \u95E8\u6237\u9875\u53D1\u8D77\u767B\u5F55\uFF0C\u8BF7\u586B\u5199\u6B64\u9879\u3002\u95E8\u6237\u9875\u8BBF\u95EE\u5E94\u7528\u65F6\uFF0CIAM \u4F1A\u8DF3\u8F6C\u5230\u672C\u5730\u5740\uFF0C\u5E94\u5373\u523B\u81EA\u52A8\u5411 IAM \u53D1\u8D77 SAMLRequest \u767B\u5F55\u8BF7\u6C42\u3002\u5730\u5740\u53EF\u586B\u5199\u4E3A\u4EFB\u610F\u53D7\u4FDD\u62A4\u8D44\u6E90\u8BBF\u95EE\u5730\u5740\uFF0C\u5728\u672A\u767B\u5F55\u65F6\u4F1A\u81EA\u52A8\u89E6\u53D1 SAMLRequest \u5373\u53EF\u3002"})}})]})),(0,e.jsx)(H.Z,{style:{margin:0}}),(0,e.jsx)(Bn,{appId:n.id,protocolEndpoint:F,collapsed:!0})]})},Un=Mn,Nn=ve.Z.Panel,kn=function(r){var n=re.Z.useForm(),t=B()(n,1),a=t[0],d=r.protocolEndpoint,l=r.appId,s=r.collapsed,o=s===void 0?!0:s;return(0,se.Z)(L()(v()().mark(function p(){return v()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:a.setFieldsValue(d);case 1:case"end":return c.stop()}},p)})),[l,d]),(0,e.jsx)(we.A,{layout:"horizontal",labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:12}},labelAlign:"right",submitter:!1,labelWrap:!0,form:a,children:(0,e.jsx)(ve.Z,{ghost:!0,expandIconPosition:"start",defaultActiveKey:o?void 0:"config",children:(0,e.jsx)(Nn,{header:(0,e.jsx)("a",{children:"\u5E94\u7528\u914D\u7F6E\u4FE1\u606F"}),children:(0,e.jsx)($e.Z,{style:{backgroundColor:"#f1f1f2",border:"1px solid #f1f1f2"},description:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(K.Z,{label:"IdP SSO \u5730\u5740",name:"idpSsoEndpoint",extra:"\u5E94\u7528\u53D1\u8D77\u5355\u70B9\u767B\u5F55\u7684\u5730\u5740\u3002",readonly:!0,proFieldProps:{render:function(u){return u&&(0,e.jsx)(he.Z.Text,{copyable:!0,children:u})}},fieldProps:{autoComplete:"off"}})})})},"config")})})},zn={labelCol:{span:6},wrapperCol:{span:12}},Qn=function(r){var n=r.app,t=n.id,a=n.template,d=re.Z.useForm(),l=B()(d,1),s=l[0],o=(0,i.useState)(!0),p=B()(o,2),u=p[0],c=p[1],w=re.Z.useForm(),C=B()(w,1),F=C[0],O=(0,i.useState)(function(){return[]}),T=B()(O,2),j=T[0],g=T[1],A=(0,i.useState)({}),f=B()(A,2),Z=f[0],h=f[1],y=function(){var b=L()(v()().mark(function P(){var x,E,D;return v()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return c(!0),$.next=3,(0,Q.hq)(t);case 3:x=$.sent,E=x.result,D=x.success,D&&E&&(s.setFieldsValue(N()(N()({},(0,Se.omit)(E,"protocolEndpoint")),{},{appId:t})),h(E.protocolEndpoint)),c(!1);case 8:case"end":return $.stop()}},P)}));return function(){return b.apply(this,arguments)}}();return(0,se.Z)(L()(v()().mark(function b(){return v()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,y();case 2:case"end":return x.stop()}},b)})),[]),(0,e.jsxs)(Pe.Z,{spinning:u,children:[(0,e.jsx)($e.Z,{showIcon:!0,message:(0,e.jsxs)("span",{children:["\u4E0D\u77E5\u9053\u600E\u4E48\u914D\u7F6E\uFF1F\u8BF7\u53C2\u8003 TopIAM \u914D\u7F6E"," ",(0,e.jsx)("a",{target:"_blank",href:"https://eiam.topiam.cn/docs/application/standard/form-sso",rel:"noreferrer",children:"\u8868\u5355\u4EE3\u586B\u5355\u70B9\u767B\u5F55"})," ","\u3002"]})}),(0,e.jsx)("br",{}),(0,e.jsxs)(we.A,N()(N()({form:s,requiredMark:!0,layout:"horizontal"},zn),{},{scrollToFirstError:!0,onFinish:function(){var b=L()(v()().mark(function P(x){var E,D,M;return v()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,F.validateFields();case 2:if(E=S.sent,c(!0),!E){S.next=15;break}return S.next=7,(0,Q.$c)({id:t,template:a,config:(0,Se.omit)(x,"id","template")}).finally(function(){c(!1)});case 7:if(D=S.sent,M=D.success,!M){S.next=14;break}return J.ZP.success("\u4FDD\u5B58\u6210\u529F"),S.next=13,y();case 13:return S.abrupt("return",!0);case 14:J.ZP.error("\u4FDD\u5B58\u5931\u8D25");case 15:return S.abrupt("return",!1);case 16:case"end":return S.stop()}},P)}));return function(P){return b.apply(this,arguments)}}(),submitter:{render:function(P,x){return(0,e.jsx)(hr.S,{children:x})}},children:[(0,e.jsx)(K.Z,{name:"appId",hidden:!0}),(0,e.jsx)(K.Z,{name:"loginUrl",label:"\u767B\u5F55\u63D0\u4EA4URL",placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u63D0\u4EA4URL",extra:"\u767B\u5F55\u8868\u5355\u63D0\u4EA4\u5B8C\u6574URL\uFF0C\u4EE5http://\u6216https://\u5F00\u5934\uFF0C\u5982\uFF1Ahttps://oa.xxxx.com/login",rules:[{required:!0,message:"\u5E94\u7528\u767B\u5F55URL\u4E3A\u5FC5\u586B\u9879"},{type:"url",message:"URL\u683C\u5F0F\u4E0D\u6B63\u786E"}]}),(0,e.jsx)(K.Z,{name:"usernameField",label:"\u767B\u5F55\u540D\u5C5E\u6027\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u540D\u5C5E\u6027\u540D\u79F0",extra:"username\u6807\u7B7E\u7684name\u5C5E\u6027",rules:[{required:!0,message:"\u767B\u5F55\u540D\u5C5E\u6027\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}]}),(0,e.jsx)(K.Z,{name:"passwordField",label:"\u767B\u5F55\u5BC6\u7801\u5C5E\u6027\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801\u5C5E\u6027\u540D\u79F0",extra:"password\u6807\u7B7E\u7684name\u5C5E\u6027",rules:[{required:!0,message:"\u767B\u5F55\u5BC6\u7801\u5C5E\u6027\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}]}),(0,e.jsx)(Gr.Z.Group,{name:"submitType",label:"\u767B\u5F55\u63D0\u4EA4\u65B9\u5F0F",initialValue:["post"],options:[{value:"post",label:"POST"},{value:"get",label:"GET"}],rules:[{required:!0,message:"\u767B\u5F55\u63D0\u4EA4\u65B9\u5F0F\u4E3A\u5FC5\u9009\u9879"}]}),(0,e.jsx)(H.Z,{}),(0,e.jsx)(ye.Z,{label:"\u6388\u6743\u8303\u56F4",name:"authorizationType",allowClear:!1,extra:"\u82E5\u9009\u62E9\u624B\u52A8\u6388\u6743\uFF0C\u9700\u8981\u5728 \u8BBF\u95EE\u6388\u6743 \u4E2D\u8FDB\u884C\u6743\u9650\u5206\u914D\u3002",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6388\u6743\u8303\u56F4"}],options:[{value:De.AUTHORIZATION,label:"\u624B\u52A8\u6388\u6743"},{value:De.ALL_ACCESS,label:"\u5168\u5458\u53EF\u8BBF\u95EE"}]}),(0,e.jsx)(H.Z,{}),(0,e.jsx)(we.A.Item,{label:"\u767B\u5F55\u5176\u4ED6\u5B57\u6BB5",name:"otherField",trigger:"onValuesChange",children:(0,e.jsx)(Br.Z,{rowKey:"key",toolBarRender:!1,scroll:{x:500},columns:[{title:"\u5C5E\u6027\u540D\u79F0",dataIndex:"fieldName",fieldProps:{allowClear:!1},formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u5C5E\u6027\u503C",key:"fieldValue",dataIndex:"fieldValue",ellipsis:!0,formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u64CD\u4F5C",valueType:"option",align:"center",fixed:"right",width:50}],recordCreatorProps:{creatorButtonText:"\u6DFB\u52A0\u5176\u4ED6\u5B57\u6BB5",newRecordType:"dataSource",position:"bottom",record:function(){return{key:Date.now()}}},editable:{form:F,type:"multiple",editableKeys:j,onChange:g,deletePopconfirmMessage:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u6B64\u5C5E\u6027\u5417\uFF1F",actionRender:function(P,x,E){return[E.delete]}}})})]})),(0,e.jsx)(H.Z,{style:{margin:0}}),(0,e.jsx)(kn,{appId:t,protocolEndpoint:Z,collapsed:!0})]})},Kn=Qn,Vn=m(42245),bt=function(n,t){return i.createElement(be.Z,(0,fe.Z)((0,fe.Z)({},n),{},{ref:t,icon:Vn.Z}))};bt.displayName="VerticalAlignBottomOutlined";var Jr=i.forwardRef(bt),Gn=ve.Z.Panel,Yr="idpEncryptCert",Hn=function(r){var n=re.Z.useForm(),t=B()(n,1),a=t[0],d=r.protocolEndpoint,l=r.appId,s=r.collapsed,o=s===void 0?!0:s;(0,se.Z)(L()(v()().mark(function u(){return v()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:a.setFieldsValue(d);case 1:case"end":return w.stop()}},u)})),[l,d]),(0,se.Z)(L()(v()().mark(function u(){var c;return v()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,(0,Q.O$)(l,vr.JWT_ENCRYPT);case 2:c=C.sent,c.success&&c.result&&c.result.forEach(function(F){F.usingType===vr.JWT_ENCRYPT&&a.setFieldsValue({idpEncryptCert:F.cert})});case 4:case"end":return C.stop()}},u)})),[l]);var p=function(){var c=a.getFieldValue(Yr);if(c){var w=new Blob([c],{type:"application/x-x509-ca-cert"}),C=URL.createObjectURL(w),F=document.createElement("a");F.href=C,F.download=l+"sign.cer",document.documentElement.appendChild(F),F.click(),document.documentElement.removeChild(F)}};return(0,e.jsx)(we.A,{layout:"horizontal",labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:12}},labelAlign:"right",labelWrap:!0,submitter:!1,form:a,children:(0,e.jsx)(ve.Z,{ghost:!0,expandIconPosition:"start",defaultActiveKey:o?void 0:"config",children:(0,e.jsx)(Gn,{header:(0,e.jsx)("a",{children:"\u5E94\u7528\u914D\u7F6E\u4FE1\u606F"}),children:(0,e.jsx)($e.Z,{style:{backgroundColor:"#f1f1f2",border:"1px solid #f1f1f2"},description:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(K.Z,{label:"IdP SSO \u5730\u5740",name:"idpSsoEndpoint",extra:"\u5E94\u7528\u53D1\u8D77\u5355\u70B9\u767B\u5F55\u7684\u5730\u5740\u3002",readonly:!0,proFieldProps:{render:function(c){return c&&(0,e.jsx)(he.Z.Text,{copyable:!0,children:c})}},fieldProps:{autoComplete:"off"}}),(0,e.jsx)(K.Z,{label:"\u767B\u51FA\u7AEF\u70B9",name:"idpSloEndpoint",extra:"\u5E94\u7528\u53D1\u8D77\u5355\u70B9\u767B\u51FA\u7684\u5730\u5740\u3002",readonly:!0,proFieldProps:{render:function(c){return c&&(0,e.jsx)(he.Z.Text,{copyable:!0,children:c})}},fieldProps:{autoComplete:"off"}}),(0,e.jsx)(ur.Z,{label:"JWT \u9A8C\u7B7E\u516C\u94A5",name:Yr,disabled:!0,fieldProps:{autoComplete:"off",rows:3},extra:(0,e.jsxs)("div",{style:{display:"inline-block"},children:[(0,e.jsx)("div",{style:{display:"inline-block"},children:"\u4E0B\u8F7D\u6216\u590D\u5236\u8BC1\u4E66\uFF0C\u5E76\u5BFC\u5165\u6216\u7C98\u8D34\u5230\u5E94\u7528\u4E2D\u3002"}),(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,e.jsx)(he.Z.Paragraph,{style:{display:"inline-block"},copyable:{text:a.getFieldValue(Yr)},children:(0,e.jsx)("a",{children:"\u590D\u5236\u8BC1\u4E66\u5185\u5BB9"})}),(0,e.jsxs)("a",{onClick:p,children:["\u4E0B\u8F7D\u8BC1\u4E66 .cer \u6587\u4EF6",(0,e.jsx)(Jr,{})]})]})]})})]})})},"config")})})},Wn={labelCol:{xs:{span:24},sm:{span:7},md:{span:6}},wrapperCol:{xs:{span:24},sm:{span:13},md:{span:14}}},Jn=function(r){var n=r.app,t=n.id,a=n.template,d=re.Z.useForm(),l=B()(d,1),s=l[0],o=(0,i.useState)(!0),p=B()(o,2),u=p[0],c=p[1],w=(0,i.useState)({}),C=B()(w,2),F=C[0],O=C[1],T=function(){var j=L()(v()().mark(function g(){var A,f,Z;return v()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return c(!0),y.next=3,(0,Q.hq)(t);case 3:A=y.sent,f=A.result,Z=A.success,Z&&f&&(s.setFieldsValue(N()(N()({},(0,Se.omit)(f,"protocolEndpoint")),{},{appId:t})),O(f.protocolEndpoint)),c(!1);case 8:case"end":return y.stop()}},g)}));return function(){return j.apply(this,arguments)}}();return(0,se.Z)(L()(v()().mark(function j(){return v()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,T();case 2:case"end":return A.stop()}},j)})),[]),(0,e.jsxs)(Pe.Z,{spinning:u,children:[(0,e.jsxs)(we.A,N()(N()({layout:"horizontal"},Wn),{},{form:s,scrollToFirstError:!0,onFinish:function(){var j=L()(v()().mark(function g(A){var f,Z;return v()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return c(!0),y.next=3,(0,Q.$c)({id:t,template:a,config:(0,Se.omit)(A,"id","template")}).finally(function(){c(!1)});case 3:if(f=y.sent,Z=f.success,!Z){y.next=10;break}return J.ZP.success("\u4FDD\u5B58\u6210\u529F"),y.next=9,T();case 9:return y.abrupt("return",!0);case 10:return J.ZP.error("\u4FDD\u5B58\u5931\u8D25"),y.abrupt("return",!1);case 12:case"end":return y.stop()}},g)}));return function(g){return j.apply(this,arguments)}}(),submitter:{render:function(g,A){return(0,e.jsx)(hr.S,{children:A})}},children:[(0,e.jsx)(K.Z,{label:"SSO \u5730\u5740",name:"redirectUrl",fieldProps:{allowClear:!1},extra:"\u4E1A\u52A1\u7CFB\u7EDF\u4E2D\u7684JWT SSO\u5730\u5740\uFF0C\u5728\u5355\u70B9\u767B\u5F55\u65F6\u672C\u7CFB\u7EDF\u5C06\u5411\u8BE5\u5730\u5740\u53D1\u9001id_token\u4FE1\u606F\uFF0C\u53C2\u6570\u540D\u4E3Aid_token\uFF0C\u4E1A\u52A1\u7CFB\u7EDF\u901A\u8FC7id_token\u4E0EPublic Key\u53EF\u83B7\u53D6\u4E1A\u52A1\u7CFB\u7EDF\u4E2D\u7684\u7528\u6237\u4FE1\u606F\uFF0C\u5982\u679C\u5728\u4E1A\u52A1\u7CFB\u7EDF\uFF08SP\uFF09\u53D1\u8D77\u767B\u5F55\uFF0C\u8BF7\u6C42SP\u767B\u5F55\u5730\u5740\u65F6\u5982\u679C\u643A\u5E26redirect_uri\u53C2\u6570\uFF0C\u7CFB\u7EDF\u4F1A\u68C0\u9A8C\u5408\u6CD5\u6027\uFF0C\u6210\u529F\u540E\u4F1A\u5C06\u6D4F\u89C8\u5668\u91CD\u5B9A\u5411\u5230\u8BE5\u5730\u5740\uFF0C\u5E76\u643A\u5E26id_token\u8EAB\u4EFD\u4EE4\u724C\u3002",rules:[{required:!0,message:"\u8BF7\u8F93\u5165JWT\u5E94\u7528SSO\u5730\u5740"},{type:"url",message:"JWT\u5E94\u7528SSO\u5730\u5740\u683C\u5F0F\u4E0D\u6B63\u786E"}]}),(0,e.jsx)(K.Z,{label:"target link url",name:"targetLinkUrl",fieldProps:{allowClear:!1},extra:"\u4E1A\u52A1\u7CFB\u7EDF\u4E2D\u5728JWT SSO\u6210\u529F\u540E\u91CD\u5B9A\u5411\u7684URL\uFF0C\u4E00\u822C\u7528\u4E8E\u8DF3\u8F6C\u5230\u4E8C\u7EA7\u83DC\u5355\u7B49\uFF0C\u82E5\u8BBE\u7F6E\u4E86\u8BE5URL\uFF0C\u5728JWT SSO\u65F6\u4F1A\u4EE5\u53C2\u6570target_link_url\u4F18\u5148\u4F20\u9012\u8BE5\u503C\uFF0C\u82E5\u672A\u8BBE\u7F6E\u8BE5\u503C\uFF0C\u6B64\u65F6\u82E5SSO\u4E2D\u6709\u8BF7\u6C42\u53C2\u6570target_link_url\uFF0C\u5219\u4F1A\u6309\u7167\u8BF7\u6C42\u53C2\u6570\u4F20\u9012\u8BE5\u503C\u3002\u6B64\u9879\u53EF\u9009\u3002",rules:[{type:"url",message:"\u5730\u5740\u683C\u5F0F\u4E0D\u6B63\u786E"}]}),(0,e.jsx)(Gr.Z.Group,{name:"bindingType",label:"SSO \u7ED1\u5B9A\u7C7B\u578B",initialValue:["post"],extra:"\u6307\u5B9A\u5411JWT\u5E94\u7528\u53D1\u9001 id_token \u7684\u8BF7\u6C42\u65B9\u5F0F\u3002",options:[{value:"post",label:"POST"},{value:"get",label:"GET"}],rules:[{required:!0,message:"\u767B\u5F55\u63D0\u4EA4\u65B9\u5F0F\u4E3A\u5FC5\u9009\u9879"}]}),(0,e.jsx)(ye.Z,{label:"id_token \u4E3B\u4F53\u7C7B\u578B",name:"idTokenSubjectType",options:[{value:"user_id",label:"\u7528\u6237ID"},{value:"app_user",label:"\u5E94\u7528\u8D26\u6237"}],fieldProps:{allowClear:!1},extra:"id_token \u4E2D sub \u4E3B\u4F53(\u7528\u6237) \u7C7B\u578B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9 CAS \u7528\u6237\u6807\u8BC6"}]}),(0,e.jsx)(Fr.Z,{name:"idTokenTimeToLive",label:"id_token \u8FC7\u671F\u65F6\u95F4",addonAfter:"\u79D2",max:84600,min:1,extra:"id_token \u7684\u6709\u6548\u671F\uFF0C\u5355\u4F4D\u4E3A\uFF1A\u79D2\u3002\u53EF\u8BBE\u7F6E\u8303\u56F4\u4E3A1-84600\u3002",rules:[{required:!0,message:"\u8BF7\u914D\u7F6E id_token \u7684\u6709\u6548\u671F"}]}),(0,e.jsx)(H.Z,{}),(0,e.jsx)(ye.Z,{label:"\u6388\u6743\u8303\u56F4",name:"authorizationType",allowClear:!1,extra:"\u82E5\u9009\u62E9\u624B\u52A8\u6388\u6743\uFF0C\u9700\u8981\u5728 \u8BBF\u95EE\u6388\u6743 \u4E2D\u8FDB\u884C\u6743\u9650\u5206\u914D\u3002",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6388\u6743\u8303\u56F4"}],options:[{value:De.AUTHORIZATION,label:"\u624B\u52A8\u6388\u6743"},{value:De.ALL_ACCESS,label:"\u5168\u5458\u53EF\u8BBF\u95EE"}]})]})),(0,e.jsx)(H.Z,{style:{margin:0}}),(0,e.jsx)(Hn,{appId:n.id,protocolEndpoint:F,collapsed:!0})]})},Yn=Jn,Xn=m(10255),qn=m.n(Xn),gr=m(25051),_n=m(78035),Et=m(26602),ea=ve.Z.Panel,ra=function(r){var n=re.Z.useForm(),t=B()(n,1),a=t[0],d=r.protocolEndpoint,l=r.appId,s=r.collapsed,o=s===void 0?!0:s;return(0,se.Z)(L()(v()().mark(function p(){return v()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:a.setFieldsValue(d);case 1:case"end":return c.stop()}},p)})),[l,d]),(0,e.jsx)(we.A,{layout:"horizontal",labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:12}},labelAlign:"right",submitter:!1,labelWrap:!0,form:a,children:(0,e.jsx)(ve.Z,{ghost:!0,expandIconPosition:"start",defaultActiveKey:o?void 0:"config",children:(0,e.jsx)(ea,{header:(0,e.jsx)("a",{children:"\u5E94\u7528\u914D\u7F6E\u4FE1\u606F"}),children:(0,e.jsx)($e.Z,{style:{backgroundColor:"#f1f1f2",border:"1px solid #f1f1f2"},description:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(K.Z,{label:"Issuer",name:"issuer",extra:"\u7528\u4E8E\u6807\u8BC6 token \u53D1\u653E\u6765\u6E90\u7684\u5B57\u6BB5\u3002\u540C\u65F6\u662F\u4E0B\u8FF0\u63A5\u53E3\u7684 baseUrl\u3002",proFieldProps:{render:function(u){return u&&(0,e.jsx)(he.Z.Text,{copyable:!0,children:u})}},readonly:!0,fieldProps:{autoComplete:"off"}}),(0,e.jsx)(K.Z,{label:"\u53D1\u73B0\u7AEF\u70B9",name:"discoveryEndpoint",extra:"\u7528\u4E8E\u83B7\u53D6\u5F53\u524D IAM \u652F\u6301\u7684\u5404\u7AEF\u70B9\u4FE1\u606F\u548C\u652F\u6301\u7684\u6A21\u5F0F\u3001\u53C2\u6570\u4FE1\u606F\uFF0C\u53EF\u516C\u5F00\u8BBF\u95EE\u3002",proFieldProps:{render:function(u){return u&&(0,e.jsx)(he.Z.Text,{copyable:!0,children:u})}},readonly:!0,fieldProps:{autoComplete:"off"}}),(0,e.jsx)(K.Z,{label:"\u6388\u6743\u7AEF\u70B9",name:"authorizationEndpoint",extra:"\u5E94\u7528\u53D1\u8D77\u5355\u70B9\u767B\u5F55\u7684\u5730\u5740\u3002",proFieldProps:{render:function(u){return u&&(0,e.jsx)(he.Z.Text,{copyable:!0,children:u})}},readonly:!0,fieldProps:{autoComplete:"off"}}),(0,e.jsx)(K.Z,{label:"\u4EE4\u724C\u7AEF\u70B9",name:"tokenEndpoint",extra:"\u5E94\u7528\u5728\u5355\u70B9\u767B\u5F55\u8FC7\u7A0B\u4E2D\uFF0C\u62FF\u5230 code \u540E\uFF0C\u4ECE\u540E\u7AEF\u53D1\u53BB\u6362\u53D6 token \u7684\u63A5\u53E3\u5730\u5740\u3002",proFieldProps:{render:function(u){return u&&(0,e.jsx)(he.Z.Text,{copyable:!0,children:u})}},readonly:!0,fieldProps:{autoComplete:"off"}}),(0,e.jsx)(K.Z,{label:"\u4EE4\u724C\u540A\u9500\u7AEF\u70B9",name:"revokeEndpoint",proFieldProps:{render:function(u){return u&&(0,e.jsx)(he.Z.Text,{copyable:!0,children:u})}},readonly:!0,fieldProps:{autoComplete:"off"}}),(0,e.jsx)(K.Z,{label:"\u9A8C\u7B7E\u516C\u94A5\u7AEF\u70B9",name:"jwksEndpoint",extra:"\u7528\u4E8E\u9A8C\u8BC1 id_token\u3001\u5B8C\u6210 SSO \u6D41\u7A0B\u7684\u516C\u94A5\u7AEF\u70B9\u3002\u516C\u94A5\u53EF\u80FD\u4F1A\u8F6E\u8F6C\u3002",proFieldProps:{render:function(u){return u&&(0,e.jsx)(he.Z.Text,{copyable:!0,children:u})}},readonly:!0,fieldProps:{autoComplete:"off"}}),(0,e.jsx)(K.Z,{label:"\u7528\u6237\u4FE1\u606F\u7AEF\u70B9",name:"userinfoEndpoint",extra:"\u5728\u8D26\u6237\u767B\u5F55\u540E\uFF0C\u4F7F\u7528 access_token \u8C03\u7528\u7528\u6237\u4FE1\u606F\u7AEF\u70B9\uFF0C\u83B7\u53D6\u8D26\u6237\u57FA\u672C\u4FE1\u606F\u3002",proFieldProps:{render:function(u){return u&&(0,e.jsx)(he.Z.Text,{copyable:!0,children:u})}},readonly:!0,fieldProps:{autoComplete:"off"}})]})})},"config")})})},Ft=m(75827),ta=ve.Z.Panel,At={labelCol:{span:6},wrapperCol:{span:12}},St={wrapperCol:{span:12,offset:6}},na=function(r){var n=r.app,t=n.id,a=n.template,d=re.Z.useForm(),l=B()(d,1),s=l[0],o=(0,i.useState)({}),p=B()(o,2),u=p[0],c=p[1],w=(0,i.useState)(!0),C=B()(w,2),F=C[0],O=C[1];return(0,_n.Z)(L()(v()().mark(function T(){var j,g,A,f;return v()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return O(!0),h.next=3,(0,Q.hq)(t);case 3:j=h.sent,g=j.result,A=j.success,A&&g&&(s.setFieldsValue(N()(N()({appId:t},g),{},{redirectUris:((f=g.redirectUris)===null||f===void 0?void 0:f.length)>0?g.redirectUris:[void 0]})),c(g.protocolEndpoint)),O(!1);case 8:case"end":return h.stop()}},T)}))),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(Pe.Z,{spinning:F,children:[(0,e.jsx)($e.Z,{showIcon:!0,message:(0,e.jsxs)("span",{children:["\u4E0D\u77E5\u9053\u600E\u4E48\u914D\u7F6E\uFF1F\u8BF7\u53C2\u8003 TopIAM \u914D\u7F6E"," ",(0,e.jsx)("a",{target:"_blank",href:"https://eiam.topiam.cn/docs/application/standard/oidc-sso",rel:"noreferrer",children:"OIDC \u5355\u70B9\u767B\u5F55"})," ","\u3002"]})}),(0,e.jsx)("br",{}),(0,e.jsxs)(we.A,N()(N()({requiredMark:!0,layout:"horizontal"},At),{},{form:s,scrollToFirstError:!0,onFinish:function(){var T=L()(v()().mark(function j(g){var A,f;return v()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,Q.$c)({id:t,template:a,config:(0,Se.omit)(g,"id","template")});case 2:if(A=h.sent,f=A.success,!f){h.next=7;break}return J.ZP.success("\u64CD\u4F5C\u6210\u529F"),h.abrupt("return",!0);case 7:return J.ZP.error("\u64CD\u4F5C\u5931\u8D25"),h.abrupt("return",!1);case 9:case"end":return h.stop()}},j)}));return function(j){return T.apply(this,arguments)}}(),submitter:{render:function(j,g){return(0,e.jsx)(hr.S,{children:g})}},children:[(0,e.jsx)(K.Z,{name:"appId",hidden:!0}),(0,e.jsx)(oe.Z.Group,{label:"\u6388\u6743\u6A21\u5F0F",layout:"vertical",name:"authGrantTypes",rules:[{required:!0,message:"\u8BF7\u52FE\u9009\u6388\u6743\u6A21\u5F0F"}],options:[{value:"authorization_code",label:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{style:{marginRight:"12px"},children:"\u6388\u6743\u7801\u6A21\u5F0F"}),(0,e.jsx)("span",{style:{color:"#999"},children:"authorization_code \u6A21\u5F0F\uFF0C\u7528\u4E8E\u8D26\u6237\u7684\u767B\u5F55\u8BA4\u8BC1\u3001\u6388\u6743\u3002"})]})},{value:"refresh_token",label:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{style:{marginRight:"12px"},children:"\u4EE4\u724C\u5237\u65B0\u6A21\u5F0F"}),(0,e.jsx)("span",{style:{color:"#999"},children:"refresh_token \u6A21\u5F0F\uFF0C\u7528\u4E8E\u65E2\u6709 token \u7684\u5EF6\u671F\u3002"})]})},{value:"implicit",label:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{style:{marginRight:"12px"},children:"\u9690\u5F0F\u6A21\u5F0F"}),(0,e.jsx)("span",{style:{color:"#999"},children:"implicit \u6A21\u5F0F\uFF0C\u7531\u4E8E\u534F\u8BAE\u672C\u8EAB\u7684\u5B89\u5168\u6027\uFF0C\u901A\u5E38\u4E0D\u63A8\u8350\u4F7F\u7528\u3002\u5982\u679C\u6709\u7279\u6B8A\u9700\u6C42\uFF0C\u53EF\u4EE5\u4F7F\u7528\u53D8\u4F53\u7684 PKCE \u7684\u6388\u6743\u7801\u6A21\u5F0F\u3002"})]})},{value:"password",label:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{style:{marginRight:"12px"},children:"\u5BC6\u7801\u6A21\u5F0F"}),(0,e.jsx)("span",{style:{color:"#999"},children:"password \u6A21\u5F0F\uFF0C\u7531\u4E8E\u534F\u8BAE\u672C\u8EAB\u7684\u5B89\u5168\u6027\uFF0C\u901A\u5E38\u4E0D\u63A8\u8350\u4F7F\u7528\u3002"})]})},{value:"device",disabled:!0,label:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{style:{marginRight:"12px"},children:"\u8BBE\u5907\u6A21\u5F0F"}),(0,e.jsx)("span",{style:{color:"#999"},children:"device \u6A21\u5F0F\uFF0C\u517C\u5BB9\u8BBE\u5907\u53D1\u8D77\u7684\u767B\u5F55\u6D41\u7A0B\u3002\uFF08\u6682\u4E0D\u652F\u6301\uFF09"})]})}]}),(0,e.jsx)(ze.Z,{name:["authGrantTypes"],children:function(j){var g=j.authGrantTypes;return(g==null?void 0:g.includes("authorization_code"))&&(0,e.jsx)(gr.Z,{label:"PKCE\uFF08\u7528\u4E8E\u6388\u6743\u7801\u6A21\u5F0F\uFF09",name:"requireProofKey",extra:"PKCE \uFF08Proof Key for Code Exchange\uFF09\u662F OAuth 2.0 \u7684\u5B89\u5168\u6027\u6269\u5C55\u6A21\u5F0F\uFF0C\u7528\u4E8E\u9632\u62A4 CSRF\u3001\u4E2D\u95F4\u4EBA\u8FDB\u653B\u7B49\u6076\u610F\u653B\u51FB\u3002"})}}),(0,e.jsx)(re.Z.List,{name:"redirectUris",rules:[{validator:function(){var T=L()(v()().mark(function g(A,f){return v()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(f&&f.length>0)){h.next=2;break}return h.abrupt("return");case 2:throw new Error("\u8BF7\u914D\u7F6E\u767B\u5F55 Redirect URI");case 3:case"end":return h.stop()}},g)}));function j(g,A){return T.apply(this,arguments)}return j}()}],children:function(j,g,A){var f=g.add,Z=g.remove;return qn()(A),(0,e.jsxs)(e.Fragment,{children:[j.map(function(h,y){return(0,i.createElement)(re.Z.Item,N()(N()({},y===0?At:St),{},{required:!1,key:h.key,label:y===0?"\u767B\u5F55 Redirect URI":"",extra:y===j.length-1&&"Redirect URI \u767D\u540D\u5355\uFF0C\u5E94\u7528\u5728\u8BF7\u6C42\u767B\u5F55\u65F6\u643A\u5E26 redirect_uri \u53C2\u6570\uFF0C\u8BE5\u503C\u9700\u8981\u5728\u767D\u540D\u5355\u4E2D\uFF0CIAM \u624D\u4F1A\u5728\u8BA4\u8BC1\u5B8C\u6210\u540E\u53D1\u8D77\u8DF3\u8F6C\u3002\u82E5\u6709\u591A\u6761\uFF0C\u8BF7\u70B9\u51FB\u6DFB\u52A0\u8FDB\u884C\u6269\u5C55"}),(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,e.jsx)(re.Z.Item,N()(N()({},h),{},{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"\u8BF7\u914D\u7F6E\u767B\u5F55 Redirect URI"},{type:"url",message:"Redirect URI \u683C\u5F0F\u4E0D\u6B63\u786E"}],noStyle:!0,children:(0,e.jsx)(Et.Z,{placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55 Redirect URI"})})),j.length>1?(0,e.jsx)(Ft.Z,{onClick:function(){return Z(h.name)}}):null]}))}),(0,e.jsx)(re.Z.Item,N()(N()({},St),{},{children:(0,e.jsx)(ke.ZP,{type:"dashed",onClick:function(){return f()},icon:(0,e.jsx)(fr.Z,{}),style:{width:"100%"},children:"\u6DFB\u52A0"})}))]})}}),(0,e.jsx)(ye.Z,{label:"\u6388\u6743\u8303\u56F4",name:"authorizationType",allowClear:!1,extra:"\u82E5\u9009\u62E9\u624B\u52A8\u6388\u6743\uFF0C\u9700\u8981\u5728 \u8BBF\u95EE\u6388\u6743 \u4E2D\u8FDB\u884C\u6743\u9650\u5206\u914D\u3002",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6388\u6743\u8303\u56F4"}],options:[{value:De.AUTHORIZATION,label:"\u624B\u52A8\u6388\u6743"},{value:De.ALL_ACCESS,label:"\u5168\u5458\u53EF\u8BBF\u95EE"}]}),(0,e.jsx)(ye.Z,{label:"SSO \u53D1\u8D77\u65B9",name:"initLoginType",allowClear:!1,rules:[{required:!0,message:"\u8BF7\u914D\u7F6E SSO \u53D1\u8D77\u65B9"}],options:[{value:Ke.APP,label:"\u53EA\u5141\u8BB8\u5E94\u7528\u53D1\u8D77"},{value:Ke.PORTAL_OR_APP,label:"\u652F\u6301\u95E8\u6237\u548C\u5E94\u7528\u53D1\u8D77"}],extra:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{children:"\u95E8\u6237\u53D1\u8D77\uFF1A\u7531 IAM \u95E8\u6237\u9875\u70B9\u51FB\u8FDB\u884C SSO \u3002"}),(0,e.jsx)("br",{}),(0,e.jsx)("span",{children:"\u5E94\u7528\u53D1\u8D77\uFF1A\u7531\u5E94\u7528\u767B\u5F55\u4E3B\u52A8\u53D1\u8D77\u3002"})]})}),(0,e.jsx)(ze.Z,{name:["initLoginType"],children:function(j){return(j==null?void 0:j.initLoginType)===Ke.PORTAL_OR_APP&&(0,e.jsx)(K.Z,{label:"\u767B\u5F55\u53D1\u8D77\u5730\u5740",name:"initLoginUrl",rules:[{required:!0,message:"\u767B\u5F55\u53D1\u8D77\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A"}],fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u94FE\u63A5"},extra:"\u82E5\u60A8\u5E0C\u671B\u7531 TopIAM \u95E8\u6237\u9875\u8BBF\u95EE\u5E94\u7528\uFF0C\u8BF7\u586B\u5199 TopIAM \u53D1\u8D77 SSO \u8BF7\u6C42\u8BBF\u95EE\u7684\u5E94\u7528\u5730\u5740\u3002\u8BE5\u5730\u5740\u63A5\u6536\u5230\u8BF7\u6C42\uFF0C\u5E94\u5373\u523B\u8F6C\u5411 TopIAM / authorize \u6388\u6743\u7AEF\u70B9\u3002"})}}),(0,e.jsx)(H.Z,{style:{margin:0}}),(0,e.jsx)(ve.Z,{ghost:!0,expandIconPosition:"start",defaultActiveKey:"advanced",children:(0,e.jsxs)(ta,{header:(0,e.jsx)("a",{children:"\u663E\u793A\u9AD8\u7EA7\u914D\u7F6E"}),children:[(0,e.jsx)(oe.Z.Group,{label:"\u7528\u6237\u4FE1\u606F\u8303\u56F4",layout:"vertical",name:"grantScopes",rules:[{required:!0,message:"\u8BF7\u52FE\u9009\u7528\u6237\u4FE1\u606F\u8303\u56F4"}],extra:"\u7528\u6237\u767B\u5F55\u540E\uFF0C\u4F7F\u7528\u7528\u6237\u4FE1\u606F\u7AEF\u70B9\u6216\u89E3\u6790 id_token \u53EF\u4EE5\u83B7\u53D6\u5230\u7684\u5DF2\u767B\u5F55\u7528\u6237\u4FE1\u606F \u3002",options:[{value:"openid",label:"openid",disabled:!0},{value:"email",label:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{style:{marginRight:"12px"},children:"email"}),(0,e.jsx)("span",{style:{color:"#999"},children:"\u5E94\u7528\u53EF\u83B7\u53D6\u767B\u5F55\u7528\u6237\u90AE\u7BB1\u4FE1\u606F\u3002"})]})},{value:"phone",label:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{style:{marginRight:"12px"},children:"phone"}),(0,e.jsx)("span",{style:{color:"#999"},children:"\u5E94\u7528\u53EF\u83B7\u53D6\u767B\u5F55\u7528\u6237\u624B\u673A\u4FE1\u606F\u3002"})]})},{value:"profile",label:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{style:{marginRight:"12px"},children:"profile"}),(0,e.jsx)("span",{style:{color:"#999"},children:"\u5E94\u7528\u53EF\u83B7\u53D6\u767B\u5F55\u7528\u6237\u8BE6\u60C5\u4FE1\u606F\u3002"})]})}]}),(0,e.jsx)(Fr.Z,{label:"access_token \u6709\u6548\u671F",name:"accessTokenTimeToLive",addonAfter:"\u5206\u949F",extra:"access_token \u7528\u4E8E\u8BF7\u6C42 IAM \u63A5\u53E3\uFF0C\u8FC7\u671F\u540E\u9700\u8981\u4F7F\u7528 refresh_token \u5237\u65B0\uFF0C\u6216\u91CD\u65B0\u767B\u5F55\u3002"}),(0,e.jsx)(Fr.Z,{label:"refresh_token \u6709\u6548\u671F",name:"refreshTokenTimeToLive",addonAfter:"\u5206\u949F",extra:"\u7528\u4E8E\u83B7\u53D6\u65B0\u7684 access_token \u548C id_token\uFF0Crefresh_token \u8FC7\u671F\u540E\uFF0C\u7528\u6237\u9700\u8981\u91CD\u65B0\u767B\u5F55\u3002"}),(0,e.jsx)(Fr.Z,{label:"id_token \u6709\u6548\u671F",readonly:!0,name:"idTokenTimeToLive",addonAfter:"\u5206\u949F\uFF08\u6682\u4E0D\u652F\u6301\u4FEE\u6539\uFF09",extra:"id_token \u7528\u4E8E\u9274\u522B\u7528\u6237\u8EAB\u4EFD\uFF0CJWT\u683C\u5F0F\uFF0C\u5141\u8BB8\u5E94\u7528\u4F7F\u7528\u516C\u94A5\u81EA\u884C\u9A8C\u8BC1\u7528\u6237\u8EAB\u4EFD\u3002\u6700\u5C0F5\u5206\u949F\uFF0C\u6700\u592724\u5C0F\u65F6\uFF0C\u8FC7\u671F\u540E\u9700\u8981\u4F7F\u7528refresh_token \u5237\u65B0\uFF0C\u6216\u91CD\u65B0\u767B\u5F55\u3002"}),(0,e.jsx)(ye.Z,{options:[{value:"ES256",label:"ES256"},{value:"RS256",label:"RS256"}],label:"id_token \u7B7E\u540D\u7B97\u6CD5",name:"idTokenSignatureAlgorithm",allowClear:!1,extra:"id_token \u7B7E\u540D\u4F7F\u7528\u7684\u975E\u5BF9\u79F0\u7B97\u6CD5\u3002",rules:[{required:!0,message:"\u8BF7\u914D\u7F6E id_token \u7B7E\u540D\u7B97\u6CD5"}]})]},"advanced")})]})),(0,e.jsx)(H.Z,{style:{margin:0}}),(0,e.jsx)(ra,{appId:t,protocolEndpoint:u,collapsed:!0})]})})},aa=na,sa=m(7088),la=ve.Z.Panel,Xr="idpSignCert",jt=function(r){var n=re.Z.useForm(),t=B()(n,1),a=t[0],d=r.protocolEndpoint,l=r.appId,s=r.collapsed,o=s===void 0?!0:s;(0,se.Z)(L()(v()().mark(function u(){return v()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:a.setFieldsValue(d);case 1:case"end":return w.stop()}},u)})),[l,d]),(0,se.Z)(L()(v()().mark(function u(){var c;return v()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,(0,Q.O$)(l,vr.SAML_SIGN);case 2:c=C.sent,c.success&&c.result&&c.result.forEach(function(F){F.usingType===vr.SAML_SIGN&&a.setFieldsValue({idpSignCert:F.cert})});case 4:case"end":return C.stop()}},u)})),[l]);var p=function(){var c=a.getFieldValue(Xr);if(c){var w=new Blob([c],{type:"application/x-x509-ca-cert"}),C=URL.createObjectURL(w),F=document.createElement("a");F.href=C,F.download=l+"sign.cer",document.documentElement.appendChild(F),F.click(),document.documentElement.removeChild(F)}};return(0,e.jsx)(we.A,{layout:"horizontal",labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:12}},labelAlign:"right",labelWrap:!0,submitter:!1,form:a,scrollToFirstError:!0,children:(0,e.jsx)(ve.Z,{ghost:!0,expandIconPosition:"start",defaultActiveKey:o?void 0:"config",children:(0,e.jsx)(la,{header:(0,e.jsx)("a",{children:"\u5E94\u7528\u914D\u7F6E\u4FE1\u606F"}),children:(0,e.jsx)($e.Z,{style:{backgroundColor:"#f1f1f2",border:"1px solid #f1f1f2"},description:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(K.Z,{label:"IdP \u5143\u6570\u636E",name:"idpMetaEndpoint",extra:"\u82E5\u5E94\u7528\u652F\u6301 metadata \u914D\u7F6E\u4FE1\u606F\u4E0A\u4F20/\u62C9\u53D6\uFF0C\u53EF\u4EE5\u8282\u7701\u5927\u91CF\u914D\u7F6E\u6B65\u9AA4\u3002\u8BF7\u5728\u5E94\u7528 SSO \u914D\u7F6E\u4E2D\u5BFB\u627E\u662F\u5426\u6709 metadata \u4E0A\u4F20\u80FD\u529B\u3002",proFieldProps:{render:function(c){return c&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(he.Z.Text,{copyable:!0,children:c}),(0,e.jsxs)("a",{style:{whiteSpace:"nowrap",marginLeft:"10px"},onClick:L()(v()().mark(function w(){return v()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,Q.zA)(l);case 2:case"end":return F.stop()}},w)})),children:[(0,e.jsx)(Jr,{}),"\u4E0B\u8F7D"]})]})}},readonly:!0,fieldProps:{autoComplete:"off"}}),(0,e.jsx)(K.Z,{label:"IdP \u552F\u4E00\u6807\u8BC6",name:"idpEntityIdEndpoint",extra:"IAM \u5728\u5E94\u7528\u4E2D\u7684\u6807\u8BC6\u3002\u9700\u8981\u5C06\u503C\u586B\u5199\u5728\u5E94\u7528\u5355\u70B9\u767B\u5F55\u914D\u7F6E\u4E2D\u3002",readonly:!0,proFieldProps:{render:function(c){return c&&(0,e.jsx)(he.Z.Text,{copyable:!0,children:c})}},fieldProps:{autoComplete:"off"}}),(0,e.jsx)(K.Z,{label:"IdP SSO \u5730\u5740",name:"idpSsoEndpoint",extra:"SAML \u534F\u8BAE\u652F\u6301 SP \u53D1\u8D77\u5355\u70B9\u767B\u5F55\uFF0C\u53EF\u80FD\u9700\u8981\u586B\u5199\u6B64\u5730\u5740\u5728\u5E94\u7528\u914D\u7F6E\u4E2D\u3002\u7531 IAM \u63D0\u4F9B\u3002\u53EF\u4EE5\u76F4\u63A5\u8BBF\u95EE\u8BE5\u5730\u5740\uFF0C\u8FDB\u884C\u5E94\u7528\u767B\u5F55\u3002",readonly:!0,proFieldProps:{render:function(c){return c&&(0,e.jsx)(he.Z.Text,{copyable:!0,children:c})}},fieldProps:{autoComplete:"off"}}),(0,e.jsx)(K.Z,{label:"\u5355\u70B9\u9000\u51FA\u5730\u5740",name:"idpSloEndpoint",extra:"SAML \u534F\u8BAE\u652F\u6301\u5355\u70B9\u9000\u51FA\uFF0C\u53EF\u80FD\u9700\u8981\u586B\u5199\u6B64\u5730\u5740\u5728\u5E94\u7528\u914D\u7F6E\u4E2D\u3002\u7531 IAM \u63D0\u4F9B\u3002",readonly:!0,proFieldProps:{render:function(c){return c&&(0,e.jsx)(he.Z.Text,{copyable:!0,children:c})}},fieldProps:{autoComplete:"off"}}),(0,e.jsx)(ur.Z,{label:"\u7B7E\u540D\u516C\u94A5\u8BC1\u4E66",name:Xr,disabled:!0,fieldProps:{autoComplete:"off",rows:3},extra:(0,e.jsxs)("div",{style:{display:"inline-block"},children:[(0,e.jsx)("div",{style:{display:"inline-block"},children:"\u4E0B\u8F7D\u6216\u590D\u5236\u8BC1\u4E66\uFF0C\u5E76\u5BFC\u5165\u6216\u7C98\u8D34\u5230\u5E94\u7528\u4E2D\u3002"}),(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,e.jsx)(he.Z.Paragraph,{style:{display:"inline-block"},copyable:{text:a.getFieldValue(Xr)},children:(0,e.jsx)("a",{children:"\u590D\u5236\u8BC1\u4E66\u5185\u5BB9"})}),(0,e.jsxs)("a",{onClick:p,children:["\u4E0B\u8F7D\u8BC1\u4E66 .cer \u6587\u4EF6",(0,e.jsx)(Jr,{})]})]})]})})]})})},"config")})})},oa=function(r){var n=r.app,t=n.id,a=n.template,d=re.Z.useForm(),l=B()(d,1),s=l[0],o=(0,i.useState)(!0),p=B()(o,2),u=p[0],c=p[1],w=(0,i.useState)([]),C=B()(w,2),F=C[0],O=C[1],T=(0,i.useState)({}),j=B()(T,2),g=j[0],A=j[1];return(0,se.Z)(L()(v()().mark(function f(){var Z,h,y;return v()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return c(!0),(0,Q.P3)(a).then(function(x){var E=x.success,D=x.result;E&&O(D)}),P.next=4,(0,Q.hq)(t);case 4:Z=P.sent,h=Z.result,y=Z.success,y&&h&&(s.setFieldsValue(N()({},(0,Se.omit)(h,"protocolEndpoint"))),A(h.protocolEndpoint)),c(!1);case 9:case"end":return P.stop()}},f)})),[]),(0,e.jsxs)(Pe.Z,{spinning:u,children:[(0,e.jsx)($e.Z,{showIcon:!0,message:(0,e.jsxs)(e.Fragment,{children:["\u4E0D\u77E5\u9053\u600E\u4E48\u914D\u7F6E\uFF1F\u8BF7\u53C2\u8003 ",(0,e.jsx)("a",{children:"\u5BF9\u63A5\u6587\u6863 "})," \u3002"]})}),(0,e.jsx)("br",{}),(0,e.jsxs)(we.A,{requiredMark:!0,layout:"horizontal",labelCol:{span:6},wrapperCol:{span:12},form:s,scrollToFirstError:!0,onFinish:function(){var f=L()(v()().mark(function Z(h){var y,b;return v()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,Q.$c)({id:t,template:a,config:(0,Se.omit)(h,"id","template")});case 2:if(y=x.sent,b=y.success,!b){x.next=7;break}return J.ZP.success("\u64CD\u4F5C\u6210\u529F"),x.abrupt("return",!0);case 7:return J.ZP.error("\u64CD\u4F5C\u5931\u8D25"),x.abrupt("return",!1);case 9:case"end":return x.stop()}},Z)}));return function(Z){return f.apply(this,arguments)}}(),submitter:{render:function(Z,h){return(0,e.jsx)(hr.S,{children:h})}},children:[(0,e.jsx)(sa.Z,{layoutType:"Embed",columns:F,shouldUpdate:!1}),(0,e.jsx)(ye.Z,{label:"\u6388\u6743\u8303\u56F4",name:"authorizationType",allowClear:!1,extra:"\u82E5\u9009\u62E9\u624B\u52A8\u6388\u6743\uFF0C\u9700\u8981\u5728 \u8BBF\u95EE\u6388\u6743 \u4E2D\u8FDB\u884C\u6743\u9650\u5206\u914D\u3002",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6388\u6743\u8303\u56F4"}],options:[{value:De.AUTHORIZATION,label:"\u624B\u52A8\u6388\u6743"},{value:De.ALL_ACCESS,label:"\u5168\u5458\u53EF\u8BBF\u95EE"}]})]}),(0,e.jsx)(H.Z,{style:{margin:0}}),(0,e.jsx)(jt,{appId:t,protocolEndpoint:g,collapsed:!1})]})},ia=m(88978),ua=qe.ZP.ConfigContext;function ca(){var r=(0,i.useContext)(ua),n=r.getPrefixCls,t=".".concat(n()),a=(0,ft.l)(function(){return te()({},"".concat(t,"-form-item"),{div:te()({},"".concat(t,"-form-item-control-input"),{width:"100%"})})});return{className:a}}var cr=m(9645),qr=m(53085),Pt=m(69573),wt=m(38241),Zt=m(72986),It=m(80115),_r=m(4203),da=m(5375),Rt=m(88297),pa=m(45267),ma=m(65517),fa=m(80211);function va(r,n){var t="cannot ".concat(r.method," ").concat(r.action," ").concat(n.status,"'"),a=new Error(t);return a.status=n.status,a.method=r.method,a.url=r.action,a}function Dt(r){var n=r.responseText||r.response;if(!n)return n;try{return JSON.parse(n)}catch(t){return n}}function ha(r){var n=new XMLHttpRequest;r.onProgress&&n.upload&&(n.upload.onprogress=function(l){l.total>0&&(l.percent=l.loaded/l.total*100),r.onProgress(l)});var t=new FormData;r.data&&Object.keys(r.data).forEach(function(d){var l=r.data[d];if(Array.isArray(l)){l.forEach(function(s){t.append("".concat(d,"[]"),s)});return}t.append(d,l)}),r.file instanceof Blob?t.append(r.filename,r.file,r.file.name):t.append(r.filename,r.file),n.onerror=function(l){r.onError(l)},n.onload=function(){return n.status<200||n.status>=300?r.onError(va(r,n),Dt(n)):r.onSuccess(Dt(n),n)},n.open(r.method,r.action,!0),r.withCredentials&&"withCredentials"in n&&(n.withCredentials=!0);var a=r.headers||{};return a["X-Requested-With"]!==null&&n.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(a).forEach(function(d){a[d]!==null&&n.setRequestHeader(d,a[d])}),n.send(t),{abort:function(){n.abort()}}}var ga=+new Date,Ca=0;function et(){return"rc-upload-".concat(ga,"-").concat(++Ca)}var xa=m(13379),rt=function(r,n){if(r&&n){var t=Array.isArray(n)?n:n.split(","),a=r.name||"",d=r.type||"",l=d.replace(/\/.*$/,"");return t.some(function(s){var o=s.trim();if(/^\*(\/\*)?$/.test(s))return!0;if(o.charAt(0)==="."){var p=a.toLowerCase(),u=o.toLowerCase(),c=[u];return(u===".jpg"||u===".jpeg")&&(c=[".jpg",".jpeg"]),c.some(function(w){return p.endsWith(w)})}return/\/\*$/.test(o)?l===o.replace(/\/.*$/,""):d===o?!0:/^\w+$/.test(o)?((0,xa.ZP)(!1,"Upload takes an invalidate 'accept' type '".concat(o,"'.Skip for check.")),!0):!1})}return!0};function ya(r,n){var t=r.createReader(),a=[];function d(){t.readEntries(function(l){var s=Array.prototype.slice.apply(l);a=a.concat(s);var o=!s.length;o?n(a):d()})}d()}var ba=function(n,t,a){var d=function l(s,o){s.path=o||"",s.isFile?s.file(function(p){a(p)&&(s.fullPath&&!p.webkitRelativePath&&(Object.defineProperties(p,{webkitRelativePath:{writable:!0}}),p.webkitRelativePath=s.fullPath.replace(/^\//,""),Object.defineProperties(p,{webkitRelativePath:{writable:!1}})),t([p]))}):s.isDirectory&&ya(s,function(p){p.forEach(function(u){l(u,"".concat(o).concat(s.name,"/"))})})};n.forEach(function(l){d(l.webkitGetAsEntry())})},Ea=ba,Fa=["component","prefixCls","className","disabled","id","style","multiple","accept","capture","children","directory","openFileDialogOnClick","onMouseEnter","onMouseLeave"],Aa=function(r){(0,Zt.Z)(t,r);var n=(0,It.Z)(t);function t(){var a;(0,Pt.Z)(this,t);for(var d=arguments.length,l=new Array(d),s=0;s<d;s++)l[s]=arguments[s];return a=n.call.apply(n,[this].concat(l)),a.state={uid:et()},a.reqs={},a.fileInput=void 0,a._isMounted=void 0,a.onChange=function(o){var p=a.props,u=p.accept,c=p.directory,w=o.target.files,C=(0,cr.Z)(w).filter(function(F){return!c||rt(F,u)});a.uploadFiles(C),a.reset()},a.onClick=function(o){var p=a.fileInput;if(p){var u=a.props,c=u.children,w=u.onClick;if(c&&c.type==="button"){var C=p.parentNode;C.focus(),C.querySelector("button").blur()}p.click(),w&&w(o)}},a.onKeyDown=function(o){o.key==="Enter"&&a.onClick(o)},a.onFileDrop=function(o){var p=a.props.multiple;if(o.preventDefault(),o.type!=="dragover")if(a.props.directory)Ea(Array.prototype.slice.call(o.dataTransfer.items),a.uploadFiles,function(c){return rt(c,a.props.accept)});else{var u=(0,cr.Z)(o.dataTransfer.files).filter(function(c){return rt(c,a.props.accept)});p===!1&&(u=u.slice(0,1)),a.uploadFiles(u)}},a.uploadFiles=function(o){var p=(0,cr.Z)(o),u=p.map(function(c){return c.uid=et(),a.processFile(c,p)});Promise.all(u).then(function(c){var w=a.props.onBatchStart;w==null||w(c.map(function(C){var F=C.origin,O=C.parsedFile;return{file:F,parsedFile:O}})),c.filter(function(C){return C.parsedFile!==null}).forEach(function(C){a.post(C)})})},a.processFile=function(){var o=(0,ma.Z)((0,Rt.Z)().mark(function p(u,c){var w,C,F,O,T,j,g,A,f;return(0,Rt.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(w=a.props.beforeUpload,C=u,!w){h.next=14;break}return h.prev=3,h.next=6,w(u,c);case 6:C=h.sent,h.next=12;break;case 9:h.prev=9,h.t0=h.catch(3),C=!1;case 12:if(C!==!1){h.next=14;break}return h.abrupt("return",{origin:u,parsedFile:null,action:null,data:null});case 14:if(F=a.props.action,typeof F!="function"){h.next=21;break}return h.next=18,F(u);case 18:O=h.sent,h.next=22;break;case 21:O=F;case 22:if(T=a.props.data,typeof T!="function"){h.next=29;break}return h.next=26,T(u);case 26:j=h.sent,h.next=30;break;case 29:j=T;case 30:return g=((0,pa.Z)(C)==="object"||typeof C=="string")&&C?C:u,g instanceof File?A=g:A=new File([g],u.name,{type:u.type}),f=A,f.uid=u.uid,h.abrupt("return",{origin:u,data:j,parsedFile:f,action:O});case 35:case"end":return h.stop()}},p,null,[[3,9]])}));return function(p,u){return o.apply(this,arguments)}}(),a.saveFileInput=function(o){a.fileInput=o},a}return(0,wt.Z)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.abort()}},{key:"post",value:function(d){var l=this,s=d.data,o=d.origin,p=d.action,u=d.parsedFile;if(this._isMounted){var c=this.props,w=c.onStart,C=c.customRequest,F=c.name,O=c.headers,T=c.withCredentials,j=c.method,g=o.uid,A=C||ha,f={action:p,filename:F,data:s,file:u,headers:O,withCredentials:T,method:j||"post",onProgress:function(h){var y=l.props.onProgress;y==null||y(h,u)},onSuccess:function(h,y){var b=l.props.onSuccess;b==null||b(h,u,y),delete l.reqs[g]},onError:function(h,y){var b=l.props.onError;b==null||b(h,y,u),delete l.reqs[g]}};w(o),this.reqs[g]=A(f)}}},{key:"reset",value:function(){this.setState({uid:et()})}},{key:"abort",value:function(d){var l=this.reqs;if(d){var s=d.uid?d.uid:d;l[s]&&l[s].abort&&l[s].abort(),delete l[s]}else Object.keys(l).forEach(function(o){l[o]&&l[o].abort&&l[o].abort(),delete l[o]})}},{key:"render",value:function(){var d,l=this.props,s=l.component,o=l.prefixCls,p=l.className,u=l.disabled,c=l.id,w=l.style,C=l.multiple,F=l.accept,O=l.capture,T=l.children,j=l.directory,g=l.openFileDialogOnClick,A=l.onMouseEnter,f=l.onMouseLeave,Z=(0,da.Z)(l,Fa),h=Ce()((d={},(0,_r.Z)(d,o,!0),(0,_r.Z)(d,"".concat(o,"-disabled"),u),(0,_r.Z)(d,p,p),d)),y=j?{directory:"directory",webkitdirectory:"webkitdirectory"}:{},b=u?{}:{onClick:g?this.onClick:function(){},onKeyDown:g?this.onKeyDown:function(){},onMouseEnter:A,onMouseLeave:f,onDrop:this.onFileDrop,onDragOver:this.onFileDrop,tabIndex:"0"};return i.createElement(s,(0,qr.Z)({},b,{className:h,role:"button",style:w}),i.createElement("input",(0,qr.Z)({},(0,fa.Z)(Z,{aria:!0,data:!0}),{id:c,type:"file",ref:this.saveFileInput,onClick:function(x){return x.stopPropagation()},key:this.state.uid,style:{display:"none"},accept:F},y,{multiple:C,onChange:this.onChange},O!=null?{capture:O}:{})),T)}}]),t}(i.Component),Sa=Aa;function tt(){}var Ot=function(r){(0,Zt.Z)(t,r);var n=(0,It.Z)(t);function t(){var a;(0,Pt.Z)(this,t);for(var d=arguments.length,l=new Array(d),s=0;s<d;s++)l[s]=arguments[s];return a=n.call.apply(n,[this].concat(l)),a.uploader=void 0,a.saveUploader=function(o){a.uploader=o},a}return(0,wt.Z)(t,[{key:"abort",value:function(d){this.uploader.abort(d)}},{key:"render",value:function(){return i.createElement(Sa,(0,qr.Z)({},this.props,{ref:this.saveUploader}))}}]),t}(i.Component);Ot.defaultProps={component:"span",prefixCls:"rc-upload",data:{},headers:{},name:"file",multipart:!1,onStart:tt,onError:tt,onSuccess:tt,multiple:!1,beforeUpload:null,customRequest:null,withCredentials:!1,openFileDialogOnClick:!0};var ja=Ot,Tt=ja,Pa=m(15129),wa=m(50374),nt=m(14981),Za=m(15643),Ia=m(50141),Ra=m(12415),Da={icon:function(n,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42z",fill:t}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:n}}]}},name:"file",theme:"twotone"},Oa=Da,$t=function(n,t){return i.createElement(be.Z,(0,fe.Z)((0,fe.Z)({},n),{},{ref:t,icon:Oa}))};$t.displayName="FileTwoTone";var Ta=i.forwardRef($t),Bt=m(45726),$a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"}}]},name:"paper-clip",theme:"outlined"},Ba=$a,Lt=function(n,t){return i.createElement(be.Z,(0,fe.Z)((0,fe.Z)({},n),{},{ref:t,icon:Ba}))};Lt.displayName="PaperClipOutlined";var La=i.forwardRef(Lt),Ma={icon:function(n,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z",fill:n}},{tag:"path",attrs:{d:"M424.6 765.8l-150.1-178L136 752.1V792h752v-30.4L658.1 489z",fill:t}},{tag:"path",attrs:{d:"M136 652.7l132.4-157c3.2-3.8 9-3.8 12.2 0l144 170.7L652 396.8c3.2-3.8 9-3.8 12.2 0L888 662.2V232H136v420.7zM304 280a88 88 0 110 176 88 88 0 010-176z",fill:t}},{tag:"path",attrs:{d:"M276 368a28 28 0 1056 0 28 28 0 10-56 0z",fill:t}},{tag:"path",attrs:{d:"M304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z",fill:n}}]}},name:"picture",theme:"twotone"},Ua=Ma,Mt=function(n,t){return i.createElement(be.Z,(0,fe.Z)((0,fe.Z)({},n),{},{ref:t,icon:Ua}))};Mt.displayName="PictureTwoTone";var Na=i.forwardRef(Mt),at=m(33666),ka=m(89091),za=m(9642),Mr=m(61478);function Ur(r){return Object.assign(Object.assign({},r),{lastModified:r.lastModified,lastModifiedDate:r.lastModifiedDate,name:r.name,size:r.size,type:r.type,uid:r.uid,percent:0,originFileObj:r})}function Nr(r,n){const t=(0,cr.Z)(n),a=t.findIndex(d=>{let{uid:l}=d;return l===r.uid});return a===-1?t.push(r):t[a]=r,t}function st(r,n){const t=r.uid!==void 0?"uid":"name";return n.filter(a=>a[t]===r[t])[0]}function Qa(r,n){const t=r.uid!==void 0?"uid":"name",a=n.filter(d=>d[t]!==r[t]);return a.length===n.length?null:a}const Ka=function(){const n=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:"").split("/"),a=n[n.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(a)||[""])[0]},Ut=r=>r.indexOf("image/")===0,Va=r=>{if(r.type&&!r.thumbUrl)return Ut(r.type);const n=r.thumbUrl||r.url||"",t=Ka(n);return/^data:image\//.test(n)||/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico|heic|heif)$/i.test(t)?!0:!(/^data:/.test(n)||t)},er=200;function Ga(r){return new Promise(n=>{if(!r.type||!Ut(r.type)){n("");return}const t=document.createElement("canvas");t.width=er,t.height=er,t.style.cssText=`position: fixed; left: 0; top: 0; width: ${er}px; height: ${er}px; z-index: 9999; display: none;`,document.body.appendChild(t);const a=t.getContext("2d"),d=new Image;if(d.onload=()=>{const{width:l,height:s}=d;let o=er,p=er,u=0,c=0;l>s?(p=s*(er/l),c=-(p-o)/2):(o=l*(er/s),u=-(o-p)/2),a.drawImage(d,u,c,o,p);const w=t.toDataURL();document.body.removeChild(t),n(w)},d.crossOrigin="anonymous",r.type.startsWith("image/svg+xml")){const l=new FileReader;l.addEventListener("load",()=>{l.result&&(d.src=l.result)}),l.readAsDataURL(r)}else d.src=window.URL.createObjectURL(r)})}var Ha={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},Wa=Ha,Nt=function(n,t){return i.createElement(be.Z,(0,fe.Z)((0,fe.Z)({},n),{},{ref:t,icon:Wa}))};Nt.displayName="DownloadOutlined";var Ja=i.forwardRef(Nt),Ya=m(32538),Xa=m(8968),kr=m(41394),qa=i.forwardRef((r,n)=>{let{prefixCls:t,className:a,style:d,locale:l,listType:s,file:o,items:p,progress:u,iconRender:c,actionIconRender:w,itemRender:C,isImgUrl:F,showPreviewIcon:O,showRemoveIcon:T,showDownloadIcon:j,previewIcon:g,removeIcon:A,downloadIcon:f,onPreview:Z,onDownload:h,onClose:y}=r;var b,P;const{status:x}=o,[E,D]=i.useState(x);i.useEffect(()=>{x!=="removed"&&D(x)},[x]);const[M,$]=i.useState(!1),S=i.useRef(null);i.useEffect(()=>(S.current=setTimeout(()=>{$(!0)},300),()=>{S.current&&clearTimeout(S.current)}),[]);const I=c(o);let z=i.createElement("div",{className:`${t}-icon`},I);if(s==="picture"||s==="picture-card"||s==="picture-circle")if(E==="uploading"||!o.thumbUrl&&!o.url){const je=Ce()({[`${t}-list-item-thumbnail`]:!0,[`${t}-list-item-file`]:E!=="uploading"});z=i.createElement("div",{className:je},I)}else{const je=F!=null&&F(o)?i.createElement("img",{src:o.thumbUrl||o.url,alt:o.name,className:`${t}-list-item-image`,crossOrigin:o.crossOrigin}):I,nr=Ce()({[`${t}-list-item-thumbnail`]:!0,[`${t}-list-item-file`]:F&&!F(o)});z=i.createElement("a",{className:nr,onClick:dr=>Z(o,dr),href:o.url||o.thumbUrl,target:"_blank",rel:"noopener noreferrer"},je)}const U=Ce()(`${t}-list-item`,`${t}-list-item-${E}`),V=typeof o.linkProps=="string"?JSON.parse(o.linkProps):o.linkProps,X=T?w((typeof A=="function"?A(o):A)||i.createElement(Ft.Z,null),()=>y(o),t,l.removeFile):null,q=j&&E==="done"?w((typeof f=="function"?f(o):f)||i.createElement(Ja,null),()=>h(o),t,l.downloadFile):null,Ge=s!=="picture-card"&&s!=="picture-circle"&&i.createElement("span",{key:"download-delete",className:Ce()(`${t}-list-item-actions`,{picture:s==="picture"})},q,X),G=Ce()(`${t}-list-item-name`),xe=o.url?[i.createElement("a",Object.assign({key:"view",target:"_blank",rel:"noopener noreferrer",className:G,title:o.name},V,{href:o.url,onClick:je=>Z(o,je)}),o.name),Ge]:[i.createElement("span",{key:"view",className:G,onClick:je=>Z(o,je),title:o.name},o.name),Ge],Be={pointerEvents:"none",opacity:.5},Ze=O?i.createElement("a",{href:o.url||o.thumbUrl,target:"_blank",rel:"noopener noreferrer",style:o.url||o.thumbUrl?void 0:Be,onClick:je=>Z(o,je),title:l.previewFile},typeof g=="function"?g(o):g||i.createElement(Ya.Z,null)):null,rr=(s==="picture-card"||s==="picture-circle")&&E!=="uploading"&&i.createElement("span",{className:`${t}-list-item-actions`},Ze,E==="done"&&q,X),{getPrefixCls:He}=i.useContext(nt.E_),ot=He(),Pr=i.createElement("div",{className:U},z,xe,rr,M&&i.createElement(at.Z,{motionName:`${ot}-fade`,visible:E==="uploading",motionDeadline:2e3},je=>{let{className:nr}=je;const dr="percent"in o?i.createElement(Xa.Z,Object.assign({},u,{type:"line",percent:o.percent})):null;return i.createElement("div",{className:Ce()(`${t}-list-item-progress`,nr)},dr)})),ge=o.response&&typeof o.response=="string"?o.response:((b=o.error)===null||b===void 0?void 0:b.statusText)||((P=o.error)===null||P===void 0?void 0:P.message)||l.uploadError,tr=E==="error"?i.createElement(kr.Z,{title:ge,getPopupContainer:je=>je.parentNode},Pr):Pr;return i.createElement("div",{className:Ce()(`${t}-list-item-container`,a),style:d,ref:n},C?C(tr,o,p,{download:h.bind(null,o),preview:Z.bind(null,o),remove:y.bind(null,o)}):tr)});const _a=(r,n)=>{const{listType:t="text",previewFile:a=Ga,onPreview:d,onDownload:l,onRemove:s,locale:o,iconRender:p,isImageUrl:u=Va,prefixCls:c,items:w=[],showPreviewIcon:C=!0,showRemoveIcon:F=!0,showDownloadIcon:O=!1,removeIcon:T,previewIcon:j,downloadIcon:g,progress:A={strokeWidth:2,showInfo:!1},appendAction:f,appendActionVisible:Z=!0,itemRender:h}=r,y=(0,ka.Z)(),[b,P]=i.useState(!1);i.useEffect(()=>{t!=="picture"&&t!=="picture-card"&&t!=="picture-circle"||(w||[]).forEach(G=>{typeof document=="undefined"||typeof window=="undefined"||!window.FileReader||!window.File||!(G.originFileObj instanceof File||G.originFileObj instanceof Blob)||G.thumbUrl!==void 0||(G.thumbUrl="",a&&a(G.originFileObj).then(xe=>{G.thumbUrl=xe||"",y()}))})},[t,w,a]),i.useEffect(()=>{P(!0)},[]);const x=(G,xe)=>{if(d)return xe==null||xe.preventDefault(),d(G)},E=G=>{typeof l=="function"?l(G):G.url&&window.open(G.url)},D=G=>{s==null||s(G)},M=G=>{if(p)return p(G,t);const xe=G.status==="uploading",Be=u&&u(G)?i.createElement(Na,null):i.createElement(Ta,null);let Ze=xe?i.createElement(Bt.Z,null):i.createElement(La,null);return t==="picture"?Ze=xe?i.createElement(Bt.Z,null):Be:(t==="picture-card"||t==="picture-circle")&&(Ze=xe?o.uploading:Be),Ze},$=(G,xe,Be,Ze)=>{const rr={type:"text",size:"small",title:Ze,onClick:He=>{xe(),(0,Mr.l$)(G)&&G.props.onClick&&G.props.onClick(He)},className:`${Be}-list-item-action`};if((0,Mr.l$)(G)){const He=(0,Mr.Tm)(G,Object.assign(Object.assign({},G.props),{onClick:()=>{}}));return i.createElement(ke.ZP,Object.assign({},rr,{icon:He}))}return i.createElement(ke.ZP,Object.assign({},rr),i.createElement("span",null,G))};i.useImperativeHandle(n,()=>({handlePreview:x,handleDownload:E}));const{getPrefixCls:S}=i.useContext(nt.E_),I=S("upload",c),z=S(),U=Ce()({[`${I}-list`]:!0,[`${I}-list-${t}`]:!0}),V=(0,cr.Z)(w.map(G=>({key:G.uid,file:G})));let q={motionDeadline:2e3,motionName:`${I}-${t==="picture-card"||t==="picture-circle"?"animate-inline":"animate"}`,keys:V,motionAppear:b};const Ge=(0,i.useMemo)(()=>{const G=Object.assign({},(0,za.ZP)(z));return delete G.onAppearEnd,delete G.onEnterEnd,delete G.onLeaveEnd,G},[z]);return t!=="picture-card"&&t!=="picture-circle"&&(q=Object.assign(Object.assign({},Ge),q)),i.createElement("div",{className:U},i.createElement(at.V,Object.assign({},q,{component:!1}),G=>{let{key:xe,file:Be,className:Ze,style:rr}=G;return i.createElement(qa,{key:xe,locale:o,prefixCls:I,className:Ze,style:rr,file:Be,items:w,progress:A,listType:t,isImgUrl:u,showPreviewIcon:C,showRemoveIcon:F,showDownloadIcon:O,removeIcon:T,previewIcon:j,downloadIcon:g,iconRender:M,actionIconRender:$,itemRender:h,onPreview:x,onDownload:E,onClose:D})}),f&&i.createElement(at.Z,Object.assign({},q,{visible:Z,forceRender:!0}),G=>{let{className:xe,style:Be}=G;return(0,Mr.Tm)(f,Ze=>({className:Ce()(Ze.className,xe),style:Object.assign(Object.assign(Object.assign({},Be),{pointerEvents:xe?"none":void 0}),Ze.style)}))}))};var es=i.forwardRef(_a),rs=m(53650),ts=m(67920),ns=r=>{const{componentCls:n,iconCls:t}=r;return{[`${n}-wrapper`]:{[`${n}-drag`]:{position:"relative",width:"100%",height:"100%",textAlign:"center",background:r.colorFillAlter,border:`${r.lineWidth}px dashed ${r.colorBorder}`,borderRadius:r.borderRadiusLG,cursor:"pointer",transition:`border-color ${r.motionDurationSlow}`,[n]:{padding:`${r.padding}px 0`},[`${n}-btn`]:{display:"table",width:"100%",height:"100%",outline:"none"},[`${n}-drag-container`]:{display:"table-cell",verticalAlign:"middle"},[`&:not(${n}-disabled):hover`]:{borderColor:r.colorPrimaryHover},[`p${n}-drag-icon`]:{marginBottom:r.margin,[t]:{color:r.colorPrimary,fontSize:r.uploadThumbnailSize}},[`p${n}-text`]:{margin:`0 0 ${r.marginXXS}px`,color:r.colorTextHeading,fontSize:r.fontSizeLG},[`p${n}-hint`]:{color:r.colorTextDescription,fontSize:r.fontSize},[`&${n}-disabled`]:{cursor:"not-allowed",[`p${n}-drag-icon ${t},
            p${n}-text,
            p${n}-hint
          `]:{color:r.colorTextDisabled}}}}}},Ar=m(45680),as=r=>{const{componentCls:n,antCls:t,iconCls:a,fontSize:d,lineHeight:l}=r,s=`${n}-list-item`,o=`${s}-actions`,p=`${s}-action`,u=Math.round(d*l);return{[`${n}-wrapper`]:{[`${n}-list`]:Object.assign(Object.assign({},(0,Ar.dF)()),{lineHeight:r.lineHeight,[s]:{position:"relative",height:r.lineHeight*d,marginTop:r.marginXS,fontSize:d,display:"flex",alignItems:"center",transition:`background-color ${r.motionDurationSlow}`,"&:hover":{backgroundColor:r.controlItemBgHover},[`${s}-name`]:Object.assign(Object.assign({},Ar.vS),{padding:`0 ${r.paddingXS}px`,lineHeight:l,flex:"auto",transition:`all ${r.motionDurationSlow}`}),[o]:{[p]:{opacity:0},[`${p}${t}-btn-sm`]:{height:u,border:0,lineHeight:1,"> span":{transform:"scale(1)"}},[`
              ${p}:focus,
              &.picture ${p}
            `]:{opacity:1},[a]:{color:r.colorTextDescription,transition:`all ${r.motionDurationSlow}`},[`&:hover ${a}`]:{color:r.colorText}},[`${n}-icon ${a}`]:{color:r.colorTextDescription,fontSize:d},[`${s}-progress`]:{position:"absolute",bottom:-r.uploadProgressOffset,width:"100%",paddingInlineStart:d+r.paddingXS,fontSize:d,lineHeight:0,pointerEvents:"none","> div":{margin:0}}},[`${s}:hover ${p}`]:{opacity:1,color:r.colorText},[`${s}-error`]:{color:r.colorError,[`${s}-name, ${n}-icon ${a}`]:{color:r.colorError},[o]:{[`${a}, ${a}:hover`]:{color:r.colorError},[p]:{opacity:1}}},[`${n}-list-item-container`]:{transition:`opacity ${r.motionDurationSlow}, height ${r.motionDurationSlow}`,"&::before":{display:"table",width:0,height:0,content:'""'}}})}}},kt=m(25646);const zt=new kt.E4("uploadAnimateInlineIn",{from:{width:0,height:0,margin:0,padding:0,opacity:0}}),Qt=new kt.E4("uploadAnimateInlineOut",{to:{width:0,height:0,margin:0,padding:0,opacity:0}});var ss=r=>{const{componentCls:n}=r,t=`${n}-animate-inline`;return[{[`${n}-wrapper`]:{[`${t}-appear, ${t}-enter, ${t}-leave`]:{animationDuration:r.motionDurationSlow,animationTimingFunction:r.motionEaseInOutCirc,animationFillMode:"forwards"},[`${t}-appear, ${t}-enter`]:{animationName:zt},[`${t}-leave`]:{animationName:Qt}}},zt,Qt]},ls=m(10190);const os=r=>{const{componentCls:n,iconCls:t,uploadThumbnailSize:a,uploadProgressOffset:d}=r,l=`${n}-list`,s=`${l}-item`;return{[`${n}-wrapper`]:{[`
        ${l}${l}-picture,
        ${l}${l}-picture-card,
        ${l}${l}-picture-circle
      `]:{[s]:{position:"relative",height:a+r.lineWidth*2+r.paddingXS*2,padding:r.paddingXS,border:`${r.lineWidth}px ${r.lineType} ${r.colorBorder}`,borderRadius:r.borderRadiusLG,"&:hover":{background:"transparent"},[`${s}-thumbnail`]:Object.assign(Object.assign({},Ar.vS),{width:a,height:a,lineHeight:`${a+r.paddingSM}px`,textAlign:"center",flex:"none",[t]:{fontSize:r.fontSizeHeading2,color:r.colorPrimary},img:{display:"block",width:"100%",height:"100%",overflow:"hidden"}}),[`${s}-progress`]:{bottom:d,width:`calc(100% - ${r.paddingSM*2}px)`,marginTop:0,paddingInlineStart:a+r.paddingXS}},[`${s}-error`]:{borderColor:r.colorError,[`${s}-thumbnail ${t}`]:{["svg path[fill='#e6f7ff']"]:{fill:r.colorErrorBg},["svg path[fill='#1890ff']"]:{fill:r.colorError}}},[`${s}-uploading`]:{borderStyle:"dashed",[`${s}-name`]:{marginBottom:d}}},[`${l}${l}-picture-circle ${s}`]:{[`&, &::before, ${s}-thumbnail`]:{borderRadius:"50%"}}}}},is=r=>{const{componentCls:n,iconCls:t,fontSizeLG:a,colorTextLightSolid:d}=r,l=`${n}-list`,s=`${l}-item`,o=r.uploadPicCardSize;return{[`
      ${n}-wrapper${n}-picture-card-wrapper,
      ${n}-wrapper${n}-picture-circle-wrapper
    `]:Object.assign(Object.assign({},(0,Ar.dF)()),{display:"inline-block",width:"100%",[`${n}${n}-select`]:{width:o,height:o,marginInlineEnd:r.marginXS,marginBottom:r.marginXS,textAlign:"center",verticalAlign:"top",backgroundColor:r.colorFillAlter,border:`${r.lineWidth}px dashed ${r.colorBorder}`,borderRadius:r.borderRadiusLG,cursor:"pointer",transition:`border-color ${r.motionDurationSlow}`,[`> ${n}`]:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",textAlign:"center"},[`&:not(${n}-disabled):hover`]:{borderColor:r.colorPrimary}},[`${l}${l}-picture-card, ${l}${l}-picture-circle`]:{[`${l}-item-container`]:{display:"inline-block",width:o,height:o,marginBlock:`0 ${r.marginXS}px`,marginInline:`0 ${r.marginXS}px`,verticalAlign:"top"},"&::after":{display:"none"},[s]:{height:"100%",margin:0,"&::before":{position:"absolute",zIndex:1,width:`calc(100% - ${r.paddingXS*2}px)`,height:`calc(100% - ${r.paddingXS*2}px)`,backgroundColor:r.colorBgMask,opacity:0,transition:`all ${r.motionDurationSlow}`,content:'" "'}},[`${s}:hover`]:{[`&::before, ${s}-actions`]:{opacity:1}},[`${s}-actions`]:{position:"absolute",insetInlineStart:0,zIndex:10,width:"100%",whiteSpace:"nowrap",textAlign:"center",opacity:0,transition:`all ${r.motionDurationSlow}`,[`${t}-eye, ${t}-download, ${t}-delete`]:{zIndex:10,width:a,margin:`0 ${r.marginXXS}px`,fontSize:a,cursor:"pointer",transition:`all ${r.motionDurationSlow}`,svg:{verticalAlign:"baseline"}}},[`${s}-actions, ${s}-actions:hover`]:{[`${t}-eye, ${t}-download, ${t}-delete`]:{color:new ls.C(d).setAlpha(.65).toRgbString(),"&:hover":{color:d}}},[`${s}-thumbnail, ${s}-thumbnail img`]:{position:"static",display:"block",width:"100%",height:"100%",objectFit:"contain"},[`${s}-name`]:{display:"none",textAlign:"center"},[`${s}-file + ${s}-name`]:{position:"absolute",bottom:r.margin,display:"block",width:`calc(100% - ${r.paddingXS*2}px)`},[`${s}-uploading`]:{[`&${s}`]:{backgroundColor:r.colorFillAlter},[`&::before, ${t}-eye, ${t}-download, ${t}-delete`]:{display:"none"}},[`${s}-progress`]:{bottom:r.marginXL,width:`calc(100% - ${r.paddingXS*2}px)`,paddingInlineStart:0}}}),[`${n}-wrapper${n}-picture-circle-wrapper`]:{[`${n}${n}-select`]:{borderRadius:"50%"}}}};var us=r=>{const{componentCls:n}=r;return{[`${n}-rtl`]:{direction:"rtl"}}},cs=m(8534);const ds=r=>{const{componentCls:n,colorTextDisabled:t}=r;return{[`${n}-wrapper`]:Object.assign(Object.assign({},(0,Ar.Wf)(r)),{[n]:{outline:0,"input[type='file']":{cursor:"pointer"}},[`${n}-select`]:{display:"inline-block"},[`${n}-disabled`]:{color:t,cursor:"not-allowed"}})}};var ps=(0,rs.Z)("Upload",r=>{const{fontSizeHeading3:n,fontSize:t,lineHeight:a,lineWidth:d,controlHeightLG:l}=r,s=Math.round(t*a),o=(0,ts.TS)(r,{uploadThumbnailSize:n*2,uploadProgressOffset:s/2+d,uploadPicCardSize:l*2.55});return[ds(o),ns(o),os(o),is(o),as(o),ss(o),us(o),(0,cs.Z)(o)]}),ms=function(r,n,t,a){function d(l){return l instanceof t?l:new t(function(s){s(l)})}return new(t||(t=Promise))(function(l,s){function o(c){try{u(a.next(c))}catch(w){s(w)}}function p(c){try{u(a.throw(c))}catch(w){s(w)}}function u(c){c.done?l(c.value):d(c.value).then(o,p)}u((a=a.apply(r,n||[])).next())})};const Sr=`__LIST_IGNORE_${Date.now()}__`,fs=(r,n)=>{const{fileList:t,defaultFileList:a,onRemove:d,showUploadList:l=!0,listType:s="text",onPreview:o,onDownload:p,onChange:u,onDrop:c,previewFile:w,disabled:C,locale:F,iconRender:O,isImageUrl:T,progress:j,prefixCls:g,className:A,type:f="select",children:Z,style:h,itemRender:y,maxCount:b,data:P={},multiple:x=!1,action:E="",accept:D="",supportServerRender:M=!0}=r,$=i.useContext(Za.Z),S=C!=null?C:$,[I,z]=(0,Pa.Z)(a||[],{value:t,postState:W=>W!=null?W:[]}),[U,V]=i.useState("drop"),X=i.useRef(null);i.useMemo(()=>{const W=Date.now();(t||[]).forEach((ne,ie)=>{!ne.uid&&!Object.isFrozen(ne)&&(ne.uid=`__AUTO__${W}_${ie}__`)})},[t]);const q=(W,ne,ie)=>{let _=(0,cr.Z)(ne);b===1?_=_.slice(-1):b&&(_=_.slice(0,b)),(0,wa.flushSync)(()=>{z(_)});const ae={file:W,fileList:_};ie&&(ae.event=ie),u==null||u(ae)},Ge=(W,ne)=>ms(void 0,void 0,void 0,function*(){const{beforeUpload:ie,transformFile:_}=r;let ae=W;if(ie){const Oe=yield ie(W,ne);if(Oe===!1)return!1;if(delete W[Sr],Oe===Sr)return Object.defineProperty(W,Sr,{value:!0,configurable:!0}),!1;typeof Oe=="object"&&Oe&&(ae=Oe)}return _&&(ae=yield _(ae)),ae}),G=W=>{const ne=W.filter(ae=>!ae.file[Sr]);if(!ne.length)return;const ie=ne.map(ae=>Ur(ae.file));let _=(0,cr.Z)(I);ie.forEach(ae=>{_=Nr(ae,_)}),ie.forEach((ae,Oe)=>{let pr=ae;if(ne[Oe].parsedFile)ae.status="uploading";else{const{originFileObj:ar}=ae;let We;try{We=new File([ar],ar.name,{type:ar.type})}catch(Ms){We=new Blob([ar],{type:ar.type}),We.name=ar.name,We.lastModifiedDate=new Date,We.lastModified=new Date().getTime()}We.uid=ae.uid,pr=We}q(pr,_)})},xe=(W,ne,ie)=>{try{typeof W=="string"&&(W=JSON.parse(W))}catch(Oe){}if(!st(ne,I))return;const _=Ur(ne);_.status="done",_.percent=100,_.response=W,_.xhr=ie;const ae=Nr(_,I);q(_,ae)},Be=(W,ne)=>{if(!st(ne,I))return;const ie=Ur(ne);ie.status="uploading",ie.percent=W.percent;const _=Nr(ie,I);q(ie,_,W)},Ze=(W,ne,ie)=>{if(!st(ie,I))return;const _=Ur(ie);_.error=W,_.response=ne,_.status="error";const ae=Nr(_,I);q(_,ae)},rr=W=>{let ne;Promise.resolve(typeof d=="function"?d(W):d).then(ie=>{var _;if(ie===!1)return;const ae=Qa(W,I);ae&&(ne=Object.assign(Object.assign({},W),{status:"removed"}),I==null||I.forEach(Oe=>{const pr=ne.uid!==void 0?"uid":"name";Oe[pr]===ne[pr]&&!Object.isFrozen(Oe)&&(Oe.status="removed")}),(_=X.current)===null||_===void 0||_.abort(ne),q(ne,ae))})},He=W=>{V(W.type),W.type==="drop"&&(c==null||c(W))};i.useImperativeHandle(n,()=>({onBatchStart:G,onSuccess:xe,onProgress:Be,onError:Ze,fileList:I,upload:X.current}));const{getPrefixCls:ot,direction:Pr}=i.useContext(nt.E_),ge=ot("upload",g),tr=Object.assign(Object.assign({onBatchStart:G,onError:Ze,onProgress:Be,onSuccess:xe},r),{data:P,multiple:x,action:E,accept:D,supportServerRender:M,prefixCls:ge,disabled:S,beforeUpload:Ge,onChange:void 0});delete tr.className,delete tr.style,(!Z||S)&&delete tr.id;const[je,nr]=ps(ge),dr=(W,ne)=>l?i.createElement(Ia.Z,{componentName:"Upload",defaultLocale:Ra.Z.Upload},ie=>{const{showRemoveIcon:_,showPreviewIcon:ae,showDownloadIcon:Oe,removeIcon:pr,previewIcon:ar,downloadIcon:We}=typeof l=="boolean"?{}:l;return i.createElement(es,{prefixCls:ge,listType:s,items:I,previewFile:w,onPreview:o,onDownload:p,onRemove:rr,showRemoveIcon:!S&&_,showPreviewIcon:ae,showDownloadIcon:Oe,removeIcon:pr,previewIcon:ar,downloadIcon:We,iconRender:O,locale:Object.assign(Object.assign({},ie),F),isImageUrl:T,progress:j,appendAction:W,appendActionVisible:ne,itemRender:y})}):W,it={[`${ge}-rtl`]:Pr==="rtl"};if(f==="drag"){const W=Ce()(ge,{[`${ge}-drag`]:!0,[`${ge}-drag-uploading`]:I.some(ne=>ne.status==="uploading"),[`${ge}-drag-hover`]:U==="dragover",[`${ge}-disabled`]:S,[`${ge}-rtl`]:Pr==="rtl"},nr);return je(i.createElement("span",{className:Ce()(`${ge}-wrapper`,it,A,nr)},i.createElement("div",{className:W,onDrop:He,onDragOver:He,onDragLeave:He,style:h},i.createElement(Tt,Object.assign({},tr,{ref:X,className:`${ge}-btn`}),i.createElement("div",{className:`${ge}-drag-container`},Z))),dr()))}const ws=Ce()(ge,`${ge}-select`,{[`${ge}-disabled`]:S}),Gt=(W=>i.createElement("div",{className:ws,style:W},i.createElement(Tt,Object.assign({},tr,{ref:X}))))(Z?void 0:{display:"none"});return je(s==="picture-card"||s==="picture-circle"?i.createElement("span",{className:Ce()(`${ge}-wrapper`,{[`${ge}-picture-card-wrapper`]:s==="picture-card",[`${ge}-picture-circle-wrapper`]:s==="picture-circle"},it,A,nr)},dr(Gt,!!Z)):i.createElement("span",{className:Ce()(`${ge}-wrapper`,it,A,nr)},Gt,dr()))};var Kt=i.forwardRef(fs),vs=function(r,n){var t={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&n.indexOf(a)<0&&(t[a]=r[a]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,a=Object.getOwnPropertySymbols(r);d<a.length;d++)n.indexOf(a[d])<0&&Object.prototype.propertyIsEnumerable.call(r,a[d])&&(t[a[d]]=r[a[d]]);return t},hs=i.forwardRef((r,n)=>{var{style:t,height:a}=r,d=vs(r,["style","height"]);return i.createElement(Kt,Object.assign({ref:n},d,{type:"drag",style:Object.assign(Object.assign({},t),{height:a})}))});const lt=Kt;lt.Dragger=hs,lt.LIST_IGNORE=Sr;var gs=lt,Cs=ve.Z.Panel,Vt={labelCol:{xs:{span:24},sm:{span:7},md:{span:6}},wrapperCol:{xs:{span:24},sm:{span:13},md:{span:14}}},xs=function(r){var n=r.app,t=n.id,a=n.template,d=re.Z.useForm(),l=B()(d,1),s=l[0],o=re.Z.useForm(),p=B()(o,1),u=p[0],c=(0,i.useState)(!0),w=B()(c,2),C=w[0],F=w[1],O=(0,i.useState)({}),T=B()(O,2),j=T[0],g=T[1],A=(0,i.useState)(function(){return[]}),f=B()(A,2),Z=f[0],h=f[1],y=re.Z.useForm(),b=B()(y,1),P=b[0],x=ca(),E=x.className,D=function(){var $=L()(v()().mark(function S(){var I,z,U,V;return v()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return F(!0),q.next=3,(0,Q.hq)(t);case 3:I=q.sent,z=I.result,U=I.success,U&&z&&(s.setFieldsValue(N()({},(0,Se.omit)(z,"protocolEndpoint"))),h((V=z.attributeStatements)===null||V===void 0?void 0:V.map(function(Ge){return Ge.key})),g(z.protocolEndpoint)),F(!1);case 8:case"end":return q.stop()}},S)}));return function(){return $.apply(this,arguments)}}();(0,se.Z)(L()(v()().mark(function $(){return v()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,D();case 2:case"end":return I.stop()}},$)})),[]);var M=function(S){s.setFieldsValue({assertSigned:S.wantAssertionsSigned,spRequestsSigned:S.authnRequestsSigned,spSignCert:S.signCert,spAcsUrl:S.acsUrl,spEntityId:S.entityId,nameIdFormat:S.defaultNameIdFormat,acsBinding:S.defaultAcsBinding,spSloEnabled:S.sloEnabled,spSlsUrl:S.slsUrl,spSlsBinding:S.slsBinding})};return(0,e.jsx)("div",{className:E,children:(0,e.jsxs)(Pe.Z,{spinning:C,children:[(0,e.jsx)($e.Z,{showIcon:!0,message:(0,e.jsxs)("span",{children:["\u4E0D\u77E5\u9053\u600E\u4E48\u914D\u7F6E\uFF1F\u8BF7\u53C2\u8003 TopIAM \u914D\u7F6E"," ",(0,e.jsx)("a",{target:"_blank",href:"https://eiam.topiam.cn/docs/application/standard/saml2-sso",rel:"noreferrer",children:"SAML \u5355\u70B9\u767B\u5F55"})," ","\u3002"]})}),(0,e.jsx)("br",{}),(0,e.jsx)(we.A,N()(N()({layout:"horizontal"},Vt),{},{form:u,submitter:!1,children:(0,e.jsx)(ia.Z,{rules:[{type:"url",message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u5E94\u7528 metadata \u5730\u5740"}],colon:!1,label:(0,e.jsxs)(Ve.Z,{children:[(0,e.jsx)(gs,{showUploadList:!1,name:"file",maxCount:1,beforeUpload:function(){return!1},withCredentials:!0,accept:".xml",onChange:function(){var $=L()(v()().mark(function I(z){var U,V,X,q;return v()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return U=ee()(z.fileList),F(!0),F(!0),G.next=5,(0,Q.ZG)(U==null?void 0:U[0]);case 5:V=G.sent,X=V.result,q=V.success,F(!1),q&&X&&M(X);case 10:case"end":return G.stop()}},I)}));function S(I){return $.apply(this,arguments)}return S}(),children:(0,e.jsx)(ke.ZP,{children:"\u4E0A\u4F20 SP \u5143\u6570\u636E "})}),(0,e.jsx)("span",{children:"\u6216"})]}),name:"metaDataUrl",extra:"SP \u5143\u6570\u636E\u4E3A\u5E94\u7528\u4FA7\u751F\u6210\u7684 SSO \u914D\u7F6E\u6587\u4EF6\u3002\u82E5\u5DF2\u6709\u5143\u6570\u636E\uFF0C\u76F4\u63A5\u5BFC\u5165\uFF0C\u53EF\u81EA\u52A8\u586B\u5145\u4E0B\u65B9 SSO \u53C2\u6570\uFF0C\u7B80\u5355\u5FEB\u6377\u3002",addonAfter:(0,e.jsx)(ke.ZP,{onClick:L()(v()().mark(function $(){var S,I,z,U;return v()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(S=u.getFieldValue("metaDataUrl"),S){X.next=4;break}return J.ZP.error("\u8BF7\u8F93\u5165\u5E94\u7528 metadata \u5730\u5740"),X.abrupt("return");case 4:return X.next=6,u.validateFields();case 6:return F(!0),X.next=9,(0,Q.XW)(S);case 9:I=X.sent,z=I.result,U=I.success,F(!1),U&&z&&M(z);case 14:case"end":return X.stop()}},$)})),children:"\u89E3\u6790"}),children:(0,e.jsx)(Et.Z,{allowClear:!0,placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528 metadata \u5730\u5740"})})})),(0,e.jsxs)(we.A,N()(N()({scrollToFirstError:!0,requiredMark:!0,layout:"horizontal"},Vt),{},{form:s,onFinish:function(){var $=L()(v()().mark(function S(I){var z,U,V;return v()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,P.validateFields();case 2:if(z=q.sent,F(!0),!z){q.next=15;break}return q.next=7,(0,Q.$c)({id:t,template:a,config:(0,Se.omit)(I,"id","template")}).finally(function(){F(!1)});case 7:if(U=q.sent,V=U.success,!V){q.next=14;break}return J.ZP.success("\u4FDD\u5B58\u6210\u529F"),q.next=13,D();case 13:return q.abrupt("return",!0);case 14:J.ZP.error("\u4FDD\u5B58\u5931\u8D25");case 15:return F(!1),q.abrupt("return",!1);case 17:case"end":return q.stop()}},S)}));return function(S){return $.apply(this,arguments)}}(),submitter:{render:function(S,I){return(0,e.jsx)(hr.S,{children:I})}},children:[(0,e.jsx)(K.Z,{label:"ACS URL",name:"spAcsUrl",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u5355\u70B9\u767B\u5F55\u5730\u5740"},extra:"\u5E94\u7528\u7684 SAML SSO \u6838\u5FC3\u5730\u5740\uFF0C\u4E0E IAM \u4EA4\u4E92\u5904\u7406\u5355\u70B9\u767B\u5F55\u8BF7\u6C42\u3002",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5355\u70B9\u767B\u5F55\u5730\u5740"}]}),(0,e.jsx)(K.Z,{label:"SP Entity ID",name:"spEntityId",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u552F\u4E00\u6807\u8BC6"},allowClear:!1,extra:"\u5E94\u7528\u5728 IAM \u4E2D\u7684\u6807\u8BC6\uFF0C\u901A\u5E38\u5728\u5E94\u7528\u4FA7\u83B7\u53D6\uFF0C\u683C\u5F0F\u901A\u5E38\u4E3A\u5E94\u7528 URI\u3002",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5E94\u7528\u552F\u4E00\u6807\u8BC6"}]}),(0,e.jsx)(ye.Z,{label:"Name ID \u7C7B\u578B",name:"nameIdValueType",options:[{value:"user.username",label:"\u7528\u6237\u540D"},{value:"user.fullName",label:"\u7528\u6237\u59D3\u540D"},{value:"user.nickName",label:"\u7528\u6237\u6635\u79F0"},{value:"user.email",label:"\u90AE\u7BB1\u5730\u5740"},{value:"app_user.username",label:"\u5E94\u7528\u8D26\u6237"}],fieldProps:{allowClear:!1},extra:"\u5355\u70B9\u767B\u5F55\u65F6\uFF0C\u5C06\u9009\u4E2D\u9879\u4F5C\u4E3A\u8D26\u6237\u6807\u8BC6\uFF0C\u4F20\u9012\u7ED9\u4E1A\u52A1\u7CFB\u7EDF\u3002",rules:[{required:!0,message:"\u8BF7\u9009\u62E9 Name ID"}]}),(0,e.jsx)(H.Z,{}),(0,e.jsx)(ye.Z,{label:"\u6388\u6743\u8303\u56F4",name:"authorizationType",allowClear:!1,extra:"\u82E5\u9009\u62E9\u624B\u52A8\u6388\u6743\uFF0C\u9700\u8981\u5728 \u8BBF\u95EE\u6388\u6743 \u4E2D\u8FDB\u884C\u6743\u9650\u5206\u914D\u3002",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6388\u6743\u8303\u56F4"}],options:[{value:De.AUTHORIZATION,label:"\u624B\u52A8\u6388\u6743"},{value:De.ALL_ACCESS,label:"\u5168\u5458\u53EF\u8BBF\u95EE"}]}),(0,e.jsx)(ye.Z,{label:"SSO \u53D1\u8D77\u65B9",name:"initLoginType",allowClear:!1,rules:[{required:!0,message:"\u8BF7\u914D\u7F6E SSO \u53D1\u8D77\u65B9"}],options:[{value:Ke.APP,label:"\u53EA\u5141\u8BB8\u5E94\u7528\u53D1\u8D77"},{value:Ke.PORTAL_OR_APP,label:"\u652F\u6301\u95E8\u6237\u548C\u5E94\u7528\u53D1\u8D77"}],extra:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{children:"\u95E8\u6237\u53D1\u8D77\uFF1A\u7531 IAM \u95E8\u6237\u9875\u70B9\u51FB\u8FDB\u884C SSO \u3002"}),(0,e.jsx)("br",{}),(0,e.jsx)("span",{children:"\u5E94\u7528\u53D1\u8D77\uFF1A\u7531\u5E94\u7528\u767B\u5F55\u4E3B\u52A8\u53D1\u8D77\u3002"})]})}),(0,e.jsx)(ze.Z,{name:["initLoginType"],children:function(S){return(0,e.jsx)(K.Z,{label:"\u767B\u5F55\u53D1\u8D77\u5730\u5740",name:"initLoginUrl",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u94FE\u63A5"},extra:"\u82E5\u5E94\u7528\u4EC5\u652F\u6301 SP \u53D1\u8D77 SSO\uFF0C\u60A8\u53C8\u5E0C\u671B\u5B9E\u73B0\u7531 IAM \u95E8\u6237\u9875\u53D1\u8D77\u767B\u5F55\uFF0C\u8BF7\u586B\u5199\u6B64\u9879\u3002\u95E8\u6237\u9875\u8BBF\u95EE\u5E94\u7528\u65F6\uFF0CIAM \u4F1A\u8DF3\u8F6C\u5230\u672C\u5730\u5740\uFF0C\u5E94\u5373\u523B\u81EA\u52A8\u5411 IAM \u53D1\u8D77 SAMLRequest \u767B\u5F55\u8BF7\u6C42\u3002\u5730\u5740\u53EF\u586B\u5199\u4E3A\u4EFB\u610F\u53D7\u4FDD\u62A4\u8D44\u6E90\u8BBF\u95EE\u5730\u5740\uFF0C\u5728\u672A\u767B\u5F55\u65F6\u4F1A\u81EA\u52A8\u89E6\u53D1 SAMLRequest \u5373\u53EF\u3002"})}}),(0,e.jsx)(H.Z,{style:{margin:0}}),(0,e.jsx)(ve.Z,{ghost:!0,expandIconPosition:"start",children:(0,e.jsxs)(Cs,{header:(0,e.jsx)("a",{children:"\u663E\u793A\u9AD8\u7EA7\u914D\u7F6E"}),children:[(0,e.jsx)(K.Z,{label:"\u9ED8\u8BA4RelayState",name:"relayState",rules:[{type:"url",message:"RelayState \u683C\u5F0F\u4E0D\u6B63\u786E"}],fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u8DF3\u8F6C\u5730\u5740"},extra:"IDP \u53D1\u8D77 SSO \u767B\u5F55\u6210\u529F\u540E\uFF0C\u5E94\u7528\u5E94\u81EA\u52A8\u8DF3\u8F6C\u7684\u5730\u5740\u3002\u5728 SAML Response \u4E2D\u4F1A\u5728 RelayState \u53C2\u6570\u4E2D\u4F20\u9012\uFF0C\u5E94\u7528\u8BFB\u53D6\u540E\u5B9E\u73B0\u8DF3\u8F6C\u3002"}),(0,e.jsx)(H.Z,{orientation:"left",plain:!0,children:"\u65AD\u8A00"}),(0,e.jsx)(K.Z,{label:"Audience",name:"audience",allowClear:!1,extra:"SAML\u65AD\u8A00\u7684\u76EE\u6807\u53D7\u4F17\uFF0C\u9ED8\u8BA4\u548CSP Entity ID\u76F8\u540C\u3002",placeholder:"\u8BF7\u8F93\u5165SAML\u65AD\u8A00\u7684\u76EE\u6807\u53D7\u4F17"}),(0,e.jsx)(ye.Z,{label:"NameID \u683C\u5F0F",name:"nameIdFormat",allowClear:!1,initialValue:"urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified",rules:[{required:!0,message:"\u8BF7\u9009\u62E9 NameID \u5B57\u6BB5\u683C\u5F0F"}],extra:"SAML Response \u4E2D\u6307\u5B9A\u8D26\u6237\u6807\u8BC6 NameID \u5B57\u6BB5\u683C\u5F0F\u3002",options:[{value:"urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified",label:"urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified"},{value:"urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress",label:"urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress"},{value:"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent",label:"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent"},{value:"urn:oasis:names:tc:SAML:2.0:nameid-format:transient",label:"urn:oasis:names:tc:SAML:2.0:nameid-format:transient"}]}),(0,e.jsx)(ye.Z,{label:"ACS \u7ED1\u5B9A\u7C7B\u578B",name:"acsBinding",allowClear:!1,rules:[{required:!0,message:"\u8BF7\u9009\u62E9 ACS \u7ED1\u5B9A\u7C7B\u578B"}],extra:" \u6307\u5B9AIDP\u5411SP\u53D1\u9001\u65AD\u8A00\u8BF7\u6C42\u7684\u65B9\u5F0F\u3002",options:[{value:"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST",label:"HTTP-POST"},{value:"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect",label:"HTTP-Redirect"}]}),(0,e.jsx)(gr.Z,{label:"\u662F\u5426\u52A0\u5BC6\u65AD\u8A00",name:"assertEncrypted",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u5BF9\u65AD\u8A00\u52A0\u5BC6"}]}),(0,e.jsx)(ze.Z,{name:["assertEncrypted"],children:function(S){var I=S.assertEncrypted;return I&&(0,e.jsx)(ye.Z,{label:"\u65AD\u8A00\u52A0\u5BC6\u7B97\u6CD5",name:"assertEncryptAlgorithm",extra:"\u65AD\u8A00\u52A0\u5BC6\u4F7F\u7528\u7684\u7B97\u6CD5",allowClear:!1,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u65AD\u8A00\u52A0\u5BC6\u4F7F\u7528\u7684\u7B97\u6CD5"}],options:[{value:"http://www.w3.org/2001/04/xmlenc#aes128-cbc",label:"AES128-CBC"},{value:"http://www.w3.org/2001/04/xmlenc#aes256-cbc",label:"AES256-CBC"}]})}}),(0,e.jsx)(gr.Z,{label:"\u662F\u5426\u7B7E\u540D\u65AD\u8A00",name:"assertSigned",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u5BF9\u65AD\u8A00\u7B7E\u540D"}],initialValue:!0,extra:"\u662F\u5426\u5BF9\u65AD\u8A00\u4F7F\u7528IdP\u7684\u8BC1\u4E66\u7B7E\u540D\uFF0C\u5BF9\u5E94SP\u5143\u6570\u636E\u6587\u4EF6\u4E2D\u201CWantAssertionsSigned\u201D\u503C\u3002"}),(0,e.jsx)(ze.Z,{name:["assertSigned"],children:function(S){var I=S.assertSigned;return I&&(0,e.jsx)(ye.Z,{label:"\u65AD\u8A00\u7B7E\u540D\u7B97\u6CD5",name:"assertSignAlgorithm",extra:"\u65AD\u8A00\u7B7E\u540D\u4F7F\u7528\u7684\u7B97\u6CD5",allowClear:!1,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7B7E\u540D\u4F7F\u7528\u7684\u7B97\u6CD5"}],options:[{value:"http://www.w3.org/2001/04/xmldsig-more#rsa-sha256",label:"RSA-SHA256"}]})}}),(0,e.jsx)(ye.Z,{label:"\u8EAB\u4EFD\u8BA4\u8BC1\u4E0A\u4E0B\u6587",name:"authnContextClassRef",extra:"SAML \u8EAB\u4EFD\u8BA4\u8BC1\u4E0A\u4E0B\u6587",allowClear:!1,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u8EAB\u4EFD\u8BA4\u8BC1\u4E0A\u4E0B\u6587"}],options:[{value:"urn:oasis:names:tc:SAML:2.0:ac:classes:unspecified",label:(0,e.jsx)(kr.Z,{title:"urn:oasis:names:tc:SAML:2.0:ac:classes:unspecified",placement:"topLeft",children:(0,e.jsx)("span",{children:"urn:oasis:names:tc:SAML:2.0:ac:classes:unspecified"})})},{value:"urn:oasis:names:tc:SAML:2.0:ac:classes:Password",label:(0,e.jsx)(kr.Z,{placement:"topLeft",title:"urn:oasis:names:tc:SAML:2.0:ac:classes:Password",children:(0,e.jsx)("span",{children:"urn:oasis:names:tc:SAML:2.0:ac:classes:Password"})})},{value:"urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport",label:(0,e.jsx)(kr.Z,{placement:"topLeft",title:"urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport",children:(0,e.jsx)("span",{children:"urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport"})})}]}),(0,e.jsx)(we.A.Item,{label:"\u65AD\u8A00\u5C5E\u6027",name:"attributeStatements",trigger:"onValuesChange",children:(0,e.jsx)(Br.Z,{rowKey:"key",toolBarRender:!1,scroll:{x:500},columns:[{title:"\u5C5E\u6027\u540D\u79F0",dataIndex:"name",fieldProps:{allowClear:!1},formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u540D\u79F0\u683C\u5F0F",key:"nameFormat",dataIndex:"nameFormat",valueType:"select",ellipsis:!0,valueEnum:{"urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified":{text:"unspecified"},"urn:oasis:names:tc:SAML:2.0:attrname-format:basic":{text:"basic"},"urn:oasis:names:tc:SAML:2.0:attrname-format:uri":{text:"uri"}},formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u5C5E\u6027\u503C",tooltip:"\u652F\u6301\u7684\u53D8\u91CF\uFF1A${user.phone}\u3001${user.username}\u3001${user.email}\u3001${app_user.nickName}\u3001${app_user.username}",dataIndex:"valueExpression",fieldProps:{allowClear:!1,placeholder:"\u53D8\u91CF\u503C"},formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u64CD\u4F5C",valueType:"option",align:"center",fixed:"right",width:50}],recordCreatorProps:{creatorButtonText:"\u6DFB\u52A0\u65AD\u8A00\u5C5E\u6027",newRecordType:"dataSource",position:"bottom",record:function(){return{key:Date.now()}}},editable:{form:P,type:"multiple",editableKeys:Z,onChange:h,deletePopconfirmMessage:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u6B64\u65AD\u8A00\u5C5E\u6027\u5417\uFF1F",actionRender:function(S,I,z){return[z.delete]}}})}),(0,e.jsx)(H.Z,{orientation:"left",plain:!0,children:"\u54CD\u5E94\u7B7E\u540D"}),(0,e.jsx)(gr.Z,{label:"\u662F\u5426\u7B7E\u540D\u54CD\u5E94",name:"responseSigned",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u5BF9\u54CD\u5E94\u7B7E\u540D"}],initialValue:!1}),(0,e.jsx)(ze.Z,{name:["responseSigned"],children:function(S){var I=S.responseSigned;return I&&(0,e.jsx)(ye.Z,{label:"\u54CD\u5E94\u7B7E\u540D\u7B97\u6CD5",name:"responseSignAlgorithm",extra:"\u65AD\u8A00\u54CD\u5E94\u4F7F\u7528\u7684\u7B97\u6CD5",allowClear:!1,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u54CD\u5E94\u7B7E\u540D\u4F7F\u7528\u7684\u7B97\u6CD5"}],options:[{value:"http://www.w3.org/2001/04/xmldsig-more#rsa-sha256",label:"RSA-SHA256"}]})}}),(0,e.jsx)(H.Z,{orientation:"left",plain:!0,children:"\u9A8C\u8BC1\u8BF7\u6C42"}),(0,e.jsx)(gr.Z,{label:"\u9A8C\u8BC1\u8BF7\u6C42\u7B7E\u540D",name:"spRequestsSigned",initialValue:!1,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u9A8C\u8BC1\u8BF7\u6C42\u7B7E\u540D"}],extra:"\u7528\u6765\u5BF9SAML Request\u7B7E\u540D\u8FDB\u884C\u9A8C\u8BC1\uFF0C\u5BF9\u5E94SP\u5143\u6570\u636E\u6587\u4EF6\u4E2D\u201CAuthnRequestsSigned\u201D\u503C\u3002"}),(0,e.jsx)(H.Z,{orientation:"left",plain:!0,children:"\u5355\u70B9\u6CE8\u9500"}),(0,e.jsx)(gr.Z,{label:"\u542F\u7528 SLO",name:"spSloEnabled",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u542F\u7528 SLO"}],initialValue:!1,extra:"SP \u662F\u5426\u652F\u6301\u5355\u70B9\u6CE8\u9500 (SLO) \u3002"}),(0,e.jsx)(ze.Z,{name:["spSloEnabled"],children:function(S){var I=S.spSloEnabled;return I&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(K.Z,{label:"\u5355\u70B9\u6CE8\u9500 URL",name:"spSlsUrl",rules:[{type:"url",message:"\u5355\u70B9\u6CE8\u9500\u5730\u5740\u683C\u5F0F\u4E0D\u6B63\u786E"},{required:!0,message:"\u8BF7\u8F93\u5165\u5355\u70B9\u6CE8\u9500\u5730\u5740"}],allowClear:!0,extra:"\u4F1A\u8BDD\u6CE8\u9500\u529F\u80FD\uFF0C\u7528\u6237\u5728 TopIAM \u6CE8\u9500\u4F1A\u8BDD\u540E\u901A\u77E5\u8BE5\u5730\u5740\u3002",placeholder:"\u8BF7\u8F93\u5165\u5355\u70B9\u6CE8\u9500\u5730\u5740"}),(0,e.jsx)(ye.Z,{label:"\u5355\u70B9\u6CE8\u9500\u7ED1\u5B9A\u7C7B\u578B",name:"spSlsBinding",allowClear:!1,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5355\u70B9\u6CE8\u9500\u7ED1\u5B9A\u7C7B\u578B"}],extra:" \u6307\u5B9A\u4E86 IDP \u5411 SP \u53D1\u9001 SLO \u8BF7\u6C42\u7684\u65B9\u5F0F\u3002",options:[{value:"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST",label:"HTTP-POST"},{value:"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect",label:"HTTP-Redirect"}]})]})}}),(0,e.jsx)(H.Z,{}),(0,e.jsx)(ur.Z,{label:"\u7B7E\u540D\u8BC1\u4E66",name:"spSignCert",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u9A8C\u8BC1\u7B7E\u540D\u8BC1\u4E66"}],extra:'SP\u516C\u94A5\u8BC1\u4E66\uFF0C\u7528\u6765\u9A8C\u8BC1SAML request\u7684\u7B7E\u540D\uFF0C\u5BF9\u5E94SP\u5143\u6570\u636E\u6587\u4EF6\u4E2Duse="signing"\u8BC1\u4E66\u5185\u5BB9\u3002',fieldProps:{autoComplete:"off",rows:3}})]},"advanced")})]})),(0,e.jsx)(H.Z,{style:{margin:0}}),(0,e.jsx)(jt,{appId:t,protocolEndpoint:j,collapsed:!0})]})})},ys=function(r){var n=r.app;return(0,e.jsxs)(e.Fragment,{children:[n.type===le.pR.CUSTOM_MADE&&(0,e.jsx)(oa,{app:n}),n.type===le.pR.STANDARD&&(0,e.jsx)(xs,{app:n})]})},bs=ys,Es=function(r){var n=r.appId,t=(0,i.useState)(!0),a=B()(t,2),d=a[0],l=a[1],s=(0,i.useState)(),o=B()(s,2),p=o[0],u=o[1];return(0,se.Z)(L()(v()().mark(function c(){var w,C,F;return v()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return l(!0),T.next=3,(0,Q.Mq)(n);case 3:w=T.sent,C=w.result,F=w.success,F&&C&&u(C),l(!1);case 8:case"end":return T.stop()}},c)})),[]),(0,e.jsx)(Hr.Z,{title:"\u5355\u70B9\u767B\u5F55",style:{height:"calc(100vh - 190px)",overflow:"auto"},bodyStyle:{height:"100%"},headerBordered:!0,children:(0,e.jsxs)(mt.Z,{loading:d,active:!0,paragraph:{rows:5},children:[(p==null?void 0:p.protocol)===le.gD.SAML2&&(0,e.jsx)(bs,{app:p}),(p==null?void 0:p.protocol)===le.gD.CAS&&(0,e.jsx)(Un,{app:p}),(p==null?void 0:p.protocol)===le.gD.JWT&&(0,e.jsx)(Yn,{app:p}),(p==null?void 0:p.protocol)===le.gD.OIDC&&(0,e.jsx)(aa,{app:p}),(p==null?void 0:p.protocol)===le.gD.FORM&&(0,e.jsx)(Kn,{app:p})]})})},Fs=qe.ZP.ConfigContext,As=function(n){var t,a,d,l,s,o,p,u,c,w,C,F,O,T,j=n.prefixCls,g=n.antCls;return T={},te()(T,"".concat(j),(F={},te()(F,"&-main",{display:"flex"}),te()(F,"&-left",te()({minHeight:"100%",overflow:"auto",marginRight:n.margin,width:"200px"},"&-menu",(C={height:"calc(100vh - 190px)"},te()(C,"&".concat(g,"-menu-light").concat(g,"-menu-root").concat(g,"-menu-inline"),{"border-inline-end":"none"}),te()(C,"&".concat(g,"-menu-light:not(").concat(g,"-menu-horizontal) ").concat(g,"-menu-item-selected"),{"background-color":(t=n.layout)===null||t===void 0||(a=t.sider)===null||a===void 0?void 0:a.colorBgMenuItemSelected,color:(d=n.layout)===null||d===void 0||(l=d.sider)===null||l===void 0?void 0:l.colorTextMenuSelected}),te()(C,"&".concat(g,"-menu-light:not(").concat(g,"-menu-horizontal) ").concat(g,"-menu-item:not(").concat(g,"-menu-item-selected):active"),{"background-color":(s=n.layout)===null||s===void 0||(o=s.sider)===null||o===void 0?void 0:o.colorBgMenuItemSelected,color:(p=n.layout)===null||p===void 0||(u=p.sider)===null||u===void 0?void 0:u.colorTextMenuActive}),te()(C,"&".concat(g,"-menu-light ").concat(g,"-menu-submenu-selected >").concat(g,"-menu-submenu-title"),{color:(c=n.layout)===null||c===void 0||(w=c.sider)===null||w===void 0?void 0:w.colorTextMenuSelected}),C))),te()(F,"&-right",{flex:1,minHeight:"100%",overflow:"auto"}),F)),te()(T,"@media screen and (max-width: ".concat(n.screenXL,"px)"),te()({},"".concat(j),(O={},te()(O,"&-main",{flexDirection:"column"}),te()(O,"&-left",te()({width:"100%",border:"none",marginRight:0,marginBottom:n.margin},"&-menu",{height:"auto"})),O))),T};function Ss(r){var n=(0,i.useContext)(Fs),t=n.getPrefixCls,a=".".concat(t());return(0,Le.Xj)("AppConfig",function(d){var l=N()(N()({},d),{},{prefixCls:".".concat(r),antCls:a});return[As(l)]})}var jr="app-config",js=function(){var r=(0,i.useState)(),n=B()(r,2),t=n[0],a=n[1],d=(0,i.useState)(),l=B()(d,2),s=l[0],o=l[1],p=(0,Wr.useLocation)(),u=Ss(jr),c=u.wrapSSR,w=u.hashId,C=(0,i.useState)({mode:"inline"}),F=B()(C,2),O=F[0],T=F[1],j=(0,i.useRef)(),g=function(){requestAnimationFrame(function(){if(j.current){var E="inline";window.innerWidth<1200&&(E="horizontal"),T(N()(N()({},O),{},{mode:E}))}})};(0,i.useLayoutEffect)(function(){return j.current&&(window.addEventListener("resize",g),g()),function(){window.removeEventListener("resize",g)}},[]);var A=Tr.Z.parse(p.search),f=A,Z=f.type,h=f.id,y=f.name,b=f.protocol,P=[{key:de.BASIC,label:"\u57FA\u672C\u914D\u7F6E",icon:i.createElement(function(){return(0,e.jsx)(Je,{})})},{key:de.LOGIN_ACCESS,label:"\u767B\u5F55\u8BBF\u95EE",icon:i.createElement(function(){return(0,e.jsx)(zr,{})}),children:[{key:de.PROTOCOL_CONFIG,label:"\u5355\u70B9\u767B\u5F55"}].concat(ee()(!b||b===le.gD.OIDC?[]:[{key:de.APP_ACCOUNT,label:"\u5E94\u7528\u8D26\u6237"}]),[{key:de.ACCESS_POLICY,label:"\u8BBF\u95EE\u6388\u6743"}])},{key:de.ACCOUNT_SYNC,label:"\u8D26\u6237\u540C\u6B65",icon:i.createElement(function(){return(0,e.jsx)(wr.Z,{})})},{key:de.APP_PERMISSION,label:"\u6743\u9650\u7BA1\u7406",icon:i.createElement(function(){return(0,e.jsx)(Zr.Z,{})}),children:[{key:de.PERMISSION_RESOURCE,label:"\u8D44\u6E90\u7BA1\u7406"},{key:de.PERMISSION_ROLE,label:"\u89D2\u8272\u7BA1\u7406"},{key:de.PERMISSION_POLICY,label:"\u6388\u6743\u7BA1\u7406"}]}];return(0,se.Z)(L()(v()().mark(function x(){return v()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(!(!h||!b)){D.next=4;break}return J.ZP.error("\u672A\u6307\u5B9A\u5E94\u7528"),Fe.m.push("/app"),D.abrupt("return");case 4:if(!(!Z||!(Z.toUpperCase()in de))){D.next=8;break}return a([de.PROTOCOL_CONFIG]),Fe.m.replace({pathname:p.pathname,search:Tr.Z.stringify({type:de.PROTOCOL_CONFIG,id:h,protocol:b,name:y})}),D.abrupt("return");case 8:a([Z]);case 9:case"end":return D.stop()}},x)})),[]),(0,se.Z)(L()(v()().mark(function x(){return v()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:o(A.name);case 1:case"end":return D.stop()}},x)})),[p]),c((0,e.jsx)(Xe._z,{title:s,style:{overflow:"hidden"},onBack:function(){Fe.m.push("/app")},children:(0,e.jsx)(Ir.f,{children:(0,e.jsxs)("div",{className:Ce()("".concat(jr,"-main"),w),ref:function(E){E&&(j.current=E)},children:[(0,e.jsx)("div",{className:Ce()("".concat(jr,"-left"),w),children:(0,e.jsx)(Rr.Z,{mode:O.mode,selectedKeys:t,className:Ce()("".concat(jr,"-left-menu"),w),items:P,onSelect:function(E){var D=E.selectedKeys;a(D),Fe.m.replace({pathname:p.pathname,search:Tr.Z.stringify({type:D==null?void 0:D[0],id:h,protocol:b,name:y})})}})}),(0,e.jsxs)("div",{className:Ce()("".concat(jr,"-right"),w),children:[(t==null?void 0:t[0])===de.BASIC&&(0,e.jsx)(dn,{appId:h}),(t==null?void 0:t[0])===de.PROTOCOL_CONFIG&&(0,e.jsx)(Es,{appId:h}),(t==null?void 0:t[0])===de.APP_ACCOUNT&&(0,e.jsx)(ln,{appId:h,protocol:b}),(t==null?void 0:t[0])===de.ACCESS_POLICY&&(0,e.jsx)(tn,{appId:h}),(t==null?void 0:t[0])===de.ACCOUNT_SYNC&&(0,e.jsx)(nn,{}),(t==null?void 0:t[0])===de.PERMISSION_RESOURCE&&(0,e.jsx)(Sn,{appId:h}),(t==null?void 0:t[0])===de.PERMISSION_ROLE&&(0,e.jsx)(Tn,{appId:h}),(t==null?void 0:t[0])===de.PERMISSION_POLICY&&(0,e.jsx)(xn,{appId:h})]})]})})}))},Ps=js},10255:function(Ie){function pe(m){if(m==null)throw new TypeError("Cannot destructure "+m)}Ie.exports=pe,Ie.exports.__esModule=!0,Ie.exports.default=Ie.exports},80840:function(Ie,pe,m){"use strict";m.d(pe,{DS:function(){return Kr}});var Y=m(53441).lW;const v="3.7.5",ue=v,L=typeof atob=="function",ce=typeof btoa=="function",ee=typeof Y=="function",me=typeof TextDecoder=="function"?new TextDecoder:void 0,N=typeof TextEncoder=="function"?new TextEncoder:void 0,Ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",B=Array.prototype.slice.call(Ee),Fe=(R=>{let k={};return R.forEach((H,Re)=>k[H]=Re),k})(B),fe=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,i=String.fromCharCode.bind(String),Ae=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):R=>new Uint8Array(Array.prototype.slice.call(R,0)),Te=R=>R.replace(/=/g,"").replace(/[+\/]/g,k=>k=="+"?"-":"_"),be=R=>R.replace(/[^A-Za-z0-9\+\/]/g,""),Ue=R=>{let k,H,Re,te,Le="";const qe=R.length%3;for(let mr=0;mr<R.length;){if((H=R.charCodeAt(mr++))>255||(Re=R.charCodeAt(mr++))>255||(te=R.charCodeAt(mr++))>255)throw new TypeError("invalid character found");k=H<<16|Re<<8|te,Le+=B[k>>18&63]+B[k>>12&63]+B[k>>6&63]+B[k&63]}return qe?Le.slice(0,qe-3)+"===".substring(qe):Le},Je=ce?R=>btoa(R):ee?R=>Y.from(R,"binary").toString("base64"):Ue,Ye=ee?R=>Y.from(R).toString("base64"):R=>{let H=[];for(let Re=0,te=R.length;Re<te;Re+=4096)H.push(i.apply(null,R.subarray(Re,Re+4096)));return Je(H.join(""))},Ne=(R,k=!1)=>k?Te(Ye(R)):Ye(R),Cr=R=>{if(R.length<2){var k=R.charCodeAt(0);return k<128?R:k<2048?i(192|k>>>6)+i(128|k&63):i(224|k>>>12&15)+i(128|k>>>6&63)+i(128|k&63)}else{var k=65536+(R.charCodeAt(0)-55296)*1024+(R.charCodeAt(1)-56320);return i(240|k>>>18&7)+i(128|k>>>12&63)+i(128|k>>>6&63)+i(128|k&63)}},zr=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,wr=R=>R.replace(zr,Cr),Zr=ee?R=>Y.from(R,"utf8").toString("base64"):N?R=>Ye(N.encode(R)):R=>Je(wr(R)),Xe=(R,k=!1)=>k?Te(Zr(R)):Zr(R),Ir=R=>Xe(R,!0),se=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,J=R=>{switch(R.length){case 4:var k=(7&R.charCodeAt(0))<<18|(63&R.charCodeAt(1))<<12|(63&R.charCodeAt(2))<<6|63&R.charCodeAt(3),H=k-65536;return i((H>>>10)+55296)+i((H&1023)+56320);case 3:return i((15&R.charCodeAt(0))<<12|(63&R.charCodeAt(1))<<6|63&R.charCodeAt(2));default:return i((31&R.charCodeAt(0))<<6|63&R.charCodeAt(1))}},Rr=R=>R.replace(se,J),sr=R=>{if(R=R.replace(/\s+/g,""),!fe.test(R))throw new TypeError("malformed base64.");R+="==".slice(2-(R.length&3));let k,H="",Re,te;for(let Le=0;Le<R.length;)k=Fe[R.charAt(Le++)]<<18|Fe[R.charAt(Le++)]<<12|(Re=Fe[R.charAt(Le++)])<<6|(te=Fe[R.charAt(Le++)]),H+=Re===64?i(k>>16&255):te===64?i(k>>16&255,k>>8&255):i(k>>16&255,k>>8&255,k&255);return H},xr=L?R=>atob(be(R)):ee?R=>Y.from(R,"base64").toString("binary"):sr,e=ee?R=>Ae(Y.from(R,"base64")):R=>Ae(xr(R).split("").map(k=>k.charCodeAt(0))),Dr=R=>e(yr(R)),Qr=ee?R=>Y.from(R,"base64").toString("utf8"):me?R=>me.decode(e(R)):R=>Rr(xr(R)),yr=R=>be(R.replace(/[-_]/g,k=>k=="-"?"+":"/")),lr=R=>Qr(yr(R)),Pe=R=>{if(typeof R!="string")return!1;const k=R.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(k)||!/[^\s0-9a-zA-Z\-_]/.test(k)},Se=R=>({value:R,enumerable:!1,writable:!0,configurable:!0}),Or=function(){const R=(k,H)=>Object.defineProperty(String.prototype,k,Se(H));R("fromBase64",function(){return lr(this)}),R("toBase64",function(k){return Xe(this,k)}),R("toBase64URI",function(){return Xe(this,!0)}),R("toBase64URL",function(){return Xe(this,!0)}),R("toUint8Array",function(){return Dr(this)})},br=function(){const R=(k,H)=>Object.defineProperty(Uint8Array.prototype,k,Se(H));R("toBase64",function(k){return Ne(this,k)}),R("toBase64URI",function(){return Ne(this,!0)}),R("toBase64URL",function(){return Ne(this,!0)})},Kr={version:v,VERSION:ue,atob:xr,atobPolyfill:sr,btoa:Je,btoaPolyfill:Ue,fromBase64:lr,toBase64:Xe,encode:Xe,encodeURI:Ir,encodeURL:Ir,utob:wr,btou:Rr,decode:lr,isValid:Pe,fromUint8Array:Ne,toUint8Array:Dr,extendString:Or,extendUint8Array:br,extendBuiltins:()=>{Or(),br()}}}}]);
