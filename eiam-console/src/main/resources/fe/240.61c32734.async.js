/*
 * eiam-console - Employee Identity and Access Management Program
 * Copyright Â© 2020-2023 TopIAM (support@topiam.cn)
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
"use strict";(self.webpackChunktopiam_console=self.webpackChunktopiam_console||[]).push([[240],{95718:function(ve,X,c){var N=c(775),F=c(79685),n=c(8821),H=c(34207);function U(A){return!!(A&&A.then)}const J=A=>{const{type:q,children:_,prefixCls:k,buttonProps:B,close:Z,autoFocus:$,emitEvent:K,quitOnNullishReturnValue:L,actionFn:M}=A,I=F.useRef(!1),Q=F.useRef(null),[ee,S]=(0,N.Z)(!1),w=function(){Z==null||Z.apply(void 0,arguments)};F.useEffect(()=>{let p=null;return $&&(p=setTimeout(()=>{var y;(y=Q.current)===null||y===void 0||y.focus()})),()=>{p&&clearTimeout(p)}},[]);const Y=p=>{U(p)&&(S(!0),p.then(function(){S(!1,!0),w.apply(void 0,arguments),I.current=!1},y=>(S(!1,!0),I.current=!1,Promise.reject(y))))},G=p=>{if(I.current)return;if(I.current=!0,!M){w();return}let y;if(K){if(y=M(p),L&&!U(y)){I.current=!1,w(p);return}}else if(M.length)y=M(Z),I.current=!1;else if(y=M(),!y){w();return}Y(y)};return F.createElement(n.ZP,Object.assign({},(0,H.n)(q),{onClick:G,loading:ee,prefixCls:k},B,{ref:Q}),_)};X.Z=J},60240:function(ve,X,c){c.d(X,{Z:function(){return Ie}});var N=c(23570),F=c(138),n=c(79685),H=c(47918),U=c(91549),J=c(94587),A=c(86437),q=c(43894),_=c(68591),k=c.n(_),B=c(95795),Z=c(95718),$=c(60789),K=c(13772),L=c(56865),M=c(96249),I=c(13205),Q=c(17568),ee=c(35632),S=c(8821),w=c(34207),Y=c(7266),G=c(49730),p=function(e,o){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&o.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,t=Object.getOwnPropertySymbols(e);l<t.length;l++)o.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(e,t[l])&&(r[t[l]]=e[t[l]]);return r};function y(e,o){return n.createElement("span",{className:`${e}-close-x`},o||n.createElement(ee.Z,{className:`${e}-close-icon`}))}function oe(e){const{okText:o,okType:r="primary",cancelText:t,confirmLoading:l,onOk:d,onCancel:g,okButtonProps:m,cancelButtonProps:f,footer:a}=e;return a===void 0?n.createElement(B.Z,{componentName:"Modal",defaultLocale:(0,Y.A)()},s=>n.createElement(n.Fragment,null,n.createElement(S.ZP,Object.assign({onClick:g},f),t||s.cancelText),n.createElement(S.ZP,Object.assign({},(0,w.n)(r),{loading:l,onClick:d},m),o||s.okText))):a}function ge(e){const{prefixCls:o,className:r,closeIcon:t,closable:l,type:d,title:g,children:m}=e,f=p(e,["prefixCls","className","closeIcon","closable","type","title","children"]),{getPrefixCls:a}=n.useContext(L.E_),s=a(),C=o||a("modal"),[,u]=(0,G.Z)(C),i=`${C}-confirm`;let x={};return d?x={closable:l!=null?l:!1,title:"",footer:"",children:n.createElement(re,Object.assign({},e,{confirmPrefixCls:i,rootPrefixCls:s,content:m}))}:x={closable:l!=null?l:!0,title:g,footer:oe(e),children:m},n.createElement(K.s,Object.assign({prefixCls:C,className:k()(u,`${C}-pure-panel`,d&&i,d&&`${i}-${d}`,r)},f,{closeIcon:y(C,t),closable:l},x))}var xe=function(e,o){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&o.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,t=Object.getOwnPropertySymbols(e);l<t.length;l++)o.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(e,t[l])&&(r[t[l]]=e[t[l]]);return r};let te;const Oe=e=>{te={x:e.pageX,y:e.pageY},setTimeout(()=>{te=null},100)};(0,Q.jD)()&&document.documentElement.addEventListener("click",Oe,!0);var le=e=>{var o;const{getPopupContainer:r,getPrefixCls:t,direction:l}=n.useContext(L.E_),d=W=>{const{onCancel:T}=e;T==null||T(W)},g=W=>{const{onOk:T}=e;T==null||T(W)},{prefixCls:m,className:f,rootClassName:a,open:s,wrapClassName:C,centered:u,getContainer:i,closeIcon:x,focusTriggerAfterClose:v=!0,visible:b,width:P=520}=e,j=xe(e,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","closeIcon","focusTriggerAfterClose","visible","width"]),E=t("modal",m),O=t(),[z,V]=(0,G.Z)(E),ne=k()(C,{[`${E}-centered`]:!!u,[`${E}-wrap-rtl`]:l==="rtl"});return z(n.createElement(I.BR,null,n.createElement(M.Ux,{status:!0,override:!0},n.createElement(K.Z,Object.assign({width:P},j,{getContainer:i===void 0?r:i,prefixCls:E,rootClassName:k()(V,a),wrapClassName:ne,footer:oe(Object.assign(Object.assign({},e),{onOk:g,onCancel:d})),visible:s!=null?s:b,mousePosition:(o=j.mousePosition)!==null&&o!==void 0?o:te,onClose:d,closeIcon:y(E,x),focusTriggerAfterClose:v,transitionName:(0,$.mL)(O,"zoom",e.transitionName),maskTransitionName:(0,$.mL)(O,"fade",e.maskTransitionName),className:k()(V,f)})))))};function re(e){const{icon:o,onCancel:r,onOk:t,close:l,okText:d,okButtonProps:g,cancelText:m,cancelButtonProps:f,confirmPrefixCls:a,rootPrefixCls:s,type:C,okCancel:u,footer:i,locale:x}=e;let v=o;if(!o&&o!==null)switch(C){case"info":v=n.createElement(q.Z,null);break;case"success":v=n.createElement(U.Z,null);break;case"error":v=n.createElement(J.Z,null);break;default:v=n.createElement(A.Z,null)}const b=e.okType||"primary",P=u!=null?u:C==="confirm",j=e.autoFocusButton===null?!1:e.autoFocusButton||"ok";return n.createElement(B.Z,{componentName:"Modal"},E=>{const O=x||E,z=P&&n.createElement(Z.Z,{actionFn:r,close:l,autoFocus:j==="cancel",buttonProps:f,prefixCls:`${s}-btn`},m||(O==null?void 0:O.cancelText));return n.createElement("div",{className:`${a}-body-wrapper`},n.createElement("div",{className:`${a}-body`},v,e.title===void 0?null:n.createElement("span",{className:`${a}-title`},e.title),n.createElement("div",{className:`${a}-content`},e.content)),i!==void 0?i:n.createElement("div",{className:`${a}-btns`},z,n.createElement(Z.Z,{type:b,actionFn:t,close:l,autoFocus:j==="ok",buttonProps:g,prefixCls:`${s}-btn`},d||(P?O==null?void 0:O.okText:O==null?void 0:O.justOkText))))})}var se=e=>{const{close:o,zIndex:r,afterClose:t,visible:l,open:d,keyboard:g,centered:m,getContainer:f,maskStyle:a,direction:s,prefixCls:C,wrapClassName:u,rootPrefixCls:i,iconPrefixCls:x,bodyStyle:v,closable:b=!1,closeIcon:P,modalRender:j,focusTriggerAfterClose:E}=e,O=`${C}-confirm`,z=e.width||416,V=e.style||{},ne=e.mask===void 0?!0:e.mask,W=e.maskClosable===void 0?!1:e.maskClosable,T=k()(O,`${O}-${e.type}`,{[`${O}-rtl`]:s==="rtl"},e.className);return n.createElement(H.ZP,{prefixCls:i,iconPrefixCls:x,direction:s},n.createElement(le,{prefixCls:C,className:T,wrapClassName:k()({[`${O}-centered`]:!!e.centered},u),onCancel:()=>o==null?void 0:o({triggerCancel:!0}),open:d,title:"",footer:"",transitionName:(0,$.mL)(i,"zoom",e.transitionName),maskTransitionName:(0,$.mL)(i,"fade",e.maskTransitionName),mask:ne,maskClosable:W,maskStyle:a,style:V,bodyStyle:v,width:z,zIndex:r,afterClose:t,keyboard:g,centered:m,getContainer:f,closable:b,closeIcon:P,modalRender:j,focusTriggerAfterClose:E},n.createElement(re,Object.assign({},e,{confirmPrefixCls:O}))))},R=[],ye=function(e,o){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&o.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,t=Object.getOwnPropertySymbols(e);l<t.length;l++)o.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(e,t[l])&&(r[t[l]]=e[t[l]]);return r};let ae="";function be(){return ae}function D(e){const o=document.createDocumentFragment();let r=Object.assign(Object.assign({},e),{close:g,open:!0}),t;function l(){for(var f=arguments.length,a=new Array(f),s=0;s<f;s++)a[s]=arguments[s];const C=a.some(u=>u&&u.triggerCancel);e.onCancel&&C&&e.onCancel.apply(e,[()=>{}].concat((0,N.Z)(a.slice(1))));for(let u=0;u<R.length;u++)if(R[u]===g){R.splice(u,1);break}(0,F.v)(o)}function d(f){var{okText:a,cancelText:s,prefixCls:C}=f,u=ye(f,["okText","cancelText","prefixCls"]);clearTimeout(t),t=setTimeout(()=>{const i=(0,Y.A)(),{getPrefixCls:x,getIconPrefixCls:v}=(0,H.w6)(),b=x(void 0,be()),P=C||`${b}-modal`,j=v();(0,F.s)(n.createElement(se,Object.assign({},u,{prefixCls:P,rootPrefixCls:b,iconPrefixCls:j,okText:a,locale:i,cancelText:s||i.cancelText})),o)})}function g(){for(var f=arguments.length,a=new Array(f),s=0;s<f;s++)a[s]=arguments[s];r=Object.assign(Object.assign({},r),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),l.apply(this,a)}}),r.visible&&delete r.visible,d(r)}function m(f){typeof f=="function"?r=f(r):r=Object.assign(Object.assign({},r),f),d(r)}return d(r),R.push(g),{destroy:g,update:m}}function ce(e){return Object.assign(Object.assign({},e),{type:"warning"})}function ie(e){return Object.assign(Object.assign({},e),{type:"info"})}function fe(e){return Object.assign(Object.assign({},e),{type:"success"})}function ue(e){return Object.assign(Object.assign({},e),{type:"error"})}function de(e){return Object.assign(Object.assign({},e),{type:"confirm"})}function Pe(e){let{rootPrefixCls:o}=e;ae=o}function Ee(){const[e,o]=n.useState([]),r=n.useCallback(t=>(o(l=>[].concat((0,N.Z)(l),[t])),()=>{o(l=>l.filter(d=>d!==t))}),[]);return[e,r]}var pe=c(42615);const he=(e,o)=>{let{afterClose:r,config:t}=e;var l;const[d,g]=n.useState(!0),[m,f]=n.useState(t),{direction:a,getPrefixCls:s}=n.useContext(L.E_),C=s("modal"),u=s(),i=function(){g(!1);for(var v=arguments.length,b=new Array(v),P=0;P<v;P++)b[P]=arguments[P];const j=b.some(E=>E&&E.triggerCancel);m.onCancel&&j&&m.onCancel.apply(m,[()=>{}].concat((0,N.Z)(b.slice(1))))};n.useImperativeHandle(o,()=>({destroy:i,update:v=>{f(b=>Object.assign(Object.assign({},b),v))}}));const x=(l=m.okCancel)!==null&&l!==void 0?l:m.type==="confirm";return n.createElement(B.Z,{componentName:"Modal",defaultLocale:pe.Z.Modal},v=>n.createElement(se,Object.assign({prefixCls:C,rootPrefixCls:u},m,{close:i,open:d,afterClose:r,okText:m.okText||(x?v.okText:v.justOkText),direction:a,cancelText:m.cancelText||v.cancelText})))};var je=n.forwardRef(he);let me=0;const Te=n.memo(n.forwardRef((e,o)=>{const[r,t]=Ee();return n.useImperativeHandle(o,()=>({patchElement:t}),[]),n.createElement(n.Fragment,null,r)}));function Ne(){const e=n.useRef(null),[o,r]=n.useState([]);n.useEffect(()=>{o.length&&((0,N.Z)(o).forEach(g=>{g()}),r([]))},[o]);const t=n.useCallback(d=>function(m){var f;me+=1;const a=n.createRef();let s;const C=n.createElement(je,{key:`modal-${me}`,config:d(m),ref:a,afterClose:()=>{s==null||s()}});return s=(f=e.current)===null||f===void 0?void 0:f.patchElement(C),s&&R.push(s),{destroy:()=>{function u(){var i;(i=a.current)===null||i===void 0||i.destroy()}a.current?u():r(i=>[].concat((0,N.Z)(i),[u]))},update:u=>{function i(){var x;(x=a.current)===null||x===void 0||x.update(u)}a.current?i():r(x=>[].concat((0,N.Z)(x),[i]))}}},[]);return[n.useMemo(()=>({info:t(ie),success:t(fe),error:t(ue),warning:t(ce),confirm:t(de)}),[]),n.createElement(Te,{key:"modal-holder",ref:e})]}var ke=Ne;function Ce(e){return D(ce(e))}const h=le;h.useModal=ke,h.info=function(o){return D(ie(o))},h.success=function(o){return D(fe(o))},h.error=function(o){return D(ue(o))},h.warning=Ce,h.warn=Ce,h.confirm=function(o){return D(de(o))},h.destroyAll=function(){for(;R.length;){const o=R.pop();o&&o()}},h.config=Pe,h._InternalPanelDoNotUseOrYouWillBeFired=ge;var Ie=h}}]);
