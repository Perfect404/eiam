/*
 * eiam-console - Employee Identity and Access Management Program
 * Copyright Â© 2020-2023 TopIAM (support@topiam.cn)
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
(self.webpackChunktopiam_console=self.webpackChunktopiam_console||[]).push([[91],{29113:function(Ze,pe,m){"use strict";m.d(pe,{Z:function(){return me}});var J=m(5543),h=m(79685),ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M811.4 368.9C765.6 248 648.9 162 512.2 162S258.8 247.9 213 368.8C126.9 391.5 63.5 470.2 64 563.6 64.6 668 145.6 752.9 247.6 762c4.7.4 8.7-3.3 8.7-8v-60.4c0-4-3-7.4-7-7.9-27-3.4-52.5-15.2-72.1-34.5-24-23.5-37.2-55.1-37.2-88.6 0-28 9.1-54.4 26.2-76.4 16.7-21.4 40.2-36.9 66.1-43.7l37.9-10 13.9-36.7c8.6-22.8 20.6-44.2 35.7-63.5 14.9-19.2 32.6-36 52.4-50 41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.3c19.9 14 37.5 30.8 52.4 50 15.1 19.3 27.1 40.7 35.7 63.5l13.8 36.6 37.8 10c54.2 14.4 92.1 63.7 92.1 120 0 33.6-13.2 65.1-37.2 88.6-19.5 19.2-44.9 31.1-71.9 34.5-4 .5-6.9 3.9-6.9 7.9V754c0 4.7 4.1 8.4 8.8 8 101.7-9.2 182.5-94 183.2-198.2.6-93.4-62.7-172.1-148.6-194.9z"}},{tag:"path",attrs:{d:"M376.9 656.4c1.8-33.5 15.7-64.7 39.5-88.6 25.4-25.5 60-39.8 96-39.8 36.2 0 70.3 14.1 96 39.8 1.4 1.4 2.7 2.8 4.1 4.3l-25 19.6a8 8 0 003 14.1l98.2 24c5 1.2 9.9-2.6 9.9-7.7l.5-101.3c0-6.7-7.6-10.5-12.9-6.3L663 532.7c-36.6-42-90.4-68.6-150.5-68.6-107.4 0-195 85.1-199.4 191.7-.2 4.5 3.4 8.3 8 8.3H369c4.2-.1 7.7-3.4 7.9-7.7zM703 664h-47.9c-4.2 0-7.7 3.3-8 7.6-1.8 33.5-15.7 64.7-39.5 88.6-25.4 25.5-60 39.8-96 39.8-36.2 0-70.3-14.1-96-39.8-1.4-1.4-2.7-2.8-4.1-4.3l25-19.6a8 8 0 00-3-14.1l-98.2-24c-5-1.2-9.9 2.6-9.9 7.7l-.4 101.4c0 6.7 7.6 10.5 12.9 6.3l23.2-18.2c36.6 42 90.4 68.6 150.5 68.6 107.4 0 195-85.1 199.4-191.7.2-4.5-3.4-8.3-8-8.3z"}}]},name:"cloud-sync",theme:"outlined"},L=ie,ue=m(20165),ee=function(Ee,B){return h.createElement(ue.Z,(0,J.Z)((0,J.Z)({},Ee),{},{ref:B,icon:L}))};ee.displayName="CloudSyncOutlined";var me=h.forwardRef(ee)},75827:function(Ze,pe,m){"use strict";var J=m(5543),h=m(79685),ie=m(43370),L=m(20165),ue=function(me,N){return h.createElement(L.Z,(0,J.Z)((0,J.Z)({},me),{},{ref:N,icon:ie.Z}))};ue.displayName="DeleteOutlined",pe.Z=h.forwardRef(ue)},16228:function(Ze,pe,m){"use strict";var J=m(5543),h=m(79685),ie=m(53353),L=m(20165),ue=function(me,N){return h.createElement(L.Z,(0,J.Z)((0,J.Z)({},me),{},{ref:N,icon:ie.Z}))};ue.displayName="SafetyCertificateOutlined",pe.Z=h.forwardRef(ue)},36489:function(Ze,pe,m){"use strict";m.d(pe,{Z:function(){return me}});var J=m(5543),h=m(79685),ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"},L=ie,ue=m(20165),ee=function(Ee,B){return h.createElement(ue.Z,(0,J.Z)((0,J.Z)({},Ee),{},{ref:B,icon:L}))};ee.displayName="WarningOutlined";var me=h.forwardRef(ee)},34718:function(Ze,pe,m){"use strict";var J=m(5543),h=m(66105),ie=m(99370),L=m(98808),ue=m(79685),ee=m(76488),me=m(44709),N=m(63342),Ee=["options","fieldProps","proFieldProps","valueEnum"],B=ue.forwardRef(function(Ae,Oe){var ye=Ae.options,Ne=Ae.fieldProps,Je=Ae.proFieldProps,Ye=Ae.valueEnum,ke=(0,h.Z)(Ae,Ee);return(0,N.jsx)(me.Z,(0,J.Z)({ref:Oe,valueType:"checkbox",valueEnum:(0,ie.h)(Ye,void 0),fieldProps:(0,J.Z)({options:ye},Ne),lightProps:(0,J.Z)({labelFormatter:function(){return(0,N.jsx)(me.Z,(0,J.Z)({ref:Oe,valueType:"checkbox",mode:"read",valueEnum:(0,ie.h)(Ye,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,J.Z)({options:ye},Ne),proFieldProps:Je},ke))}},ke.lightProps),proFieldProps:Je},ke))}),Fe=ue.forwardRef(function(Ae,Oe){var ye=Ae.fieldProps,Ne=Ae.children;return(0,N.jsx)(L.Z,(0,J.Z)((0,J.Z)({ref:Oe},ye),{},{children:Ne}))}),fe=(0,ee.G)(Fe,{valuePropName:"checked"}),i=fe;i.Group=B,pe.Z=i},70695:function(Ze,pe,m){"use strict";var J=m(5543),h=m(66105),ie=m(79685),L=m(44709),ue=m(63342),ee=["fieldProps","proFieldProps"],me=["fieldProps","proFieldProps"],N="text",Ee=function(i){var Ae=i.fieldProps,Oe=i.proFieldProps,ye=(0,h.Z)(i,ee);return(0,ue.jsx)(L.Z,(0,J.Z)({valueType:N,fieldProps:Ae,filedConfig:{valueType:N},proFieldProps:Oe},ye))},B=function(i){var Ae=i.fieldProps,Oe=i.proFieldProps,ye=(0,h.Z)(i,me);return(0,ue.jsx)(L.Z,(0,J.Z)({valueType:"password",fieldProps:Ae,proFieldProps:Oe,filedConfig:{valueType:N}},ye))},Fe=Ee;Fe.Password=B,Fe.displayName="ProFormComponent",pe.Z=Fe},4647:function(Ze,pe,m){"use strict";var J=m(5543),h=m(66105),ie=m(79685),L=m(44709),ue=m(63342),ee=["fieldProps","proFieldProps"],me=function(Ee,B){var Fe=Ee.fieldProps,fe=Ee.proFieldProps,i=(0,h.Z)(Ee,ee);return(0,ue.jsx)(L.Z,(0,J.Z)({ref:B,valueType:"textarea",fieldProps:Fe,proFieldProps:fe},i))};pe.Z=ie.forwardRef(me)},10218:function(Ze,pe,m){"use strict";m.d(pe,{Z:function(){return ue}});var J=m(44659),h=m(37003),ie=m(63342),L=function(ee){var me=ee.avatar,N=ee.username,Ee=ee.size,B=Ee===void 0?"small":Ee;return(0,ie.jsx)(ie.Fragment,{children:me?(0,ie.jsx)(J.C,{size:B,src:(0,ie.jsx)(h.Z,{placeholder:!0,src:me,fallback:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg=="})}):(0,ie.jsx)(J.C,{style:{color:"#f56a00",backgroundColor:"#fde3cf",verticalAlign:"middle"},size:"small",gap:1,children:N.substring(0,1).toLocaleUpperCase()})})},ue=L},17941:function(Ze,pe,m){"use strict";m.r(pe),m.d(pe,{default:function(){return Es}});var J=m(84019),h=m.n(J),ie=m(32061),L=m.n(ie),ue=m(77566),ee=m.n(ue),me=m(76091),N=m.n(me),Ee=m(7863),B=m.n(Ee),Fe=m(75109),fe=m(5543),i=m(79685),Ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656zM492 400h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H492c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0 144h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H492c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0 144h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H492c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zM340 368a40 40 0 1080 0 40 40 0 10-80 0zm0 144a40 40 0 1080 0 40 40 0 10-80 0zm0 144a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"profile",theme:"outlined"},Oe=Ae,ye=m(20165),Ne=function(n,t){return i.createElement(ye.Z,(0,fe.Z)((0,fe.Z)({},n),{},{ref:t,icon:Oe}))};Ne.displayName="ProfileOutlined";var Je=i.forwardRef(Ne),Ye={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 140H96c-17.7 0-32 14.3-32 32v496c0 17.7 14.3 32 32 32h380v112H304c-8.8 0-16 7.2-16 16v48c0 4.4 3.6 8 8 8h432c4.4 0 8-3.6 8-8v-48c0-8.8-7.2-16-16-16H548V700h380c17.7 0 32-14.3 32-32V172c0-17.7-14.3-32-32-32zm-40 488H136V212h752v416z"}}]},name:"desktop",theme:"outlined"},ke=Ye,hr=function(n,t){return i.createElement(ye.Z,(0,fe.Z)((0,fe.Z)({},n),{},{ref:t,icon:ke}))};hr.displayName="DesktopOutlined";var zr=i.forwardRef(hr),jr=m(29113),Pr=m(16228),Xe=m(55222),wr=m(79938),ce=m(15457),Y=m(46673),Zr=m(25825),sr=m(9715),gr=m(21724),e=m(63342),Ir=function(n){var t=(0,i.useState)(),a=B()(t,2),c=a[0],l=a[1];(0,ce.Z)(L()(h()().mark(function o(){var d,u,p;return h()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,sr.mB)();case 2:if(y.t0=y.sent,y.t0){y.next=5;break}y.t0={};case 5:d=y.t0,u=d.success,p=d.result,u&&p&&l([p]);case 9:case"end":return y.stop()}},o)})),[]);var s=function(){var o=L()(h()().mark(function d(u){var p,w,y,F;return h()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return p=u[u.length-1],p.loading=!0,$.next=4,(0,sr.z3)(p.id);case 4:w=$.sent,y=w.success,F=w.result,y&&F&&(p.children=ee()(F),l(ee()(c))),p.loading=!1;case 9:case"end":return $.stop()}},d)}));return function(u){return o.apply(this,arguments)}}();return(0,e.jsx)(gr.Z,N()({fieldNames:{value:"id",label:"name"},options:c,loadData:s,changeOnSelect:!0,showCheckedStrategy:"SHOW_CHILD"},n))},Qr=Ir,Cr=Qr,lr=m(26050),je=m(82769),Pe=m(97207),Rr=lr.Z.Option,yr,st=function(){var r=L()(h()().mark(function n(t){var a,c;return h()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return yr=t,s.next=3,(0,sr.S4)({name:t});case 3:if(a=s.sent,c=a.data,yr!==t){s.next=7;break}return s.abrupt("return",c==null?void 0:c.map(function(o){return{value:o.id,label:"".concat(o.name)}}));case 7:return s.abrupt("return",[]);case 8:case"end":return s.stop()}},n)}));return function(t){return r.apply(this,arguments)}}(),Kr=function(n){var t=(0,i.useState)([]),a=B()(t,2),c=a[0],l=a[1],s=(0,i.useState)(!1),o=B()(s,2),d=o[0],u=o[1],p=(0,i.useRef)(0),w=(0,i.useMemo)(function(){var O=function(P){p.current+=1;var g=p.current;l([]),u(!0),st(P).then(function(j){g===p.current&&(l(j),u(!1))})};return(0,Pe.debounce)(O,600)},[]),y=function(){var O=L()(h()().mark(function $(P){return h()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:P?w(P):l([]);case 1:case"end":return j.stop()}},$)}));return function(P){return O.apply(this,arguments)}}(),F=c.map(function(O){return(0,e.jsx)(Rr,{value:O.value,children:O.label},O.value)});return(0,e.jsx)(lr.Z,N()(N()({showSearch:!0,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onSearch:y,allowClear:!0,notFoundContent:d?(0,e.jsx)(je.Z,{size:"small"}):null},n),{},{children:F}))},R=Kr,k=R,V=m(62159),Ie=m(39620),re=m.n(Ie),Be=m(32788),qe=m(69567),pr=qe.ZP.ConfigContext,Ht=function(n){var t=n.prefixCls,a=n.antCls;return re()({},"".concat(t,"-popup"),re()({},"span".concat(a,"-select-item-option-state"),{display:"contents !important"}))};function Gt(r){var n=(0,i.useContext)(pr),t=n.getPrefixCls,a=".".concat(t());return(0,Be.Xj)("UserSelectComponent",function(c){var l=N()(N()({},c),{},{prefixCls:".".concat(r),antCls:a});return[Ht(l)]})}var Vt=m(68591),he=m.n(Vt),Wt=m(10218),lt="topiam-user-select",ot,Jt=function(){var r=L()(h()().mark(function n(t){var a,c;return h()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return ot=t,s.next=3,(0,sr.lE)({username:t});case 3:if(a=s.sent,c=a.data,ot!==t){s.next=7;break}return s.abrupt("return",c==null?void 0:c.map(function(o){return{id:o.id,username:"".concat(o.username),fullName:"".concat(o.fullName),avatar:"".concat(o.avatar),orgDisplayPath:"".concat(o.orgDisplayPath)}}));case 7:return s.abrupt("return",[]);case 8:case"end":return s.stop()}},n)}));return function(t){return r.apply(this,arguments)}}(),Yt=function(n){var t=Gt(lt),a=t.wrapSSR,c=t.hashId,l=(0,i.useState)([]),s=B()(l,2),o=s[0],d=s[1],u=(0,i.useState)(!1),p=B()(u,2),w=p[0],y=p[1],F=(0,i.useRef)(0),O=(0,i.useMemo)(function(){var g=function(v){F.current+=1;var Z=F.current;d([]),y(!0),Jt(v).then(function(f){Z===F.current&&(d(f),y(!1))})};return(0,Pe.debounce)(g,600)},[]),$=function(){var g=L()(h()().mark(function j(v){return h()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:v?O(v):d([]);case 1:case"end":return f.stop()}},j)}));return function(v){return g.apply(this,arguments)}}(),P=o.map(function(g){return{fullName:g.fullName,label:(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{style:{display:"inline-flex",alignItems:"center"},children:[(0,e.jsx)("div",{style:{marginRight:"0.5rem"},children:(0,e.jsx)(Wt.Z,{avatar:g.avatar,username:g.fullName})}),(0,e.jsxs)("div",{style:{display:"block"},children:[(0,e.jsx)("span",{children:g.fullName}),(0,e.jsx)("br",{}),(0,e.jsx)("span",{children:g.username})]})]}),(0,e.jsx)(V.Z,{style:{margin:3}})]}),value:g.id}});return(0,ce.Z)(L()(h()().mark(function g(){return h()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:case"end":return v.stop()}},g)})),[]),a((0,e.jsx)(lr.Z,N()(N()({showSearch:!0,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onSearch:$,optionLabelProp:"fullName",allowClear:!0,notFoundContent:w?(0,e.jsx)(je.Z,{size:"small"}):null,options:P},n),{},{popupClassName:he()("".concat(lt,"-popup"),c,n.popupClassName)})))},Xt=Yt,Hr=Xt,se=m(23113),Q=m(11880),or=m(80591),mr=m(43637),it=m(69072),ut=m(3306),G=m(70695),ze=m(32401),xr=m(27793),te=m(82913),ir=m(98346),_e=m(97978),Qe=m(9101),qt=function(n){var t=te.Z.useForm(),a=B()(t,1),c=a[0],l=n.open,s=n.onCancel,o=n.onFinish;return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(it.Y,{title:"\u6DFB\u52A0\u6388\u6743",width:600,open:l,form:c,scrollToFirstError:!0,layout:"horizontal",labelCol:{span:4},wrapperCol:{span:20},autoFocusFirstInput:!0,preserve:!1,modalProps:{forceRender:!0,destroyOnClose:!0,onCancel:function(u){c.resetFields(),s==null||s(u)}},onFinish:o,children:[(0,e.jsx)(ut.Z.Group,{name:"subjectType",label:"\u6388\u6743\u7C7B\u578B",initialValue:se.SC.USER,fieldProps:{onChange:function(){c.resetFields(["subjectIds"]),c.setFieldsValue({effect:se.Gh.ALLOW})}},options:[{value:se.SC.USER,label:"\u7528\u6237"},{value:se.SC.USER_GROUP,label:"\u7528\u6237\u7EC4"},{value:se.SC.ORGANIZATION,label:"\u7EC4\u7EC7\u673A\u6784"}],rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6388\u6743\u7C7B\u578B"}]}),(0,e.jsx)(G.Z,{name:"effect",hidden:!0}),(0,e.jsx)(ze.Z,{name:["subjectType"],children:function(u){var p=u.subjectType;return p===se.SC.USER?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(te.Z.Item,{label:"\u6388\u6743\u7528\u6237",name:"subjectIds",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6388\u6743\u7528\u6237"}],children:(0,e.jsx)(Hr,{placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\u641C\u7D22\u7528\u6237",mode:"multiple"})})}):p===se.SC.USER_GROUP?(0,e.jsx)(te.Z.Item,{label:"\u6388\u6743\u5206\u7EC4",name:"subjectIds",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6388\u6743\u5206\u7EC4"}],children:(0,e.jsx)(k,{placeholder:"\u8BF7\u9009\u62E9\u6388\u6743\u5206\u7EC4",mode:"multiple"})}):p===se.SC.ORGANIZATION?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(te.Z.Item,{label:"\u6388\u6743\u7EC4\u7EC7",name:"subjectIds",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u9009\u62E9\u7EC4\u7EC7\u8282\u70B9"}],children:(0,e.jsx)(Cr,{placeholder:"\u9009\u62E9\u7EC4\u7EC7\u8282\u70B9"})})}):(0,e.jsx)(e.Fragment,{})}})]})})},_t=function(r){var n=(0,i.useRef)(),t=r.appId,a=(0,i.useState)(!1),c=B()(a,2),l=c[0],s=c[1],o=[{title:"\u6388\u6743\u4E3B\u4F53",dataIndex:"subjectName",ellipsis:!0,fixed:"left"},{title:"\u4E3B\u4F53\u7C7B\u578B",dataIndex:"subjectType",valueType:"select",ellipsis:!0,valueEnum:{USER:{text:"\u7528\u6237"},USER_GROUP:{text:"\u7528\u6237\u7EC4"},ORGANIZATION:{text:"\u7EC4\u7EC7\u673A\u6784"}}},{title:"\u6388\u6743\u65F6\u95F4",align:"center",ellipsis:!0,dataIndex:"createTime",valueType:"dateTime",search:!1},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:80,align:"center",fixed:"right",render:function(u,p){return[(0,e.jsx)(ir.Z,{title:"\u60A8\u786E\u5B9A\u8981\u53D6\u6D88\u4E3B\u4F53\u6388\u6743\uFF1F\u53D6\u6D88\u6388\u6743\u540E\u4E0D\u53EF\u81EA\u52A8\u6062\u590D\u3002",placement:"bottomRight",icon:(0,e.jsx)(or.Z,{style:{color:"red"}}),onConfirm:L()(h()().mark(function w(){var y,F,O;return h()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,Q.AY)(p.id);case 2:if(y=P.sent,F=y.success,!F){P.next=8;break}return Y.ZP.success("\u64CD\u4F5C\u6210\u529F"),(O=n.current)===null||O===void 0||O.reload(),P.abrupt("return");case 8:case"end":return P.stop()}},w)})),okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)("a",{target:"_blank",style:{color:"red"},children:"\u53D6\u6D88\u6388\u6743"},"remove")},"delete")]}}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(xr.Z,{columns:o,actionRef:n,scroll:{x:700},rowSelection:{selections:[_e.Z.SELECTION_ALL,_e.Z.SELECTION_INVERT]},request:Q.Je,params:{appId:t},rowKey:"id",search:{},options:!1,pagination:{defaultPageSize:5},style:{height:"calc(100vh - 190px)",overflow:"auto"},cardProps:{style:{minHeight:"100%"}},dateFormatter:"string",toolBarRender:function(){return[(0,e.jsx)(Qe.ZP,{icon:(0,e.jsx)(mr.Z,{}),type:"primary",onClick:function(){s(!0)},children:"\u6DFB\u52A0\u6388\u6743"},"add")]}}),(0,e.jsx)(qt,{open:l,onCancel:function(){s(!1)},onFinish:function(){var d=L()(h()().mark(function u(p){var w,y,F;return h()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,(0,Q.gI)(N()({appId:t},p));case 2:if(w=$.sent,y=w.success,!y){$.next=8;break}return Y.ZP.success("\u64CD\u4F5C\u6210\u529F"),(F=n.current)===null||F===void 0||F.reload(),$.abrupt("return",!0);case 8:return Y.ZP.error("\u64CD\u4F5C\u5931\u8D25"),$.abrupt("return",!1);case 10:case"end":return $.stop()}},u)}));return function(u){return d.apply(this,arguments)}}()})]})},en=_t,Gr=m(61327),$e=m(21654),rn=function(){return(0,e.jsx)(Gr.Z,{style:{height:"calc(100vh - 190px)",overflow:"auto"},bodyStyle:{height:"100%"},children:(0,e.jsx)($e.Z,{style:{backgroundColor:"#f1f1f2",border:"1px solid #f1f1f2"},message:"\u6682\u672A\u5B9E\u73B0"})})},tn=m(80840),nn=function(r){var n=(0,i.useRef)(),t=r.appId,a=r.protocol,c=[{title:"\u7CFB\u7EDF\u7528\u6237",dataIndex:"username",ellipsis:!0,fixed:"left"},{title:"\u5E94\u7528\u8D26\u6237",dataIndex:"account",ellipsis:!0},{title:"\u6DFB\u52A0\u65F6\u95F4",dataIndex:"createTime",valueType:"dateTime",search:!1,ellipsis:!0},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:80,align:"center",fixed:"right",render:function(o,d){return[(0,e.jsx)(ir.Z,{title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u6B64\u5E94\u7528\u8D26\u6237\uFF1F",placement:"bottomRight",icon:(0,e.jsx)(or.Z,{style:{color:"red"}}),onConfirm:L()(h()().mark(function u(){var p,w,y;return h()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,Q.Zd)(d.id);case 2:if(p=O.sent,w=p.success,!w){O.next=8;break}return Y.ZP.success("\u64CD\u4F5C\u6210\u529F"),(y=n.current)===null||y===void 0||y.reload(),O.abrupt("return");case 8:case"end":return O.stop()}},u)})),okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)("a",{target:"_blank",style:{color:"red"},children:"\u5220\u9664"},"remove")},"delete")]}}],l=function(){var o=te.Z.useForm(),d=B()(o,1),u=d[0];return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(it.Y,{title:"\u6DFB\u52A0\u5E94\u7528\u8D26\u6237",width:500,form:u,scrollToFirstError:!0,trigger:(0,e.jsx)(Qe.ZP,{icon:(0,e.jsx)(mr.Z,{}),type:"primary",children:"\u6DFB\u52A0\u5E94\u7528\u8D26\u6237"},"button"),layout:"vertical",autoFocusFirstInput:!0,preserve:!1,modalProps:{destroyOnClose:!0,onCancel:function(){u.resetFields()}},onFinish:function(){var p=L()(h()().mark(function w(y){var F,O,$,P,g;return h()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return O=y,(F=O)!==null&&F!==void 0&&F.password&&(O=N()(N()({},O),{},{password:tn.DS.encode(y.password,!0)})),v.next=4,(0,Q.o1)(N()({appId:t},O));case 4:if($=v.sent,P=$.success,!P){v.next=10;break}return Y.ZP.success("\u6DFB\u52A0\u6210\u529F"),(g=n.current)===null||g===void 0||g.reload(),v.abrupt("return",!0);case 10:return Y.ZP.error("\u6DFB\u52A0\u5931\u8D25"),v.abrupt("return",!1);case 12:case"end":return v.stop()}},w)}));return function(w){return p.apply(this,arguments)}}(),children:[(0,e.jsx)(te.Z.Item,{label:"\u7CFB\u7EDF\u7528\u6237",name:"userId",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7CFB\u7EDF\u7528\u6237"}],children:(0,e.jsx)(Hr,{placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\u3001\u624B\u673A\u6216\u90AE\u7BB1\u641C\u7D22\u7528\u6237"})}),a===se.gD.FORM?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(G.Z,{label:"\u5E94\u7528\u7528\u6237\u540D",name:"account",placeholder:"\u8BF7\u8F93\u5165\u8D26\u6237\u8BBF\u95EE\u5E94\u7528\u65F6\u6240\u4F7F\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u6237\u8BBF\u95EE\u5E94\u7528\u65F6\u6240\u4F7F\u7528\u6237\u540D"}]}),(0,e.jsx)(G.Z.Password,{label:"\u5E94\u7528\u7528\u6237\u5BC6\u7801",name:"password",placeholder:"\u8BF7\u8F93\u5165\u8D26\u6237\u8BBF\u95EE\u5E94\u7528\u65F6\u6240\u4F7F\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u6237\u8BBF\u95EE\u5E94\u7528\u65F6\u6240\u4F7F\u5BC6\u7801"}]})]}):(0,e.jsx)(G.Z,{label:"\u5E94\u7528\u8EAB\u4EFD",name:"account",placeholder:"\u8BF7\u8F93\u5165\u8D26\u6237\u8BBF\u95EE\u5E94\u7528\u65F6\u6240\u4F7F\u8EAB\u4EFD",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u6237\u8BBF\u95EE\u5E94\u7528\u65F6\u6240\u4F7F\u8EAB\u4EFD"}]})]})})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)($e.Z,{banner:!0,type:"info",message:" \u5982\u679C\u60A8\u914D\u7F6E\u4F7F\u7528\u3010\u7CFB\u7EDF\u8D26\u6237\u540D\u3011\uFF0C\u5E94\u7528\u8D26\u6237\u5C5E\u6027\u914D\u7F6E\u540E\u4E0D\u4F1A\u751F\u6548\uFF1B\u5982\u9700\u53D8\u66F4\uFF0C\u8BF7\u5728 \u534F\u8BAE\u914D\u7F6E \u66F4\u6539\u914D\u7F6E\u3002",style:{marginBottom:16}}),(0,e.jsx)(xr.Z,{columns:c,actionRef:n,scroll:{x:700},rowSelection:{selections:[_e.Z.SELECTION_ALL,_e.Z.SELECTION_INVERT]},request:Q.IC,params:{appId:t},rowKey:"id",search:{},style:{height:"calc(100vh - 244px)",overflow:"auto"},cardProps:{style:{minHeight:"100%"}},options:!1,pagination:{defaultPageSize:5},dateFormatter:"string",toolBarRender:function(){return[(0,e.jsx)(l,{},"create")]}})]})},an=nn,Ke=m(81198),ct=m(869),Vr=m(46022),Dr=m(30708),dt=m(53010),sn=qe.ZP.ConfigContext;function ln(r){var n=(0,i.useContext)(sn),t=n.getPrefixCls,a=".".concat(t()),c=(0,dt.l)(function(l){var s,o=l.token;return s={height:"calc(100vh - 190px)"},re()(s,".".concat(r,"-descriptions"),re()({},"".concat(a,"-descriptions-small ").concat(a,"-descriptions-row > th, ").concat(a,"-descriptions-small ").concat(a,"-descriptions-row > td"),{paddingBottom:"16px"})),re()(s,"@media screen and (max-width: ".concat(o.screenXL,"px)"),{height:"calc(100vh - 252px)"}),s});return{className:c}}var pt="app-basic-info",on=function(n){var t=n.appId,a=(0,i.useState)(!0),c=B()(a,2),l=c[0],s=c[1],o=(0,i.useState)(),d=B()(o,2),u=d[0],p=d[1],w=(0,Vr.useLocation)(),y=Dr.Z.parse(w.search),F=ln(pt),O=F.className;(0,ce.Z)(L()(h()().mark(function P(){var g,j,v;return h()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return s(!0),f.next=3,(0,Q.Mq)(t);case 3:g=f.sent,j=g.result,v=g.success,v&&j&&p(j),s(!1);case 8:case"end":return f.stop()}},P)})),[t]);var $=function(){var P=L()(h()().mark(function g(j,v){var Z,f;return h()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,Q.KT)({id:v.id,name:v.name,remark:v.remark});case 2:if(Z=x.sent,f=Z.success,!f){x.next=9;break}return Y.ZP.success("\u64CD\u4F5C\u6210\u529F"),p(N()({},v)),Vr.history.replace("/app/config?id=".concat(y.id,"&name=").concat(v.name,"&type=").concat(y.type)),x.abrupt("return",Promise.resolve(!0));case 9:return x.abrupt("return",Promise.resolve(!1));case 10:case"end":return x.stop()}},g)}));return function(j,v){return P.apply(this,arguments)}}();return(0,e.jsx)(Gr.Z,{title:"\u57FA\u672C\u914D\u7F6E",headerBordered:!0,className:O,children:(0,e.jsx)(ct.Z,{loading:l,active:!0,paragraph:{rows:5},children:(0,e.jsx)("div",{className:he()("".concat(pt,"-descriptions")),children:(0,e.jsxs)(Ke.vY,{size:"small",column:2,dataSource:(0,Pe.omit)(u,"config"),editable:{onSave:$},children:[(0,e.jsx)(Ke.vY.Item,{dataIndex:"name",label:"\u5E94\u7528\u540D\u79F0",copyable:!1,formItemProps:{rules:[{required:!0,message:"\u5E94\u7528\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}]}}),(0,e.jsx)(Ke.vY.Item,{dataIndex:"enabled",label:"\u5E94\u7528\u72B6\u6001",editable:!1,valueEnum:{true:{text:"\u6B63\u5E38",status:"Success"},false:{text:"\u7981\u7528",status:"Error"}}}),(0,e.jsx)(Ke.vY.Item,{dataIndex:"type",label:"\u5E94\u7528\u7C7B\u578B",editable:!1,valueEnum:{custom_made:{text:"\u5B9A\u5236\u5E94\u7528"},standard:{text:"\u6807\u51C6\u5E94\u7528"},self_developed:{text:"\u81EA\u7814\u5E94\u7528"}}}),(0,e.jsx)(Ke.vY.Item,{dataIndex:"protocolName",label:"\u5E94\u7528\u534F\u8BAE",editable:!1}),(u==null?void 0:u.clientId)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ke.vY.Item,{dataIndex:"clientId",label:"\u5BA2\u6237\u7AEF ID",valueType:"text",editable:!1,copyable:!0}),(0,e.jsx)(Ke.vY.Item,{dataIndex:"clientSecret",label:"\u5BA2\u6237\u7AEF\u79D8\u94A5",valueType:"password",editable:!1,copyable:!0})]}),(0,e.jsx)(Ke.vY.Item,{dataIndex:"createTime",label:"\u521B\u5EFA\u65F6\u95F4",valueType:"dateTime",copyable:!1,editable:!1}),(0,e.jsx)(Ke.vY.Item,{dataIndex:"remark",label:"\u5907\u6CE8",valueType:"textarea",fieldProps:{rows:2,maxLength:20},copyable:!1})]})})})})},un=on,de;(function(r){r.BASIC="basic",r.PROTOCOL_CONFIG="protocol_config",r.ACCOUNT_SYNC="account_sync",r.ACCESS_POLICY="access_policy",r.LOGIN_ACCESS="login_access",r.PERMISSION_RESOURCE="permission_resource",r.PERMISSION_ROLE="permission_role",r.PERMISSION_POLICY="permission_policy",r.APP_PERMISSION="app_permission",r.APP_ACCOUNT="app_account"})(de||(de={}));var Ue;(function(r){r.APP="only_app_init_sso",r.PORTAL_OR_APP="portal_or_app_init_sso"})(Ue||(Ue={}));var Le;(function(r){r.AUTHORIZATION="authorization",r.ALL_ACCESS="all_access"})(Le||(Le={}));var Or;(function(r){r.SAML_SIGN="saml_sign"})(Or||(Or={}));var Ce=m(65672),$r=m(99759),mt=m(50510),le=m(34718),cn=Ce.Z.Panel,dn=function(n){var t=(0,i.useState)(!1),a=B()(t,2),c=a[0],l=a[1],s=(0,i.useState)(),o=B()(s,2),d=o[0],u=o[1],p=(0,i.useState)([]),w=B()(p,2),y=w[0],F=w[1],O=n.open,$=n.appId,P=n.onCancel,g=n.subjectType;(0,ce.Z)(L()(h()().mark(function v(){var Z,f;return h()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(!O){x.next=8;break}return l(!0),x.next=4,(0,Q.Sf)({appId:$});case 4:Z=x.sent,f=Z.result,u(f),l(!1);case 8:case"end":return x.stop()}},v)})),[O,g]);var j=function(Z){if(Z.target.checked){F([].concat(ee()(y),[Z.target.value]));return}F(y==null?void 0:y.filter(function(f){return f!==Z.target.value}))};return(0,e.jsx)(mt.a,{title:"\u6388\u6743",width:650,layout:"horizontal",labelCol:{span:4},open:O,wrapperCol:{span:19},onFinish:function(Z){return l(!0),console.log("roles",Z.roles),console.log("subjectIds",Z.subjectIds),console.log("permissions",y),F([]),l(!1),Promise.resolve(!1)},drawerProps:{destroyOnClose:!0,onClose:function(Z){F([]),P(Z)}},children:(0,e.jsxs)(je.Z,{spinning:c,children:[(0,e.jsx)($e.Z,{message:"\u652F\u6301\u4E24\u79CD\u6743\u9650\u6A21\u578B\uFF1A\u57FA\u4E8E\u89D2\u8272\u7684\u8BBF\u95EE\u63A7\u5236\uFF08RBAC\uFF09\u548C\u57FA\u4E8E\u5C5E\u6027\u7684\u8BBF\u95EE\u63A7\u5236\uFF08ABAC\uFF09"}),(0,e.jsx)("br",{}),g===se.SC.USER&&(0,e.jsx)(te.Z.Item,{label:"\u6388\u6743\u7528\u6237",name:"subjectIds",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6388\u6743\u7528\u6237"}],children:(0,e.jsx)(Hr,{placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\u3001\u624B\u673A\u6216\u90AE\u7BB1\u641C\u7D22\u7528\u6237",mode:"multiple"})}),g===se.SC.USER_GROUP&&(0,e.jsx)(te.Z.Item,{label:"\u6388\u6743\u7528\u6237\u7EC4",name:"subjectIds",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6388\u6743\u5206\u7EC4"}],children:(0,e.jsx)(k,{placeholder:"\u8BF7\u9009\u62E9\u6388\u6743\u5206\u7EC4",mode:"multiple"})}),g===se.SC.ORGANIZATION&&(0,e.jsx)(te.Z.Item,{label:"\u6388\u6743\u7EC4\u7EC7",name:"subjectIds",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u9009\u62E9\u7EC4\u7EC7\u8282\u70B9"}],children:(0,e.jsx)(Cr,{placeholder:"\u9009\u62E9\u7EC4\u7EC7\u8282\u70B9"})}),(0,e.jsxs)($r.Z,{bodyStyle:{paddingBottom:0,paddingTop:0},children:[(0,e.jsx)(V.Z,{orientation:"left",children:"\u5E94\u7528\u89D2\u8272"}),(0,e.jsx)(le.Z.Group,{name:"roles",layout:"vertical",options:["\u8682\u8681\u533A\u5757\u94FEBaaS\u5E73\u53F0-\u7BA1\u7406\u5458","\u5BA1\u8BA1\u7BA1\u7406\u5458","Captain-\u96C6\u7FA4\u6269\u5BB9\u5DE5\u7A0B\u5E08","Captain-\u96C6\u7FA4\u8FD0\u7EF4\u5DE5\u7A0B\u5E08","Captain-\u96C6\u7FA4\u7BA1\u7406\u5458","Captain-\u8D85\u7EA7\u7BA1\u7406\u5458","\u51FD\u6570\u8BA1\u7B97\u7BA1\u7406\u5458","\u51FD\u6570\u8BA1\u7B97\u89C2\u5BDF\u8005"]})]}),(0,e.jsx)("br",{}),(0,e.jsxs)($r.Z,{bodyStyle:{paddingBottom:0,paddingTop:0},children:[(0,e.jsx)(V.Z,{orientation:"left",children:"\u5E94\u7528\u8D44\u6E90"}),d==null?void 0:d.map(function(v){var Z,f,S,x,A;return(0,e.jsxs)("div",{children:[(0,e.jsx)(Ce.Z,{bordered:!1,children:(0,e.jsxs)(cn,{header:v.name,children:[v.menus.length>0&&(0,e.jsx)(le.Z.Group,{name:"menu_".concat(v.id),label:"\u83DC\u5355\u6743\u9650",layout:"vertical",options:(Z=v.menus)===null||Z===void 0?void 0:Z.map(function(C){return{label:C.name,value:C.id,onChange:j}})}),v.buttons.length>0&&(0,e.jsx)(le.Z.Group,{name:"button_".concat(v.id),label:"\u6309\u94AE\u6743\u9650",layout:"vertical",options:(f=v.buttons)===null||f===void 0?void 0:f.map(function(C){return{label:C.name,value:C.id,onChange:j}})}),v.apis.length>0&&(0,e.jsx)(le.Z.Group,{name:"api_".concat(v.id),layout:"vertical",label:"\u63A5\u53E3\u6743\u9650",options:(S=v.apis)===null||S===void 0?void 0:S.map(function(C){return{label:C.name,value:C.id,onChange:j}})}),v.datas.length>0&&(0,e.jsx)(le.Z.Group,{name:"data_".concat(v.id),layout:"vertical",label:"\u6570\u636E\u6743\u9650",options:(x=v.apis)===null||x===void 0?void 0:x.map(function(C){return{label:C.name,value:C.id,onChange:j}})}),v.others.length>0&&(0,e.jsx)(le.Z.Group,{name:"other_".concat(v.id),layout:"vertical",label:"\u5176\u4ED6\u6743\u9650",options:(A=v.apis)===null||A===void 0?void 0:A.map(function(C){return{label:C.name,value:C.id,onChange:j}})})]},v.id)},v.id),(0,e.jsx)("br",{})]},v.id)})]})]})},"create_permission")},pn=dn,mn=Ce.Z.Panel,fn=function(n){var t=te.Z.useForm(),a=B()(t,1),c=a[0],l=(0,i.useState)(!1),s=B()(l,2),o=s[0],d=s[1],u=(0,i.useState)(),p=B()(u,2),w=p[0],y=p[1],F=n.open,O=n.onCancel,$=n.subjectType,P=n.subjectId,g=(0,i.useState)([]),j=B()(g,2),v=j[0],Z=j[1];(0,ce.Z)(L()(h()().mark(function S(){return h()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:F&&(d(!0),console.log(P),y([]),d(!1));case 1:case"end":return A.stop()}},S)})),[F,$,P]);var f=function(x){if(x.target.checked){Z([].concat(ee()(v),[x.target.value]));return}Z(v==null?void 0:v.filter(function(A){return A!==x.target.value}))};return(0,e.jsx)(mt.a,{title:"\u6388\u6743",width:650,layout:"horizontal",labelCol:{span:4},wrapperCol:{span:19},form:c,scrollToFirstError:!0,trigger:(0,e.jsx)("a",{type:"primary",children:"\u4FEE\u6539"},"update"),onFinish:function(x){return d(!0),console.log("roles",x.roles),console.log("permissions",v),Z([]),d(!1),Promise.resolve(!1)},drawerProps:{afterOpenChange:function(x){},destroyOnClose:!0,onClose:function(x){Z([]),O(x)}},children:(0,e.jsxs)(je.Z,{spinning:o,children:[(0,e.jsx)($e.Z,{message:"\u652F\u6301\u4E24\u79CD\u6743\u9650\u6A21\u578B\uFF1A\u57FA\u4E8E\u89D2\u8272\u7684\u8BBF\u95EE\u63A7\u5236\uFF08RBAC\uFF09\u548C\u57FA\u4E8E\u5C5E\u6027\u7684\u8BBF\u95EE\u63A7\u5236\uFF08ABAC\uFF09"}),(0,e.jsx)("br",{}),(0,e.jsxs)($r.Z,{bodyStyle:{paddingBottom:0,paddingTop:0},children:[(0,e.jsx)(V.Z,{orientation:"left",children:"\u5E94\u7528\u89D2\u8272"}),(0,e.jsx)(le.Z.Group,{name:"roles",layout:"vertical",options:["\u8682\u8681\u533A\u5757\u94FEBaaS\u5E73\u53F0-\u7BA1\u7406\u5458","\u5BA1\u8BA1\u7BA1\u7406\u5458","Captain-\u96C6\u7FA4\u6269\u5BB9\u5DE5\u7A0B\u5E08","Captain-\u96C6\u7FA4\u8FD0\u7EF4\u5DE5\u7A0B\u5E08","Captain-\u96C6\u7FA4\u7BA1\u7406\u5458","Captain-\u8D85\u7EA7\u7BA1\u7406\u5458","\u51FD\u6570\u8BA1\u7B97\u7BA1\u7406\u5458","\u51FD\u6570\u8BA1\u7B97\u89C2\u5BDF\u8005"]})]}),(0,e.jsx)("br",{}),(0,e.jsxs)($r.Z,{bodyStyle:{paddingBottom:0,paddingTop:0},children:[(0,e.jsx)(V.Z,{orientation:"left",children:"\u5E94\u7528\u8D44\u6E90"}),w==null?void 0:w.map(function(S){var x,A,C,b,D;return(0,e.jsxs)("div",{children:[(0,e.jsx)(Ce.Z,{bordered:!1,children:(0,e.jsxs)(mn,{header:S.name,children:[S.menus.length>0&&(0,e.jsx)(le.Z.Group,{name:"menu_".concat(S.id),label:"\u83DC\u5355\u6743\u9650",layout:"vertical",options:(x=S.menus)===null||x===void 0?void 0:x.map(function(M){return{label:M.name,value:M.id,onChange:f}})}),S.buttons.length>0&&(0,e.jsx)(le.Z.Group,{name:"button_".concat(S.id),label:"\u6309\u94AE\u6743\u9650",layout:"vertical",options:(A=S.buttons)===null||A===void 0?void 0:A.map(function(M){return{label:M.name,value:M.id,onChange:f}})}),S.apis.length>0&&(0,e.jsx)(le.Z.Group,{name:"api_".concat(S.id),layout:"vertical",label:"\u63A5\u53E3\u6743\u9650",options:(C=S.apis)===null||C===void 0?void 0:C.map(function(M){return{label:M.name,value:M.id,onChange:f}})}),S.datas.length>0&&(0,e.jsx)(le.Z.Group,{name:"data_".concat(S.id),layout:"vertical",label:"\u6570\u636E\u6743\u9650",options:(b=S.apis)===null||b===void 0?void 0:b.map(function(M){return{label:M.name,value:M.id,onChange:f}})}),S.others.length>0&&(0,e.jsx)(le.Z.Group,{name:"other_".concat(S.id),layout:"vertical",label:"\u5176\u4ED6\u6743\u9650",options:(D=S.apis)===null||D===void 0?void 0:D.map(function(M){return{label:M.name,value:M.id,onChange:f}})})]},S.id)},S.id),(0,e.jsx)("br",{})]},S.id)})]})]})},"update_permission")},vn=fn,hn=function(r){var n=(0,i.useState)(se.SC.USER),t=B()(n,2),a=t[0],c=t[1],l=(0,i.useState)(!1),s=B()(l,2),o=s[0],d=s[1],u=(0,i.useRef)(),p=r.appId,w=[{title:"\u540D\u79F0",dataIndex:"name",ellipsis:!0,width:"300",fixed:"left"},{title:"\u6388\u6743\u65F6\u95F4",align:"center",dataIndex:"desc",search:!1},{title:"\u64CD\u4F5C",align:"center",valueType:"option",fixed:"right",width:150,render:function(F,O){return[(0,e.jsx)(vn,{onCancel:function(){},open:!0,subjectType:a,subjectId:O.id},O.id),(0,e.jsx)(ir.Z,{title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",placement:"bottomRight",icon:(0,e.jsx)(or.Z,{style:{color:"red"}}),onConfirm:L()(h()().mark(function $(){return h()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:(0,Q.IV)(O.id).then(function(j){if(j.success&&j.result){var v;Y.ZP.success("\u64CD\u4F5C\u6210\u529F"),(v=u.current)===null||v===void 0||v.reload();return}});case 1:case"end":return g.stop()}},$)})),okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)("a",{target:"_blank",style:{color:"red"},children:"\u5220\u9664"},"remove")},"delete")]}}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(xr.Z,{columns:w,options:!1,scroll:{x:700},pagination:{showQuickJumper:!0,defaultPageSize:10},style:{height:"calc(100vh - 190px)",overflow:"auto"},cardProps:{style:{minHeight:"100%"}},actionRef:u,request:Q.zr,params:{appId:p,subjectType:a},rowKey:"id",dateFormatter:"string",toolbar:{menu:{type:"tab",activeKey:a,items:[{key:se.SC.USER,label:(0,e.jsx)("span",{children:"\u7528\u6237"})},{key:se.SC.USER_GROUP,label:(0,e.jsx)("span",{children:"\u7528\u6237\u7EC4"})},{key:se.SC.ORGANIZATION,label:(0,e.jsx)("span",{children:"\u7EC4\u7EC7\u673A\u6784"})}],onChange:function(F){c(F)}},actions:[(0,e.jsx)(Qe.ZP,{icon:(0,e.jsx)(mr.Z,{}),type:"primary",onClick:function(){d(!0)},children:"\u65B0\u589E\u6388\u6743"},"create")]}}),(0,e.jsx)(pn,{subjectType:a,open:o,onCancel:function(){d(!1)},appId:p},"create")]})},gn=hn,ft=m(36489),vt=m(51391),ht=m(82438),He=m(55807),Me=m(50620),fr=m(4647),Re=m(82645),Tr=m(69938),Br=m(74602),Cn=function(n){var t=n.open,a=n.onCancel,c=n.onFinish,l=n.appId,s=(0,i.useState)(function(){return[]}),o=B()(s,2),d=o[0],u=o[1],p=(0,i.useState)(!1),w=B()(p,2),y=w[0],F=w[1],O=(0,i.useState)(0),$=B()(O,2),P=$[0],g=$[1],j=(0,i.useRef)([]),v=te.Z.useForm(),Z=B()(v,1),f=Z[0],S=(0,i.useRef)();(0,i.useEffect)(function(){},[t]);var x=[{title:"\u6743\u9650\u7C7B\u578B",key:"type",dataIndex:"type",valueType:"select",width:80,fieldProps:{allowClear:!1,options:[{value:"DATA",label:"\u6570\u636E"},{value:"MENU",label:"\u83DC\u5355"},{value:"BUTTON",label:"\u6309\u94AE"},{value:"API",label:"API"},{value:"OTHER",label:"\u5176\u4ED6"}]},formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u6743\u9650\u503C",dataIndex:"value",width:150,formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u63CF\u8FF0",dataIndex:"name",width:150,formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u64CD\u4F5C",fixed:"right",align:"center",width:30,valueType:"option"}];return(0,e.jsxs)(Me.L,{formMapRef:j,current:P,onCurrentChange:g,stepsFormRender:function(C,b){return(0,e.jsx)(Br.Z,{title:"\u521B\u5EFA\u8D44\u6E90",width:600,maskClosable:!0,destroyOnClose:!0,onClose:function(M){g(0),a(M)},open:t,footer:(0,e.jsx)(He.Z,{style:{float:"right"},children:b}),children:(0,e.jsx)(je.Z,{spinning:y,children:C})})},onFinish:function(){var A=L()(h()().mark(function C(b){var D;return h()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return F(!0),T.next=3,c==null?void 0:c(b);case 3:return D=T.sent,F(!1),g(0),T.abrupt("return",D);case 7:case"end":return T.stop()}},C)}));return function(C){return A.apply(this,arguments)}}(),children:[(0,e.jsxs)(Me.L.StepForm,{scrollToFirstError:!0,name:"basic",title:"\u57FA\u672C\u4FE1\u606F",layout:"horizontal",labelCol:{span:4},wrapperCol:{span:19},labelAlign:"right",children:[(0,e.jsx)(G.Z,{name:"name",label:"\u8D44\u6E90\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u8D44\u6E90\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D44\u6E90\u540D\u79F0"},{validator:function(){var A=L()(h()().mark(function b(D,M){var T,E,I;return h()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(M){U.next=2;break}return U.abrupt("return",Promise.resolve());case 2:return U.next=4,(0,Q.OR)(l,"NAME",M);case 4:if(T=U.sent,E=T.success,I=T.result,E){U.next=9;break}return U.abrupt("return",Promise.reject());case 9:if(I){U.next=11;break}return U.abrupt("return",Promise.reject(new Error("\u8D44\u6E90\u540D\u79F0\u5DF2\u5B58\u5728")));case 11:case"end":return U.stop()}},b)}));function C(b,D){return A.apply(this,arguments)}return C}(),validateTrigger:["onBlur"]}]}),(0,e.jsx)(G.Z,{name:"code",label:"\u8D44\u6E90\u7F16\u7801",placeholder:"\u8BF7\u8F93\u5165\u8D44\u6E90\u7F16\u7801",rules:[{required:!0,message:"\u8D44\u6E90\u7F16\u7801\u4E3A\u5FC5\u586B\u9879"},{validator:function(){var A=L()(h()().mark(function b(D,M){var T,E,I;return h()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(M){U.next=2;break}return U.abrupt("return",Promise.resolve());case 2:return F(!0),U.next=5,(0,Q.OR)(l,"CODE",M);case 5:if(T=U.sent,E=T.success,I=T.result,F(!1),E){U.next=11;break}return U.abrupt("return",Promise.reject());case 11:if(I){U.next=13;break}return U.abrupt("return",Promise.reject(new Error("\u8D44\u6E90\u7F16\u7801\u5DF2\u5B58\u5728")));case 13:case"end":return U.stop()}},b)}));function C(b,D){return A.apply(this,arguments)}return C}(),validateTrigger:["onBlur"]}],extra:"\u8D44\u6E90\u7F16\u7801\u5728\u5F53\u524D\u5E94\u7528\u4E2D\u7684\u552F\u4E00\u6807\u8BC6\uFF0C\u4E0D\u80FD\u91CD\u590D\uFF0C\u4EC5\u652F\u6301\u82F1\u6587\u3001\u6570\u5B57\u3001\u4E0B\u5212\u7EBF\uFF0C\u521B\u5EFA\u540E\u4E0D\u53EF\u4FEE\u6539\u3002"}),(0,e.jsx)(fr.Z,{name:"desc",fieldProps:{rows:2},label:"\u8D44\u6E90\u63CF\u8FF0",placeholder:"\u8BF7\u8F93\u5165\u8D44\u6E90\u63CF\u8FF0",rules:[{required:!0,message:"\u8D44\u6E90\u63CF\u8FF0\u4E3A\u5FC5\u586B\u9879"}]})]}),(0,e.jsx)(Me.L.StepForm,{scrollToFirstError:!0,name:"actions",title:"\u6743\u9650\u9879",layout:"vertical",labelAlign:"right",onFinish:L()(h()().mark(function A(){var C;return h()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return F(!0),D.next=3,f.validateFields();case 3:if(C=D.sent,F(!1),!C){D.next=7;break}return D.abrupt("return",Promise.resolve(!0));case 7:return D.abrupt("return",Promise.resolve(!1));case 8:case"end":return D.stop()}},A)})),children:(0,e.jsx)(Re.A.Item,{label:"\u8D44\u6E90\u6743\u9650",name:"actions",trigger:"onValuesChange",rules:[{required:!0,message:"\u8D44\u6E90\u6743\u9650\u4E3A\u5FC5\u586B\u9879"}],tooltip:"\u4E3A\u8D44\u6E90\u5B9A\u4E49\u6743\u9650\uFF0C\u8BF7\u9009\u62E9\u6743\u9650\u7C7B\u578B\uFF0C\u5E76\u914D\u7F6E\u6743\u9650\u503C\u3002",children:(0,e.jsx)(Tr.Z,{rowKey:"key",scroll:{x:700},actionRef:S,toolBarRender:!1,columns:x,recordCreatorProps:{creatorButtonText:"\u6DFB\u52A0\u8D44\u6E90\u6743\u9650",newRecordType:"dataSource",position:"bottom",record:function(){return{key:Date.now()}}},editable:{form:f,type:"multiple",editableKeys:d,onChange:u,deletePopconfirmMessage:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u6B64\u6743\u9650\u8D44\u6E90\u5417\uFF1F",actionRender:function(C,b,D){return[D.delete]}}})})})]})},yn=Cn,gt=m(41299),xn=function(n){var t=n.open,a=n.onCancel,c=n.onFinish,l=n.id,s=n.appId,o=(0,i.useState)(!1),d=B()(o,2),u=d[0],p=d[1],w=(0,i.useState)(0),y=B()(w,2),F=y[0],O=y[1],$=(0,i.useState)(function(){return[]}),P=B()($,2),g=P[0],j=P[1],v=(0,i.useRef)([]),Z=te.Z.useForm(),f=B()(Z,1),S=f[0],x=(0,i.useRef)();(0,ce.Z)(L()(h()().mark(function C(){var b,D,M,T,E;return h()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!(t&&l)){z.next=14;break}return p(!0),z.next=4,(0,Q.NZ)(l);case 4:if(b=z.sent,D=b.success,M=b.result,!(D&&M)){z.next=12;break}return v==null||(T=v.current)===null||T===void 0||T.forEach(function(U){var K;U==null||(K=U.current)===null||K===void 0||K.setFieldsValue(N()(N()({},M),{},{id:l}))}),j((E=M.actions)===null||E===void 0?void 0:E.map(function(U){return U.id})),p(!1),z.abrupt("return");case 12:a(),Y.ZP.warning("\u672A\u83B7\u53D6\u5230\u8BE5".concat(l,"\u8D44\u6E90\u6570\u636E\uFF01"));case 14:case"end":return z.stop()}},C)})),[l,a,t]);var A=[{title:"\u6743\u9650\u7C7B\u578B",key:"type",dataIndex:"type",valueType:"select",width:80,fieldProps:{allowClear:!1,options:[{value:"DATA",label:"\u6570\u636E"},{value:"MENU",label:"\u83DC\u5355"},{value:"BUTTON",label:"\u6309\u94AE"},{value:"API",label:"API"},{value:"OTHER",label:"\u5176\u4ED6"}]},formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u6743\u9650\u503C",dataIndex:"value",copyable:!0,width:150,formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u63CF\u8FF0",dataIndex:"name",width:150,formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u64CD\u4F5C",fixed:"right",align:"center",width:30,valueType:"option"}];return(0,e.jsxs)(Me.L,{formMapRef:v,current:F,onCurrentChange:O,stepsFormRender:function(b,D){return(0,e.jsx)(Br.Z,{title:"\u4FEE\u6539\u8D44\u6E90",width:600,maskClosable:!0,destroyOnClose:!0,onClose:function(T){O(0),a(T)},open:t,footer:(0,e.jsx)(He.Z,{style:{float:"right"},children:D}),children:(0,e.jsx)(je.Z,{spinning:u,children:b})})},onFinish:function(){var C=L()(h()().mark(function b(D){var M;return h()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return p(!0),E.next=3,c==null?void 0:c(D);case 3:return M=E.sent,p(!1),O(0),E.abrupt("return",M);case 7:case"end":return E.stop()}},b)}));return function(b){return C.apply(this,arguments)}}(),children:[(0,e.jsxs)(Me.L.StepForm,{scrollToFirstError:!0,name:"basic",title:"\u57FA\u672C\u4FE1\u606F",layout:"horizontal",labelCol:{span:4},wrapperCol:{span:19},labelAlign:"right",children:[(0,e.jsx)(G.Z,{name:"id",hidden:!0}),(0,e.jsx)(G.Z,{name:"name",label:"\u8D44\u6E90\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u8D44\u6E90\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D44\u6E90\u540D\u79F0"},{validator:function(){var C=L()(h()().mark(function D(M,T){var E,I,z;return h()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(T){K.next=2;break}return K.abrupt("return",Promise.resolve());case 2:return p(!0),K.next=5,(0,Q.OR)(s,"NAME",T,l);case 5:if(E=K.sent,I=E.success,z=E.result,p(!1),I){K.next=11;break}return K.abrupt("return",Promise.reject());case 11:if(z){K.next=13;break}return K.abrupt("return",Promise.reject(new Error("\u8D44\u6E90\u540D\u79F0\u5DF2\u5B58\u5728")));case 13:case"end":return K.stop()}},D)}));function b(D,M){return C.apply(this,arguments)}return b}(),validateTrigger:["onBlur"]}]}),(0,e.jsx)(G.Z,{name:"code",label:"\u8D44\u6E90\u7F16\u7801",placeholder:"\u8BF7\u8F93\u5165\u8D44\u6E90\u7F16\u7801",proFieldProps:{render:function(b){return b&&(0,e.jsx)(gt.Z,{copyable:{text:b},style:{marginBottom:"0"},children:(0,e.jsx)("span",{dangerouslySetInnerHTML:{__html:"<span>".concat(b,"</span>")}})})}},readonly:!0,extra:"\u8D44\u6E90\u7F16\u7801\u5728\u5F53\u524D\u5E94\u7528\u4E2D\u7684\u552F\u4E00\u6807\u8BC6\uFF0C\u4E0D\u80FD\u91CD\u590D\uFF0C\u4EC5\u652F\u6301\u82F1\u6587\u3001\u6570\u5B57\u3001\u4E0B\u5212\u7EBF\uFF0C\u521B\u5EFA\u540E\u4E0D\u53EF\u4FEE\u6539\u3002"}),(0,e.jsx)(fr.Z,{name:"desc",fieldProps:{rows:2},label:"\u8D44\u6E90\u63CF\u8FF0",placeholder:"\u8BF7\u8F93\u5165\u8D44\u6E90\u63CF\u8FF0"})]}),(0,e.jsx)(Me.L.StepForm,{scrollToFirstError:!0,name:"actions",title:"\u6743\u9650\u9879",layout:"vertical",labelAlign:"right",onFinish:L()(h()().mark(function C(){var b;return h()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return p(!0),M.next=3,S.validateFields();case 3:if(b=M.sent,p(!1),!b){M.next=7;break}return M.abrupt("return",Promise.resolve(!0));case 7:return M.abrupt("return",Promise.resolve(!1));case 8:case"end":return M.stop()}},C)})),children:(0,e.jsx)(Re.A.Item,{label:"\u8D44\u6E90\u6743\u9650",name:"actions",trigger:"onValuesChange",rules:[{required:!0,message:"\u8D44\u6E90\u6743\u9650\u4E3A\u5FC5\u586B\u9879"}],tooltip:"\u4E3A\u8D44\u6E90\u5B9A\u4E49\u6743\u9650\uFF0C\u8BF7\u9009\u62E9\u6743\u9650\u7C7B\u578B\uFF0C\u5E76\u914D\u7F6E\u6743\u9650\u503C\u3002",children:(0,e.jsx)(Tr.Z,{rowKey:"id",scroll:{x:700},actionRef:x,toolBarRender:!1,columns:A,recordCreatorProps:{creatorButtonText:"\u6DFB\u52A0\u8D44\u6E90\u6743\u9650",newRecordType:"dataSource",position:"bottom",record:function(){return{id:Date.now()}}},editable:{form:S,type:"multiple",editableKeys:g,onChange:j,deletePopconfirmMessage:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u6B64\u6743\u9650\u8D44\u6E90\u5417\uFF1F",actionRender:function(b,D,M){return[M.delete]}}})})})]})},bn=xn,En=vt.Z.confirm,Fn=function(r){var n=(0,i.useRef)(),t=r.appId,a=(0,i.useState)(!1),c=B()(a,2),l=c[0],s=c[1],o=(0,i.useState)(!1),d=B()(o,2),u=d[0],p=d[1],w=(0,i.useState)(),y=B()(w,2),F=y[0],O=y[1],$=[{title:"\u8D44\u6E90\u540D\u79F0",dataIndex:"name",ellipsis:!0,fixed:"left",copyable:!1},{title:"\u8D44\u6E90\u7F16\u7801",dataIndex:"code",ellipsis:!0,copyable:!0},{title:"\u8D44\u6E90\u63CF\u8FF0",dataIndex:"desc",search:!1,ellipsis:!0,copyable:!1},{title:"\u72B6\u6001",dataIndex:"enabled",search:!1,align:"center",render:function(g,j){return(0,e.jsx)(ht.Z,{checked:g,onChange:function(){var v=L()(h()().mark(function Z(f){var S,x,A;return h()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!f){b.next=9;break}return b.next=3,(0,Q.PE)(j.id);case 3:if(S=b.sent,x=S.success,!x){b.next=9;break}return Y.ZP.success("\u64CD\u4F5C\u6210\u529F"),(A=n.current)===null||A===void 0||A.reload(),b.abrupt("return");case 9:En({title:"\u8B66\u544A",icon:(0,e.jsx)(ft.Z,{}),content:"\u786E\u5B9A\u7981\u7528\u6B64\u8D44\u6E90\uFF1F",okText:"\u786E\u5B9A",okType:"danger",cancelText:"\u53D6\u6D88",centered:!0,onOk:function(){var D=L()(h()().mark(function T(){var E,I,z;return h()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,(0,Q._G)(j.id);case 2:if(E=K.sent,I=E.success,!I){K.next=8;break}return Y.ZP.success("\u64CD\u4F5C\u6210\u529F"),(z=n.current)===null||z===void 0||z.reload(),K.abrupt("return");case 8:case"end":return K.stop()}},T)}));function M(){return D.apply(this,arguments)}return M}(),onCancel:function(){}});case 10:case"end":return b.stop()}},Z)}));return function(Z){return v.apply(this,arguments)}}()})}},{title:"\u64CD\u4F5C",align:"center",valueType:"option",fixed:"right",width:150,render:function(g,j){return[(0,e.jsx)("a",{target:"_blank",onClick:function(){O(j.id),p(!0)},children:"\u4FEE\u6539"},"update"),(0,e.jsx)(ir.Z,{title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",placement:"bottomRight",icon:(0,e.jsx)(or.Z,{style:{color:"red"}}),onConfirm:L()(h()().mark(function v(){return h()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:(0,Q.IV)(j.id).then(function(S){if(S.success&&S.result){var x;Y.ZP.success("\u64CD\u4F5C\u6210\u529F"),(x=n.current)===null||x===void 0||x.reload();return}});case 1:case"end":return f.stop()}},v)})),okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)("a",{target:"_blank",style:{color:"red"},children:"\u5220\u9664"},"remove")},"delete")]}}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(xr.Z,{columns:$,actionRef:n,request:Q.UK,params:{appId:t},rowKey:"id",options:!1,scroll:{x:650},style:{height:"calc(100vh - 190px)",overflow:"auto"},cardProps:{style:{minHeight:"100%"}},toolbar:{actions:[(0,e.jsx)(Qe.ZP,{type:"primary",icon:(0,e.jsx)(mr.Z,{}),onClick:function(){s(!0)},children:"\u65B0\u589E\u8D44\u6E90"},"create")]},pagination:{showQuickJumper:!0,defaultPageSize:10},rowSelection:{selections:[_e.Z.SELECTION_ALL,_e.Z.SELECTION_INVERT]},tableAlertRender:function(g){var j=g.selectedRowKeys,v=g.onCleanSelected;return(0,e.jsx)(He.Z,{size:24,children:(0,e.jsxs)("span",{children:["\u5DF2\u9009 ",j.length," \u9879",(0,e.jsx)("a",{style:{marginLeft:8},onClick:v,children:"\u53D6\u6D88\u9009\u62E9"})]})})},tableAlertOptionRender:function(g){return(0,e.jsx)(He.Z,{size:16,children:(0,e.jsx)(ir.Z,{title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",placement:"bottomRight",icon:(0,e.jsx)(or.Z,{style:{color:"red"}}),onConfirm:L()(h()().mark(function j(){var v,Z,f;return h()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,Q.O0)(g.selectedRowKeys);case 2:if(v=x.sent,Z=v.success,!Z){x.next=9;break}return Y.ZP.success("\u64CD\u4F5C\u6210\u529F"),g.onCleanSelected(),(f=n.current)===null||f===void 0||f.reload(),x.abrupt("return");case 9:case"end":return x.stop()}},j)})),okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)("a",{target:"_blank",style:{color:"red"},children:"\u6279\u91CF\u5220\u9664"},"remove")},"delete")})}}),(0,e.jsx)(yn,{appId:t,open:l,onCancel:function(){s(!1)},onFinish:function(){var P=L()(h()().mark(function g(j){var v,Z,f;return h()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,Q.bm)(N()(N()({},j),{},{appId:t}));case 2:if(v=x.sent,Z=v.success,!Z){x.next=9;break}return Y.ZP.success("\u64CD\u4F5C\u6210\u529F"),(f=n.current)===null||f===void 0||f.reload(),s(!1),x.abrupt("return",Promise.resolve(!0));case 9:return x.abrupt("return",Promise.resolve(!1));case 10:case"end":return x.stop()}},g)}));return function(g){return P.apply(this,arguments)}}()}),(0,e.jsx)(bn,{id:F,appId:t,open:u,onCancel:function(){p(!1)},onFinish:function(){var P=L()(h()().mark(function g(j){var v,Z,f;return h()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,Q.Y3)(N()(N()({},j),{},{appId:t}));case 2:v=x.sent,Z=v.success,Z&&((f=n.current)===null||f===void 0||f.reload(),p(!1),Y.ZP.success("\u64CD\u4F5C\u6210\u529F"));case 5:case"end":return x.stop()}},g)}));return function(g){return P.apply(this,arguments)}}()})]})},An=m(7206),Sn=Ce.Z.Panel,jn=function(n){var t=n.open,a=n.onCancel,c=n.onFinish,l=n.appId,s=(0,i.useRef)([]),o=(0,i.useState)(),d=B()(o,2),u=d[0],p=d[1],w=(0,i.useState)(!1),y=B()(w,2),F=y[0],O=y[1],$=(0,i.useState)(0),P=B()($,2),g=P[0],j=P[1],v=(0,i.useState)([]),Z=B()(v,2),f=Z[0],S=Z[1];(0,ce.Z)(L()(h()().mark(function A(){var C,b,D;return h()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(!t){T.next=9;break}return O(!0),s==null||(C=s.current)===null||C===void 0||C.forEach(function(E){var I;(I=E.current)===null||I===void 0||I.setFieldsValue({code:(0,An.MX)(9),appId:l})}),T.next=5,(0,Q.Sf)({appId:l});case 5:b=T.sent,D=b.result,p(D),O(!1);case 9:case"end":return T.stop()}},A)})),[l,t]);var x=function(C){if(C.target.checked){S([].concat(ee()(f),[C.target.value]));return}S(f==null?void 0:f.filter(function(b){return b!==C.target.value}))};return(0,e.jsxs)(Me.L,{onFinish:function(){var A=L()(h()().mark(function C(b){var D;return h()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return O(!0),console.log("permissions",f),T.next=4,c==null?void 0:c(b);case 4:return D=T.sent,O(!1),j(0),T.abrupt("return",D);case 8:case"end":return T.stop()}},C)}));return function(C){return A.apply(this,arguments)}}(),current:g,onCurrentChange:j,formProps:{validateMessages:{required:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}},formMapRef:s,stepsFormRender:function(C,b){return(0,e.jsx)(Br.Z,{title:"\u65B0\u589E\u89D2\u8272",width:600,forceRender:!0,onClose:function(){j(0),a()},open:t,footer:(0,e.jsx)(He.Z,{style:{float:"right"},children:b}),destroyOnClose:!0,children:(0,e.jsx)(je.Z,{spinning:F,children:C})})},children:[(0,e.jsxs)(Me.L.StepForm,{scrollToFirstError:!0,name:"basic",title:"\u57FA\u672C\u4FE1\u606F",layout:"horizontal",labelCol:{span:4},wrapperCol:{span:19},labelAlign:"right",children:[(0,e.jsx)(G.Z,{name:"appId",hidden:!0}),(0,e.jsx)(G.Z,{name:"name",label:"\u89D2\u8272\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0",rules:[{required:!0,message:"\u89D2\u8272\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"},{validator:function(){var A=L()(h()().mark(function b(D,M){var T,E,I;return h()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(M){U.next=2;break}return U.abrupt("return",Promise.resolve());case 2:return O(!0),U.next=5,(0,Q.ld)(l,"NAME",M);case 5:if(T=U.sent,E=T.success,I=T.result,O(!1),E){U.next=11;break}return U.abrupt("return",Promise.reject());case 11:if(I){U.next=13;break}return U.abrupt("return",Promise.reject(new Error("\u89D2\u8272\u540D\u79F0\u5DF2\u5B58\u5728")));case 13:case"end":return U.stop()}},b)}));function C(b,D){return A.apply(this,arguments)}return C}(),validateTrigger:["onBlur"]}]}),(0,e.jsx)(G.Z,{name:"code",label:"\u89D2\u8272\u6807\u8BC6",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u6807\u8BC6",rules:[{required:!0,message:"\u89D2\u8272\u6807\u8BC6\u4E3A\u5FC5\u586B\u9879"},{validator:function(){var A=L()(h()().mark(function b(D,M){var T,E,I;return h()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(M){U.next=2;break}return U.abrupt("return",Promise.resolve());case 2:return O(!0),U.next=5,(0,Q.ld)(l,"CODE",M);case 5:if(T=U.sent,E=T.success,I=T.result,O(!1),E){U.next=11;break}return U.abrupt("return",Promise.reject());case 11:if(I){U.next=13;break}return U.abrupt("return",Promise.reject(new Error("\u89D2\u8272\u6807\u8BC6\u5DF2\u5B58\u5728")));case 13:case"end":return U.stop()}},b)}));function C(b,D){return A.apply(this,arguments)}return C}(),validateTrigger:["onBlur"]}],extra:"\u89D2\u8272\u7F16\u7801\u5728\u5F53\u524D\u5E94\u7528\u4E2D\u7684\u552F\u4E00\u6807\u8BC6\uFF0C\u4E0D\u80FD\u91CD\u590D\uFF0C\u4EC5\u652F\u6301\u82F1\u6587\u3001\u6570\u5B57\u3001\u4E0B\u5212\u7EBF\uFF0C\u521B\u5EFA\u540E\u4E0D\u53EF\u4FEE\u6539\u3002"}),(0,e.jsx)(fr.Z,{name:"remark",label:"\u89D2\u8272\u63CF\u8FF0",fieldProps:{rows:2},placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u63CF\u8FF0"})]}),(0,e.jsx)(Me.L.StepForm,{scrollToFirstError:!0,name:"permission",title:"\u5206\u914D\u6743\u9650",layout:"horizontal",labelCol:{span:4},wrapperCol:{span:19},children:u==null?void 0:u.map(function(A){var C,b,D,M,T;return(0,e.jsxs)("div",{children:[(0,e.jsx)(Ce.Z,{bordered:!1,children:(0,e.jsxs)(Sn,{header:A.name,children:[A.menus.length>0&&(0,e.jsx)(le.Z.Group,{name:"menu_".concat(A.id),label:"\u83DC\u5355\u6743\u9650",layout:"vertical",options:(C=A.menus)===null||C===void 0?void 0:C.map(function(E){return{label:E.name,value:E.id,onChange:x}})}),A.buttons.length>0&&(0,e.jsx)(le.Z.Group,{name:"button_".concat(A.id),label:"\u6309\u94AE\u6743\u9650",layout:"vertical",options:(b=A.buttons)===null||b===void 0?void 0:b.map(function(E){return{label:E.name,value:E.id,onChange:x}})}),A.apis.length>0&&(0,e.jsx)(le.Z.Group,{name:"api_".concat(A.id),layout:"vertical",label:"\u63A5\u53E3\u6743\u9650",options:(D=A.apis)===null||D===void 0?void 0:D.map(function(E){return{label:E.name,value:E.id,onChange:x}})}),A.datas.length>0&&(0,e.jsx)(le.Z.Group,{name:"data_".concat(A.id),layout:"vertical",label:"\u6570\u636E\u6743\u9650",options:(M=A.apis)===null||M===void 0?void 0:M.map(function(E){return{label:E.name,value:E.id,onChange:x}})}),A.others.length>0&&(0,e.jsx)(le.Z.Group,{name:"other_".concat(A.id),layout:"vertical",label:"\u5176\u4ED6\u6743\u9650",options:(T=A.apis)===null||T===void 0?void 0:T.map(function(E){return{label:E.name,value:E.id,onChange:x}})})]},A.id)},A.id),(0,e.jsx)("br",{})]},A.id)})})]},"create")},Pn=jn,wn=Ce.Z.Panel,Zn=function(n){var t=n.open,a=n.onCancel,c=n.onFinish,l=n.id,s=(0,i.useState)(!1),o=B()(s,2),d=o[0],u=o[1],p=(0,i.useState)(),w=B()(p,2),y=w[0],F=w[1],O=(0,i.useRef)(),$=(0,i.useRef)([]),P=(0,i.useState)(0),g=B()(P,2),j=g[0],v=g[1],Z=(0,i.useState)([]),f=B()(Z,2),S=f[0],x=f[1];(0,ce.Z)(L()(h()().mark(function C(){var b,D,M,T;return h()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!(t&&l)){I.next=14;break}return u(!0),F([]),I.next=5,(0,Q.Yq)(l);case 5:if(b=I.sent,D=b.success,M=b.result,!(D&&M)){I.next=12;break}return $==null||(T=$.current)===null||T===void 0||T.forEach(function(z){var U;(U=z.current)===null||U===void 0||U.setFieldsValue(N()({},M))}),u(!1),I.abrupt("return");case 12:a(),Y.ZP.warning("\u672A\u83B7\u53D6\u5230\u8BE5".concat(l,"\u89D2\u8272\u6570\u636E\uFF01")).then();case 14:case"end":return I.stop()}},C)})),[l,a,t]);var A=function(b){if(b.target.checked){x([].concat(ee()(S),[b.target.value]));return}x(S==null?void 0:S.filter(function(D){return D!==b.target.value}))};return(0,e.jsxs)(Me.L,{onFinish:function(){var C=L()(h()().mark(function b(D){var M;return h()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return u(!0),console.log("permissions",S),E.next=4,c==null?void 0:c(D);case 4:return M=E.sent,u(!1),v(0),E.abrupt("return",M);case 8:case"end":return E.stop()}},b)}));return function(b){return C.apply(this,arguments)}}(),current:j,onCurrentChange:v,formProps:{validateMessages:{required:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}},formMapRef:$,stepsFormRender:function(b,D){return(0,e.jsx)(Br.Z,{title:"\u4FEE\u6539\u89D2\u8272",width:600,onClose:function(){v(0),a()},open:t,footer:(0,e.jsx)(He.Z,{style:{float:"right"},children:D}),destroyOnClose:!0,children:(0,e.jsxs)(je.Z,{spinning:d,children:[" ",b]})})},children:[(0,e.jsxs)(Me.L.StepForm,{scrollToFirstError:!0,name:"basic",title:"\u57FA\u672C\u4FE1\u606F",layout:"horizontal",labelCol:{span:4},wrapperCol:{span:19},labelAlign:"right",formRef:O,children:[(0,e.jsx)(G.Z,{name:"id",hidden:!0}),(0,e.jsx)(G.Z,{name:"appId",hidden:!0}),(0,e.jsx)(G.Z,{name:"name",label:"\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0"},{validator:function(){var C=L()(h()().mark(function D(M,T){var E,I,z,U;return h()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(T){X.next=2;break}return X.abrupt("return",Promise.resolve());case 2:return u(!0),X.next=5,(0,Q.ld)((E=O.current)===null||E===void 0?void 0:E.getFieldValue("appId"),"NAME",T,l);case 5:if(I=X.sent,z=I.success,U=I.result,u(!1),z){X.next=11;break}return X.abrupt("return",Promise.reject());case 11:if(U){X.next=13;break}return X.abrupt("return",Promise.reject(new Error("\u624B\u673A\u53F7\u5DF2\u5B58\u5728")));case 13:case"end":return X.stop()}},D)}));function b(D,M){return C.apply(this,arguments)}return b}(),validateTrigger:["onBlur"]}],placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0"}),(0,e.jsx)(G.Z,{name:"code",label:"\u6807\u8BC6",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u6807\u8BC6",readonly:!0,proFieldProps:{render:function(b){return b&&(0,e.jsx)(gt.Z,{copyable:{text:b},style:{marginBottom:"0"},children:(0,e.jsx)("span",{dangerouslySetInnerHTML:{__html:"<span>".concat(b,"</span>")}})})}},extra:"\u89D2\u8272\u7F16\u7801\u5728\u5F53\u524D\u5E94\u7528\u4E2D\u7684\u552F\u4E00\u6807\u8BC6\uFF0C\u4E0D\u80FD\u91CD\u590D\uFF0C\u4EC5\u652F\u6301\u82F1\u6587\u3001\u6570\u5B57\u3001\u4E0B\u5212\u7EBF\uFF0C\u521B\u5EFA\u540E\u4E0D\u53EF\u4FEE\u6539\u3002"}),(0,e.jsx)(fr.Z,{name:"remark",fieldProps:{rows:2},label:"\u63CF\u8FF0",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u63CF\u8FF0"})]}),(0,e.jsx)(Me.L.StepForm,{scrollToFirstError:!0,name:"permission",title:"\u5206\u914D\u6743\u9650",layout:"horizontal",labelCol:{span:4},wrapperCol:{span:19},children:y==null?void 0:y.map(function(C){var b,D,M,T,E;return(0,e.jsxs)("div",{children:[(0,e.jsx)(Ce.Z,{bordered:!1,children:(0,e.jsxs)(wn,{header:C.name,children:[C.menus.length>0&&(0,e.jsx)(le.Z.Group,{name:"menu_".concat(C.id),label:"\u83DC\u5355\u6743\u9650",layout:"vertical",options:(b=C.menus)===null||b===void 0?void 0:b.map(function(I){return{label:I.name,value:I.id,onChange:A}})}),C.buttons.length>0&&(0,e.jsx)(le.Z.Group,{name:"button_".concat(C.id),label:"\u6309\u94AE\u6743\u9650",layout:"vertical",options:(D=C.buttons)===null||D===void 0?void 0:D.map(function(I){return{label:I.name,value:I.id,onChange:A}})}),C.apis.length>0&&(0,e.jsx)(le.Z.Group,{name:"api_".concat(C.id),layout:"vertical",label:"\u63A5\u53E3\u6743\u9650",options:(M=C.apis)===null||M===void 0?void 0:M.map(function(I){return{label:I.name,value:I.id,onChange:A}})}),C.datas.length>0&&(0,e.jsx)(le.Z.Group,{name:"data_".concat(C.id),layout:"vertical",label:"\u6570\u636E\u6743\u9650",options:(T=C.apis)===null||T===void 0?void 0:T.map(function(I){return{label:I.name,value:I.id,onChange:A}})}),C.others.length>0&&(0,e.jsx)(le.Z.Group,{name:"other_".concat(C.id),layout:"vertical",label:"\u5176\u4ED6\u6743\u9650",options:(E=C.apis)===null||E===void 0?void 0:E.map(function(I){return{label:I.name,value:I.id,onChange:A}})})]},C.id)},C.id),(0,e.jsx)("br",{})]},C.id)})})]},"update")},In=Zn,Rn=vt.Z.confirm,Dn=function(r){var n=(0,i.useRef)(),t=r.appId,a=(0,i.useState)(!1),c=B()(a,2),l=c[0],s=c[1],o=(0,i.useState)(!1),d=B()(o,2),u=d[0],p=d[1],w=(0,i.useState)(),y=B()(w,2),F=y[0],O=y[1],$=[{title:"\u89D2\u8272\u540D\u79F0",dataIndex:"name",ellipsis:!0,fixed:"left"},{title:"\u89D2\u8272\u7F16\u7801",dataIndex:"code",copyable:!0,search:!1},{title:"\u72B6\u6001",dataIndex:"enabled",search:!1,align:"center",render:function(g,j){return(0,e.jsx)(ht.Z,{checked:g,onChange:function(){var v=L()(h()().mark(function Z(f){var S,x,A;return h()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!f){b.next=9;break}return b.next=3,(0,Q.Ko)(j.id);case 3:if(S=b.sent,x=S.success,!x){b.next=9;break}return Y.ZP.success("\u64CD\u4F5C\u6210\u529F"),(A=n.current)===null||A===void 0||A.reload(),b.abrupt("return");case 9:Rn({title:"\u8B66\u544A",icon:(0,e.jsx)(ft.Z,{}),content:"\u786E\u5B9A\u7981\u7528\u6B64\u89D2\u8272\uFF1F",okText:"\u786E\u5B9A",okType:"danger",cancelText:"\u53D6\u6D88",centered:!0,onOk:function(){var D=L()(h()().mark(function T(){var E,I,z;return h()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,(0,Q.RN)(j.id);case 2:if(E=K.sent,I=E.success,!I){K.next=8;break}return Y.ZP.success("\u64CD\u4F5C\u6210\u529F"),(z=n.current)===null||z===void 0||z.reload(),K.abrupt("return");case 8:case"end":return K.stop()}},T)}));function M(){return D.apply(this,arguments)}return M}(),onCancel:function(){}});case 10:case"end":return b.stop()}},Z)}));return function(Z){return v.apply(this,arguments)}}()})}},{title:"\u89D2\u8272\u63CF\u8FF0",ellipsis:!0,dataIndex:"remark",search:!1,copyable:!1},{title:"\u64CD\u4F5C",align:"center",valueType:"option",width:180,fixed:"right",render:function(g,j){return[(0,e.jsx)("a",{target:"_blank",onClick:function(){p(!0),O(j.id)},children:"\u4FEE\u6539"},"update"),(0,e.jsx)(ir.Z,{title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",placement:"bottomRight",icon:(0,e.jsx)(or.Z,{style:{color:"red"}}),onConfirm:L()(h()().mark(function v(){var Z,f,S;return h()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,Q.AO)(j.id);case 2:if(Z=A.sent,f=Z.success,!f){A.next=8;break}return Y.ZP.success("\u64CD\u4F5C\u6210\u529F"),(S=n.current)===null||S===void 0||S.reload(),A.abrupt("return");case 8:case"end":return A.stop()}},v)})),okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)("a",{target:"_blank",style:{color:"red"},children:"\u5220\u9664"},"remove")},"delete")]}}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(xr.Z,{columns:$,pagination:{showQuickJumper:!0,defaultPageSize:10},rowSelection:{selections:[_e.Z.SELECTION_ALL,_e.Z.SELECTION_INVERT]},style:{height:"calc(100vh - 190px)",overflow:"auto"},cardProps:{style:{minHeight:"100%"}},scroll:{x:700},options:!1,tableAlertRender:function(g){var j=g.selectedRowKeys,v=g.onCleanSelected;return(0,e.jsx)(He.Z,{size:24,children:(0,e.jsxs)("span",{children:["\u5DF2\u9009 ",j.length," \u9879",(0,e.jsx)("a",{style:{marginLeft:8},onClick:v,children:"\u53D6\u6D88\u9009\u62E9"})]})})},tableAlertOptionRender:function(g){return(0,e.jsx)(He.Z,{size:16,children:(0,e.jsx)(ir.Z,{title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",placement:"bottomRight",icon:(0,e.jsx)(or.Z,{style:{color:"red"}}),onConfirm:L()(h()().mark(function j(){var v,Z,f;return h()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,Q.O0)(g.selectedRowKeys);case 2:if(v=x.sent,Z=v.success,!Z){x.next=9;break}return Y.ZP.success("\u64CD\u4F5C\u6210\u529F"),g.onCleanSelected(),(f=n.current)===null||f===void 0||f.reload(),x.abrupt("return");case 9:case"end":return x.stop()}},j)})),okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)("a",{target:"_blank",style:{color:"red"},children:"\u6279\u91CF\u5220\u9664"},"remove")},"delete")})},actionRef:n,params:{appId:t},request:Q.TT,rowKey:"id",dateFormatter:"string",toolbar:{search:!1,actions:[(0,e.jsx)(Qe.ZP,{type:"primary",icon:(0,e.jsx)(mr.Z,{}),onClick:function(){s(!0)},children:"\u65B0\u589E\u89D2\u8272"},"create")]}}),(0,e.jsx)(Pn,{appId:t,open:l,onCancel:function(){s(!1)},onFinish:function(){var P=L()(h()().mark(function g(j){var v,Z,f,S;return h()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,Q.pW)(j);case 2:if(v=A.sent,Z=v.success,f=v.result,!(Z&&f)){A.next=10;break}return Y.ZP.success("\u64CD\u4F5C\u6210\u529F"),(S=n.current)===null||S===void 0||S.reload(),s(!1),A.abrupt("return");case 10:case"end":return A.stop()}},g)}));return function(g){return P.apply(this,arguments)}}()}),(0,e.jsx)(In,{id:F,open:u,onCancel:function(){p(!1)},onFinish:function(){var P=L()(h()().mark(function g(j){var v,Z,f,S;return h()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,Q.UC)(j);case 2:v=A.sent,Z=v.success,f=v.result,Z&&f&&((S=n.current)===null||S===void 0||S.reload(),p(!1),Y.ZP.success("\u64CD\u4F5C\u6210\u529F"));case 6:case"end":return A.stop()}},g)}));return function(g){return P.apply(this,arguments)}}()})]})},br=m(40746),xe=m(89115),Lr=m(21231),be=m(95926),On=Ce.Z.Panel,$n=function(r){var n=te.Z.useForm(),t=B()(n,1),a=t[0],c=r.protocolEndpoint,l=r.appId,s=r.collapsed,o=s===void 0?!0:s;return(0,ce.Z)(L()(h()().mark(function d(){return h()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:a.setFieldsValue(c);case 1:case"end":return p.stop()}},d)})),[l,c]),(0,e.jsx)(Re.A,{layout:"horizontal",labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:12}},labelAlign:"right",labelWrap:!0,submitter:!1,form:a,children:(0,e.jsx)(Ce.Z,{ghost:!0,expandIconPosition:"start",defaultActiveKey:o?void 0:"config",children:(0,e.jsx)(On,{header:(0,e.jsx)("a",{children:"\u5E94\u7528\u914D\u7F6E\u4FE1\u606F"}),children:(0,e.jsx)($e.Z,{style:{backgroundColor:"#f1f1f2",border:"1px solid #f1f1f2"},description:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(G.Z,{label:"CAS \u670D\u52A1\u5730\u5740\u524D\u7F00",name:"casServerUrlPrefix",readonly:!0,proFieldProps:{render:function(u){return u&&(0,e.jsx)(be.Z.Text,{copyable:!0,children:u})}},fieldProps:{autoComplete:"off"}}),(0,e.jsx)(G.Z,{label:"IdP SSO \u5730\u5740",name:"casSsoEndpoint",extra:"\u5E94\u7528\u53D1\u8D77\u5355\u70B9\u767B\u5F55\u7684\u5730\u5740\u3002",readonly:!0,proFieldProps:{render:function(u){return u&&(0,e.jsx)(be.Z.Text,{copyable:!0,children:u})}},fieldProps:{autoComplete:"off"}}),(0,e.jsx)(G.Z,{label:"\u767B\u51FA\u7AEF\u70B9",name:"casSloEndpoint",extra:"\u5E94\u7528\u53D1\u8D77\u5355\u70B9\u767B\u51FA\u7684\u5730\u5740\u3002",readonly:!0,proFieldProps:{render:function(u){return u&&(0,e.jsx)(be.Z.Text,{copyable:!0,children:u})}},fieldProps:{autoComplete:"off"}}),(0,e.jsx)(G.Z,{label:"service ticket \u68C0\u9A8C\u7AEF\u70B9\uFF08CAS 1.0\uFF09",name:"casValidateEndpoint",readonly:!0,proFieldProps:{render:function(u){return u&&(0,e.jsx)(be.Z.Text,{copyable:!0,children:u})}},fieldProps:{autoComplete:"off"}}),(0,e.jsx)(G.Z,{label:"service ticket \u68C0\u9A8C\u7AEF\u70B9\uFF08CAS 2.0\uFF09",name:"casValidateV2Endpoint",readonly:!0,proFieldProps:{render:function(u){return u&&(0,e.jsx)(be.Z.Text,{copyable:!0,children:u})}},fieldProps:{autoComplete:"off"}}),(0,e.jsx)(G.Z,{label:"service ticket \u68C0\u9A8C\u7AEF\u70B9\uFF08CAS 3.0\uFF09",name:"casValidateV3Endpoint",readonly:!0,proFieldProps:{render:function(u){return u&&(0,e.jsx)(be.Z.Text,{copyable:!0,children:u})}},fieldProps:{autoComplete:"off"}})]})})},"config")})})},Tn={labelCol:{xs:{span:24},sm:{span:7},md:{span:6}},wrapperCol:{xs:{span:24},sm:{span:13},md:{span:14}}},Bn=function(r){var n=r.app,t=n.id,a=n.template,c=te.Z.useForm(),l=B()(c,1),s=l[0],o=(0,i.useState)(!0),d=B()(o,2),u=d[0],p=d[1],w=(0,i.useState)({}),y=B()(w,2),F=y[0],O=y[1],$=function(){var P=L()(h()().mark(function g(){var j,v,Z;return h()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return p(!0),S.next=3,(0,Q.hq)(t);case 3:j=S.sent,v=j.result,Z=j.success,Z&&v&&(s.setFieldsValue(N()(N()({},(0,Pe.omit)(v,"protocolEndpoint")),{},{appId:t})),O(v.protocolEndpoint)),p(!1);case 8:case"end":return S.stop()}},g)}));return function(){return P.apply(this,arguments)}}();return(0,ce.Z)(L()(h()().mark(function P(){return h()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,$();case 2:case"end":return j.stop()}},P)})),[]),(0,e.jsxs)(je.Z,{spinning:u,children:[(0,e.jsxs)(Re.A,N()(N()({layout:"horizontal"},Tn),{},{form:s,scrollToFirstError:!0,onFinish:function(){var P=L()(h()().mark(function g(j){var v,Z;return h()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return p(!0),S.next=3,(0,Q.$c)({id:t,template:a,config:(0,Pe.omit)(j,"id","template")}).finally(function(){p(!1)});case 3:if(v=S.sent,Z=v.success,!Z){S.next=10;break}return Y.ZP.success("\u4FDD\u5B58\u6210\u529F"),S.next=9,$();case 9:return S.abrupt("return",!0);case 10:return Y.ZP.error("\u4FDD\u5B58\u5931\u8D25"),S.abrupt("return",!1);case 12:case"end":return S.stop()}},g)}));return function(g){return P.apply(this,arguments)}}(),submitter:{render:function(g,j){return(0,e.jsx)(br.S,{children:j})}},children:[(0,e.jsx)(G.Z,{label:"CAS \u5BA2\u6237\u7AEF\u7684\u5730\u5740",name:"clientServiceUrl",fieldProps:{allowClear:!1},extra:"\u5355\u70B9\u767B\u5F55\u65F6\uFF0C\u5C06\u9009\u4E2D\u9879\u4F5C\u4E3A CAS \u7528\u6237\u6807\u8BC6\uFF0C\u4F20\u9012\u7ED9\u4E1A\u52A1\u7CFB\u7EDF\u3002",rules:[{required:!0,message:"\u8BF7\u8F93\u5165 CAS \u5BA2\u6237\u7AEF\u7684\u5730\u5740"},{type:"url",message:"CAS \u5BA2\u6237\u7AEF\u5730\u5740\u683C\u5F0F\u4E0D\u6B63\u786E"}]}),(0,e.jsx)(xe.Z,{label:"CAS \u7528\u6237\u6807\u8BC6",name:"userIdentityType",options:[{value:"user.username",label:"\u7528\u6237\u540D"},{value:"user.fullName",label:"\u7528\u6237\u59D3\u540D"},{value:"user.nickName",label:"\u7528\u6237\u6635\u79F0"},{value:"user.email",label:"\u90AE\u7BB1\u5730\u5740"},{value:"app_user.username",label:"\u5E94\u7528\u8D26\u6237"}],fieldProps:{allowClear:!1},extra:"\u5355\u70B9\u767B\u5F55\u65F6\uFF0C\u5C06\u9009\u4E2D\u9879\u4F5C\u4E3A CAS \u7528\u6237\u6807\u8BC6\uFF0C\u4F20\u9012\u7ED9\u4E1A\u52A1\u7CFB\u7EDF\u3002",rules:[{required:!0,message:"\u8BF7\u9009\u62E9 CAS \u7528\u6237\u6807\u8BC6"}]}),(0,e.jsx)(Lr.Z,{name:"serviceTicketExpireTime",label:"ST \u8FC7\u671F\u65F6\u95F4",addonAfter:"\u79D2",extra:"ServiceTicket \u8FC7\u671F\u65F6\u95F4",rules:[{required:!0,message:"\u8BF7\u914D\u7F6E ServiceTicket \u8FC7\u671F\u65F6\u95F4"}]}),(0,e.jsx)(V.Z,{}),(0,e.jsx)(xe.Z,{label:"\u6388\u6743\u8303\u56F4",name:"authorizationType",allowClear:!1,extra:"\u82E5\u9009\u62E9\u624B\u52A8\u6388\u6743\uFF0C\u9700\u8981\u5728 \u8BBF\u95EE\u6388\u6743 \u4E2D\u8FDB\u884C\u6743\u9650\u5206\u914D\u3002",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6388\u6743\u8303\u56F4"}],options:[{value:Le.AUTHORIZATION,label:"\u624B\u52A8\u6388\u6743"},{value:Le.ALL_ACCESS,label:"\u5168\u5458\u53EF\u8BBF\u95EE"}]}),(0,e.jsx)(xe.Z,{label:"SSO \u53D1\u8D77\u65B9",name:"initLoginType",allowClear:!1,rules:[{required:!0,message:"\u8BF7\u914D\u7F6E SSO \u53D1\u8D77\u65B9"}],options:[{value:Ue.APP,label:"\u53EA\u5141\u8BB8\u5E94\u7528\u53D1\u8D77"},{value:Ue.PORTAL_OR_APP,label:"\u652F\u6301\u95E8\u6237\u548C\u5E94\u7528\u53D1\u8D77"}],extra:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{children:"\u95E8\u6237\u53D1\u8D77\uFF1A\u7531 IAM \u95E8\u6237\u9875\u70B9\u51FB\u8FDB\u884C SSO \u3002"}),(0,e.jsx)("br",{}),(0,e.jsx)("span",{children:"\u5E94\u7528\u53D1\u8D77\uFF1A\u7531\u5E94\u7528\u767B\u5F55\u4E3B\u52A8\u53D1\u8D77\u3002"})]})}),(0,e.jsx)(ze.Z,{name:["initLoginType"],children:function(){return(0,e.jsx)(G.Z,{label:"\u767B\u5F55\u53D1\u8D77\u5730\u5740",name:"initLoginUrl",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u94FE\u63A5"},extra:"\u82E5\u5E94\u7528\u4EC5\u652F\u6301 SP \u53D1\u8D77 SSO\uFF0C\u60A8\u53C8\u5E0C\u671B\u5B9E\u73B0\u7531 IAM \u95E8\u6237\u9875\u53D1\u8D77\u767B\u5F55\uFF0C\u8BF7\u586B\u5199\u6B64\u9879\u3002\u95E8\u6237\u9875\u8BBF\u95EE\u5E94\u7528\u65F6\uFF0CIAM \u4F1A\u8DF3\u8F6C\u5230\u672C\u5730\u5740\uFF0C\u5E94\u5373\u523B\u81EA\u52A8\u5411 IAM \u53D1\u8D77 SAMLRequest \u767B\u5F55\u8BF7\u6C42\u3002\u5730\u5740\u53EF\u586B\u5199\u4E3A\u4EFB\u610F\u53D7\u4FDD\u62A4\u8D44\u6E90\u8BBF\u95EE\u5730\u5740\uFF0C\u5728\u672A\u767B\u5F55\u65F6\u4F1A\u81EA\u52A8\u89E6\u53D1 SAMLRequest \u5373\u53EF\u3002"})}})]})),(0,e.jsx)(V.Z,{style:{margin:0}}),(0,e.jsx)($n,{appId:n.id,protocolEndpoint:F,collapsed:!0})]})},Ln=Bn,Mn=Ce.Z.Panel,Un=function(r){var n=te.Z.useForm(),t=B()(n,1),a=t[0],c=r.protocolEndpoint,l=r.appId,s=r.collapsed,o=s===void 0?!0:s;return(0,ce.Z)(L()(h()().mark(function d(){return h()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:a.setFieldsValue(c);case 1:case"end":return p.stop()}},d)})),[l,c]),(0,e.jsx)(Re.A,{layout:"horizontal",labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:12}},labelAlign:"right",submitter:!1,labelWrap:!0,form:a,children:(0,e.jsx)(Ce.Z,{ghost:!0,expandIconPosition:"start",defaultActiveKey:o?void 0:"config",children:(0,e.jsx)(Mn,{header:(0,e.jsx)("a",{children:"\u5E94\u7528\u914D\u7F6E\u4FE1\u606F"}),children:(0,e.jsx)($e.Z,{style:{backgroundColor:"#f1f1f2",border:"1px solid #f1f1f2"},description:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(G.Z,{label:"IdP SSO \u5730\u5740",name:"idpSsoEndpoint",extra:"\u5E94\u7528\u53D1\u8D77\u5355\u70B9\u767B\u5F55\u7684\u5730\u5740\u3002",readonly:!0,proFieldProps:{render:function(u){return u&&(0,e.jsx)(be.Z.Text,{copyable:!0,children:u})}},fieldProps:{autoComplete:"off"}})})})},"config")})})},Nn={labelCol:{span:6},wrapperCol:{span:12}},kn=function(r){var n=r.app,t=n.id,a=n.template,c=te.Z.useForm(),l=B()(c,1),s=l[0],o=(0,i.useState)(!0),d=B()(o,2),u=d[0],p=d[1],w=te.Z.useForm(),y=B()(w,1),F=y[0],O=(0,i.useState)(function(){return[]}),$=B()(O,2),P=$[0],g=$[1],j=(0,i.useState)({}),v=B()(j,2),Z=v[0],f=v[1],S=function(){var x=L()(h()().mark(function A(){var C,b,D;return h()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return p(!0),T.next=3,(0,Q.hq)(t);case 3:C=T.sent,b=C.result,D=C.success,D&&b&&(s.setFieldsValue(N()(N()({},(0,Pe.omit)(b,"protocolEndpoint")),{},{appId:t})),f(b.protocolEndpoint)),p(!1);case 8:case"end":return T.stop()}},A)}));return function(){return x.apply(this,arguments)}}();return(0,ce.Z)(L()(h()().mark(function x(){return h()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,S();case 2:case"end":return C.stop()}},x)})),[]),(0,e.jsxs)(je.Z,{spinning:u,children:[(0,e.jsx)($e.Z,{showIcon:!0,message:(0,e.jsxs)("span",{children:["\u4E0D\u77E5\u9053\u600E\u4E48\u914D\u7F6E\uFF1F\u8BF7\u53C2\u8003 TopIAM \u914D\u7F6E"," ",(0,e.jsx)("a",{target:"_blank",href:"https://eiam.topiam.cn/docs/application/standard/form-sso",rel:"noreferrer",children:"\u8868\u5355\u4EE3\u586B\u5355\u70B9\u767B\u5F55"})," ","\u3002"]})}),(0,e.jsx)("br",{}),(0,e.jsxs)(Re.A,N()(N()({form:s,requiredMark:!0,layout:"horizontal"},Nn),{},{scrollToFirstError:!0,onFinish:function(){var x=L()(h()().mark(function A(C){var b,D,M;return h()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,F.validateFields();case 2:if(b=E.sent,p(!0),!b){E.next=15;break}return E.next=7,(0,Q.$c)({id:t,template:a,config:(0,Pe.omit)(C,"id","template")}).finally(function(){p(!1)});case 7:if(D=E.sent,M=D.success,!M){E.next=14;break}return Y.ZP.success("\u4FDD\u5B58\u6210\u529F"),E.next=13,S();case 13:return E.abrupt("return",!0);case 14:Y.ZP.error("\u4FDD\u5B58\u5931\u8D25");case 15:return E.abrupt("return",!1);case 16:case"end":return E.stop()}},A)}));return function(A){return x.apply(this,arguments)}}(),submitter:{render:function(A,C){return(0,e.jsx)(br.S,{children:C})}},children:[(0,e.jsx)(G.Z,{name:"appId",hidden:!0}),(0,e.jsx)(G.Z,{name:"loginUrl",label:"\u767B\u5F55\u63D0\u4EA4URL",placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u63D0\u4EA4URL",extra:"\u767B\u5F55\u8868\u5355\u63D0\u4EA4\u5B8C\u6574URL\uFF0C\u4EE5http://\u6216https://\u5F00\u5934\uFF0C\u5982\uFF1Ahttps://oa.xxxx.com/login",rules:[{required:!0,message:"\u5E94\u7528\u767B\u5F55URL\u4E3A\u5FC5\u586B\u9879"},{type:"url",message:"URL\u683C\u5F0F\u4E0D\u6B63\u786E"}]}),(0,e.jsx)(G.Z,{name:"usernameField",label:"\u767B\u5F55\u540D\u5C5E\u6027\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u540D\u5C5E\u6027\u540D\u79F0",extra:"username\u6807\u7B7E\u7684name\u5C5E\u6027",rules:[{required:!0,message:"\u767B\u5F55\u540D\u5C5E\u6027\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}]}),(0,e.jsx)(G.Z,{name:"passwordField",label:"\u767B\u5F55\u5BC6\u7801\u5C5E\u6027\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801\u5C5E\u6027\u540D\u79F0",extra:"password\u6807\u7B7E\u7684name\u5C5E\u6027",rules:[{required:!0,message:"\u767B\u5F55\u5BC6\u7801\u5C5E\u6027\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}]}),(0,e.jsx)(ut.Z.Group,{name:"submitType",label:"\u767B\u5F55\u63D0\u4EA4\u65B9\u5F0F",initialValue:["post"],options:[{value:"post",label:"POST"},{value:"get",label:"GET"}],rules:[{required:!0,message:"\u767B\u5F55\u63D0\u4EA4\u65B9\u5F0F\u4E3A\u5FC5\u9009\u9879"}]}),(0,e.jsx)(V.Z,{}),(0,e.jsx)(xe.Z,{label:"\u6388\u6743\u8303\u56F4",name:"authorizationType",allowClear:!1,extra:"\u82E5\u9009\u62E9\u624B\u52A8\u6388\u6743\uFF0C\u9700\u8981\u5728 \u8BBF\u95EE\u6388\u6743 \u4E2D\u8FDB\u884C\u6743\u9650\u5206\u914D\u3002",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6388\u6743\u8303\u56F4"}],options:[{value:Le.AUTHORIZATION,label:"\u624B\u52A8\u6388\u6743"},{value:Le.ALL_ACCESS,label:"\u5168\u5458\u53EF\u8BBF\u95EE"}]}),(0,e.jsx)(xe.Z,{label:"SSO \u53D1\u8D77\u65B9",name:"initLoginType",allowClear:!1,rules:[{required:!0,message:"\u8BF7\u914D\u7F6E SSO \u53D1\u8D77\u65B9"}],options:[{value:Ue.APP,label:"\u53EA\u5141\u8BB8\u5E94\u7528\u53D1\u8D77"},{value:Ue.PORTAL_OR_APP,label:"\u652F\u6301\u95E8\u6237\u548C\u5E94\u7528\u53D1\u8D77"}],extra:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{children:"\u95E8\u6237\u53D1\u8D77\uFF1A\u7531 IAM \u95E8\u6237\u9875\u70B9\u51FB\u8FDB\u884C SSO \u3002"}),(0,e.jsx)("br",{}),(0,e.jsx)("span",{children:"\u5E94\u7528\u53D1\u8D77\uFF1A\u7531\u5E94\u7528\u767B\u5F55\u4E3B\u52A8\u53D1\u8D77\u3002"})]})}),(0,e.jsx)(ze.Z,{name:["initLoginType"],children:function(){return(0,e.jsx)(G.Z,{label:"\u767B\u5F55\u53D1\u8D77\u5730\u5740",name:"initLoginUrl",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u94FE\u63A5"},extra:"\u82E5\u5E94\u7528\u4EC5\u652F\u6301\u5E94\u7528\u53D1\u8D77 SSO\uFF0C\u60A8\u53C8\u5E0C\u671B\u5B9E\u73B0\u7531 IAM \u95E8\u6237\u9875\u53D1\u8D77\u767B\u5F55\uFF0C\u8BF7\u586B\u5199\u6B64\u9879\u3002\u95E8\u6237\u9875\u8BBF\u95EE\u5E94\u7528\u65F6\uFF0CIAM \u4F1A\u8DF3\u8F6C\u5230\u672C\u5730\u5740\uFF0C\u5E94\u5373\u523B\u81EA\u52A8\u5411 IAM \u53D1\u8D77 SSO \u767B\u5F55\u8BF7\u6C42\u3002\u5730\u5740\u53EF\u586B\u5199\u4E3A\u4EFB\u610F\u53D7\u4FDD\u62A4\u8D44\u6E90\u8BBF\u95EE\u5730\u5740\uFF0C\u5728\u672A\u767B\u5F55\u65F6\u4F1A\u81EA\u52A8\u89E6\u53D1 SSO \u5373\u53EF\u3002"})}}),(0,e.jsx)(V.Z,{}),(0,e.jsx)(Re.A.Item,{label:"\u767B\u5F55\u5176\u4ED6\u5B57\u6BB5",name:"otherField",trigger:"onValuesChange",children:(0,e.jsx)(Tr.Z,{rowKey:"key",toolBarRender:!1,scroll:{x:500},columns:[{title:"\u5C5E\u6027\u540D\u79F0",dataIndex:"fieldName",fieldProps:{allowClear:!1},formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u5C5E\u6027\u503C",key:"fieldValue",dataIndex:"fieldValue",ellipsis:!0,formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u64CD\u4F5C",valueType:"option",align:"center",fixed:"right",width:50}],recordCreatorProps:{creatorButtonText:"\u6DFB\u52A0\u5176\u4ED6\u5B57\u6BB5",newRecordType:"dataSource",position:"bottom",record:function(){return{key:Date.now()}}},editable:{form:F,type:"multiple",editableKeys:P,onChange:g,deletePopconfirmMessage:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u6B64\u5C5E\u6027\u5417\uFF1F",actionRender:function(A,C,b){return[b.delete]}}})})]})),(0,e.jsx)(V.Z,{style:{margin:0}}),(0,e.jsx)(Un,{appId:t,protocolEndpoint:Z,collapsed:!0})]})},zn=kn,Qn=function(r){var n=r.app,t=n.id,a=n.initLoginType,c=n.authorizationType,l=te.Z.useForm(),s=B()(l,1),o=s[0],d=(0,i.useState)(!0),u=B()(d,2),p=u[0],w=u[1];return(0,ce.Z)(L()(h()().mark(function y(){var F,O,$;return h()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return w(!0),g.next=3,(0,Q.hq)(t);case 3:F=g.sent,O=F.result,$=F.success,$&&O&&o.setFieldsValue({initLoginType:a,authorizationType:c}),w(!1);case 8:case"end":return g.stop()}},y)})),[]),(0,e.jsx)(je.Z,{spinning:p,children:(0,e.jsx)($e.Z,{style:{backgroundColor:"#f1f1f2",border:"1px solid #f1f1f2"},message:"\u6682\u672A\u5B9E\u73B0"})})},Kn=Qn,Hn=m(10255),Gn=m.n(Hn),vr=m(32176),Vn=m(78035),Ct=m(85037),Wn=Ce.Z.Panel,Jn=function(r){var n=te.Z.useForm(),t=B()(n,1),a=t[0],c=r.protocolEndpoint,l=r.appId,s=r.collapsed,o=s===void 0?!0:s;return(0,ce.Z)(L()(h()().mark(function d(){return h()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:a.setFieldsValue(c);case 1:case"end":return p.stop()}},d)})),[l,c]),(0,e.jsx)(Re.A,{layout:"horizontal",labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:12}},labelAlign:"right",submitter:!1,labelWrap:!0,form:a,children:(0,e.jsx)(Ce.Z,{ghost:!0,expandIconPosition:"start",defaultActiveKey:o?void 0:"config",children:(0,e.jsx)(Wn,{header:(0,e.jsx)("a",{children:"\u5E94\u7528\u914D\u7F6E\u4FE1\u606F"}),children:(0,e.jsx)($e.Z,{style:{backgroundColor:"#f1f1f2",border:"1px solid #f1f1f2"},description:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(G.Z,{label:"Issuer",name:"issuer",extra:"\u7528\u4E8E\u6807\u8BC6 token \u53D1\u653E\u6765\u6E90\u7684\u5B57\u6BB5\u3002\u540C\u65F6\u662F\u4E0B\u8FF0\u63A5\u53E3\u7684 baseUrl\u3002",proFieldProps:{render:function(u){return u&&(0,e.jsx)(be.Z.Text,{copyable:!0,children:u})}},readonly:!0,fieldProps:{autoComplete:"off"}}),(0,e.jsx)(G.Z,{label:"\u53D1\u73B0\u7AEF\u70B9",name:"discoveryEndpoint",extra:"\u7528\u4E8E\u83B7\u53D6\u5F53\u524D IAM \u652F\u6301\u7684\u5404\u7AEF\u70B9\u4FE1\u606F\u548C\u652F\u6301\u7684\u6A21\u5F0F\u3001\u53C2\u6570\u4FE1\u606F\uFF0C\u53EF\u516C\u5F00\u8BBF\u95EE\u3002",proFieldProps:{render:function(u){return u&&(0,e.jsx)(be.Z.Text,{copyable:!0,children:u})}},readonly:!0,fieldProps:{autoComplete:"off"}}),(0,e.jsx)(G.Z,{label:"\u6388\u6743\u7AEF\u70B9",name:"authorizationEndpoint",extra:"\u5E94\u7528\u53D1\u8D77\u5355\u70B9\u767B\u5F55\u7684\u5730\u5740\u3002",proFieldProps:{render:function(u){return u&&(0,e.jsx)(be.Z.Text,{copyable:!0,children:u})}},readonly:!0,fieldProps:{autoComplete:"off"}}),(0,e.jsx)(G.Z,{label:"\u4EE4\u724C\u7AEF\u70B9",name:"tokenEndpoint",extra:"\u5E94\u7528\u5728\u5355\u70B9\u767B\u5F55\u8FC7\u7A0B\u4E2D\uFF0C\u62FF\u5230 code \u540E\uFF0C\u4ECE\u540E\u7AEF\u53D1\u53BB\u6362\u53D6 token \u7684\u63A5\u53E3\u5730\u5740\u3002",proFieldProps:{render:function(u){return u&&(0,e.jsx)(be.Z.Text,{copyable:!0,children:u})}},readonly:!0,fieldProps:{autoComplete:"off"}}),(0,e.jsx)(G.Z,{label:"\u4EE4\u724C\u540A\u9500\u7AEF\u70B9",name:"revokeEndpoint",proFieldProps:{render:function(u){return u&&(0,e.jsx)(be.Z.Text,{copyable:!0,children:u})}},readonly:!0,fieldProps:{autoComplete:"off"}}),(0,e.jsx)(G.Z,{label:"\u9A8C\u7B7E\u516C\u94A5\u7AEF\u70B9",name:"jwksEndpoint",extra:"\u7528\u4E8E\u9A8C\u8BC1 id_token\u3001\u5B8C\u6210 SSO \u6D41\u7A0B\u7684\u516C\u94A5\u7AEF\u70B9\u3002\u516C\u94A5\u53EF\u80FD\u4F1A\u8F6E\u8F6C\u3002",proFieldProps:{render:function(u){return u&&(0,e.jsx)(be.Z.Text,{copyable:!0,children:u})}},readonly:!0,fieldProps:{autoComplete:"off"}}),(0,e.jsx)(G.Z,{label:"\u7528\u6237\u4FE1\u606F\u7AEF\u70B9",name:"userinfoEndpoint",extra:"\u5728\u8D26\u6237\u767B\u5F55\u540E\uFF0C\u4F7F\u7528 access_token \u8C03\u7528\u7528\u6237\u4FE1\u606F\u7AEF\u70B9\uFF0C\u83B7\u53D6\u8D26\u6237\u57FA\u672C\u4FE1\u606F\u3002",proFieldProps:{render:function(u){return u&&(0,e.jsx)(be.Z.Text,{copyable:!0,children:u})}},readonly:!0,fieldProps:{autoComplete:"off"}})]})})},"config")})})},yt=m(75827),Yn=Ce.Z.Panel,xt={labelCol:{span:6},wrapperCol:{span:12}},bt={wrapperCol:{span:12,offset:6}},Xn=function(r){var n=r.app,t=n.id,a=n.template,c=te.Z.useForm(),l=B()(c,1),s=l[0],o=(0,i.useState)({}),d=B()(o,2),u=d[0],p=d[1],w=(0,i.useState)(!0),y=B()(w,2),F=y[0],O=y[1];return(0,Vn.Z)(L()(h()().mark(function $(){var P,g,j,v;return h()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return O(!0),f.next=3,(0,Q.hq)(t);case 3:P=f.sent,g=P.result,j=P.success,j&&g&&(s.setFieldsValue(N()(N()({appId:t},g),{},{redirectUris:((v=g.redirectUris)===null||v===void 0?void 0:v.length)>0?g.redirectUris:[void 0]})),p(g.protocolEndpoint)),O(!1);case 8:case"end":return f.stop()}},$)}))),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(je.Z,{spinning:F,children:[(0,e.jsx)($e.Z,{showIcon:!0,message:(0,e.jsxs)("span",{children:["\u4E0D\u77E5\u9053\u600E\u4E48\u914D\u7F6E\uFF1F\u8BF7\u53C2\u8003 TopIAM \u914D\u7F6E"," ",(0,e.jsx)("a",{target:"_blank",href:"https://eiam.topiam.cn/docs/application/standard/oidc-sso",rel:"noreferrer",children:"OIDC \u5355\u70B9\u767B\u5F55"})," ","\u3002"]})}),(0,e.jsx)("br",{}),(0,e.jsxs)(Re.A,N()(N()({requiredMark:!0,layout:"horizontal"},xt),{},{form:s,scrollToFirstError:!0,onFinish:function(){var $=L()(h()().mark(function P(g){var j,v;return h()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,Q.$c)({id:t,template:a,config:(0,Pe.omit)(g,"id","template")});case 2:if(j=f.sent,v=j.success,!v){f.next=7;break}return Y.ZP.success("\u64CD\u4F5C\u6210\u529F"),f.abrupt("return",!0);case 7:return Y.ZP.error("\u64CD\u4F5C\u5931\u8D25"),f.abrupt("return",!1);case 9:case"end":return f.stop()}},P)}));return function(P){return $.apply(this,arguments)}}(),submitter:{render:function(P,g){return(0,e.jsx)(br.S,{children:g})}},children:[(0,e.jsx)(G.Z,{name:"appId",hidden:!0}),(0,e.jsx)(le.Z.Group,{label:"\u6388\u6743\u6A21\u5F0F",layout:"vertical",name:"authGrantTypes",rules:[{required:!0,message:"\u8BF7\u52FE\u9009\u6388\u6743\u6A21\u5F0F"}],options:[{value:"authorization_code",label:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{style:{marginRight:"12px"},children:"\u6388\u6743\u7801\u6A21\u5F0F"}),(0,e.jsx)("span",{style:{color:"#999"},children:"authorization_code \u6A21\u5F0F\uFF0C\u7528\u4E8E\u8D26\u6237\u7684\u767B\u5F55\u8BA4\u8BC1\u3001\u6388\u6743\u3002"})]})},{value:"refresh_token",label:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{style:{marginRight:"12px"},children:"\u4EE4\u724C\u5237\u65B0\u6A21\u5F0F"}),(0,e.jsx)("span",{style:{color:"#999"},children:"refresh_token \u6A21\u5F0F\uFF0C\u7528\u4E8E\u65E2\u6709 token \u7684\u5EF6\u671F\u3002"})]})},{value:"implicit",label:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{style:{marginRight:"12px"},children:"\u9690\u5F0F\u6A21\u5F0F"}),(0,e.jsx)("span",{style:{color:"#999"},children:"implicit \u6A21\u5F0F\uFF0C\u7531\u4E8E\u534F\u8BAE\u672C\u8EAB\u7684\u5B89\u5168\u6027\uFF0C\u901A\u5E38\u4E0D\u63A8\u8350\u4F7F\u7528\u3002\u5982\u679C\u6709\u7279\u6B8A\u9700\u6C42\uFF0C\u53EF\u4EE5\u4F7F\u7528\u53D8\u4F53\u7684 PKCE \u7684\u6388\u6743\u7801\u6A21\u5F0F\u3002"})]})},{value:"password",label:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{style:{marginRight:"12px"},children:"\u5BC6\u7801\u6A21\u5F0F"}),(0,e.jsx)("span",{style:{color:"#999"},children:"password \u6A21\u5F0F\uFF0C\u7531\u4E8E\u534F\u8BAE\u672C\u8EAB\u7684\u5B89\u5168\u6027\uFF0C\u901A\u5E38\u4E0D\u63A8\u8350\u4F7F\u7528\u3002"})]})},{value:"device",disabled:!0,label:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{style:{marginRight:"12px"},children:"\u8BBE\u5907\u6A21\u5F0F"}),(0,e.jsx)("span",{style:{color:"#999"},children:"device \u6A21\u5F0F\uFF0C\u517C\u5BB9\u8BBE\u5907\u53D1\u8D77\u7684\u767B\u5F55\u6D41\u7A0B\u3002\uFF08\u6682\u4E0D\u652F\u6301\uFF09"})]})}]}),(0,e.jsx)(ze.Z,{name:["authGrantTypes"],children:function(P){var g=P.authGrantTypes;return(g==null?void 0:g.includes("authorization_code"))&&(0,e.jsx)(vr.Z,{label:"PKCE\uFF08\u7528\u4E8E\u6388\u6743\u7801\u6A21\u5F0F\uFF09",name:"requireProofKey",extra:"PKCE \uFF08Proof Key for Code Exchange\uFF09\u662F OAuth 2.0 \u7684\u5B89\u5168\u6027\u6269\u5C55\u6A21\u5F0F\uFF0C\u7528\u4E8E\u9632\u62A4 CSRF\u3001\u4E2D\u95F4\u4EBA\u8FDB\u653B\u7B49\u6076\u610F\u653B\u51FB\u3002"})}}),(0,e.jsx)(te.Z.List,{name:"redirectUris",rules:[{validator:function(){var $=L()(h()().mark(function g(j,v){return h()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!(v&&v.length>0)){f.next=2;break}return f.abrupt("return");case 2:throw new Error("\u8BF7\u914D\u7F6E\u767B\u5F55 Redirect URI");case 3:case"end":return f.stop()}},g)}));function P(g,j){return $.apply(this,arguments)}return P}()}],children:function(P,g,j){var v=g.add,Z=g.remove;return Gn()(j),(0,e.jsxs)(e.Fragment,{children:[P.map(function(f,S){return(0,i.createElement)(te.Z.Item,N()(N()({},S===0?xt:bt),{},{required:!1,key:f.key,label:S===0?"\u767B\u5F55 Redirect URI":"",extra:S===P.length-1&&"Redirect URI \u767D\u540D\u5355\uFF0C\u5E94\u7528\u5728\u8BF7\u6C42\u767B\u5F55\u65F6\u643A\u5E26 redirect_uri \u53C2\u6570\uFF0C\u8BE5\u503C\u9700\u8981\u5728\u767D\u540D\u5355\u4E2D\uFF0CIAM \u624D\u4F1A\u5728\u8BA4\u8BC1\u5B8C\u6210\u540E\u53D1\u8D77\u8DF3\u8F6C\u3002\u82E5\u6709\u591A\u6761\uFF0C\u8BF7\u70B9\u51FB\u6DFB\u52A0\u8FDB\u884C\u6269\u5C55"}),(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,e.jsx)(te.Z.Item,N()(N()({},f),{},{validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"\u8BF7\u914D\u7F6E\u767B\u5F55 Redirect URI"},{type:"url",message:"Redirect URI \u683C\u5F0F\u4E0D\u6B63\u786E"}],noStyle:!0,children:(0,e.jsx)(Ct.Z,{placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55 Redirect URI"})})),P.length>1?(0,e.jsx)(yt.Z,{onClick:function(){return Z(f.name)}}):null]}))}),(0,e.jsx)(te.Z.Item,N()(N()({},bt),{},{children:(0,e.jsx)(Qe.ZP,{type:"dashed",onClick:function(){return v()},icon:(0,e.jsx)(mr.Z,{}),style:{width:"100%"},children:"\u6DFB\u52A0"})}))]})}}),(0,e.jsx)(xe.Z,{label:"\u6388\u6743\u8303\u56F4",name:"authorizationType",allowClear:!1,extra:"\u82E5\u9009\u62E9\u624B\u52A8\u6388\u6743\uFF0C\u9700\u8981\u5728 \u8BBF\u95EE\u6388\u6743 \u4E2D\u8FDB\u884C\u6743\u9650\u5206\u914D\u3002",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6388\u6743\u8303\u56F4"}],options:[{value:Le.AUTHORIZATION,label:"\u624B\u52A8\u6388\u6743"},{value:Le.ALL_ACCESS,label:"\u5168\u5458\u53EF\u8BBF\u95EE"}]}),(0,e.jsx)(xe.Z,{label:"SSO \u53D1\u8D77\u65B9",name:"initLoginType",allowClear:!1,rules:[{required:!0,message:"\u8BF7\u914D\u7F6E SSO \u53D1\u8D77\u65B9"}],options:[{value:Ue.APP,label:"\u53EA\u5141\u8BB8\u5E94\u7528\u53D1\u8D77"},{value:Ue.PORTAL_OR_APP,label:"\u652F\u6301\u95E8\u6237\u548C\u5E94\u7528\u53D1\u8D77"}],extra:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{children:"\u95E8\u6237\u53D1\u8D77\uFF1A\u7531 IAM \u95E8\u6237\u9875\u70B9\u51FB\u8FDB\u884C SSO \u3002"}),(0,e.jsx)("br",{}),(0,e.jsx)("span",{children:"\u5E94\u7528\u53D1\u8D77\uFF1A\u7531\u5E94\u7528\u767B\u5F55\u4E3B\u52A8\u53D1\u8D77\u3002"})]})}),(0,e.jsx)(ze.Z,{name:["initLoginType"],children:function(P){return(P==null?void 0:P.initLoginType)===Ue.PORTAL_OR_APP&&(0,e.jsx)(G.Z,{label:"\u767B\u5F55\u53D1\u8D77\u5730\u5740",name:"initLoginUrl",rules:[{required:!0,message:"\u767B\u5F55\u53D1\u8D77\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A"}],fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u94FE\u63A5"},extra:"\u82E5\u60A8\u5E0C\u671B\u7531 TopIAM \u95E8\u6237\u9875\u8BBF\u95EE\u5E94\u7528\uFF0C\u8BF7\u586B\u5199 TopIAM \u53D1\u8D77 SSO \u8BF7\u6C42\u8BBF\u95EE\u7684\u5E94\u7528\u5730\u5740\u3002\u8BE5\u5730\u5740\u63A5\u6536\u5230\u8BF7\u6C42\uFF0C\u5E94\u5373\u523B\u8F6C\u5411 TopIAM / authorize \u6388\u6743\u7AEF\u70B9\u3002"})}}),(0,e.jsx)(V.Z,{style:{margin:0}}),(0,e.jsx)(Ce.Z,{ghost:!0,expandIconPosition:"start",defaultActiveKey:"advanced",children:(0,e.jsxs)(Yn,{header:(0,e.jsx)("a",{children:"\u663E\u793A\u9AD8\u7EA7\u914D\u7F6E"}),children:[(0,e.jsx)(le.Z.Group,{label:"\u7528\u6237\u4FE1\u606F\u8303\u56F4",layout:"vertical",name:"grantScopes",rules:[{required:!0,message:"\u8BF7\u52FE\u9009\u7528\u6237\u4FE1\u606F\u8303\u56F4"}],extra:"\u7528\u6237\u767B\u5F55\u540E\uFF0C\u4F7F\u7528\u7528\u6237\u4FE1\u606F\u7AEF\u70B9\u6216\u89E3\u6790 id_token \u53EF\u4EE5\u83B7\u53D6\u5230\u7684\u5DF2\u767B\u5F55\u7528\u6237\u4FE1\u606F \u3002",options:[{value:"openid",label:"openid",disabled:!0},{value:"email",label:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{style:{marginRight:"12px"},children:"email"}),(0,e.jsx)("span",{style:{color:"#999"},children:"\u5E94\u7528\u53EF\u83B7\u53D6\u767B\u5F55\u7528\u6237\u90AE\u7BB1\u4FE1\u606F\u3002"})]})},{value:"phone",label:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{style:{marginRight:"12px"},children:"phone"}),(0,e.jsx)("span",{style:{color:"#999"},children:"\u5E94\u7528\u53EF\u83B7\u53D6\u767B\u5F55\u7528\u6237\u624B\u673A\u4FE1\u606F\u3002"})]})},{value:"profile",label:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{style:{marginRight:"12px"},children:"profile"}),(0,e.jsx)("span",{style:{color:"#999"},children:"\u5E94\u7528\u53EF\u83B7\u53D6\u767B\u5F55\u7528\u6237\u8BE6\u60C5\u4FE1\u606F\u3002"})]})}]}),(0,e.jsx)(Lr.Z,{label:"access_token \u6709\u6548\u671F",name:"accessTokenTimeToLive",addonAfter:"\u5206\u949F",extra:"access_token \u7528\u4E8E\u8BF7\u6C42 IAM \u63A5\u53E3\uFF0C\u8FC7\u671F\u540E\u9700\u8981\u4F7F\u7528 refresh_token \u5237\u65B0\uFF0C\u6216\u91CD\u65B0\u767B\u5F55\u3002"}),(0,e.jsx)(Lr.Z,{label:"refresh_token \u6709\u6548\u671F",name:"refreshTokenTimeToLive",addonAfter:"\u5206\u949F",extra:"\u7528\u4E8E\u83B7\u53D6\u65B0\u7684 access_token \u548C id_token\uFF0Crefresh_token \u8FC7\u671F\u540E\uFF0C\u7528\u6237\u9700\u8981\u91CD\u65B0\u767B\u5F55\u3002"}),(0,e.jsx)(Lr.Z,{label:"id_token \u6709\u6548\u671F",readonly:!0,name:"idTokenTimeToLive",addonAfter:"\u5206\u949F\uFF08\u6682\u4E0D\u652F\u6301\u4FEE\u6539\uFF09",extra:"id_token \u7528\u4E8E\u9274\u522B\u7528\u6237\u8EAB\u4EFD\uFF0CJWT\u683C\u5F0F\uFF0C\u5141\u8BB8\u5E94\u7528\u4F7F\u7528\u516C\u94A5\u81EA\u884C\u9A8C\u8BC1\u7528\u6237\u8EAB\u4EFD\u3002\u6700\u5C0F5\u5206\u949F\uFF0C\u6700\u592724\u5C0F\u65F6\uFF0C\u8FC7\u671F\u540E\u9700\u8981\u4F7F\u7528refresh_token \u5237\u65B0\uFF0C\u6216\u91CD\u65B0\u767B\u5F55\u3002"}),(0,e.jsx)(xe.Z,{options:[{value:"ES256",label:"ES256"},{value:"RS256",label:"RS256"}],label:"id_token \u7B7E\u540D\u7B97\u6CD5",name:"idTokenSignatureAlgorithm",allowClear:!1,extra:"id_token \u7B7E\u540D\u4F7F\u7528\u7684\u975E\u5BF9\u79F0\u7B97\u6CD5\u3002",rules:[{required:!0,message:"\u8BF7\u914D\u7F6E id_token \u7B7E\u540D\u7B97\u6CD5"}]})]},"advanced")})]})),(0,e.jsx)(V.Z,{style:{margin:0}}),(0,e.jsx)(Jn,{appId:t,protocolEndpoint:u,collapsed:!0})]})})},qn=Xn,_n=m(77074),ea=m(42245),Et=function(n,t){return i.createElement(ye.Z,(0,fe.Z)((0,fe.Z)({},n),{},{ref:t,icon:ea.Z}))};Et.displayName="VerticalAlignBottomOutlined";var Ft=i.forwardRef(Et),ra=Ce.Z.Panel,At=function(r){var n=te.Z.useForm(),t=B()(n,1),a=t[0],c=r.protocolEndpoint,l=r.appId,s=r.collapsed,o=s===void 0?!0:s;(0,ce.Z)(L()(h()().mark(function u(){return h()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:a.setFieldsValue(c);case 1:case"end":return w.stop()}},u)})),[l,c]),(0,ce.Z)(L()(h()().mark(function u(){var p;return h()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,Q.O$)(l,Or.SAML_SIGN);case 2:p=y.sent,p.success&&p.result&&p.result.forEach(function(F){F.usingType===Or.SAML_SIGN&&a.setFieldsValue({idpSignCert:F.cert})});case 4:case"end":return y.stop()}},u)})),[l]);var d=function(){var p=a.getFieldValue("idpSignCert");if(p){var w=new Blob([p],{type:"application/x-x509-ca-cert"}),y=URL.createObjectURL(w),F=document.createElement("a");F.href=y,F.download=l+"sign.cer",document.documentElement.appendChild(F),F.click(),document.documentElement.removeChild(F)}};return(0,e.jsx)(Re.A,{layout:"horizontal",labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:12}},labelAlign:"right",labelWrap:!0,submitter:!1,form:a,scrollToFirstError:!0,children:(0,e.jsx)(Ce.Z,{ghost:!0,expandIconPosition:"start",defaultActiveKey:o?void 0:"config",children:(0,e.jsx)(ra,{header:(0,e.jsx)("a",{children:"\u5E94\u7528\u914D\u7F6E\u4FE1\u606F"}),children:(0,e.jsx)($e.Z,{style:{backgroundColor:"#f1f1f2",border:"1px solid #f1f1f2"},description:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(G.Z,{label:"IdP \u5143\u6570\u636E",name:"idpMetaEndpoint",extra:"\u82E5\u5E94\u7528\u652F\u6301 metadata \u914D\u7F6E\u4FE1\u606F\u4E0A\u4F20/\u62C9\u53D6\uFF0C\u53EF\u4EE5\u8282\u7701\u5927\u91CF\u914D\u7F6E\u6B65\u9AA4\u3002\u8BF7\u5728\u5E94\u7528 SSO \u914D\u7F6E\u4E2D\u5BFB\u627E\u662F\u5426\u6709 metadata \u4E0A\u4F20\u80FD\u529B\u3002",proFieldProps:{render:function(p){return p&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(be.Z.Text,{copyable:!0,children:p}),(0,e.jsxs)("a",{style:{whiteSpace:"nowrap",marginLeft:"10px"},onClick:L()(h()().mark(function w(){return h()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,Q.zA)(l);case 2:case"end":return F.stop()}},w)})),children:[(0,e.jsx)(Ft,{}),"\u4E0B\u8F7D"]})]})}},readonly:!0,fieldProps:{autoComplete:"off"}}),(0,e.jsx)(G.Z,{label:"IdP \u552F\u4E00\u6807\u8BC6",name:"idpEntityIdEndpoint",extra:"IAM \u5728\u5E94\u7528\u4E2D\u7684\u6807\u8BC6\u3002\u9700\u8981\u5C06\u503C\u586B\u5199\u5728\u5E94\u7528\u5355\u70B9\u767B\u5F55\u914D\u7F6E\u4E2D\u3002",readonly:!0,proFieldProps:{render:function(p){return p&&(0,e.jsx)(be.Z.Text,{copyable:!0,children:p})}},fieldProps:{autoComplete:"off"}}),(0,e.jsx)(G.Z,{label:"IdP SSO \u5730\u5740",name:"idpSsoEndpoint",extra:"SAML \u534F\u8BAE\u652F\u6301 SP \u53D1\u8D77\u5355\u70B9\u767B\u5F55\uFF0C\u53EF\u80FD\u9700\u8981\u586B\u5199\u6B64\u5730\u5740\u5728\u5E94\u7528\u914D\u7F6E\u4E2D\u3002\u7531 IAM \u63D0\u4F9B\u3002\u53EF\u4EE5\u76F4\u63A5\u8BBF\u95EE\u8BE5\u5730\u5740\uFF0C\u8FDB\u884C\u5E94\u7528\u767B\u5F55\u3002",readonly:!0,proFieldProps:{render:function(p){return p&&(0,e.jsx)(be.Z.Text,{copyable:!0,children:p})}},fieldProps:{autoComplete:"off"}}),(0,e.jsx)(G.Z,{label:"\u5355\u70B9\u9000\u51FA\u5730\u5740",name:"idpSloEndpoint",extra:"SAML \u534F\u8BAE\u652F\u6301\u5355\u70B9\u9000\u51FA\uFF0C\u53EF\u80FD\u9700\u8981\u586B\u5199\u6B64\u5730\u5740\u5728\u5E94\u7528\u914D\u7F6E\u4E2D\u3002\u7531 IAM \u63D0\u4F9B\u3002",readonly:!0,proFieldProps:{render:function(p){return p&&(0,e.jsx)(be.Z.Text,{copyable:!0,children:p})}},fieldProps:{autoComplete:"off"}}),(0,e.jsx)(fr.Z,{label:"\u7B7E\u540D\u516C\u94A5\u8BC1\u4E66",name:"idpSignCert",disabled:!0,fieldProps:{autoComplete:"off",rows:3},extra:(0,e.jsxs)("div",{style:{display:"inline-block"},children:[(0,e.jsx)("div",{style:{display:"inline-block"},children:"\u4E0B\u8F7D\u6216\u590D\u5236\u8BC1\u4E66\uFF0C\u5E76\u5BFC\u5165\u6216\u7C98\u8D34\u5230\u5E94\u7528\u4E2D\u3002"}),(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,e.jsx)(be.Z.Paragraph,{style:{display:"inline-block"},copyable:{text:a.getFieldValue("idpSignCert")},children:(0,e.jsx)("a",{children:"\u590D\u5236\u8BC1\u4E66\u5185\u5BB9"})}),(0,e.jsxs)("a",{onClick:d,children:["\u4E0B\u8F7D\u8BC1\u4E66 .cer \u6587\u4EF6",(0,e.jsx)(Ft,{})]})]})]})})]})})},"config")})})},ta=function(r){var n=r.app,t=n.id,a=n.template,c=te.Z.useForm(),l=B()(c,1),s=l[0],o=(0,i.useState)(!0),d=B()(o,2),u=d[0],p=d[1],w=(0,i.useState)([]),y=B()(w,2),F=y[0],O=y[1],$=(0,i.useState)({}),P=B()($,2),g=P[0],j=P[1];return(0,ce.Z)(L()(h()().mark(function v(){var Z,f,S;return h()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return p(!0),(0,Q.P3)(a).then(function(C){var b=C.success,D=C.result;b&&O(D)}),A.next=4,(0,Q.hq)(t);case 4:Z=A.sent,f=Z.result,S=Z.success,S&&f&&(s.setFieldsValue(N()({},(0,Pe.omit)(f,"protocolEndpoint"))),j(f.protocolEndpoint)),p(!1);case 9:case"end":return A.stop()}},v)})),[]),(0,e.jsxs)(je.Z,{spinning:u,children:[(0,e.jsx)($e.Z,{showIcon:!0,message:(0,e.jsxs)(e.Fragment,{children:["\u4E0D\u77E5\u9053\u600E\u4E48\u914D\u7F6E\uFF1F\u8BF7\u53C2\u8003 ",(0,e.jsx)("a",{children:"\u5BF9\u63A5\u6587\u6863 "})," \u3002"]})}),(0,e.jsx)("br",{}),(0,e.jsxs)(Re.A,{requiredMark:!0,layout:"horizontal",labelCol:{span:6},wrapperCol:{span:12},form:s,scrollToFirstError:!0,onFinish:function(){var v=L()(h()().mark(function Z(f){var S,x;return h()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,(0,Q.$c)({id:t,template:a,config:(0,Pe.omit)(f,"id","template")});case 2:if(S=C.sent,x=S.success,!x){C.next=7;break}return Y.ZP.success("\u64CD\u4F5C\u6210\u529F"),C.abrupt("return",!0);case 7:return Y.ZP.error("\u64CD\u4F5C\u5931\u8D25"),C.abrupt("return",!1);case 9:case"end":return C.stop()}},Z)}));return function(Z){return v.apply(this,arguments)}}(),submitter:{render:function(Z,f){return(0,e.jsx)(br.S,{children:f})}},children:[(0,e.jsx)(_n.Z,{layoutType:"Embed",columns:F,shouldUpdate:!1}),(0,e.jsx)(xe.Z,{label:"\u6388\u6743\u8303\u56F4",name:"authorizationType",allowClear:!1,extra:"\u82E5\u9009\u62E9\u624B\u52A8\u6388\u6743\uFF0C\u9700\u8981\u5728 \u8BBF\u95EE\u6388\u6743 \u4E2D\u8FDB\u884C\u6743\u9650\u5206\u914D\u3002",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6388\u6743\u8303\u56F4"}],options:[{value:Le.AUTHORIZATION,label:"\u624B\u52A8\u6388\u6743"},{value:Le.ALL_ACCESS,label:"\u5168\u5458\u53EF\u8BBF\u95EE"}]})]}),(0,e.jsx)(V.Z,{style:{margin:0}}),(0,e.jsx)(At,{appId:t,protocolEndpoint:g,collapsed:!1})]})},na=m(66736),aa=qe.ZP.ConfigContext;function sa(){var r=(0,i.useContext)(aa),n=r.getPrefixCls,t=".".concat(n()),a=(0,dt.l)(function(){return re()({},"".concat(t,"-form-item"),{div:re()({},"".concat(t,"-form-item-control-input"),{width:"100%"})})});return{className:a}}var ur=m(23570),Wr=m(97446),St=m(3836),jt=m(71320),Pt=m(78001),wt=m(77790),Jr=m(16431),la=m(66105),Zt=m(17211),oa=m(56151),ia=m(81033),ua=m(72203);function ca(r,n){var t="cannot ".concat(r.method," ").concat(r.action," ").concat(n.status,"'"),a=new Error(t);return a.status=n.status,a.method=r.method,a.url=r.action,a}function It(r){var n=r.responseText||r.response;if(!n)return n;try{return JSON.parse(n)}catch(t){return n}}function da(r){var n=new XMLHttpRequest;r.onProgress&&n.upload&&(n.upload.onprogress=function(l){l.total>0&&(l.percent=l.loaded/l.total*100),r.onProgress(l)});var t=new FormData;r.data&&Object.keys(r.data).forEach(function(c){var l=r.data[c];if(Array.isArray(l)){l.forEach(function(s){t.append("".concat(c,"[]"),s)});return}t.append(c,l)}),r.file instanceof Blob?t.append(r.filename,r.file,r.file.name):t.append(r.filename,r.file),n.onerror=function(l){r.onError(l)},n.onload=function(){return n.status<200||n.status>=300?r.onError(ca(r,n),It(n)):r.onSuccess(It(n),n)},n.open(r.method,r.action,!0),r.withCredentials&&"withCredentials"in n&&(n.withCredentials=!0);var a=r.headers||{};return a["X-Requested-With"]!==null&&n.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(a).forEach(function(c){a[c]!==null&&n.setRequestHeader(c,a[c])}),n.send(t),{abort:function(){n.abort()}}}var pa=+new Date,ma=0;function Yr(){return"rc-upload-".concat(pa,"-").concat(++ma)}var fa=m(885),Xr=function(r,n){if(r&&n){var t=Array.isArray(n)?n:n.split(","),a=r.name||"",c=r.type||"",l=c.replace(/\/.*$/,"");return t.some(function(s){var o=s.trim();if(/^\*(\/\*)?$/.test(s))return!0;if(o.charAt(0)==="."){var d=a.toLowerCase(),u=o.toLowerCase(),p=[u];return(u===".jpg"||u===".jpeg")&&(p=[".jpg",".jpeg"]),p.some(function(w){return d.endsWith(w)})}return/\/\*$/.test(o)?l===o.replace(/\/.*$/,""):c===o?!0:/^\w+$/.test(o)?((0,fa.ZP)(!1,"Upload takes an invalidate 'accept' type '".concat(o,"'.Skip for check.")),!0):!1})}return!0};function va(r,n){var t=r.createReader(),a=[];function c(){t.readEntries(function(l){var s=Array.prototype.slice.apply(l);a=a.concat(s);var o=!s.length;o?n(a):c()})}c()}var ha=function(n,t,a){var c=function l(s,o){s.path=o||"",s.isFile?s.file(function(d){a(d)&&(s.fullPath&&!d.webkitRelativePath&&(Object.defineProperties(d,{webkitRelativePath:{writable:!0}}),d.webkitRelativePath=s.fullPath.replace(/^\//,""),Object.defineProperties(d,{webkitRelativePath:{writable:!1}})),t([d]))}):s.isDirectory&&va(s,function(d){d.forEach(function(u){l(u,"".concat(o).concat(s.name,"/"))})})};n.forEach(function(l){c(l.webkitGetAsEntry())})},ga=ha,Ca=["component","prefixCls","className","disabled","id","style","multiple","accept","capture","children","directory","openFileDialogOnClick","onMouseEnter","onMouseLeave"],ya=function(r){(0,Pt.Z)(t,r);var n=(0,wt.Z)(t);function t(){var a;(0,St.Z)(this,t);for(var c=arguments.length,l=new Array(c),s=0;s<c;s++)l[s]=arguments[s];return a=n.call.apply(n,[this].concat(l)),a.state={uid:Yr()},a.reqs={},a.fileInput=void 0,a._isMounted=void 0,a.onChange=function(o){var d=a.props,u=d.accept,p=d.directory,w=o.target.files,y=(0,ur.Z)(w).filter(function(F){return!p||Xr(F,u)});a.uploadFiles(y),a.reset()},a.onClick=function(o){var d=a.fileInput;if(d){var u=a.props,p=u.children,w=u.onClick;if(p&&p.type==="button"){var y=d.parentNode;y.focus(),y.querySelector("button").blur()}d.click(),w&&w(o)}},a.onKeyDown=function(o){o.key==="Enter"&&a.onClick(o)},a.onFileDrop=function(o){var d=a.props.multiple;if(o.preventDefault(),o.type!=="dragover")if(a.props.directory)ga(Array.prototype.slice.call(o.dataTransfer.items),a.uploadFiles,function(p){return Xr(p,a.props.accept)});else{var u=(0,ur.Z)(o.dataTransfer.files).filter(function(p){return Xr(p,a.props.accept)});d===!1&&(u=u.slice(0,1)),a.uploadFiles(u)}},a.uploadFiles=function(o){var d=(0,ur.Z)(o),u=d.map(function(p){return p.uid=Yr(),a.processFile(p,d)});Promise.all(u).then(function(p){var w=a.props.onBatchStart;w==null||w(p.map(function(y){var F=y.origin,O=y.parsedFile;return{file:F,parsedFile:O}})),p.filter(function(y){return y.parsedFile!==null}).forEach(function(y){a.post(y)})})},a.processFile=function(){var o=(0,ia.Z)((0,Zt.Z)().mark(function d(u,p){var w,y,F,O,$,P,g,j,v;return(0,Zt.Z)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(w=a.props.beforeUpload,y=u,!w){f.next=14;break}return f.prev=3,f.next=6,w(u,p);case 6:y=f.sent,f.next=12;break;case 9:f.prev=9,f.t0=f.catch(3),y=!1;case 12:if(y!==!1){f.next=14;break}return f.abrupt("return",{origin:u,parsedFile:null,action:null,data:null});case 14:if(F=a.props.action,typeof F!="function"){f.next=21;break}return f.next=18,F(u);case 18:O=f.sent,f.next=22;break;case 21:O=F;case 22:if($=a.props.data,typeof $!="function"){f.next=29;break}return f.next=26,$(u);case 26:P=f.sent,f.next=30;break;case 29:P=$;case 30:return g=((0,oa.Z)(y)==="object"||typeof y=="string")&&y?y:u,g instanceof File?j=g:j=new File([g],u.name,{type:u.type}),v=j,v.uid=u.uid,f.abrupt("return",{origin:u,data:P,parsedFile:v,action:O});case 35:case"end":return f.stop()}},d,null,[[3,9]])}));return function(d,u){return o.apply(this,arguments)}}(),a.saveFileInput=function(o){a.fileInput=o},a}return(0,jt.Z)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.abort()}},{key:"post",value:function(c){var l=this,s=c.data,o=c.origin,d=c.action,u=c.parsedFile;if(this._isMounted){var p=this.props,w=p.onStart,y=p.customRequest,F=p.name,O=p.headers,$=p.withCredentials,P=p.method,g=o.uid,j=y||da,v={action:d,filename:F,data:s,file:u,headers:O,withCredentials:$,method:P||"post",onProgress:function(f){var S=l.props.onProgress;S==null||S(f,u)},onSuccess:function(f,S){var x=l.props.onSuccess;x==null||x(f,u,S),delete l.reqs[g]},onError:function(f,S){var x=l.props.onError;x==null||x(f,S,u),delete l.reqs[g]}};w(o),this.reqs[g]=j(v)}}},{key:"reset",value:function(){this.setState({uid:Yr()})}},{key:"abort",value:function(c){var l=this.reqs;if(c){var s=c.uid?c.uid:c;l[s]&&l[s].abort&&l[s].abort(),delete l[s]}else Object.keys(l).forEach(function(o){l[o]&&l[o].abort&&l[o].abort(),delete l[o]})}},{key:"render",value:function(){var c,l=this.props,s=l.component,o=l.prefixCls,d=l.className,u=l.disabled,p=l.id,w=l.style,y=l.multiple,F=l.accept,O=l.capture,$=l.children,P=l.directory,g=l.openFileDialogOnClick,j=l.onMouseEnter,v=l.onMouseLeave,Z=(0,la.Z)(l,Ca),f=he()((c={},(0,Jr.Z)(c,o,!0),(0,Jr.Z)(c,"".concat(o,"-disabled"),u),(0,Jr.Z)(c,d,d),c)),S=P?{directory:"directory",webkitdirectory:"webkitdirectory"}:{},x=u?{}:{onClick:g?this.onClick:function(){},onKeyDown:g?this.onKeyDown:function(){},onMouseEnter:j,onMouseLeave:v,onDrop:this.onFileDrop,onDragOver:this.onFileDrop,tabIndex:"0"};return i.createElement(s,(0,Wr.Z)({},x,{className:f,role:"button",style:w}),i.createElement("input",(0,Wr.Z)({},(0,ua.Z)(Z,{aria:!0,data:!0}),{id:p,type:"file",ref:this.saveFileInput,onClick:function(C){return C.stopPropagation()},key:this.state.uid,style:{display:"none"},accept:F},S,{multiple:y,onChange:this.onChange},O!=null?{capture:O}:{})),$)}}]),t}(i.Component),xa=ya;function qr(){}var Rt=function(r){(0,Pt.Z)(t,r);var n=(0,wt.Z)(t);function t(){var a;(0,St.Z)(this,t);for(var c=arguments.length,l=new Array(c),s=0;s<c;s++)l[s]=arguments[s];return a=n.call.apply(n,[this].concat(l)),a.uploader=void 0,a.saveUploader=function(o){a.uploader=o},a}return(0,jt.Z)(t,[{key:"abort",value:function(c){this.uploader.abort(c)}},{key:"render",value:function(){return i.createElement(xa,(0,Wr.Z)({},this.props,{ref:this.saveUploader}))}}]),t}(i.Component);Rt.defaultProps={component:"span",prefixCls:"rc-upload",data:{},headers:{},name:"file",multipart:!1,onStart:qr,onError:qr,onSuccess:qr,multiple:!1,beforeUpload:null,customRequest:null,withCredentials:!1,openFileDialogOnClick:!0};var ba=Rt,Dt=ba,Ea=m(73142),Fa=m(50374),_r=m(86787),Aa=m(39537),Sa=m(51878),ja=m(22819),Pa={icon:function(n,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42z",fill:t}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:n}}]}},name:"file",theme:"twotone"},wa=Pa,Ot=function(n,t){return i.createElement(ye.Z,(0,fe.Z)((0,fe.Z)({},n),{},{ref:t,icon:wa}))};Ot.displayName="FileTwoTone";var Za=i.forwardRef(Ot),$t=m(45726),Ia={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"}}]},name:"paper-clip",theme:"outlined"},Ra=Ia,Tt=function(n,t){return i.createElement(ye.Z,(0,fe.Z)((0,fe.Z)({},n),{},{ref:t,icon:Ra}))};Tt.displayName="PaperClipOutlined";var Da=i.forwardRef(Tt),Oa={icon:function(n,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z",fill:n}},{tag:"path",attrs:{d:"M424.6 765.8l-150.1-178L136 752.1V792h752v-30.4L658.1 489z",fill:t}},{tag:"path",attrs:{d:"M136 652.7l132.4-157c3.2-3.8 9-3.8 12.2 0l144 170.7L652 396.8c3.2-3.8 9-3.8 12.2 0L888 662.2V232H136v420.7zM304 280a88 88 0 110 176 88 88 0 010-176z",fill:t}},{tag:"path",attrs:{d:"M276 368a28 28 0 1056 0 28 28 0 10-56 0z",fill:t}},{tag:"path",attrs:{d:"M304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z",fill:n}}]}},name:"picture",theme:"twotone"},$a=Oa,Bt=function(n,t){return i.createElement(ye.Z,(0,fe.Z)((0,fe.Z)({},n),{},{ref:t,icon:$a}))};Bt.displayName="PictureTwoTone";var Ta=i.forwardRef(Bt),et=m(33666),Ba=m(68325),La=m(8119),Mr=m(28764);function Ur(r){return Object.assign(Object.assign({},r),{lastModified:r.lastModified,lastModifiedDate:r.lastModifiedDate,name:r.name,size:r.size,type:r.type,uid:r.uid,percent:0,originFileObj:r})}function Nr(r,n){const t=(0,ur.Z)(n),a=t.findIndex(c=>{let{uid:l}=c;return l===r.uid});return a===-1?t.push(r):t[a]=r,t}function rt(r,n){const t=r.uid!==void 0?"uid":"name";return n.filter(a=>a[t]===r[t])[0]}function Ma(r,n){const t=r.uid!==void 0?"uid":"name",a=n.filter(c=>c[t]!==r[t]);return a.length===n.length?null:a}const Ua=function(){const n=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:"").split("/"),a=n[n.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(a)||[""])[0]},Lt=r=>r.indexOf("image/")===0,Na=r=>{if(r.type&&!r.thumbUrl)return Lt(r.type);const n=r.thumbUrl||r.url||"",t=Ua(n);return/^data:image\//.test(n)||/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico|heic|heif)$/i.test(t)?!0:!(/^data:/.test(n)||t)},er=200;function ka(r){return new Promise(n=>{if(!r.type||!Lt(r.type)){n("");return}const t=document.createElement("canvas");t.width=er,t.height=er,t.style.cssText=`position: fixed; left: 0; top: 0; width: ${er}px; height: ${er}px; z-index: 9999; display: none;`,document.body.appendChild(t);const a=t.getContext("2d"),c=new Image;if(c.onload=()=>{const{width:l,height:s}=c;let o=er,d=er,u=0,p=0;l>s?(d=s*(er/l),p=-(d-o)/2):(o=l*(er/s),u=-(o-d)/2),a.drawImage(c,u,p,o,d);const w=t.toDataURL();document.body.removeChild(t),n(w)},c.crossOrigin="anonymous",r.type.startsWith("image/svg+xml")){const l=new FileReader;l.addEventListener("load",()=>{l.result&&(c.src=l.result)}),l.readAsDataURL(r)}else c.src=window.URL.createObjectURL(r)})}var za={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},Qa=za,Mt=function(n,t){return i.createElement(ye.Z,(0,fe.Z)((0,fe.Z)({},n),{},{ref:t,icon:Qa}))};Mt.displayName="DownloadOutlined";var Ka=i.forwardRef(Mt),Ha=m(32538),Ga=m(44132),kr=m(41653),Va=i.forwardRef((r,n)=>{let{prefixCls:t,className:a,style:c,locale:l,listType:s,file:o,items:d,progress:u,iconRender:p,actionIconRender:w,itemRender:y,isImgUrl:F,showPreviewIcon:O,showRemoveIcon:$,showDownloadIcon:P,previewIcon:g,removeIcon:j,downloadIcon:v,onPreview:Z,onDownload:f,onClose:S}=r;var x,A;const{status:C}=o,[b,D]=i.useState(C);i.useEffect(()=>{C!=="removed"&&D(C)},[C]);const[M,T]=i.useState(!1),E=i.useRef(null);i.useEffect(()=>(E.current=setTimeout(()=>{T(!0)},300),()=>{E.current&&clearTimeout(E.current)}),[]);const I=p(o);let z=i.createElement("div",{className:`${t}-icon`},I);if(s==="picture"||s==="picture-card"||s==="picture-circle")if(b==="uploading"||!o.thumbUrl&&!o.url){const Se=he()({[`${t}-list-item-thumbnail`]:!0,[`${t}-list-item-file`]:b!=="uploading"});z=i.createElement("div",{className:Se},I)}else{const Se=F!=null&&F(o)?i.createElement("img",{src:o.thumbUrl||o.url,alt:o.name,className:`${t}-list-item-image`,crossOrigin:o.crossOrigin}):I,nr=he()({[`${t}-list-item-thumbnail`]:!0,[`${t}-list-item-file`]:F&&!F(o)});z=i.createElement("a",{className:nr,onClick:cr=>Z(o,cr),href:o.url||o.thumbUrl,target:"_blank",rel:"noopener noreferrer"},Se)}const U=he()(`${t}-list-item`,`${t}-list-item-${b}`),K=typeof o.linkProps=="string"?JSON.parse(o.linkProps):o.linkProps,X=$?w((typeof j=="function"?j(o):j)||i.createElement(yt.Z,null),()=>S(o),t,l.removeFile):null,q=P&&b==="done"?w((typeof v=="function"?v(o):v)||i.createElement(Ka,null),()=>f(o),t,l.downloadFile):null,Ge=s!=="picture-card"&&s!=="picture-circle"&&i.createElement("span",{key:"download-delete",className:he()(`${t}-list-item-actions`,{picture:s==="picture"})},q,X),H=he()(`${t}-list-item-name`),ge=o.url?[i.createElement("a",Object.assign({key:"view",target:"_blank",rel:"noopener noreferrer",className:H,title:o.name},K,{href:o.url,onClick:Se=>Z(o,Se)}),o.name),Ge]:[i.createElement("span",{key:"view",className:H,onClick:Se=>Z(o,Se),title:o.name},o.name),Ge],Te={pointerEvents:"none",opacity:.5},we=O?i.createElement("a",{href:o.url||o.thumbUrl,target:"_blank",rel:"noopener noreferrer",style:o.url||o.thumbUrl?void 0:Te,onClick:Se=>Z(o,Se),title:l.previewFile},typeof g=="function"?g(o):g||i.createElement(Ha.Z,null)):null,rr=(s==="picture-card"||s==="picture-circle")&&b!=="uploading"&&i.createElement("span",{className:`${t}-list-item-actions`},we,b==="done"&&q,X),{getPrefixCls:Ve}=i.useContext(_r.E_),nt=Ve(),Sr=i.createElement("div",{className:U},z,ge,rr,M&&i.createElement(et.Z,{motionName:`${nt}-fade`,visible:b==="uploading",motionDeadline:2e3},Se=>{let{className:nr}=Se;const cr="percent"in o?i.createElement(Ga.Z,Object.assign({},u,{type:"line",percent:o.percent})):null;return i.createElement("div",{className:he()(`${t}-list-item-progress`,nr)},cr)})),ve=o.response&&typeof o.response=="string"?o.response:((x=o.error)===null||x===void 0?void 0:x.statusText)||((A=o.error)===null||A===void 0?void 0:A.message)||l.uploadError,tr=b==="error"?i.createElement(kr.Z,{title:ve,getPopupContainer:Se=>Se.parentNode},Sr):Sr;return i.createElement("div",{className:he()(`${t}-list-item-container`,a),style:c,ref:n},y?y(tr,o,d,{download:f.bind(null,o),preview:Z.bind(null,o),remove:S.bind(null,o)}):tr)});const Wa=(r,n)=>{const{listType:t="text",previewFile:a=ka,onPreview:c,onDownload:l,onRemove:s,locale:o,iconRender:d,isImageUrl:u=Na,prefixCls:p,items:w=[],showPreviewIcon:y=!0,showRemoveIcon:F=!0,showDownloadIcon:O=!1,removeIcon:$,previewIcon:P,downloadIcon:g,progress:j={strokeWidth:2,showInfo:!1},appendAction:v,appendActionVisible:Z=!0,itemRender:f}=r,S=(0,Ba.Z)(),[x,A]=i.useState(!1);i.useEffect(()=>{t!=="picture"&&t!=="picture-card"&&t!=="picture-circle"||(w||[]).forEach(H=>{typeof document=="undefined"||typeof window=="undefined"||!window.FileReader||!window.File||!(H.originFileObj instanceof File||H.originFileObj instanceof Blob)||H.thumbUrl!==void 0||(H.thumbUrl="",a&&a(H.originFileObj).then(ge=>{H.thumbUrl=ge||"",S()}))})},[t,w,a]),i.useEffect(()=>{A(!0)},[]);const C=(H,ge)=>{if(c)return ge==null||ge.preventDefault(),c(H)},b=H=>{typeof l=="function"?l(H):H.url&&window.open(H.url)},D=H=>{s==null||s(H)},M=H=>{if(d)return d(H,t);const ge=H.status==="uploading",Te=u&&u(H)?i.createElement(Ta,null):i.createElement(Za,null);let we=ge?i.createElement($t.Z,null):i.createElement(Da,null);return t==="picture"?we=ge?i.createElement($t.Z,null):Te:(t==="picture-card"||t==="picture-circle")&&(we=ge?o.uploading:Te),we},T=(H,ge,Te,we)=>{const rr={type:"text",size:"small",title:we,onClick:Ve=>{ge(),(0,Mr.l$)(H)&&H.props.onClick&&H.props.onClick(Ve)},className:`${Te}-list-item-action`};if((0,Mr.l$)(H)){const Ve=(0,Mr.Tm)(H,Object.assign(Object.assign({},H.props),{onClick:()=>{}}));return i.createElement(Qe.ZP,Object.assign({},rr,{icon:Ve}))}return i.createElement(Qe.ZP,Object.assign({},rr),i.createElement("span",null,H))};i.useImperativeHandle(n,()=>({handlePreview:C,handleDownload:b}));const{getPrefixCls:E}=i.useContext(_r.E_),I=E("upload",p),z=E(),U=he()({[`${I}-list`]:!0,[`${I}-list-${t}`]:!0}),K=(0,ur.Z)(w.map(H=>({key:H.uid,file:H})));let q={motionDeadline:2e3,motionName:`${I}-${t==="picture-card"||t==="picture-circle"?"animate-inline":"animate"}`,keys:K,motionAppear:x};const Ge=(0,i.useMemo)(()=>{const H=Object.assign({},(0,La.ZP)(z));return delete H.onAppearEnd,delete H.onEnterEnd,delete H.onLeaveEnd,H},[z]);return t!=="picture-card"&&t!=="picture-circle"&&(q=Object.assign(Object.assign({},Ge),q)),i.createElement("div",{className:U},i.createElement(et.V,Object.assign({},q,{component:!1}),H=>{let{key:ge,file:Te,className:we,style:rr}=H;return i.createElement(Va,{key:ge,locale:o,prefixCls:I,className:we,style:rr,file:Te,items:w,progress:j,listType:t,isImgUrl:u,showPreviewIcon:y,showRemoveIcon:F,showDownloadIcon:O,removeIcon:$,previewIcon:P,downloadIcon:g,iconRender:M,actionIconRender:T,itemRender:f,onPreview:C,onDownload:b,onClose:D})}),v&&i.createElement(et.Z,Object.assign({},q,{visible:Z,forceRender:!0}),H=>{let{className:ge,style:Te}=H;return(0,Mr.Tm)(v,we=>({className:he()(we.className,ge),style:Object.assign(Object.assign(Object.assign({},Te),{pointerEvents:ge?"none":void 0}),we.style)}))}))};var Ja=i.forwardRef(Wa),Ya=m(83763),Xa=m(92232),qa=r=>{const{componentCls:n,iconCls:t}=r;return{[`${n}-wrapper`]:{[`${n}-drag`]:{position:"relative",width:"100%",height:"100%",textAlign:"center",background:r.colorFillAlter,border:`${r.lineWidth}px dashed ${r.colorBorder}`,borderRadius:r.borderRadiusLG,cursor:"pointer",transition:`border-color ${r.motionDurationSlow}`,[n]:{padding:`${r.padding}px 0`},[`${n}-btn`]:{display:"table",width:"100%",height:"100%",outline:"none"},[`${n}-drag-container`]:{display:"table-cell",verticalAlign:"middle"},[`&:not(${n}-disabled):hover`]:{borderColor:r.colorPrimaryHover},[`p${n}-drag-icon`]:{marginBottom:r.margin,[t]:{color:r.colorPrimary,fontSize:r.uploadThumbnailSize}},[`p${n}-text`]:{margin:`0 0 ${r.marginXXS}px`,color:r.colorTextHeading,fontSize:r.fontSizeLG},[`p${n}-hint`]:{color:r.colorTextDescription,fontSize:r.fontSize},[`&${n}-disabled`]:{cursor:"not-allowed",[`p${n}-drag-icon ${t},
            p${n}-text,
            p${n}-hint
          `]:{color:r.colorTextDisabled}}}}}},Er=m(62371),_a=r=>{const{componentCls:n,antCls:t,iconCls:a,fontSize:c,lineHeight:l}=r,s=`${n}-list-item`,o=`${s}-actions`,d=`${s}-action`,u=Math.round(c*l);return{[`${n}-wrapper`]:{[`${n}-list`]:Object.assign(Object.assign({},(0,Er.dF)()),{lineHeight:r.lineHeight,[s]:{position:"relative",height:r.lineHeight*c,marginTop:r.marginXS,fontSize:c,display:"flex",alignItems:"center",transition:`background-color ${r.motionDurationSlow}`,"&:hover":{backgroundColor:r.controlItemBgHover},[`${s}-name`]:Object.assign(Object.assign({},Er.vS),{padding:`0 ${r.paddingXS}px`,lineHeight:l,flex:"auto",transition:`all ${r.motionDurationSlow}`}),[o]:{[d]:{opacity:0},[`${d}${t}-btn-sm`]:{height:u,border:0,lineHeight:1,"> span":{transform:"scale(1)"}},[`
              ${d}:focus,
              &.picture ${d}
            `]:{opacity:1},[a]:{color:r.colorTextDescription,transition:`all ${r.motionDurationSlow}`},[`&:hover ${a}`]:{color:r.colorText}},[`${n}-icon ${a}`]:{color:r.colorTextDescription,fontSize:c},[`${s}-progress`]:{position:"absolute",bottom:-r.uploadProgressOffset,width:"100%",paddingInlineStart:c+r.paddingXS,fontSize:c,lineHeight:0,pointerEvents:"none","> div":{margin:0}}},[`${s}:hover ${d}`]:{opacity:1,color:r.colorText},[`${s}-error`]:{color:r.colorError,[`${s}-name, ${n}-icon ${a}`]:{color:r.colorError},[o]:{[`${a}, ${a}:hover`]:{color:r.colorError},[d]:{opacity:1}}},[`${n}-list-item-container`]:{transition:`opacity ${r.motionDurationSlow}, height ${r.motionDurationSlow}`,"&::before":{display:"table",width:0,height:0,content:'""'}}})}}},Ut=m(25646);const Nt=new Ut.E4("uploadAnimateInlineIn",{from:{width:0,height:0,margin:0,padding:0,opacity:0}}),kt=new Ut.E4("uploadAnimateInlineOut",{to:{width:0,height:0,margin:0,padding:0,opacity:0}});var es=r=>{const{componentCls:n}=r,t=`${n}-animate-inline`;return[{[`${n}-wrapper`]:{[`${t}-appear, ${t}-enter, ${t}-leave`]:{animationDuration:r.motionDurationSlow,animationTimingFunction:r.motionEaseInOutCirc,animationFillMode:"forwards"},[`${t}-appear, ${t}-enter`]:{animationName:Nt},[`${t}-leave`]:{animationName:kt}}},Nt,kt]},rs=m(10190);const ts=r=>{const{componentCls:n,iconCls:t,uploadThumbnailSize:a,uploadProgressOffset:c}=r,l=`${n}-list`,s=`${l}-item`;return{[`${n}-wrapper`]:{[`
        ${l}${l}-picture,
        ${l}${l}-picture-card,
        ${l}${l}-picture-circle
      `]:{[s]:{position:"relative",height:a+r.lineWidth*2+r.paddingXS*2,padding:r.paddingXS,border:`${r.lineWidth}px ${r.lineType} ${r.colorBorder}`,borderRadius:r.borderRadiusLG,"&:hover":{background:"transparent"},[`${s}-thumbnail`]:Object.assign(Object.assign({},Er.vS),{width:a,height:a,lineHeight:`${a+r.paddingSM}px`,textAlign:"center",flex:"none",[t]:{fontSize:r.fontSizeHeading2,color:r.colorPrimary},img:{display:"block",width:"100%",height:"100%",overflow:"hidden"}}),[`${s}-progress`]:{bottom:c,width:`calc(100% - ${r.paddingSM*2}px)`,marginTop:0,paddingInlineStart:a+r.paddingXS}},[`${s}-error`]:{borderColor:r.colorError,[`${s}-thumbnail ${t}`]:{["svg path[fill='#e6f7ff']"]:{fill:r.colorErrorBg},["svg path[fill='#1890ff']"]:{fill:r.colorError}}},[`${s}-uploading`]:{borderStyle:"dashed",[`${s}-name`]:{marginBottom:c}}},[`${l}${l}-picture-circle ${s}`]:{[`&, &::before, ${s}-thumbnail`]:{borderRadius:"50%"}}}}},ns=r=>{const{componentCls:n,iconCls:t,fontSizeLG:a,colorTextLightSolid:c}=r,l=`${n}-list`,s=`${l}-item`,o=r.uploadPicCardSize;return{[`
      ${n}-wrapper${n}-picture-card-wrapper,
      ${n}-wrapper${n}-picture-circle-wrapper
    `]:Object.assign(Object.assign({},(0,Er.dF)()),{display:"inline-block",width:"100%",[`${n}${n}-select`]:{width:o,height:o,marginInlineEnd:r.marginXS,marginBottom:r.marginXS,textAlign:"center",verticalAlign:"top",backgroundColor:r.colorFillAlter,border:`${r.lineWidth}px dashed ${r.colorBorder}`,borderRadius:r.borderRadiusLG,cursor:"pointer",transition:`border-color ${r.motionDurationSlow}`,[`> ${n}`]:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",textAlign:"center"},[`&:not(${n}-disabled):hover`]:{borderColor:r.colorPrimary}},[`${l}${l}-picture-card, ${l}${l}-picture-circle`]:{[`${l}-item-container`]:{display:"inline-block",width:o,height:o,marginBlock:`0 ${r.marginXS}px`,marginInline:`0 ${r.marginXS}px`,verticalAlign:"top"},"&::after":{display:"none"},[s]:{height:"100%",margin:0,"&::before":{position:"absolute",zIndex:1,width:`calc(100% - ${r.paddingXS*2}px)`,height:`calc(100% - ${r.paddingXS*2}px)`,backgroundColor:r.colorBgMask,opacity:0,transition:`all ${r.motionDurationSlow}`,content:'" "'}},[`${s}:hover`]:{[`&::before, ${s}-actions`]:{opacity:1}},[`${s}-actions`]:{position:"absolute",insetInlineStart:0,zIndex:10,width:"100%",whiteSpace:"nowrap",textAlign:"center",opacity:0,transition:`all ${r.motionDurationSlow}`,[`${t}-eye, ${t}-download, ${t}-delete`]:{zIndex:10,width:a,margin:`0 ${r.marginXXS}px`,fontSize:a,cursor:"pointer",transition:`all ${r.motionDurationSlow}`}},[`${s}-actions, ${s}-actions:hover`]:{[`${t}-eye, ${t}-download, ${t}-delete`]:{color:new rs.C(c).setAlpha(.65).toRgbString(),"&:hover":{color:c}}},[`${s}-thumbnail, ${s}-thumbnail img`]:{position:"static",display:"block",width:"100%",height:"100%",objectFit:"contain"},[`${s}-name`]:{display:"none",textAlign:"center"},[`${s}-file + ${s}-name`]:{position:"absolute",bottom:r.margin,display:"block",width:`calc(100% - ${r.paddingXS*2}px)`},[`${s}-uploading`]:{[`&${s}`]:{backgroundColor:r.colorFillAlter},[`&::before, ${t}-eye, ${t}-download, ${t}-delete`]:{display:"none"}},[`${s}-progress`]:{bottom:r.marginXL,width:`calc(100% - ${r.paddingXS*2}px)`,paddingInlineStart:0}}}),[`${n}-wrapper${n}-picture-circle-wrapper`]:{[`${n}${n}-select`]:{borderRadius:"50%"}}}};var as=r=>{const{componentCls:n}=r;return{[`${n}-rtl`]:{direction:"rtl"}}},ss=m(59223);const ls=r=>{const{componentCls:n,colorTextDisabled:t}=r;return{[`${n}-wrapper`]:Object.assign(Object.assign({},(0,Er.Wf)(r)),{[n]:{outline:0,"input[type='file']":{cursor:"pointer"}},[`${n}-select`]:{display:"inline-block"},[`${n}-disabled`]:{color:t,cursor:"not-allowed"}})}};var os=(0,Ya.Z)("Upload",r=>{const{fontSizeHeading3:n,fontSize:t,lineHeight:a,lineWidth:c,controlHeightLG:l}=r,s=Math.round(t*a),o=(0,Xa.TS)(r,{uploadThumbnailSize:n*2,uploadProgressOffset:s/2+c,uploadPicCardSize:l*2.55});return[ls(o),qa(o),ts(o),ns(o),_a(o),es(o),as(o),(0,ss.Z)(o)]}),is=function(r,n,t,a){function c(l){return l instanceof t?l:new t(function(s){s(l)})}return new(t||(t=Promise))(function(l,s){function o(p){try{u(a.next(p))}catch(w){s(w)}}function d(p){try{u(a.throw(p))}catch(w){s(w)}}function u(p){p.done?l(p.value):c(p.value).then(o,d)}u((a=a.apply(r,n||[])).next())})};const Fr=`__LIST_IGNORE_${Date.now()}__`,us=(r,n)=>{const{fileList:t,defaultFileList:a,onRemove:c,showUploadList:l=!0,listType:s="text",onPreview:o,onDownload:d,onChange:u,onDrop:p,previewFile:w,disabled:y,locale:F,iconRender:O,isImageUrl:$,progress:P,prefixCls:g,className:j,type:v="select",children:Z,style:f,itemRender:S,maxCount:x,data:A={},multiple:C=!1,action:b="",accept:D="",supportServerRender:M=!0}=r,T=i.useContext(Aa.Z),E=y!=null?y:T,[I,z]=(0,Ea.Z)(a||[],{value:t,postState:W=>W!=null?W:[]}),[U,K]=i.useState("drop"),X=i.useRef(null);i.useMemo(()=>{const W=Date.now();(t||[]).forEach((ne,oe)=>{!ne.uid&&!Object.isFrozen(ne)&&(ne.uid=`__AUTO__${W}_${oe}__`)})},[t]);const q=(W,ne,oe)=>{let _=(0,ur.Z)(ne);x===1?_=_.slice(-1):x&&(_=_.slice(0,x)),(0,Fa.flushSync)(()=>{z(_)});const ae={file:W,fileList:_};oe&&(ae.event=oe),u==null||u(ae)},Ge=(W,ne)=>is(void 0,void 0,void 0,function*(){const{beforeUpload:oe,transformFile:_}=r;let ae=W;if(oe){const De=yield oe(W,ne);if(De===!1)return!1;if(delete W[Fr],De===Fr)return Object.defineProperty(W,Fr,{value:!0,configurable:!0}),!1;typeof De=="object"&&De&&(ae=De)}return _&&(ae=yield _(ae)),ae}),H=W=>{const ne=W.filter(ae=>!ae.file[Fr]);if(!ne.length)return;const oe=ne.map(ae=>Ur(ae.file));let _=(0,ur.Z)(I);oe.forEach(ae=>{_=Nr(ae,_)}),oe.forEach((ae,De)=>{let dr=ae;if(ne[De].parsedFile)ae.status="uploading";else{const{originFileObj:ar}=ae;let We;try{We=new File([ar],ar.name,{type:ar.type})}catch(Os){We=new Blob([ar],{type:ar.type}),We.name=ar.name,We.lastModifiedDate=new Date,We.lastModified=new Date().getTime()}We.uid=ae.uid,dr=We}q(dr,_)})},ge=(W,ne,oe)=>{try{typeof W=="string"&&(W=JSON.parse(W))}catch(De){}if(!rt(ne,I))return;const _=Ur(ne);_.status="done",_.percent=100,_.response=W,_.xhr=oe;const ae=Nr(_,I);q(_,ae)},Te=(W,ne)=>{if(!rt(ne,I))return;const oe=Ur(ne);oe.status="uploading",oe.percent=W.percent;const _=Nr(oe,I);q(oe,_,W)},we=(W,ne,oe)=>{if(!rt(oe,I))return;const _=Ur(oe);_.error=W,_.response=ne,_.status="error";const ae=Nr(_,I);q(_,ae)},rr=W=>{let ne;Promise.resolve(typeof c=="function"?c(W):c).then(oe=>{var _;if(oe===!1)return;const ae=Ma(W,I);ae&&(ne=Object.assign(Object.assign({},W),{status:"removed"}),I==null||I.forEach(De=>{const dr=ne.uid!==void 0?"uid":"name";De[dr]===ne[dr]&&!Object.isFrozen(De)&&(De.status="removed")}),(_=X.current)===null||_===void 0||_.abort(ne),q(ne,ae))})},Ve=W=>{K(W.type),W.type==="drop"&&(p==null||p(W))};i.useImperativeHandle(n,()=>({onBatchStart:H,onSuccess:ge,onProgress:Te,onError:we,fileList:I,upload:X.current}));const{getPrefixCls:nt,direction:Sr}=i.useContext(_r.E_),ve=nt("upload",g),tr=Object.assign(Object.assign({onBatchStart:H,onError:we,onProgress:Te,onSuccess:ge},r),{data:A,multiple:C,action:b,accept:D,supportServerRender:M,prefixCls:ve,disabled:E,beforeUpload:Ge,onChange:void 0});delete tr.className,delete tr.style,(!Z||E)&&delete tr.id;const[Se,nr]=os(ve),cr=(W,ne)=>l?i.createElement(Sa.Z,{componentName:"Upload",defaultLocale:ja.Z.Upload},oe=>{const{showRemoveIcon:_,showPreviewIcon:ae,showDownloadIcon:De,removeIcon:dr,previewIcon:ar,downloadIcon:We}=typeof l=="boolean"?{}:l;return i.createElement(Ja,{prefixCls:ve,listType:s,items:I,previewFile:w,onPreview:o,onDownload:d,onRemove:rr,showRemoveIcon:!E&&_,showPreviewIcon:ae,showDownloadIcon:De,removeIcon:dr,previewIcon:ar,downloadIcon:We,iconRender:O,locale:Object.assign(Object.assign({},oe),F),isImageUrl:$,progress:P,appendAction:W,appendActionVisible:ne,itemRender:S})}):W,at={[`${ve}-rtl`]:Sr==="rtl"};if(v==="drag"){const W=he()(ve,{[`${ve}-drag`]:!0,[`${ve}-drag-uploading`]:I.some(ne=>ne.status==="uploading"),[`${ve}-drag-hover`]:U==="dragover",[`${ve}-disabled`]:E,[`${ve}-rtl`]:Sr==="rtl"},nr);return Se(i.createElement("span",{className:he()(`${ve}-wrapper`,at,j,nr)},i.createElement("div",{className:W,onDrop:Ve,onDragOver:Ve,onDragLeave:Ve,style:f},i.createElement(Dt,Object.assign({},tr,{ref:X,className:`${ve}-btn`}),i.createElement("div",{className:`${ve}-drag-container`},Z))),cr()))}const Fs=he()(ve,`${ve}-select`,{[`${ve}-disabled`]:E}),Kt=(W=>i.createElement("div",{className:Fs,style:W},i.createElement(Dt,Object.assign({},tr,{ref:X}))))(Z?void 0:{display:"none"});return Se(s==="picture-card"||s==="picture-circle"?i.createElement("span",{className:he()(`${ve}-wrapper`,{[`${ve}-picture-card-wrapper`]:s==="picture-card",[`${ve}-picture-circle-wrapper`]:s==="picture-circle"},at,j,nr)},cr(Kt,!!Z)):i.createElement("span",{className:he()(`${ve}-wrapper`,at,j,nr)},Kt,cr()))};var zt=i.forwardRef(us),cs=function(r,n){var t={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&n.indexOf(a)<0&&(t[a]=r[a]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(r);c<a.length;c++)n.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(r,a[c])&&(t[a[c]]=r[a[c]]);return t},ds=i.forwardRef((r,n)=>{var{style:t,height:a}=r,c=cs(r,["style","height"]);return i.createElement(zt,Object.assign({ref:n},c,{type:"drag",style:Object.assign(Object.assign({},t),{height:a})}))});const tt=zt;tt.Dragger=ds,tt.LIST_IGNORE=Fr;var ps=tt,ms=Ce.Z.Panel,Qt={labelCol:{xs:{span:24},sm:{span:7},md:{span:6}},wrapperCol:{xs:{span:24},sm:{span:13},md:{span:14}}},fs=function(r){var n=r.app,t=n.id,a=n.template,c=te.Z.useForm(),l=B()(c,1),s=l[0],o=te.Z.useForm(),d=B()(o,1),u=d[0],p=(0,i.useState)(!0),w=B()(p,2),y=w[0],F=w[1],O=(0,i.useState)({}),$=B()(O,2),P=$[0],g=$[1],j=(0,i.useState)(function(){return[]}),v=B()(j,2),Z=v[0],f=v[1],S=te.Z.useForm(),x=B()(S,1),A=x[0],C=sa(),b=C.className,D=function(){var T=L()(h()().mark(function E(){var I,z,U,K;return h()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return F(!0),q.next=3,(0,Q.hq)(t);case 3:I=q.sent,z=I.result,U=I.success,U&&z&&(s.setFieldsValue(N()({},(0,Pe.omit)(z,"protocolEndpoint"))),f((K=z.attributeStatements)===null||K===void 0?void 0:K.map(function(Ge){return Ge.key})),g(z.protocolEndpoint)),F(!1);case 8:case"end":return q.stop()}},E)}));return function(){return T.apply(this,arguments)}}();(0,ce.Z)(L()(h()().mark(function T(){return h()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,D();case 2:case"end":return I.stop()}},T)})),[]);var M=function(E){s.setFieldsValue({assertSigned:E.wantAssertionsSigned,spRequestsSigned:E.authnRequestsSigned,spSignCert:E.signCert,spAcsUrl:E.acsUrl,spEntityId:E.entityId,nameIdFormat:E.defaultNameIdFormat,acsBinding:E.defaultAcsBinding,spSloEnabled:E.sloEnabled,spSlsUrl:E.slsUrl,spSlsBinding:E.slsBinding})};return(0,e.jsx)("div",{className:b,children:(0,e.jsxs)(je.Z,{spinning:y,children:[(0,e.jsx)($e.Z,{showIcon:!0,message:(0,e.jsxs)("span",{children:["\u4E0D\u77E5\u9053\u600E\u4E48\u914D\u7F6E\uFF1F\u8BF7\u53C2\u8003 TopIAM \u914D\u7F6E"," ",(0,e.jsx)("a",{target:"_blank",href:"https://eiam.topiam.cn/docs/application/standard/saml2-sso",rel:"noreferrer",children:"SAML \u5355\u70B9\u767B\u5F55"})," ","\u3002"]})}),(0,e.jsx)("br",{}),(0,e.jsx)(Re.A,N()(N()({layout:"horizontal"},Qt),{},{form:u,submitter:!1,children:(0,e.jsx)(na.Z,{rules:[{type:"url",message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u5E94\u7528 metadata \u5730\u5740"}],colon:!1,label:(0,e.jsxs)(He.Z,{children:[(0,e.jsx)(ps,{showUploadList:!1,name:"file",maxCount:1,beforeUpload:function(){return!1},withCredentials:!0,accept:".xml",onChange:function(){var T=L()(h()().mark(function I(z){var U,K,X,q;return h()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return U=ee()(z.fileList),F(!0),F(!0),H.next=5,(0,Q.ZG)(U==null?void 0:U[0]);case 5:K=H.sent,X=K.result,q=K.success,F(!1),q&&X&&M(X);case 10:case"end":return H.stop()}},I)}));function E(I){return T.apply(this,arguments)}return E}(),children:(0,e.jsx)(Qe.ZP,{children:"\u4E0A\u4F20 SP \u5143\u6570\u636E "})}),(0,e.jsx)("span",{children:"\u6216"})]}),name:"metaDataUrl",extra:"SP \u5143\u6570\u636E\u4E3A\u5E94\u7528\u4FA7\u751F\u6210\u7684 SSO \u914D\u7F6E\u6587\u4EF6\u3002\u82E5\u5DF2\u6709\u5143\u6570\u636E\uFF0C\u76F4\u63A5\u5BFC\u5165\uFF0C\u53EF\u81EA\u52A8\u586B\u5145\u4E0B\u65B9 SSO \u53C2\u6570\uFF0C\u7B80\u5355\u5FEB\u6377\u3002",addonAfter:(0,e.jsx)(Qe.ZP,{onClick:L()(h()().mark(function T(){var E,I,z,U;return h()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(E=u.getFieldValue("metaDataUrl"),E){X.next=4;break}return Y.ZP.error("\u8BF7\u8F93\u5165\u5E94\u7528 metadata \u5730\u5740"),X.abrupt("return");case 4:return X.next=6,u.validateFields();case 6:return F(!0),X.next=9,(0,Q.XW)(E);case 9:I=X.sent,z=I.result,U=I.success,F(!1),U&&z&&M(z);case 14:case"end":return X.stop()}},T)})),children:"\u89E3\u6790"}),children:(0,e.jsx)(Ct.Z,{allowClear:!0,placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528 metadata \u5730\u5740"})})})),(0,e.jsxs)(Re.A,N()(N()({scrollToFirstError:!0,requiredMark:!0,layout:"horizontal"},Qt),{},{form:s,onFinish:function(){var T=L()(h()().mark(function E(I){var z,U,K;return h()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,A.validateFields();case 2:if(z=q.sent,F(!0),!z){q.next=15;break}return q.next=7,(0,Q.$c)({id:t,template:a,config:(0,Pe.omit)(I,"id","template")}).finally(function(){F(!1)});case 7:if(U=q.sent,K=U.success,!K){q.next=14;break}return Y.ZP.success("\u4FDD\u5B58\u6210\u529F"),q.next=13,D();case 13:return q.abrupt("return",!0);case 14:Y.ZP.error("\u4FDD\u5B58\u5931\u8D25");case 15:return F(!1),q.abrupt("return",!1);case 17:case"end":return q.stop()}},E)}));return function(E){return T.apply(this,arguments)}}(),submitter:{render:function(E,I){return(0,e.jsx)(br.S,{children:I})}},children:[(0,e.jsx)(G.Z,{label:"ACS URL",name:"spAcsUrl",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u5355\u70B9\u767B\u5F55\u5730\u5740"},extra:"\u5E94\u7528\u7684 SAML SSO \u6838\u5FC3\u5730\u5740\uFF0C\u4E0E IAM \u4EA4\u4E92\u5904\u7406\u5355\u70B9\u767B\u5F55\u8BF7\u6C42\u3002",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5355\u70B9\u767B\u5F55\u5730\u5740"}]}),(0,e.jsx)(G.Z,{label:"SP Entity ID",name:"spEntityId",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u552F\u4E00\u6807\u8BC6"},allowClear:!1,extra:"\u5E94\u7528\u5728 IAM \u4E2D\u7684\u6807\u8BC6\uFF0C\u901A\u5E38\u5728\u5E94\u7528\u4FA7\u83B7\u53D6\uFF0C\u683C\u5F0F\u901A\u5E38\u4E3A\u5E94\u7528 URI\u3002",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5E94\u7528\u552F\u4E00\u6807\u8BC6"}]}),(0,e.jsx)(xe.Z,{label:"Name ID \u7C7B\u578B",name:"nameIdValueType",options:[{value:"user.username",label:"\u7528\u6237\u540D"},{value:"user.fullName",label:"\u7528\u6237\u59D3\u540D"},{value:"user.nickName",label:"\u7528\u6237\u6635\u79F0"},{value:"user.email",label:"\u90AE\u7BB1\u5730\u5740"},{value:"app_user.username",label:"\u5E94\u7528\u8D26\u6237"}],fieldProps:{allowClear:!1},extra:"\u5355\u70B9\u767B\u5F55\u65F6\uFF0C\u5C06\u9009\u4E2D\u9879\u4F5C\u4E3A\u8D26\u6237\u6807\u8BC6\uFF0C\u4F20\u9012\u7ED9\u4E1A\u52A1\u7CFB\u7EDF\u3002",rules:[{required:!0,message:"\u8BF7\u9009\u62E9 Name ID"}]}),(0,e.jsx)(V.Z,{}),(0,e.jsx)(xe.Z,{label:"\u6388\u6743\u8303\u56F4",name:"authorizationType",allowClear:!1,extra:"\u82E5\u9009\u62E9\u624B\u52A8\u6388\u6743\uFF0C\u9700\u8981\u5728 \u8BBF\u95EE\u6388\u6743 \u4E2D\u8FDB\u884C\u6743\u9650\u5206\u914D\u3002",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6388\u6743\u8303\u56F4"}],options:[{value:Le.AUTHORIZATION,label:"\u624B\u52A8\u6388\u6743"},{value:Le.ALL_ACCESS,label:"\u5168\u5458\u53EF\u8BBF\u95EE"}]}),(0,e.jsx)(xe.Z,{label:"SSO \u53D1\u8D77\u65B9",name:"initLoginType",allowClear:!1,rules:[{required:!0,message:"\u8BF7\u914D\u7F6E SSO \u53D1\u8D77\u65B9"}],options:[{value:Ue.APP,label:"\u53EA\u5141\u8BB8\u5E94\u7528\u53D1\u8D77"},{value:Ue.PORTAL_OR_APP,label:"\u652F\u6301\u95E8\u6237\u548C\u5E94\u7528\u53D1\u8D77"}],extra:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{children:"\u95E8\u6237\u53D1\u8D77\uFF1A\u7531 IAM \u95E8\u6237\u9875\u70B9\u51FB\u8FDB\u884C SSO \u3002"}),(0,e.jsx)("br",{}),(0,e.jsx)("span",{children:"\u5E94\u7528\u53D1\u8D77\uFF1A\u7531\u5E94\u7528\u767B\u5F55\u4E3B\u52A8\u53D1\u8D77\u3002"})]})}),(0,e.jsx)(ze.Z,{name:["initLoginType"],children:function(E){return(0,e.jsx)(G.Z,{label:"\u767B\u5F55\u53D1\u8D77\u5730\u5740",name:"initLoginUrl",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u94FE\u63A5"},extra:"\u82E5\u5E94\u7528\u4EC5\u652F\u6301 SP \u53D1\u8D77 SSO\uFF0C\u60A8\u53C8\u5E0C\u671B\u5B9E\u73B0\u7531 IAM \u95E8\u6237\u9875\u53D1\u8D77\u767B\u5F55\uFF0C\u8BF7\u586B\u5199\u6B64\u9879\u3002\u95E8\u6237\u9875\u8BBF\u95EE\u5E94\u7528\u65F6\uFF0CIAM \u4F1A\u8DF3\u8F6C\u5230\u672C\u5730\u5740\uFF0C\u5E94\u5373\u523B\u81EA\u52A8\u5411 IAM \u53D1\u8D77 SAMLRequest \u767B\u5F55\u8BF7\u6C42\u3002\u5730\u5740\u53EF\u586B\u5199\u4E3A\u4EFB\u610F\u53D7\u4FDD\u62A4\u8D44\u6E90\u8BBF\u95EE\u5730\u5740\uFF0C\u5728\u672A\u767B\u5F55\u65F6\u4F1A\u81EA\u52A8\u89E6\u53D1 SAMLRequest \u5373\u53EF\u3002"})}}),(0,e.jsx)(V.Z,{style:{margin:0}}),(0,e.jsx)(Ce.Z,{ghost:!0,expandIconPosition:"start",children:(0,e.jsxs)(ms,{header:(0,e.jsx)("a",{children:"\u663E\u793A\u9AD8\u7EA7\u914D\u7F6E"}),children:[(0,e.jsx)(G.Z,{label:"\u9ED8\u8BA4RelayState",name:"relayState",rules:[{type:"url",message:"RelayState \u683C\u5F0F\u4E0D\u6B63\u786E"}],fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u8DF3\u8F6C\u5730\u5740"},extra:"IDP \u53D1\u8D77 SSO \u767B\u5F55\u6210\u529F\u540E\uFF0C\u5E94\u7528\u5E94\u81EA\u52A8\u8DF3\u8F6C\u7684\u5730\u5740\u3002\u5728 SAML Response \u4E2D\u4F1A\u5728 RelayState \u53C2\u6570\u4E2D\u4F20\u9012\uFF0C\u5E94\u7528\u8BFB\u53D6\u540E\u5B9E\u73B0\u8DF3\u8F6C\u3002"}),(0,e.jsx)(V.Z,{orientation:"left",plain:!0,children:"\u65AD\u8A00"}),(0,e.jsx)(G.Z,{label:"Audience",name:"audience",allowClear:!1,extra:"SAML\u65AD\u8A00\u7684\u76EE\u6807\u53D7\u4F17\uFF0C\u9ED8\u8BA4\u548CSP Entity ID\u76F8\u540C\u3002",placeholder:"\u8BF7\u8F93\u5165SAML\u65AD\u8A00\u7684\u76EE\u6807\u53D7\u4F17"}),(0,e.jsx)(xe.Z,{label:"NameID \u683C\u5F0F",name:"nameIdFormat",allowClear:!1,initialValue:"urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified",rules:[{required:!0,message:"\u8BF7\u9009\u62E9 NameID \u5B57\u6BB5\u683C\u5F0F"}],extra:"SAML Response \u4E2D\u6307\u5B9A\u8D26\u6237\u6807\u8BC6 NameID \u5B57\u6BB5\u683C\u5F0F\u3002",options:[{value:"urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified",label:"urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified"},{value:"urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress",label:"urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress"},{value:"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent",label:"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent"},{value:"urn:oasis:names:tc:SAML:2.0:nameid-format:transient",label:"urn:oasis:names:tc:SAML:2.0:nameid-format:transient"}]}),(0,e.jsx)(xe.Z,{label:"ACS \u7ED1\u5B9A\u7C7B\u578B",name:"acsBinding",allowClear:!1,rules:[{required:!0,message:"\u8BF7\u9009\u62E9 ACS \u7ED1\u5B9A\u7C7B\u578B"}],extra:" \u6307\u5B9AIDP\u5411SP\u53D1\u9001\u65AD\u8A00\u8BF7\u6C42\u7684\u65B9\u5F0F\u3002",options:[{value:"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST",label:"HTTP-POST"},{value:"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect",label:"HTTP-Redirect"}]}),(0,e.jsx)(vr.Z,{label:"\u662F\u5426\u52A0\u5BC6\u65AD\u8A00",name:"assertEncrypted",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u5BF9\u65AD\u8A00\u52A0\u5BC6"}]}),(0,e.jsx)(ze.Z,{name:["assertEncrypted"],children:function(E){var I=E.assertEncrypted;return I&&(0,e.jsx)(xe.Z,{label:"\u65AD\u8A00\u52A0\u5BC6\u7B97\u6CD5",name:"assertEncryptAlgorithm",extra:"\u65AD\u8A00\u52A0\u5BC6\u4F7F\u7528\u7684\u7B97\u6CD5",allowClear:!1,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u65AD\u8A00\u52A0\u5BC6\u4F7F\u7528\u7684\u7B97\u6CD5"}],options:[{value:"http://www.w3.org/2001/04/xmlenc#aes128-cbc",label:"AES128-CBC"},{value:"http://www.w3.org/2001/04/xmlenc#aes256-cbc",label:"AES256-CBC"}]})}}),(0,e.jsx)(vr.Z,{label:"\u662F\u5426\u7B7E\u540D\u65AD\u8A00",name:"assertSigned",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u5BF9\u65AD\u8A00\u7B7E\u540D"}],initialValue:!0,extra:"\u662F\u5426\u5BF9\u65AD\u8A00\u4F7F\u7528IdP\u7684\u8BC1\u4E66\u7B7E\u540D\uFF0C\u5BF9\u5E94SP\u5143\u6570\u636E\u6587\u4EF6\u4E2D\u201CWantAssertionsSigned\u201D\u503C\u3002"}),(0,e.jsx)(ze.Z,{name:["assertSigned"],children:function(E){var I=E.assertSigned;return I&&(0,e.jsx)(xe.Z,{label:"\u65AD\u8A00\u7B7E\u540D\u7B97\u6CD5",name:"assertSignAlgorithm",extra:"\u65AD\u8A00\u7B7E\u540D\u4F7F\u7528\u7684\u7B97\u6CD5",allowClear:!1,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7B7E\u540D\u4F7F\u7528\u7684\u7B97\u6CD5"}],options:[{value:"http://www.w3.org/2001/04/xmldsig-more#rsa-sha256",label:"RSA-SHA256"}]})}}),(0,e.jsx)(xe.Z,{label:"\u8EAB\u4EFD\u8BA4\u8BC1\u4E0A\u4E0B\u6587",name:"authnContextClassRef",extra:"SAML \u8EAB\u4EFD\u8BA4\u8BC1\u4E0A\u4E0B\u6587",allowClear:!1,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u8EAB\u4EFD\u8BA4\u8BC1\u4E0A\u4E0B\u6587"}],options:[{value:"urn:oasis:names:tc:SAML:2.0:ac:classes:unspecified",label:(0,e.jsx)(kr.Z,{title:"urn:oasis:names:tc:SAML:2.0:ac:classes:unspecified",placement:"topLeft",children:(0,e.jsx)("span",{children:"urn:oasis:names:tc:SAML:2.0:ac:classes:unspecified"})})},{value:"urn:oasis:names:tc:SAML:2.0:ac:classes:Password",label:(0,e.jsx)(kr.Z,{placement:"topLeft",title:"urn:oasis:names:tc:SAML:2.0:ac:classes:Password",children:(0,e.jsx)("span",{children:"urn:oasis:names:tc:SAML:2.0:ac:classes:Password"})})},{value:"urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport",label:(0,e.jsx)(kr.Z,{placement:"topLeft",title:"urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport",children:(0,e.jsx)("span",{children:"urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport"})})}]}),(0,e.jsx)(Re.A.Item,{label:"\u65AD\u8A00\u5C5E\u6027",name:"attributeStatements",trigger:"onValuesChange",children:(0,e.jsx)(Tr.Z,{rowKey:"key",toolBarRender:!1,scroll:{x:500},columns:[{title:"\u5C5E\u6027\u540D\u79F0",dataIndex:"name",fieldProps:{allowClear:!1},formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u540D\u79F0\u683C\u5F0F",key:"nameFormat",dataIndex:"nameFormat",valueType:"select",ellipsis:!0,valueEnum:{"urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified":{text:"unspecified"},"urn:oasis:names:tc:SAML:2.0:attrname-format:basic":{text:"basic"},"urn:oasis:names:tc:SAML:2.0:attrname-format:uri":{text:"uri"}},formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u5C5E\u6027\u503C",tooltip:"\u652F\u6301\u7684\u53D8\u91CF\uFF1A${user.phone}\u3001${user.username}\u3001${user.email}\u3001${app_user.nickName}\u3001${app_user.username}",dataIndex:"valueExpression",fieldProps:{allowClear:!1,placeholder:"\u53D8\u91CF\u503C"},formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u64CD\u4F5C",valueType:"option",align:"center",fixed:"right",width:50}],recordCreatorProps:{creatorButtonText:"\u6DFB\u52A0\u65AD\u8A00\u5C5E\u6027",newRecordType:"dataSource",position:"bottom",record:function(){return{key:Date.now()}}},editable:{form:A,type:"multiple",editableKeys:Z,onChange:f,deletePopconfirmMessage:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u6B64\u65AD\u8A00\u5C5E\u6027\u5417\uFF1F",actionRender:function(E,I,z){return[z.delete]}}})}),(0,e.jsx)(V.Z,{orientation:"left",plain:!0,children:"\u54CD\u5E94\u7B7E\u540D"}),(0,e.jsx)(vr.Z,{label:"\u662F\u5426\u7B7E\u540D\u54CD\u5E94",name:"responseSigned",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u5BF9\u54CD\u5E94\u7B7E\u540D"}],initialValue:!1}),(0,e.jsx)(ze.Z,{name:["responseSigned"],children:function(E){var I=E.responseSigned;return I&&(0,e.jsx)(xe.Z,{label:"\u54CD\u5E94\u7B7E\u540D\u7B97\u6CD5",name:"responseSignAlgorithm",extra:"\u65AD\u8A00\u54CD\u5E94\u4F7F\u7528\u7684\u7B97\u6CD5",allowClear:!1,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u54CD\u5E94\u7B7E\u540D\u4F7F\u7528\u7684\u7B97\u6CD5"}],options:[{value:"http://www.w3.org/2001/04/xmldsig-more#rsa-sha256",label:"RSA-SHA256"}]})}}),(0,e.jsx)(V.Z,{orientation:"left",plain:!0,children:"\u9A8C\u8BC1\u8BF7\u6C42"}),(0,e.jsx)(vr.Z,{label:"\u9A8C\u8BC1\u8BF7\u6C42\u7B7E\u540D",name:"spRequestsSigned",initialValue:!1,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u9A8C\u8BC1\u8BF7\u6C42\u7B7E\u540D"}],extra:"\u7528\u6765\u5BF9SAML Request\u7B7E\u540D\u8FDB\u884C\u9A8C\u8BC1\uFF0C\u5BF9\u5E94SP\u5143\u6570\u636E\u6587\u4EF6\u4E2D\u201CAuthnRequestsSigned\u201D\u503C\u3002"}),(0,e.jsx)(V.Z,{orientation:"left",plain:!0,children:"\u5355\u70B9\u6CE8\u9500"}),(0,e.jsx)(vr.Z,{label:"\u542F\u7528 SLO",name:"spSloEnabled",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u542F\u7528 SLO"}],initialValue:!1,extra:"SP \u662F\u5426\u652F\u6301\u5355\u70B9\u6CE8\u9500 (SLO) \u3002"}),(0,e.jsx)(ze.Z,{name:["spSloEnabled"],children:function(E){var I=E.spSloEnabled;return I&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(G.Z,{label:"\u5355\u70B9\u6CE8\u9500 URL",name:"spSlsUrl",rules:[{type:"url",message:"\u5355\u70B9\u6CE8\u9500\u5730\u5740\u683C\u5F0F\u4E0D\u6B63\u786E"},{required:!0,message:"\u8BF7\u8F93\u5165\u5355\u70B9\u6CE8\u9500\u5730\u5740"}],allowClear:!0,extra:"\u4F1A\u8BDD\u6CE8\u9500\u529F\u80FD\uFF0C\u7528\u6237\u5728 TopIAM \u6CE8\u9500\u4F1A\u8BDD\u540E\u901A\u77E5\u8BE5\u5730\u5740\u3002",placeholder:"\u8BF7\u8F93\u5165\u5355\u70B9\u6CE8\u9500\u5730\u5740"}),(0,e.jsx)(xe.Z,{label:"\u5355\u70B9\u6CE8\u9500\u7ED1\u5B9A\u7C7B\u578B",name:"spSlsBinding",allowClear:!1,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5355\u70B9\u6CE8\u9500\u7ED1\u5B9A\u7C7B\u578B"}],extra:" \u6307\u5B9A\u4E86 IDP \u5411 SP \u53D1\u9001 SLO \u8BF7\u6C42\u7684\u65B9\u5F0F\u3002",options:[{value:"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST",label:"HTTP-POST"},{value:"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect",label:"HTTP-Redirect"}]})]})}}),(0,e.jsx)(V.Z,{}),(0,e.jsx)(fr.Z,{label:"\u7B7E\u540D\u8BC1\u4E66",name:"spSignCert",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u9A8C\u8BC1\u7B7E\u540D\u8BC1\u4E66"}],extra:'SP\u516C\u94A5\u8BC1\u4E66\uFF0C\u7528\u6765\u9A8C\u8BC1SAML request\u7684\u7B7E\u540D\uFF0C\u5BF9\u5E94SP\u5143\u6570\u636E\u6587\u4EF6\u4E2Duse="signing"\u8BC1\u4E66\u5185\u5BB9\u3002',fieldProps:{autoComplete:"off",rows:3}})]},"advanced")})]})),(0,e.jsx)(V.Z,{style:{margin:0}}),(0,e.jsx)(At,{appId:t,protocolEndpoint:P,collapsed:!0})]})})},vs=function(r){var n=r.app;return(0,e.jsxs)(e.Fragment,{children:[n.type===se.pR.CUSTOM_MADE&&(0,e.jsx)(ta,{app:n}),n.type===se.pR.STANDARD&&(0,e.jsx)(fs,{app:n})]})},hs=vs,gs=function(r){var n=r.appId,t=(0,i.useState)(!0),a=B()(t,2),c=a[0],l=a[1],s=(0,i.useState)(),o=B()(s,2),d=o[0],u=o[1];return(0,ce.Z)(L()(h()().mark(function p(){var w,y,F;return h()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return l(!0),$.next=3,(0,Q.Mq)(n);case 3:w=$.sent,y=w.result,F=w.success,F&&y&&u(y),l(!1);case 8:case"end":return $.stop()}},p)})),[]),(0,e.jsx)(Gr.Z,{title:"\u5355\u70B9\u767B\u5F55",style:{height:"calc(100vh - 190px)",overflow:"auto"},bodyStyle:{height:"100%"},headerBordered:!0,children:(0,e.jsxs)(ct.Z,{loading:c,active:!0,paragraph:{rows:5},children:[(d==null?void 0:d.protocol)===se.gD.SAML2&&(0,e.jsx)(hs,{app:d}),(d==null?void 0:d.protocol)===se.gD.CAS&&(0,e.jsx)(Ln,{app:d}),(d==null?void 0:d.protocol)===se.gD.JWT&&(0,e.jsx)(Kn,{app:d}),(d==null?void 0:d.protocol)===se.gD.OIDC&&(0,e.jsx)(qn,{app:d}),(d==null?void 0:d.protocol)===se.gD.FORM&&(0,e.jsx)(zn,{app:d})]})})},Cs=qe.ZP.ConfigContext,ys=function(n){var t,a,c,l,s,o,d,u,p,w,y,F,O,$,P=n.prefixCls,g=n.antCls;return $={},re()($,"".concat(P),(F={},re()(F,"&-main",{display:"flex"}),re()(F,"&-left",re()({minHeight:"100%",overflow:"auto",marginRight:n.margin,width:"200px"},"&-menu",(y={height:"calc(100vh - 190px)"},re()(y,"&".concat(g,"-menu-light").concat(g,"-menu-root").concat(g,"-menu-inline"),{"border-inline-end":"none"}),re()(y,"&".concat(g,"-menu-light:not(").concat(g,"-menu-horizontal) ").concat(g,"-menu-item-selected"),{"background-color":(t=n.layout)===null||t===void 0||(a=t.sider)===null||a===void 0?void 0:a.colorBgMenuItemSelected,color:(c=n.layout)===null||c===void 0||(l=c.sider)===null||l===void 0?void 0:l.colorTextMenuSelected}),re()(y,"&".concat(g,"-menu-light:not(").concat(g,"-menu-horizontal) ").concat(g,"-menu-item:not(").concat(g,"-menu-item-selected):active"),{"background-color":(s=n.layout)===null||s===void 0||(o=s.sider)===null||o===void 0?void 0:o.colorBgMenuItemSelected,color:(d=n.layout)===null||d===void 0||(u=d.sider)===null||u===void 0?void 0:u.colorTextMenuActive}),re()(y,"&".concat(g,"-menu-light ").concat(g,"-menu-submenu-selected >").concat(g,"-menu-submenu-title"),{color:(p=n.layout)===null||p===void 0||(w=p.sider)===null||w===void 0?void 0:w.colorTextMenuSelected}),y))),re()(F,"&-right",{flex:1,minHeight:"100%",overflow:"auto"}),F)),re()($,"@media screen and (max-width: ".concat(n.screenXL,"px)"),re()({},"".concat(P),(O={},re()(O,"&-main",{flexDirection:"column"}),re()(O,"&-left",re()({width:"100%",border:"none",marginRight:0,marginBottom:n.margin},"&-menu",{height:"auto"})),O))),$};function xs(r){var n=(0,i.useContext)(Cs),t=n.getPrefixCls,a=".".concat(t());return(0,Be.Xj)("AppConfig",function(c){var l=N()(N()({},c),{},{prefixCls:".".concat(r),antCls:a});return[ys(l)]})}var Ar="app-config",bs=function(){var r=(0,i.useState)(),n=B()(r,2),t=n[0],a=n[1],c=(0,i.useState)(),l=B()(c,2),s=l[0],o=l[1],d=(0,Vr.useLocation)(),u=xs(Ar),p=u.wrapSSR,w=u.hashId,y=(0,i.useState)({mode:"inline"}),F=B()(y,2),O=F[0],$=F[1],P=(0,i.useRef)(),g=function(){requestAnimationFrame(function(){if(P.current){var b="inline";window.innerWidth<1200&&(b="horizontal"),$(N()(N()({},O),{},{mode:b}))}})};(0,i.useLayoutEffect)(function(){return P.current&&(window.addEventListener("resize",g),g()),function(){window.removeEventListener("resize",g)}},[]);var j=Dr.Z.parse(d.search),v=j,Z=v.type,f=v.id,S=v.name,x=v.protocol,A=[{key:de.BASIC,label:"\u57FA\u672C\u914D\u7F6E",icon:i.createElement(function(){return(0,e.jsx)(Je,{})})},{key:de.LOGIN_ACCESS,label:"\u767B\u5F55\u8BBF\u95EE",icon:i.createElement(function(){return(0,e.jsx)(zr,{})}),children:[{key:de.PROTOCOL_CONFIG,label:"\u5355\u70B9\u767B\u5F55"}].concat(ee()(!x||x===se.gD.OIDC?[]:[{key:de.APP_ACCOUNT,label:"\u5E94\u7528\u8D26\u6237"}]),[{key:de.ACCESS_POLICY,label:"\u8BBF\u95EE\u6388\u6743"}])},{key:de.ACCOUNT_SYNC,label:"\u8D26\u6237\u540C\u6B65",icon:i.createElement(function(){return(0,e.jsx)(jr.Z,{})})},{key:de.APP_PERMISSION,label:"\u6743\u9650\u7BA1\u7406",icon:i.createElement(function(){return(0,e.jsx)(Pr.Z,{})}),children:[{key:de.PERMISSION_RESOURCE,label:"\u8D44\u6E90\u7BA1\u7406"},{key:de.PERMISSION_ROLE,label:"\u89D2\u8272\u7BA1\u7406"},{key:de.PERMISSION_POLICY,label:"\u6388\u6743\u7BA1\u7406"}]}];return(0,ce.Z)(L()(h()().mark(function C(){return h()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(!(!f||!x)){D.next=4;break}return Y.ZP.error("\u672A\u6307\u5B9A\u5E94\u7528"),Fe.m.push("/app"),D.abrupt("return");case 4:if(!(!Z||!(Z.toUpperCase()in de))){D.next=8;break}return a([de.PROTOCOL_CONFIG]),Fe.m.replace({pathname:d.pathname,search:Dr.Z.stringify({type:de.PROTOCOL_CONFIG,id:f,protocol:x,name:S})}),D.abrupt("return");case 8:a([Z]);case 9:case"end":return D.stop()}},C)})),[]),(0,ce.Z)(L()(h()().mark(function C(){return h()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:o(j.name);case 1:case"end":return D.stop()}},C)})),[d]),p((0,e.jsx)(Xe._z,{title:s,style:{overflow:"hidden"},onBack:function(){Fe.m.push("/app")},children:(0,e.jsx)(wr.f,{children:(0,e.jsxs)("div",{className:he()("".concat(Ar,"-main"),w),ref:function(b){b&&(P.current=b)},children:[(0,e.jsx)("div",{className:he()("".concat(Ar,"-left"),w),children:(0,e.jsx)(Zr.Z,{mode:O.mode,selectedKeys:t,className:he()("".concat(Ar,"-left-menu"),w),items:A,onSelect:function(b){var D=b.selectedKeys;a(D),Fe.m.replace({pathname:d.pathname,search:Dr.Z.stringify({type:D==null?void 0:D[0],id:f,protocol:x,name:S})})}})}),(0,e.jsxs)("div",{className:he()("".concat(Ar,"-right"),w),children:[(t==null?void 0:t[0])===de.BASIC&&(0,e.jsx)(un,{appId:f}),(t==null?void 0:t[0])===de.PROTOCOL_CONFIG&&(0,e.jsx)(gs,{appId:f}),(t==null?void 0:t[0])===de.APP_ACCOUNT&&(0,e.jsx)(an,{appId:f,protocol:x}),(t==null?void 0:t[0])===de.ACCESS_POLICY&&(0,e.jsx)(en,{appId:f}),(t==null?void 0:t[0])===de.ACCOUNT_SYNC&&(0,e.jsx)(rn,{}),(t==null?void 0:t[0])===de.PERMISSION_RESOURCE&&(0,e.jsx)(Fn,{appId:f}),(t==null?void 0:t[0])===de.PERMISSION_ROLE&&(0,e.jsx)(Dn,{appId:f}),(t==null?void 0:t[0])===de.PERMISSION_POLICY&&(0,e.jsx)(gn,{appId:f})]})]})})}))},Es=bs},10255:function(Ze){function pe(m){if(m==null)throw new TypeError("Cannot destructure "+m)}Ze.exports=pe,Ze.exports.__esModule=!0,Ze.exports.default=Ze.exports},80840:function(Ze,pe,m){"use strict";m.d(pe,{DS:function(){return Kr}});var J=m(53441).lW;const h="3.7.5",ie=h,L=typeof atob=="function",ue=typeof btoa=="function",ee=typeof J=="function",me=typeof TextDecoder=="function"?new TextDecoder:void 0,N=typeof TextEncoder=="function"?new TextEncoder:void 0,Ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",B=Array.prototype.slice.call(Ee),Fe=(R=>{let k={};return R.forEach((V,Ie)=>k[V]=Ie),k})(B),fe=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,i=String.fromCharCode.bind(String),Ae=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):R=>new Uint8Array(Array.prototype.slice.call(R,0)),Oe=R=>R.replace(/=/g,"").replace(/[+\/]/g,k=>k=="+"?"-":"_"),ye=R=>R.replace(/[^A-Za-z0-9\+\/]/g,""),Ne=R=>{let k,V,Ie,re,Be="";const qe=R.length%3;for(let pr=0;pr<R.length;){if((V=R.charCodeAt(pr++))>255||(Ie=R.charCodeAt(pr++))>255||(re=R.charCodeAt(pr++))>255)throw new TypeError("invalid character found");k=V<<16|Ie<<8|re,Be+=B[k>>18&63]+B[k>>12&63]+B[k>>6&63]+B[k&63]}return qe?Be.slice(0,qe-3)+"===".substring(qe):Be},Je=ue?R=>btoa(R):ee?R=>J.from(R,"binary").toString("base64"):Ne,Ye=ee?R=>J.from(R).toString("base64"):R=>{let V=[];for(let Ie=0,re=R.length;Ie<re;Ie+=4096)V.push(i.apply(null,R.subarray(Ie,Ie+4096)));return Je(V.join(""))},ke=(R,k=!1)=>k?Oe(Ye(R)):Ye(R),hr=R=>{if(R.length<2){var k=R.charCodeAt(0);return k<128?R:k<2048?i(192|k>>>6)+i(128|k&63):i(224|k>>>12&15)+i(128|k>>>6&63)+i(128|k&63)}else{var k=65536+(R.charCodeAt(0)-55296)*1024+(R.charCodeAt(1)-56320);return i(240|k>>>18&7)+i(128|k>>>12&63)+i(128|k>>>6&63)+i(128|k&63)}},zr=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,jr=R=>R.replace(zr,hr),Pr=ee?R=>J.from(R,"utf8").toString("base64"):N?R=>Ye(N.encode(R)):R=>Je(jr(R)),Xe=(R,k=!1)=>k?Oe(Pr(R)):Pr(R),wr=R=>Xe(R,!0),ce=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Y=R=>{switch(R.length){case 4:var k=(7&R.charCodeAt(0))<<18|(63&R.charCodeAt(1))<<12|(63&R.charCodeAt(2))<<6|63&R.charCodeAt(3),V=k-65536;return i((V>>>10)+55296)+i((V&1023)+56320);case 3:return i((15&R.charCodeAt(0))<<12|(63&R.charCodeAt(1))<<6|63&R.charCodeAt(2));default:return i((31&R.charCodeAt(0))<<6|63&R.charCodeAt(1))}},Zr=R=>R.replace(ce,Y),sr=R=>{if(R=R.replace(/\s+/g,""),!fe.test(R))throw new TypeError("malformed base64.");R+="==".slice(2-(R.length&3));let k,V="",Ie,re;for(let Be=0;Be<R.length;)k=Fe[R.charAt(Be++)]<<18|Fe[R.charAt(Be++)]<<12|(Ie=Fe[R.charAt(Be++)])<<6|(re=Fe[R.charAt(Be++)]),V+=Ie===64?i(k>>16&255):re===64?i(k>>16&255,k>>8&255):i(k>>16&255,k>>8&255,k&255);return V},gr=L?R=>atob(ye(R)):ee?R=>J.from(R,"base64").toString("binary"):sr,e=ee?R=>Ae(J.from(R,"base64")):R=>Ae(gr(R).split("").map(k=>k.charCodeAt(0))),Ir=R=>e(Cr(R)),Qr=ee?R=>J.from(R,"base64").toString("utf8"):me?R=>me.decode(e(R)):R=>Zr(gr(R)),Cr=R=>ye(R.replace(/[-_]/g,k=>k=="-"?"+":"/")),lr=R=>Qr(Cr(R)),je=R=>{if(typeof R!="string")return!1;const k=R.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(k)||!/[^\s0-9a-zA-Z\-_]/.test(k)},Pe=R=>({value:R,enumerable:!1,writable:!0,configurable:!0}),Rr=function(){const R=(k,V)=>Object.defineProperty(String.prototype,k,Pe(V));R("fromBase64",function(){return lr(this)}),R("toBase64",function(k){return Xe(this,k)}),R("toBase64URI",function(){return Xe(this,!0)}),R("toBase64URL",function(){return Xe(this,!0)}),R("toUint8Array",function(){return Ir(this)})},yr=function(){const R=(k,V)=>Object.defineProperty(Uint8Array.prototype,k,Pe(V));R("toBase64",function(k){return ke(this,k)}),R("toBase64URI",function(){return ke(this,!0)}),R("toBase64URL",function(){return ke(this,!0)})},Kr={version:h,VERSION:ie,atob:gr,atobPolyfill:sr,btoa:Je,btoaPolyfill:Ne,fromBase64:lr,toBase64:Xe,encode:Xe,encodeURI:wr,encodeURL:wr,utob:jr,btou:Zr,decode:lr,isValid:je,fromUint8Array:ke,toUint8Array:Ir,extendString:Rr,extendUint8Array:yr,extendBuiltins:()=>{Rr(),yr()}}}}]);
