/*
 * eiam-console - Employee Identity and Access Management Program
 * Copyright Â© 2020-2023 TopIAM (support@topiam.cn)
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
(self.webpackChunktopiam_console=self.webpackChunktopiam_console||[]).push([[724],{29113:function(X,D,r){"use strict";r.d(D,{Z:function(){return O}});var h=r(86855),m=r(79685),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M811.4 368.9C765.6 248 648.9 162 512.2 162S258.8 247.9 213 368.8C126.9 391.5 63.5 470.2 64 563.6 64.6 668 145.6 752.9 247.6 762c4.7.4 8.7-3.3 8.7-8v-60.4c0-4-3-7.4-7-7.9-27-3.4-52.5-15.2-72.1-34.5-24-23.5-37.2-55.1-37.2-88.6 0-28 9.1-54.4 26.2-76.4 16.7-21.4 40.2-36.9 66.1-43.7l37.9-10 13.9-36.7c8.6-22.8 20.6-44.2 35.7-63.5 14.9-19.2 32.6-36 52.4-50 41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.3c19.9 14 37.5 30.8 52.4 50 15.1 19.3 27.1 40.7 35.7 63.5l13.8 36.6 37.8 10c54.2 14.4 92.1 63.7 92.1 120 0 33.6-13.2 65.1-37.2 88.6-19.5 19.2-44.9 31.1-71.9 34.5-4 .5-6.9 3.9-6.9 7.9V754c0 4.7 4.1 8.4 8.8 8 101.7-9.2 182.5-94 183.2-198.2.6-93.4-62.7-172.1-148.6-194.9z"}},{tag:"path",attrs:{d:"M376.9 656.4c1.8-33.5 15.7-64.7 39.5-88.6 25.4-25.5 60-39.8 96-39.8 36.2 0 70.3 14.1 96 39.8 1.4 1.4 2.7 2.8 4.1 4.3l-25 19.6a8 8 0 003 14.1l98.2 24c5 1.2 9.9-2.6 9.9-7.7l.5-101.3c0-6.7-7.6-10.5-12.9-6.3L663 532.7c-36.6-42-90.4-68.6-150.5-68.6-107.4 0-195 85.1-199.4 191.7-.2 4.5 3.4 8.3 8 8.3H369c4.2-.1 7.7-3.4 7.9-7.7zM703 664h-47.9c-4.2 0-7.7 3.3-8 7.6-1.8 33.5-15.7 64.7-39.5 88.6-25.4 25.5-60 39.8-96 39.8-36.2 0-70.3-14.1-96-39.8-1.4-1.4-2.7-2.8-4.1-4.3l25-19.6a8 8 0 00-3-14.1l-98.2-24c-5-1.2-9.9 2.6-9.9 7.7l-.4 101.4c0 6.7 7.6 10.5 12.9 6.3l23.2-18.2c36.6 42 90.4 68.6 150.5 68.6 107.4 0 195-85.1 199.4-191.7.2-4.5-3.4-8.3-8-8.3z"}}]},name:"cloud-sync",theme:"outlined"},n=A,S=r(20165),v=function(g,x){return m.createElement(S.Z,(0,h.Z)((0,h.Z)({},g),{},{ref:x,icon:n}))};v.displayName="CloudSyncOutlined";var O=m.forwardRef(v)},25846:function(X,D,r){"use strict";r.d(D,{Z:function(){return O}});var h=r(86855),m=r(79685),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},n=A,S=r(20165),v=function(g,x){return m.createElement(S.Z,(0,h.Z)((0,h.Z)({},g),{},{ref:x,icon:n}))};v.displayName="ExclamationCircleOutlined";var O=m.forwardRef(v)},31632:function(X,D,r){"use strict";var h=r(86855),m=r(5375),A=r(41572),n=r(98879),S=r(79685),v=r(26275),O=r(4847),c=r(63342),g=["options","fieldProps","proFieldProps","valueEnum"],x=S.forwardRef(function(E,B){var L=E.options,ee=E.fieldProps,ue=E.proFieldProps,re=E.valueEnum,oe=(0,m.Z)(E,g);return(0,c.jsx)(O.Z,(0,h.Z)({ref:B,valueType:"checkbox",valueEnum:(0,A.h)(re,void 0),fieldProps:(0,h.Z)({options:L},ee),lightProps:(0,h.Z)({labelFormatter:function(){return(0,c.jsx)(O.Z,(0,h.Z)({ref:B,valueType:"checkbox",mode:"read",valueEnum:(0,A.h)(re,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,h.Z)({options:L},ee),proFieldProps:ue},oe))}},oe.lightProps),proFieldProps:ue},oe))}),k=S.forwardRef(function(E,B){var L=E.fieldProps,ee=E.children;return(0,c.jsx)(n.Z,(0,h.Z)((0,h.Z)({ref:B},L),{},{children:ee}))}),V=(0,v.G)(k,{valuePropName:"checked"}),I=V;I.Group=x,D.Z=I},98597:function(X,D,r){"use strict";var h=r(86855),m=r(5375),A=r(79685),n=r(4847),S=r(63342),v=["fieldProps","min","proFieldProps","max"],O=function(x,k){var V=x.fieldProps,I=x.min,E=x.proFieldProps,B=x.max,L=(0,m.Z)(x,v);return(0,S.jsx)(n.Z,(0,h.Z)({valueType:"digit",fieldProps:(0,h.Z)({min:I,max:B},V),ref:k,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:E},L))},c=A.forwardRef(O);D.Z=c},41326:function(X,D,r){"use strict";var h=r(86855),m=r(5375),A=r(41572),n=r(69889),S=r(79685),v=r(26275),O=r(4847),c=r(63342),g=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],x=S.forwardRef(function(E,B){var L=E.fieldProps,ee=E.options,ue=E.radioType,re=E.layout,oe=E.proFieldProps,ve=E.valueEnum,me=(0,m.Z)(E,g);return(0,c.jsx)(O.Z,(0,h.Z)((0,h.Z)({valueType:ue==="button"?"radioButton":"radio",ref:B,valueEnum:(0,A.h)(ve,void 0)},me),{},{fieldProps:(0,h.Z)({options:ee,layout:re},L),proFieldProps:oe,filedConfig:{customLightMode:!0}}))}),k=S.forwardRef(function(E,B){var L=E.fieldProps,ee=E.children;return(0,c.jsx)(n.ZP,(0,h.Z)((0,h.Z)({},L),{},{ref:B,children:ee}))}),V=(0,v.G)(k,{valuePropName:"checked",ignoreWidth:!0}),I=V;I.Group=x,I.Button=n.ZP.Button,I.displayName="ProFormComponent",D.Z=I},25051:function(X,D,r){"use strict";var h=r(86855),m=r(5375),A=r(79685),n=r(4847),S=r(63342),v=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],O=A.forwardRef(function(c,g){var x=c.fieldProps,k=c.unCheckedChildren,V=c.checkedChildren,I=c.proFieldProps,E=(0,m.Z)(c,v);return(0,S.jsx)(n.Z,(0,h.Z)({valueType:"switch",fieldProps:(0,h.Z)({unCheckedChildren:k,checkedChildren:V},x),ref:g,valuePropName:"checked",proFieldProps:I,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},E))});D.Z=O},61872:function(X,D,r){"use strict";var h=r(86855),m=r(5375),A=r(79685),n=r(4847),S=r(63342),v=["fieldProps","proFieldProps"],O=["fieldProps","proFieldProps"],c="text",g=function(I){var E=I.fieldProps,B=I.proFieldProps,L=(0,m.Z)(I,v);return(0,S.jsx)(n.Z,(0,h.Z)({valueType:c,fieldProps:E,filedConfig:{valueType:c},proFieldProps:B},L))},x=function(I){var E=I.fieldProps,B=I.proFieldProps,L=(0,m.Z)(I,O);return(0,S.jsx)(n.Z,(0,h.Z)({valueType:"password",fieldProps:E,proFieldProps:B,filedConfig:{valueType:c}},L))},k=g;k.Password=x,k.displayName="ProFormComponent",D.Z=k},98289:function(X,D,r){"use strict";r.r(D),r.d(D,{default:function(){return _r}});var h=r(76091),m=r.n(h),A=r(84019),n=r.n(A),S=r(32061),v=r.n(S),O=r(7863),c=r.n(O),g=r(25830),x=r(59251),k=r(93864),V=r(50435),I=r(90649),E=r(49678),B=r(21843),L=r(53425),ee=r(78035),ue=r(15457),re=r(92479),oe=r(96845),ve=r(81262),me=r(97207),f=r(79685),t=r(61872),M=r(70453),P;(function(l){l.config="config",l.sync_history="sync-history",l.event_record="event-record"})(P||(P={}));var s;(function(l){l.dingtalk="dingtalk",l.wework="wechat_work",l.feishu="feishu"})(s||(s={}));var p;(function(l){l.period="period",l.timed="timed"})(p||(p={}));var Q={labelCol:{span:5},wrapperCol:{span:15}},d={appId:["basicConfig","appId"],appKey:["basicConfig","appKey"],corpId:["basicConfig","corpId"],appSecret:["basicConfig","appSecret"],secret:["basicConfig","secret"],callbackUrl:["basicConfig","callbackUrl"]},ie=r(87101),e=r(63342),te=function(i){var y=i.configured,u=i.onConfigValidator,C=i.formRef,b=i.basicConfigRef;(0,f.useEffect)(function(){},[y]);var Z=(0,f.useCallback)(v()(n()().mark(function K(){var a,j;return n()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return a=C==null?void 0:C.current,o.prev=1,o.next=4,a==null?void 0:a.validateFields([d.corpId,d.appKey,d.appSecret]);case 4:return o.next=6,u({provider:s.dingtalk,corpId:a==null?void 0:a.getFieldValue(d.corpId),appKey:a==null?void 0:a.getFieldValue(d.appKey),appSecret:a==null?void 0:a.getFieldValue(d.appSecret)});case 6:if(j=o.sent,j){o.next=12;break}return a==null||a.setFields([{name:d.corpId,errors:["\u6D4B\u8BD5\u8FDE\u63A5\u5931\u8D25\uFF0C\u8BF7\u6838\u5B9E\u53C2\u6570\u4FE1\u606F"]}]),a==null||a.setFields([{name:d.appKey,errors:["\u6D4B\u8BD5\u8FDE\u63A5\u5931\u8D25\uFF0C\u8BF7\u6838\u5B9E\u53C2\u6570\u4FE1\u606F"]}]),a==null||a.setFields([{name:d.appSecret,errors:["\u6D4B\u8BD5\u8FDE\u63A5\u5931\u8D25\uFF0C\u8BF7\u6838\u5B9E\u53C2\u6570\u4FE1\u606F"]}]),o.abrupt("return",!1);case 12:return re.ZP.success("\u6D4B\u8BD5\u6210\u529F"),o.abrupt("return",!0);case 16:return o.prev=16,o.t0=o.catch(1),o.abrupt("return",!1);case 19:case"end":return o.stop()}},K,null,[[1,16]])})),[C,u]);return(0,f.useImperativeHandle)(b,function(){return{configValidator:Z}},[Z]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(t.Z,{name:d.corpId,label:"\u4F01\u4E1AID",placeholder:"\u8BF7\u8F93\u5165\u4F01\u4E1AID",extra:"\u4F60\u53EF\u4EE5\u5728\u9489\u9489\u5F00\u653E\u5E73\u53F0(https://open-dev.dingtalk.com/)\u9996\u9875\u53F3\u4E0A\u89D2\u83B7\u53D6\u4F01\u4E1A ID\uFF08CorpId\uFF09\u3002"}),(0,e.jsx)(t.Z,{name:d.appKey,label:"\u5E94\u7528\u5F00\u53D1Key",placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u5F00\u53D1Key",extra:"\u4F60\u53EF\u4EE5\u5728\u9489\u9489\u5F00\u653E\u5E73\u53F0(https://open-dev.dingtalk.com/)\u5E94\u7528\u8BE6\u60C5\u7684\u300C\u57FA\u7840\u4FE1\u606F\u300D\u9875\u9762\u83B7\u53D6 AppKey\u3002",rules:[{required:!0,message:"\u5E94\u7528\u5F00\u53D1Key\u4E3A\u5FC5\u586B\u9879"}]}),(0,e.jsx)(t.Z.Password,{name:d.appSecret,label:"\u5E94\u7528\u51ED\u8BC1\u5BC6\u94A5",placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u51ED\u8BC1\u5BC6\u94A5",extra:"\u4F60\u53EF\u4EE5\u5728\u9489\u9489\u5F00\u653E\u5E73\u53F0(https://open-dev.dingtalk.com/)\u5E94\u7528\u8BE6\u60C5\u7684\u300C\u57FA\u7840\u4FE1\u606F\u300D\u9875\u9762\u83B7\u53D6 AppSecret\u3002",fieldProps:{autoComplete:"new-password"},rules:[{required:!0,message:"\u5E94\u7528\u51ED\u8BC1\u5BC6\u94A5\u4E3A\u5FC5\u586B\u9879"}],addonAfter:(0,e.jsx)(ie.ZP,{type:"default",onClick:Z,children:"\u6D4B\u8BD5\u8FDE\u63A5"})}),(0,e.jsx)(t.Z.Password,{name:["basicConfig","aesKey"],label:"\u52A0\u5BC6AesKey",extra:"\u4F60\u53EF\u4EE5\u5728\u9489\u9489\u5F00\u653E\u5E73\u53F0(https://open-dev.dingtalk.com/)\u5E94\u7528\u8BE6\u60C5\u7684\u300C\u4E8B\u4EF6\u8BA2\u9605\u300D\u9875\u9762\u83B7\u53D6\u52A0\u5BC6 aes_key\u3002\u5982\u679C\u4F60\u9700\u8981\u5F00\u542F\u5B9E\u65F6\u540C\u6B65\uFF0C\u6B64\u53C2\u6570\u5FC5\u586B\u3002",fieldProps:{autoComplete:"new-password"}}),(0,e.jsx)(t.Z.Password,{name:["basicConfig","token"],label:"\u7B7E\u540DToken",extra:"\u4F60\u53EF\u4EE5\u5728\u9489\u9489\u5F00\u653E\u5E73\u53F0(https://open-dev.dingtalk.com/)\u5E94\u7528\u8BE6\u60C5\u7684\u300C\u4E8B\u4EF6\u8BA2\u9605\u300D\u9875\u9762\u83B7\u53D6\u7B7E\u540D token\u3002\u5982\u679C\u4F60\u9700\u8981\u5F00\u542F\u5B9E\u65F6\u540C\u6B65\uFF0C\u6B64\u53C2\u6570\u5FC5\u586B\u3002",fieldProps:{autoComplete:"new-password"}})]})},Y=te,Ee=function(i){var y=i.configured,u=i.formRef,C=i.basicConfigRef,b=i.onConfigValidator;(0,f.useEffect)(function(){},[y]);var Z=(0,f.useCallback)(v()(n()().mark(function K(){var a,j;return n()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return a=u==null?void 0:u.current,o.prev=1,o.next=4,a==null?void 0:a.validateFields([d.appId,d.appSecret]);case 4:return o.next=6,b({provider:s.feishu,appId:a==null?void 0:a.getFieldValue(d.appId),appSecret:a==null?void 0:a.getFieldValue(d.appSecret)});case 6:if(j=o.sent,j){o.next=11;break}return a==null||a.setFields([{name:d.appId,errors:["\u6D4B\u8BD5\u8FDE\u63A5\u5931\u8D25\uFF0C\u8BF7\u6838\u5B9E\u53C2\u6570\u4FE1\u606F"]}]),a==null||a.setFields([{name:d.appSecret,errors:["\u6D4B\u8BD5\u8FDE\u63A5\u5931\u8D25\uFF0C\u8BF7\u6838\u5B9E\u53C2\u6570\u4FE1\u606F"]}]),o.abrupt("return",!1);case 11:return o.abrupt("return",!0);case 14:return o.prev=14,o.t0=o.catch(1),o.abrupt("return",!1);case 17:case"end":return o.stop()}},K,null,[[1,14]])})),[u,b]);return(0,f.useImperativeHandle)(C,function(){return{configValidator:Z}},[Z]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(t.Z,{name:d.appId,label:"\u5E94\u7528 ID",placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528ID",extra:"\u767B\u5F55\u5F00\u653E\u4E2D\u5FC3\uFF0C\u70B9\u51FB\u5E94\u7528 \uFF0C\u5728\u51ED\u8BC1\u4E0E\u57FA\u7840\u4FE1\u606F\u9875\u9762\u67E5\u770BAPP ID\u3002",rules:[{required:!0,message:"\u5E94\u7528ID\u4E3A\u5FC5\u586B\u9879"}]}),(0,e.jsx)(t.Z.Password,{name:d.appSecret,label:"\u5E94\u7528\u51ED\u8BC1\u5BC6\u94A5",placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u51ED\u8BC1\u5BC6\u94A5",extra:"\u767B\u5F55\u5F00\u653E\u4E2D\u5FC3\uFF0C\u70B9\u51FB\u5E94\u7528 \uFF0C\u5728\u51ED\u8BC1\u4E0E\u57FA\u7840\u4FE1\u606F\u9875\u9762\u67E5\u770B APP Secret\u3002",fieldProps:{autoComplete:"new-password"},rules:[{required:!0,message:"\u5E94\u7528\u51ED\u8BC1\u5BC6\u94A5\u4E3A\u5FC5\u586B\u9879"}],addonAfter:(0,e.jsx)(ie.ZP,{type:"default",onClick:Z,children:"\u6D4B\u8BD5\u8FDE\u63A5"})}),(0,e.jsx)(t.Z.Password,{name:["basicConfig","encryptKey"],label:"EncryptKey",extra:"\u98DE\u4E66\u4E8B\u4EF6\u8BA2\u9605\u7684 EncryptKey\uFF0C\u53EF\u4EE5\u5728\u98DE\u4E66\u5F00\u653E\u5E73\u53F0\u5E94\u7528\u8BE6\u60C5\u7684\u300C\u4E8B\u4EF6\u8BA2\u9605\u300D\u9875\u9762\u83B7\u53D6\u3002\u5982\u679C\u4F60\u9700\u8981\u5F00\u542F\u5B9E\u65F6\u540C\u6B65\uFF0C\u6B64\u53C2\u6570\u5FC5\u586B\u3002",fieldProps:{autoComplete:"new-password"}}),(0,e.jsx)(t.Z.Password,{name:["basicConfig","verificationToken"],label:"VerificationToken",extra:"\u98DE\u4E66\u4E8B\u4EF6\u8BA2\u9605\u7684 VerificationToken\uFF0C\u53EF\u4EE5\u5728\u98DE\u4E66\u5F00\u653E\u5E73\u53F0\u5E94\u7528\u8BE6\u60C5\u7684\u300C\u4E8B\u4EF6\u8BA2\u9605\u300D\u9875\u9762\u83B7\u53D6\u3002\u5982\u679C\u4F60\u9700\u8981\u5F00\u542F\u5B9E\u65F6\u540C\u6B65\uFF0C\u6B64\u53C2\u6570\u5FC5\u586B\u3002",fieldProps:{autoComplete:"new-password"}})]})},de=Ee,xe=function(i){var y=i.configured,u=i.formRef,C=i.onConfigValidator,b=i.basicConfigRef;(0,f.useEffect)(function(){},[y]);var Z=(0,f.useCallback)(v()(n()().mark(function K(){var a,j;return n()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return a=u==null?void 0:u.current,o.prev=1,a==null||a.validateFields([d.corpId,d.corpId]),o.next=5,C({corpId:a==null?void 0:a.getFieldValue(d.corpId),secret:a==null?void 0:a.getFieldValue(d.secret),provider:s.wework});case 5:if(j=o.sent,j){o.next=10;break}return a==null||a.setFields([{name:d.corpId,errors:["\u6D4B\u8BD5\u8FDE\u63A5\u5931\u8D25\uFF0C\u8BF7\u6838\u5B9E\u53C2\u6570\u4FE1\u606F"]}]),a==null||a.setFields([{name:d.secret,errors:["\u6D4B\u8BD5\u8FDE\u63A5\u5931\u8D25\uFF0C\u8BF7\u6838\u5B9E\u53C2\u6570\u4FE1\u606F"]}]),o.abrupt("return",!1);case 10:return o.abrupt("return",!0);case 13:return o.prev=13,o.t0=o.catch(1),o.abrupt("return",!1);case 16:case"end":return o.stop()}},K,null,[[1,13]])})),[u,C]);return(0,f.useImperativeHandle)(b,function(){return{configValidator:Z}},[Z]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(t.Z,{name:d.corpId,label:"\u4F01\u4E1A ID",placeholder:"\u8BF7\u8F93\u5165\u4F01\u4E1A ID\uFF08CorpId\uFF09",extra:"\u4F60\u53EF\u4EE5\u5728\u4F01\u4E1A\u5FAE\u4FE1\u540E\u53F0\uFF08https://work.weixin.qq.com/\uFF09\u300C\u6211\u7684\u4F01\u4E1A\u300D-\u300C\u4F01\u4E1A\u4FE1\u606F\u300D\u9875\u9762\u83B7\u53D6\u4F01\u4E1A ID\uFF08CorpId\uFF09\u3002",rules:[{required:!0,message:"\u4F01\u4E1A ID\uFF08CorpId\uFF09\u4E3A\u5FC5\u586B\u9879"}]}),(0,e.jsx)(t.Z.Password,{name:d.secret,label:"\u5BC6\u94A5 Secret",placeholder:"\u8BF7\u8F93\u5165\u4F01\u4E1A\u5FAE\u4FE1\u901A\u8BAF\u5F55\u5BC6\u94A5 Secret",fieldProps:{autoComplete:"new-password"},rules:[{required:!0,message:"\u4F01\u4E1A\u5FAE\u4FE1\u901A\u8BAF\u5F55\u5BC6\u94A5 Secret\u4E3A\u5FC5\u586B\u9879"}],addonAfter:(0,e.jsx)(ie.ZP,{type:"default",onClick:Z,children:"\u6D4B\u8BD5\u8FDE\u63A5"})}),(0,e.jsx)(t.Z.Password,{name:["basicConfig","token"],label:"\u4E8B\u4EF6\u56DE\u8C03 Token",placeholder:"\u8BF7\u8F93\u5165\u4F01\u4E1A\u5FAE\u4FE1\u56DE\u8C03 Token",fieldProps:{autoComplete:"new-password"},extra:"\u4F60\u53EF\u4EE5\u5728\u4F01\u4E1A\u5FAE\u4FE1\u540E\u53F0\uFF08https://work.weixin.qq.com/\uFF09\u300C\u7BA1\u7406\u5DE5\u5177\u300D-\u300C\u901A\u8BAF\u5F55\u540C\u6B65\u300D\u9875\u9762\u70B9\u51FB\u300C\u8BBE\u7F6E\u63A5\u6536\u4E8B\u4EF6\u670D\u52A1\u5668\u300D\u6309\u94AE\uFF0C\u4E4B\u540E\u53EF\u4EE5\u83B7\u53D6\u5230\u6B64 Token\u3002\u5982\u679C\u4F60\u9700\u8981\u5F00\u542F\u5B9E\u65F6\u540C\u6B65\uFF0C\u6B64\u53C2\u6570\u5FC5\u586B\u3002"}),(0,e.jsx)(t.Z.Password,{name:["basicConfig","encodingAESKey"],label:"EncodingAESKey",placeholder:"\u8BF7\u8F93\u5165\u901A\u8BAF\u5F55\u4E8B\u4EF6\u540C\u6B65 EncodingAESKey",fieldProps:{autoComplete:"new-password"},extra:"\u4F60\u53EF\u4EE5\u5728\u4F01\u4E1A\u5FAE\u4FE1\u540E\u53F0\uFF08https://work.weixin.qq.com/\uFF09\u300C\u7BA1\u7406\u5DE5\u5177\u300D-\u300C\u901A\u8BAF\u5F55\u540C\u6B65\u300D\u9875\u9762\u70B9\u51FB\u300C\u8BBE\u7F6E\u63A5\u6536\u4E8B\u4EF6\u670D\u52A1\u5668\u300D\u6309\u94AE\uFF0C\u4E4B\u540E\u53EF\u4EE5\u83B7\u53D6\u5230\u6B64 EncodingAESKey\u3002\u5982\u679C\u4F60\u9700\u8981\u5F00\u542F\u5B9E\u65F6\u540C\u6B65\uFF0C\u6B64\u53C2\u6570\u5FC5\u586B\u3002"})]})},$e=xe,We=M.Z.Paragraph,Ze=function(l){var i=l.provider,y=l.configured,u=l.basicConfigRef,C=l.onConfigValidator,b=l.formRef;return(0,e.jsxs)(e.Fragment,{children:[i===s.dingtalk&&(0,e.jsx)(Y,{configured:y,basicConfigRef:u,onConfigValidator:C,formRef:b}),i===s.wework&&(0,e.jsx)($e,{configured:y,basicConfigRef:u,onConfigValidator:C,formRef:b}),i===s.feishu&&(0,e.jsx)(de,{configured:y,basicConfigRef:u,onConfigValidator:C,formRef:b}),(0,e.jsx)(t.Z,{label:"\u56DE\u8C03\u5730\u5740",name:d.callbackUrl,proFieldProps:{render:function(K){return K&&(0,e.jsx)(We,{copyable:{text:K},style:{marginBottom:"0"},children:(0,e.jsx)("span",{dangerouslySetInnerHTML:{__html:"<span>".concat(K,"</span>")}})})}},readonly:!0,fieldProps:{autoComplete:"off"}})]})},ge=r(31632),ze=r(41326),le=r(67457),Ue=r(98597),ae=r(86855),Re=r(5375),Be=r(92762),Ae=r(9366),Me=r(4847),we=["fieldProps","proFieldProps"],Ne=["fieldProps","proFieldProps"],Fe="time",be=f.forwardRef(function(l,i){var y=l.fieldProps,u=l.proFieldProps,C=(0,Re.Z)(l,we),b=(0,f.useContext)(Ae.Z);return(0,e.jsx)(Me.Z,(0,ae.Z)({ref:i,fieldProps:(0,ae.Z)({getPopupContainer:b.getPopupContainer},y),valueType:"timeRange",proFieldProps:u,filedConfig:{valueType:"timeRange",lightFilterLabelFormatter:function(K){return(0,Be.c)(K,"HH:mm:SS")}}},C))}),yr=function(i){var y=i.fieldProps,u=i.proFieldProps,C=(0,Re.Z)(i,Ne),b=(0,f.useContext)(Ae.Z);return(0,e.jsx)(Me.Z,(0,ae.Z)({fieldProps:(0,ae.Z)({getPopupContainer:b.getPopupContainer},y),valueType:Fe,proFieldProps:u,filedConfig:{customLightMode:!0,valueType:Fe}},C))},tr=yr;tr.RangePicker=be;var Pr=tr,ar=r(10071),Le=r(23571),Er=function(l){var i=l.configured;return(0,f.useEffect)(function(){},[i]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ar.Z,{type:"info",banner:!0,showIcon:!0,description:"\u5B9A\u65F6\u914D\u7F6E\u5FC5\u987B\u540C\u65F6\u914D\u7F6E\u661F\u671F\u6570\u53CA\u6267\u884C\u65B9\u5F0F\u3002\u4F8B\uFF1A\u52FE\u9009\u5468\u4E8C\u5E76\u9009\u62E9\u6BCF\u96942\u5C0F\u65F6\u6267\u884C\u4E00\u6B21\u65F6\uFF0C\u8868\u793A\u5728\u6BCF\u4E2A\u5468\u4E8C\uFF0C\u6BCF\u96942\u5C0F\u65F6\u6267\u884C\u4E00\u6B21\u540C\u6B65\u3002"}),(0,e.jsx)("br",{}),(0,e.jsxs)(E.Z,{bordered:!0,headerBordered:!0,children:[(0,e.jsx)(ge.Z.Group,{name:["jobConfig","dayOfWeek"],options:[{label:"\u6BCF\u5929",value:"always"}],rules:[{required:!0,message:"\u8BE5\u9879\u4E3A\u5FC5\u9009\u9879"}]}),(0,e.jsx)(Le.Z,{}),(0,e.jsx)(ge.Z.Group,{name:["jobConfig","dayOfWeek"],rules:[{required:!0,message:"\u8BE5\u9879\u4E3A\u5FC5\u9009\u9879"}],options:[{label:"\u5468\u4E00",value:"monday"},{label:"\u5468\u4E8C",value:"tuesday"},{label:"\u5468\u4E09",value:"wednesday"},{label:"\u5468\u56DB",value:"thursday"},{label:"\u5468\u4E94",value:"friday"},{label:"\u5468\u516D",value:"saturday"},{label:"\u5468\u5929",value:"sunday"}]}),(0,e.jsx)(Le.Z,{}),(0,e.jsx)(ze.Z.Group,{name:["jobConfig","mode"],options:[{label:"\u5468\u671F\u6267\u884C",value:p.period},{label:"\u5B9A\u65F6\u6267\u884C",value:p.timed}],rules:[{required:!0,message:"\u8BF7\u914D\u7F6E\u6267\u884C\u65B9\u5F0F"}]}),(0,e.jsx)(le.Z,{name:["jobConfig","mode"],children:function(u){var C=u.jobConfig;return(C==null?void 0:C.mode)===p.period?(0,e.jsx)(Ue.Z,{min:1,max:24,name:["jobConfig","interval"],width:"xs",addonBefore:"\u6BCF\u9694",addonAfter:"\u5C0F\u65F6\u6267\u884C\u4E00\u6B21",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u95F4\u9694\u5C0F\u65F6"}]}):(C==null?void 0:C.mode)===p.timed?(0,e.jsx)(Pr,{addonBefore:"\u6267\u884C\u65F6\u95F4",width:"xs",name:["jobConfig","time"],rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6267\u884C\u65F6\u95F4"}]}):(0,e.jsx)(e.Fragment,{})}})]})]})},xr=r(84927),Fr=r(88978),nr=r(25051),br=r(10978),jr=function(l){var i=l.configured;(0,f.useEffect)(function(){},[i]);var y=(0,f.useState)([]),u=c()(y,2),C=u[0],b=u[1],Z=function(){var j=v()(n()().mark(function w(){var o,ne,se;return n()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,(0,g.mB)();case 2:if(R.t0=R.sent,R.t0){R.next=5;break}R.t0={};case 5:o=R.t0,ne=o.success,se=o.result,ne&&se&&b([se]);case 9:case"end":return R.stop()}},w)}));return function(){return j.apply(this,arguments)}}(),K=function(){var j=v()(n()().mark(function w(o){var ne;return n()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,g.z3)(o);case 2:return ne=_.sent,ne.success&&b(function(R){return(0,xr.J)(R,o,ne.result)}),_.abrupt("return",Promise.resolve());case 5:case"end":return _.stop()}},w)}));return function(o){return j.apply(this,arguments)}}();(0,ue.Z)(v()(n()().mark(function j(){return n()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Z();case 2:case"end":return o.stop()}},j)})),[]);var a=(0,e.jsxs)("span",{children:[(0,e.jsx)(e.Fragment,{children:"\u8EAB\u4EFD\u6E90\u7EC4\u7EC7\u540C\u6B65\u81F3 TopIAM \u540E\u7684\u7236\u7EA7\u7EC4\u7EC7\u3002"}),(0,e.jsx)("br",{}),(0,e.jsx)(e.Fragment,{children:"\u5982\u679C\u4E0D\u586B\uFF0C\u5C06\u81EA\u52A8\u521B\u5EFA\u9876\u5C42\u7EC4\u7EC7\u3002\u914D\u7F6E\u540E\u4E0D\u53EF\u66F4\u6539\u3002"})," "]});return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Le.Z,{orientation:"left",plain:!0,children:"\u7EC4\u7EC7\u76F8\u5173\u7B56\u7565"}),(0,e.jsx)(Fr.Z,{name:["strategyConfig","organization","targetId"],label:"\u76EE\u6807\u6839\u7EC4\u7EC7",extra:a,children:(0,e.jsx)(br.Z,{placeholder:"\u8BF7\u9009\u62E9\u76EE\u6807\u6839\u7EC4\u7EC7",allowClear:!0,labelInValue:!0,loadData:function(w){return K(w.id)},treeData:C,treeNodeFilterProp:"name",fieldNames:{label:"name",value:"id"}})}),(0,e.jsx)(Le.Z,{orientation:"left",plain:!0,children:"\u7528\u6237\u76F8\u5173\u7B56\u7565"}),(0,e.jsx)(t.Z.Password,{name:["strategyConfig","user","defaultPassword"],label:"\u9ED8\u8BA4\u5BC6\u7801",extra:"\u540C\u6B65\u8D26\u6237\u65F6\u7ED9\u8D26\u6237\u8BBE\u7F6E\u7684\u9ED8\u8BA4\u5BC6\u7801\uFF0C\u82E5\u4E0D\u8BBE\u7F6E\uFF0C\u5C06\u4F7F\u7528\u8BBE\u7F6E\u4E2D\u5BC6\u7801\u7B56\u7565\u968F\u673A\u751F\u6210\u3002",placeholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u5BC6\u7801",fieldProps:{autoComplete:"new-password"}}),(0,e.jsx)(nr.Z,{name:["strategyConfig","user","enabled"],label:"\u662F\u5426\u542F\u7528",initialValue:!0,extra:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{children:"\u9ED8\u8BA4\u542F\u7528\uFF0C\u9996\u6B21\u540C\u6B65\u7528\u6237\u65F6\uFF0C\u7528\u6237\u662F\u5426\u5728 TopIAM \u4E2D\u542F\u7528\u3002"}),(0,e.jsx)("br",{}),(0,e.jsx)("span",{style:{color:"red"},children:"\u6CE8\u610F\uFF1A\u8EAB\u4EFD\u6E90\u7528\u6237\u672A\u542F\u7528\u65F6\uFF0C\u5C06\u5DF2\u8EAB\u4EFD\u6E90\u4E3A\u51C6\u3002"})]})}),(0,e.jsx)(nr.Z,{name:["strategyConfig","user","emailNotify"],label:"\u90AE\u4EF6\u901A\u77E5",initialValue:!0,extra:"\u9ED8\u8BA4\u542F\u7528\uFF0C\u9996\u6B21\u540C\u6B65\u7528\u6237\u6210\u529F\u540E\uFF0C\u5C06\u53D1\u9001\u7535\u5B50\u90AE\u4EF6\uFF0C\u82E5\u6CA1\u6709\u83B7\u53D6\u5230\u90AE\u4EF6\u5730\u5740\uFF0C\u5C06\u65E0\u6CD5\u8FDB\u884C\u53D1\u9001\u3002"})]})},Ir={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},Sr=Ir,ke=r(20165),or=function(i,y){return f.createElement(ke.Z,(0,ae.Z)((0,ae.Z)({},i),{},{ref:y,icon:Sr}))};or.displayName="SyncOutlined";var Tr=f.forwardRef(or),Dr=r(29113),Ve=r(19904),ir=r(96597),ce=r(12715),Or=r(27101),Zr=r(39620),He=r.n(Zr),Rr=r(10255),Br=r.n(Rr),Ar={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},Mr=Ar,lr=function(i,y){return f.createElement(ke.Z,(0,ae.Z)((0,ae.Z)({},i),{},{ref:y,icon:Mr}))};lr.displayName="CheckCircleOutlined";var sr=f.forwardRef(lr),wr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"}},{tag:"path",attrs:{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"close-circle",theme:"outlined"},Lr=wr,ur=function(i,y){return f.createElement(ke.Z,(0,ae.Z)((0,ae.Z)({},i),{},{ref:y,icon:Lr}))};ur.displayName="CloseCircleOutlined";var dr=f.forwardRef(ur),cr=r(25846),fr=r(76505),Kr=r(34006),pr=r(18639),$r=fr.ZP.ConfigContext,Wr=function(l){var i=l.syncHistoryId,y=l.open,u=l.onClose,C=l.objectType,b=(0,f.useRef)(),Z=[{title:"\u52A8\u4F5C\u7C7B\u578B",dataIndex:"actionType",align:"center",width:80,ellipsis:!0,valueType:"select",valueEnum:{insert:{text:"\u65B0\u589E"},update:{text:"\u4FEE\u6539"},delete:{text:"\u5220\u9664"}}},{title:"\u5BF9\u8C61 ID",dataIndex:"objectId",ellipsis:!0,search:!1},{title:"\u5BF9\u8C61\u540D\u79F0",dataIndex:"objectName",ellipsis:!0,search:!1},{title:"\u63CF\u8FF0",dataIndex:"desc",ellipsis:!0,search:!1},{title:"\u72B6\u6001",dataIndex:"status",align:"center",valueType:"select",width:80,valueEnum:{success:{text:"\u6210\u529F"},fail:{text:"\u5931\u8D25"},skip:{text:"\u8DF3\u8FC7"}},renderText:function(j){return(0,e.jsxs)(e.Fragment,{children:[j==="success"&&(0,e.jsx)(ce.Z,{icon:(0,e.jsx)(sr,{}),color:"#87d068",children:"\u6210\u529F"}),j==="fail"&&(0,e.jsx)(ce.Z,{icon:(0,e.jsx)(dr,{}),color:"#e54545",children:"\u5931\u8D25"}),j==="skip"&&(0,e.jsx)(ce.Z,{icon:(0,e.jsx)(cr.Z,{}),color:"#faad14",children:"\u8DF3\u8FC7"})]})}}],K=(0,pr.l)(function(a){Br()(a);var j=(0,f.useContext)($r),w=j.getPrefixCls,o=".".concat(w());return He()({},"".concat(o,"-pro-card ").concat(o,"-pro-card-body"),{padding:"24px 0px 0px"})});return(0,e.jsx)(Kr.Z,{open:y,title:"\u8BE6\u60C5\u8BB0\u5F55",onClose:u,width:630,destroyOnClose:!0,bodyStyle:{paddingTop:0},children:(0,e.jsx)(Ve.Z,{actionRef:b,className:K,columns:Z,search:{filterType:"light"},params:{syncHistoryId:i,objectType:C},request:g.eU,rowKey:"id",pagination:{defaultPageSize:10,showQuickJumper:!1}})})},zr=Wr,Ur=function(l){var i=l.identitySourceId,y=(0,f.useRef)(),u=(0,f.useState)(!1),C=c()(u,2),b=C[0],Z=C[1],K=(0,f.useState)(),a=c()(K,2),j=a[0],w=a[1],o=(0,f.useState)(),ne=c()(o,2),se=ne[0],_=ne[1],R=[{title:"\u6279\u53F7",fixed:"left",width:100,dataIndex:"batch",align:"center",search:!1},{title:"\u89E6\u53D1\u7C7B\u578B",dataIndex:"triggerType",ellipsis:!0,filterSearch:!0,align:"center",valueType:"select",valueEnum:{manual:{text:"\u624B\u52A8\u89E6\u53D1"},job:{text:"\u4EFB\u52A1\u89E6\u53D1"}}},{title:"\u5BF9\u8C61\u7C7B\u578B",dataIndex:"objectType",align:"center",valueType:"select",ellipsis:!0,filterSearch:!0,valueEnum:{user:{text:"\u7528\u6237"},organization:{text:"\u7EC4\u7EC7"}}},{title:"\u521B\u5EFA\u6570\u91CF",dataIndex:"createdCount",search:!1},{title:"\u66F4\u65B0\u6570\u91CF",dataIndex:"updatedCount",search:!1},{title:"\u5220\u9664\u6570\u91CF",dataIndex:"deletedCount",search:!1},{title:"\u8DF3\u8FC7\u6570\u91CF",dataIndex:"skippedCount",search:!1},{title:"\u5F00\u59CB\u65F6\u95F4",dataIndex:"startTime",ellipsis:!0,search:!1,align:"center",valueType:"dateTime"},{title:"\u7ED3\u675F\u65F6\u95F4",dataIndex:"endTime",ellipsis:!0,search:!1,align:"center",valueType:"dateTime"},{title:"\u8017\u65F6",dataIndex:"spendTime",valueType:"second",search:!1},{title:"\u72B6\u6001",dataIndex:"status",filterSearch:!0,valueType:"select",width:100,valueEnum:{success:{text:"\u6210\u529F"},fail:{text:"\u5931\u8D25"},pending:{text:"\u540C\u6B65\u4E2D"}},renderText:function(pe){return(0,e.jsxs)(ir.Z,{children:[pe==="success"&&(0,e.jsx)(ce.Z,{color:"#87d068",children:"\u6210\u529F"}),pe==="fail"&&(0,e.jsx)(ce.Z,{color:"#e54545",children:"\u5931\u8D25"}),pe==="pending"&&(0,e.jsx)(ce.Z,{icon:(0,e.jsx)(Tr,{spin:!0}),color:"#1677ff",children:"\u540C\u6B65\u4E2D"})]})}},{title:"\u64CD\u4F5C",align:"center",valueType:"option",width:100,fixed:"right",render:function(pe,Ce){return[(0,e.jsx)("a",{target:"_blank",onClick:function(){w(Ce.id),Z(!0),_(Ce.objectType)},children:"\u8BE6\u60C5"},"details")]}}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ve.Z,{actionRef:y,columns:R,params:{identitySourceId:i},request:g.QA,rowKey:"id",pagination:{defaultPageSize:10,showQuickJumper:!0},scroll:{x:1300},search:{filterType:"light"},toolBarRender:function(){return[(0,e.jsx)(ie.ZP,{icon:(0,e.jsx)(Dr.Z,{}),type:"primary",onClick:function(){Or.Z.info({title:"\u4E00\u952E\u62C9\u53D6",width:500,onOk:function(){var Ce=v()(n()().mark(function Je(){var Se,q;return n()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return fe.next=2,(0,g.nv)(i);case 2:Se=fe.sent,q=Se.success,q&&(re.ZP.success("\u4EFB\u52A1\u89E6\u53D1\u6210\u529F"),window.setInterval(function(){var he;(he=y.current)===null||he===void 0||he.reload()},5e3));case 5:case"end":return fe.stop()}},Je)}));function Ie(){return Ce.apply(this,arguments)}return Ie}(),content:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(ir.Z,{direction:"vertical",children:[(0,e.jsx)("span",{children:"TopIAM \u5C06\u5168\u91CF\u62C9\u53D6\u8EAB\u4EFD\u6E90\u6388\u6743\u8303\u56F4\u5185\u90E8\u95E8\u548C\u8D26\u6237\uFF0C\u7F6E\u4E8E\u540C\u6B65\u76EE\u6807\u7EC4\u7EC7\u4E0B\u3002"}),(0,e.jsx)(ar.Z,{type:"info",banner:!0,showIcon:!1,description:"\u5DF2\u62C9\u53D6\u8FC7\u7684\u7EC4\u7EC7\u3001\u8D26\u6237\u4E0D\u4F1A\u91CD\u590D\u521B\u5EFA\uFF0C\u800C\u4F1A\u8986\u76D6\u66F4\u65B0\u3002\u53EF\u4EE5\u53CD\u590D\u89E6\u53D1\u62C9\u53D6\uFF0C\u5C06\u4E24\u4FA7\u6570\u636E\u62C9\u9F50\u3002"})]})}),okText:"\u786E\u8BA4",okType:"primary",centered:!1,maskClosable:!1,okCancel:!0})},children:"\u4E00\u952E\u62C9\u53D6"},"pull")]}}),j&&se&&(0,e.jsx)(zr,{open:b,syncHistoryId:j,objectType:se,onClose:function(){Z(!1)}})]})},Nr=Ur,kr=fr.ZP.ConfigContext;function Vr(){var l=(0,f.useContext)(kr),i=l.getPrefixCls,y=".".concat(i()),u=(0,pr.l)(function(){return He()({},"".concat(y,"-form-item"),He()({},"".concat(y,"-form-item-control-input"),{width:"100%"}))});return{className:u}}var Ge=r(18541),Hr=r(96104),Gr=function(l){var i=(0,f.useRef)(),y=l.identitySourceId,u=[{title:"\u52A8\u4F5C\u7C7B\u578B",dataIndex:"actionType",align:"center",ellipsis:!0,width:100,valueType:"select",valueEnum:{insert:{text:"\u65B0\u589E"},update:{text:"\u4FEE\u6539"},delete:{text:"\u5220\u9664"}}},{title:"\u5BF9\u8C61\u7C7B\u578B",dataIndex:"objectType",align:"center",valueType:"select",width:100,ellipsis:!0,filterSearch:!0,valueEnum:{user:{text:"\u7528\u6237"},organization:{text:"\u7EC4\u7EC7"}}},{title:"\u5BF9\u8C61 ID",dataIndex:"objectId",ellipsis:!0,search:!1},{title:"\u5BF9\u8C61\u540D\u79F0",dataIndex:"objectName",search:!1},{title:"\u4E8B\u4EF6\u65F6\u95F4",dataIndex:"eventTime",align:"center",search:!1,ellipsis:!0,valueType:"dateTime"},{title:"\u63CF\u8FF0",dataIndex:"desc",ellipsis:!0,search:!1},{title:"\u4E8B\u4EF6\u72B6\u6001",dataIndex:"status",align:"center",valueType:"select",width:80,valueEnum:{success:{text:"\u6210\u529F"},fail:{text:"\u5931\u8D25"},skip:{text:"\u8DF3\u8FC7"}},renderText:function(b){return(0,e.jsxs)(e.Fragment,{children:[b==="success"&&(0,e.jsx)(ce.Z,{icon:(0,e.jsx)(sr,{}),color:"#87d068",children:"\u6210\u529F"}),b==="fail"&&(0,e.jsx)(ce.Z,{icon:(0,e.jsx)(dr,{}),color:"#e54545",children:"\u5931\u8D25"}),b==="skip"&&(0,e.jsx)(ce.Z,{icon:(0,e.jsx)(cr.Z,{}),color:"#faad14",children:"\u8DF3\u8FC7"})]})}}];return(0,e.jsx)(Ve.Z,{actionRef:i,params:{identitySourceId:y},columns:u,rowKey:"id",search:{filterType:"light"},scroll:{x:900},pagination:{defaultPageSize:10,showQuickJumper:!1},request:g.mo,toolBarRender:function(){return[]}})},Jr=Gr,Xr=r(66939),Qr=r.n(Xr),Yr=function(){var l=(0,Hr.useLocation)(),i=Ge.Z.parse(l.search),y=i,u=y.id,C=i,b=C.tab,Z=i,K=Z.provider,a=(0,f.useState)(),j=c()(a,2),w=j[0],o=j[1],ne=(0,f.useState)(!1),se=c()(ne,2),_=se[0],R=se[1],je=(0,f.useState)(!1),pe=c()(je,2),Ce=pe[0],Ie=pe[1],Je=(0,f.useState)(),Se=c()(Je,2),q=Se[0],Xe=Se[1],fe=(0,f.useRef)(),he=(0,f.useRef)(),vr=(0,f.useRef)(),mr=(0,f.useRef)(),qr=(0,f.useState)(0),gr=c()(qr,2),et=gr[0],Cr=gr[1],rt=(0,f.useState)(!1),hr=c()(rt,2),Te=hr[0],tt=hr[1],at=Vr(),nt=at.className;(0,ee.Z)(v()(n()().mark(function U(){return n()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(u){F.next=4;break}return re.ZP.warning("\u8EAB\u4EFD\u6E90\u4E0D\u5B58\u5728"),x.m.push("/account/identity-source"),F.abrupt("return");case 4:if(b){F.next=8;break}return o(P.config),x.m.push({pathname:l.pathname,search:Ge.Z.stringify({tab:P.config,id:u})}),F.abrupt("return");case 8:o(b);case 9:case"end":return F.stop()}},U)}))),(0,ue.Z)(v()(n()().mark(function U(){var T,F,$;return n()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(!u){N.next=8;break}return R(!0),N.next=4,(0,g.bh)(u);case 4:T=N.sent,F=T.success,$=T.result,F&&$&&(Xe($),R(!1));case 8:case"end":return N.stop()}},U)})),[u]),(0,ue.Z)(v()(n()().mark(function U(){return n()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:b===P.config&&(Ie(!0),(0,g.$C)(u).then(function(){var $=v()(n()().mark(function z(N){var H,G,ye,Ke,W,Qe,Ye,J,De,_e,Oe,qe,er,rr;return n()().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:if(J=N.result,tt(J==null?void 0:J.configured),De=(H=J.strategyConfig)===null||H===void 0||(G=H.organization)===null||G===void 0?void 0:G.targetId,_e=J.strategyConfig,!(De&&J!==null&&J!==void 0&&J.configured)){Pe.next=11;break}return Pe.next=7,(0,g.Xu)(De);case 7:Oe=Pe.sent,qe={value:De,label:void 0},Oe&&Oe.success&&Oe.result&&(qe={value:De,label:Oe.result.name}),_e=m()(m()({},J.strategyConfig),{},{organization:m()(m()({},J.strategyConfig.organization),{},{targetId:qe})});case 11:(ye=fe.current)===null||ye===void 0||ye.setFieldsValue({basicConfig:m()({},J.basicConfig)}),(Ke=mr.current)===null||Ke===void 0||Ke.setFieldsValue({strategyConfig:m()({},_e)}),er=(W=J.jobConfig)===null||W===void 0?void 0:W.mode,rr=(Qe=J.jobConfig)===null||Qe===void 0?void 0:Qe.value,(Ye=vr.current)===null||Ye===void 0||Ye.setFieldsValue({jobConfig:m()(m()({},J.jobConfig),{},{interval:er===p.period?rr:void 0,time:er===p.timed?Qr()(rr,"HH:mm:ss"):void 0})}),Ie(!1);case 17:case"end":return Pe.stop()}},z)}));return function(z){return $.apply(this,arguments)}}()));case 1:case"end":return F.stop()}},U)})),[b]);var ot=function(){var U=v()(n()().mark(function T(F,$){var z,N;return n()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,(0,g.Iw)({id:$.id,name:$.name,remark:$.remark});case 2:if(z=G.sent,N=z.success,!N){G.next=8;break}return re.ZP.success("\u64CD\u4F5C\u6210\u529F"),Xe(m()({},$)),G.abrupt("return",Promise.resolve(!0));case 8:return G.abrupt("return",Promise.resolve(!1));case 9:case"end":return G.stop()}},T)}));return function(F,$){return U.apply(this,arguments)}}(),it=(0,e.jsx)(k.X.Consumer,{children:function(T){var F=T.isMobile;return _?(0,e.jsx)(oe.Z,{active:!0,paragraph:{rows:1}}):(0,e.jsxs)(V.vY,{size:"small",column:F?1:2,dataSource:m()({},q),editable:{onSave:ot},children:[(0,e.jsx)(V.vY.Item,{dataIndex:"name",label:"\u540D\u79F0"}),(0,e.jsx)(V.vY.Item,{dataIndex:"remark",label:"\u5907\u6CE8",valueType:"textarea",fieldProps:{rows:2,maxLength:20}})]})}});return(0,e.jsxs)(I._z,{onBack:function(){x.m.push("/account/identity-source")},title:_?(0,e.jsx)(oe.Z.Input,{style:{width:50},active:!0,size:"small"}):q==null?void 0:q.name,content:it,tabList:[{key:P.config,tab:"\u540C\u6B65\u914D\u7F6E"},{key:P.sync_history,tab:"\u540C\u6B65\u5386\u53F2"},{key:P.event_record,tab:"\u4E8B\u4EF6\u8BB0\u5F55"}],tabActiveKey:w,onTabChange:function(T){o(T),x.m.replace({pathname:l.pathname,search:Ge.Z.stringify({tab:T,id:u})})},children:[P.config===w&&(0,e.jsx)(E.Z,{children:(0,e.jsx)(ve.Z,{spinning:_,children:(0,e.jsxs)(B.L,{current:et,onCurrentChange:Cr,formProps:m()({layout:"horizontal"},Q),onFinish:function(){var U=v()(n()().mark(function T(F){var $,z,N,H,G,ye;return n()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.prev=0,R(!0),W.next=4,(0,g.NK)(m()(m()({id:u},(0,me.omit)(F,"strategyConfig")),{},{strategyConfig:m()(m()({},F.strategyConfig),{},{organization:{targetId:F==null||($=F.strategyConfig)===null||$===void 0||(z=$.organization)===null||z===void 0||(N=z.targetId)===null||N===void 0?void 0:N.value}})}));case 4:if(H=W.sent,G=H.result,ye=H.success,!(ye&&G)){W.next=13;break}return Cr(0),re.ZP.success("\u64CD\u4F5C\u6210\u529F"),W.next=12,(0,g.bh)(u);case 12:return W.abrupt("return");case 13:R(!1),W.next=18;break;case 16:W.prev=16,W.t0=W.catch(0);case 18:return W.prev=18,R(!1),W.finish(18);case 21:case"end":return W.stop()}},T,null,[[0,16,18,21]])}));return function(T){return U.apply(this,arguments)}}(),submitter:{render:function(T,F){return(0,e.jsx)(L.S,{children:F})}},children:[(0,e.jsx)(B.L.StepForm,{scrollToFirstError:!0,name:"base-config",title:"\u57FA\u672C\u914D\u7F6E",formRef:fe,className:nt,onFinish:v()(n()().mark(function U(){var T,F;return n()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return F=(T=he.current)===null||T===void 0?void 0:T.configValidator(),z.abrupt("return",Promise.resolve(F));case 2:case"end":return z.stop()}},U)})),children:(0,e.jsx)(ve.Z,{spinning:Ce,children:(0,e.jsx)(Ze,{provider:(q==null?void 0:q.provider)||K,configured:Te,formRef:fe,basicConfigRef:he,onConfigValidator:function(){var U=v()(n()().mark(function T(F){var $,z;return n()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return R(!0),H.next=3,(0,g.jA)({provider:q==null?void 0:q.provider,config:F});case 3:return $=H.sent,z=$.result,R(!1),H.abrupt("return",z);case 7:case"end":return H.stop()}},T)}));return function(T){return U.apply(this,arguments)}}()})})}),(0,e.jsx)(B.L.StepForm,{scrollToFirstError:!0,name:"strategy-config",title:"\u9AD8\u7EA7\u914D\u7F6E",formRef:mr,children:Te!==void 0&&(0,e.jsx)(jr,{configured:Te})}),(0,e.jsx)(B.L.StepForm,{scrollToFirstError:!0,name:"job-config",title:"\u4EFB\u52A1\u914D\u7F6E",formRef:vr,children:Te!==void 0&&(0,e.jsx)(Er,{configured:Te})})]})})}),P.sync_history===w&&(0,e.jsx)(Nr,{identitySourceId:u}),P.event_record===w&&(0,e.jsx)(Jr,{identitySourceId:u})]})},_r=Yr},84927:function(X,D,r){"use strict";r.d(D,{J:function(){return S},h:function(){return v}});var h=r(77566),m=r.n(h),A=r(76091),n=r.n(A);function S(O,c,g){return O.map(function(x){return x.id===c?n()(n()({},x),{},{isLeaf:!1,children:g}):x.children?n()(n()({},x),{},{children:S(x.children,c,g)}):x})}function v(O){var c=[];return O.forEach(function(g){return c.push(g.id),g.children&&c.push.apply(c,m()(v(g.children))),c}),c}},12715:function(X,D,r){"use strict";r.d(D,{Z:function(){return f}});var h=r(35632),m=r(68591),A=r.n(m),n=r(79685),S=r(14981),v=r(43356),O=r(56626),c=r(53650),g=r(67920);function x(t){return typeof t!="string"?t:t.charAt(0).toUpperCase()+t.slice(1)}var k=r(14128),V=r(45680);const I=(t,M,P)=>{const s=x(P);return{[`${t.componentCls}-${M}`]:{color:t[`color${P}`],background:t[`color${s}Bg`],borderColor:t[`color${s}Border`]}}},E=t=>(0,k.j)(t,(M,P)=>{let{textColor:s,lightBorderColor:p,lightColor:Q,darkColor:d}=P;return{[`${t.componentCls}-${M}`]:{color:s,background:Q,borderColor:p,"&-inverse":{color:t.colorTextLightSolid,background:d,borderColor:d}}}}),B=t=>{const{paddingXXS:M,lineWidth:P,tagPaddingHorizontal:s,componentCls:p}=t,Q=s-P,d=M-P;return{[p]:Object.assign(Object.assign({},(0,V.Wf)(t)),{display:"inline-block",height:"auto",marginInlineEnd:t.marginXS,paddingInline:Q,fontSize:t.tagFontSize,lineHeight:`${t.tagLineHeight}px`,whiteSpace:"nowrap",background:t.tagDefaultBg,border:`${t.lineWidth}px ${t.lineType} ${t.colorBorder}`,borderRadius:t.borderRadiusSM,opacity:1,transition:`all ${t.motionDurationMid}`,textAlign:"start",[`&${p}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:t.tagDefaultColor},[`${p}-close-icon`]:{marginInlineStart:d,color:t.colorTextDescription,fontSize:t.tagIconSize,cursor:"pointer",transition:`all ${t.motionDurationMid}`,"&:hover":{color:t.colorTextHeading}},[`&${p}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${t.iconCls}-close, ${t.iconCls}-close:hover`]:{color:t.colorTextLightSolid}},["&-checkable"]:{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${p}-checkable-checked):hover`]:{color:t.colorPrimary,backgroundColor:t.colorFillSecondary},"&:active, &-checked":{color:t.colorTextLightSolid},"&-checked":{backgroundColor:t.colorPrimary,"&:hover":{backgroundColor:t.colorPrimaryHover}},"&:active":{backgroundColor:t.colorPrimaryActive}},["&-hidden"]:{display:"none"},[`> ${t.iconCls} + span, > span + ${t.iconCls}`]:{marginInlineStart:Q}})}};var L=(0,c.Z)("Tag",t=>{const{fontSize:M,lineHeight:P,lineWidth:s,fontSizeIcon:p}=t,Q=Math.round(M*P),d=t.fontSizeSM,ie=Q-s*2,e=t.colorFillAlter,te=t.colorText,Y=(0,g.TS)(t,{tagFontSize:d,tagLineHeight:ie,tagDefaultBg:e,tagDefaultColor:te,tagIconSize:p-2*s,tagPaddingHorizontal:8});return[B(Y),E(Y),I(Y,"success","Success"),I(Y,"processing","Info"),I(Y,"error","Error"),I(Y,"warning","Warning")]}),ee=function(t,M){var P={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&M.indexOf(s)<0&&(P[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var p=0,s=Object.getOwnPropertySymbols(t);p<s.length;p++)M.indexOf(s[p])<0&&Object.prototype.propertyIsEnumerable.call(t,s[p])&&(P[s[p]]=t[s[p]]);return P},re=t=>{var{prefixCls:M,className:P,checked:s,onChange:p,onClick:Q}=t,d=ee(t,["prefixCls","className","checked","onChange","onClick"]);const{getPrefixCls:ie}=n.useContext(S.E_),e=xe=>{p==null||p(!s),Q==null||Q(xe)},te=ie("tag",M),[Y,Ee]=L(te),de=A()(te,{[`${te}-checkable`]:!0,[`${te}-checkable-checked`]:s},P,Ee);return Y(n.createElement("span",Object.assign({},d,{className:de,onClick:e})))},oe=function(t,M){var P={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&M.indexOf(s)<0&&(P[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var p=0,s=Object.getOwnPropertySymbols(t);p<s.length;p++)M.indexOf(s[p])<0&&Object.prototype.propertyIsEnumerable.call(t,s[p])&&(P[s[p]]=t[s[p]]);return P};const ve=(t,M)=>{var{prefixCls:P,className:s,rootClassName:p,style:Q,children:d,icon:ie,color:e,onClose:te,closeIcon:Y,closable:Ee=!1}=t,de=oe(t,["prefixCls","className","rootClassName","style","children","icon","color","onClose","closeIcon","closable"]);const{getPrefixCls:xe,direction:$e}=n.useContext(S.E_),[We,Ze]=n.useState(!0);n.useEffect(()=>{"visible"in de&&Ze(de.visible)},[de.visible]);const ge=(0,v.o2)(e)||(0,v.yT)(e),ze=Object.assign({backgroundColor:e&&!ge?e:void 0},Q),le=xe("tag",P),[Ue,ae]=L(le),Re=A()(le,{[`${le}-${e}`]:ge,[`${le}-has-color`]:e&&!ge,[`${le}-hidden`]:!We,[`${le}-rtl`]:$e==="rtl"},s,p,ae),Be=be=>{be.stopPropagation(),te==null||te(be),!be.defaultPrevented&&Ze(!1)},Ae=()=>Ee?Y?n.createElement("span",{className:`${le}-close-icon`,onClick:Be},Y):n.createElement(h.Z,{className:`${le}-close-icon`,onClick:Be}):null,Me=typeof de.onClick=="function"||d&&d.type==="a",we=ie||null,Ne=we?n.createElement(n.Fragment,null,we,n.createElement("span",null,d)):d,Fe=n.createElement("span",Object.assign({},de,{ref:M,className:Re,style:ze}),Ne,Ae());return Ue(Me?n.createElement(O.Z,null,Fe):Fe)},me=n.forwardRef(ve);me.CheckableTag=re;var f=me},10255:function(X){function D(r){if(r==null)throw new TypeError("Cannot destructure "+r)}X.exports=D,X.exports.__esModule=!0,X.exports.default=X.exports}}]);
