"use strict";(self.webpackChunktopiam_console=self.webpackChunktopiam_console||[]).push([[7793],{21084:function(Me,ge,a){a.d(ge,{Z:function(){return Ee}});var Ce=a(98293),$=a(78613),ie=a(85893),f=function(he){var oe=he.avatar,i=he.username;return(0,ie.jsx)(ie.Fragment,{children:oe?(0,ie.jsx)(Ce.C,{size:"small",src:(0,ie.jsx)($.Z,{src:oe,fallback:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg=="})}):(0,ie.jsx)(Ce.C,{style:{color:"#f56a00",backgroundColor:"#fde3cf",verticalAlign:"middle"},size:"small",gap:1,children:i.substring(0,1).toLocaleUpperCase()})})},Ee=f},85580:function(Me,ge,a){a.r(ge),a.d(ge,{default:function(){return mr}});var Ce=a(11281),$=a.n(Ce),ie=a(12741),f=a.n(ie),Ee=a(14459),he=a(71230),oe=a(15746),i=a(67294),de=a(97983),r=a.n(de),pa=a(40794),j=a.n(pa),ha=a(26522),$e=a(24969),ga=a(86548),Ca=a(56477),Ea=a(48689),Aa=a(11475),ja=a(37446),Ie=a(80882),Fa=a(69400),ne=a(2453),xa=a(68508),Sa=a(13013),Je=a(83062),He=a(4393),be=a(21687),fe=a(57953),ke=a(31673),ba=a(94184),q=a.n(ba),ya=a(12812),Y=a.n(ya),ye=a(46986),Be=a(38755),Ba=ye.ZP.ConfigContext;function Ye(V){var h=(0,i.useContext)(Ba),F=h.getPrefixCls,N=".".concat(F()),K=(0,Be.l)(function(){var g,R,w;return Y()({},".".concat(V),(w={},Y()(w,"&-tree",Y()({marginTop:"10px"},"".concat(N,"-tree"),(g={},Y()(g,"&-title",{width:"100%"}),Y()(g,"&-switcher",{display:"flex",flexWrap:"nowrap",alignContent:"center",alignItems:"center",justifyContent:"center"}),Y()(g,"&-treenode",{alignItems:"center",height:"30px",paddingBottom:"0",overflow:"hidden"}),Y()(g,".ant-tree-node-content-wrapper",{overflow:"auto"}),g))),Y()(w,"&-item",(R={position:"relative",display:"flex",justifyContent:"space-between",width:"100%"},Y()(R,"".concat(N,"-dropdown-open"),{backgroundColor:"rgba(0, 0, 0, 0.04)"}),Y()(R,"&-title",{width:"100%",overflow:"hidden",lineHeight:"30px",whiteSpace:"nowrap",textOverflow:"ellipsis"}),Y()(R,"&-action",Y()({color:"#293350",fontWeight:400,fontSize:"14px",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
      'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
      'Noto Color Emoji', PingFangSC-Regular, PingFang SC`},"&-text",{paddingInlineStart:"4px"})),R)),Y()(w,"&-dropdown",Y()({minWidth:"70px",color:"#293350",border:"1px solid #eaebee",boxShadow:"0 0 12px 0 #f3f5f8"},"&-more",{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignContent:"center",alignItems:"center",justifyContent:"center",width:"35px",height:"30px",fontSize:"20px","&:hover":{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignContent:"center",alignItems:"center",justifyContent:"center",width:"35px",backgroundColor:"rgba(0, 0, 0, 0.04)"},"&:checked":{backgroundColor:"rgba(0, 0, 0, 0.04)"}})),w))});return{className:K}}var Re;(function(V){V.root="root"})(Re||(Re={}));var Ve={labelCol:{span:4},wrapperCol:{span:20}},T=a(137),wa=a(78234),Ge=a(25191),ze=a(37476),ce=a(97269),X=a(5966),We=a(64317),Fe=a(43825),me=a(69677),Xe=a(43262),e=a(85893),Za=function(h){var F=h.visible,N=h.currentNode,K=h.onCancel,g=h.onFinish,R=(0,i.useState)(!1),w=f()(R,2),b=w[0],G=w[1],U=Fe.Z.useForm(),W=f()(U,1),Q=W[0];return(0,i.useEffect)(function(){F&&Q.setFieldsValue({parentId:N.id,code:(0,Ge.MX)(7),sort:9999,parentName:N.name})},[N,Q,F]),(0,e.jsx)(ze.Y,{preserve:!1,form:Q,scrollToFirstError:!0,modalProps:{maskClosable:!1,destroyOnClose:!0,onCancel:K},requiredMark:!0,layout:"horizontal",labelCol:{span:4},wrapperCol:{span:20},title:"\u65B0\u589E\u7EC4\u7EC7\u67B6\u6784",width:500,open:F,onFinish:function(){var J=j()(r()().mark(function L(Z){var E;return r()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return G(!0),C.next=3,g(Z);case 3:return E=C.sent,G(!1),C.abrupt("return",!!E);case 6:case"end":return C.stop()}},L)}));return function(L){return J.apply(this,arguments)}}(),children:(0,e.jsxs)(fe.Z,{spinning:b,children:[(0,e.jsx)(ce.A.Item,{name:"parentId",hidden:!0,children:(0,e.jsx)(me.Z,{})}),(0,e.jsx)(X.Z,{name:"parentName",label:"\u4E0A\u7EA7\u7EC4\u7EC7",readonly:!0}),(0,e.jsx)(We.Z,{name:"type",label:"\u7EC4\u7EC7\u7C7B\u578B",fieldProps:{placeholder:"\u8BF7\u9009\u62E9\u7EC4\u7EC7\u7C7B\u578B"},options:[{value:"group",label:"\u96C6\u56E2"},{value:"company",label:"\u516C\u53F8"},{value:"department",label:"\u90E8\u95E8"},{value:"unit",label:"\u5355\u4F4D"}],rules:[{required:!0,message:"\u7EC4\u7EC7\u7C7B\u578B\u4E3A\u5FC5\u586B\u9879"}]}),(0,e.jsx)(ce.A.Item,{name:"name",label:"\u7EC4\u7EC7\u540D\u79F0",rules:[{required:!0,message:"\u7EC4\u7EC7\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}],children:(0,e.jsx)(me.Z,{autoComplete:"off",placeholder:"\u8BF7\u8F93\u5165\u7EC4\u7EC7\u540D\u79F0"})}),(0,e.jsx)(ce.A.Item,{name:"code",label:"\u7EC4\u7EC7\u4EE3\u7801",extra:"\u7EC4\u7EC7\u4EE3\u7801\u5168\u5C40\u552F\u4E00\uFF0C\u521B\u5EFA\u540E\u4E0D\u53EF\u4FEE\u6539\u3002",rules:[{required:!0,message:"\u7EC4\u7EC7\u4EE3\u7801\u4E3A\u5FC5\u586B\u9879"}],children:(0,e.jsx)(me.Z,{autoComplete:"off",placeholder:"\u8BF7\u8F93\u5165\u7EC4\u7EC7\u4EE3\u7801"})}),(0,e.jsx)(ce.A.Item,{name:"order",label:"\u6392\u5E8F",children:(0,e.jsx)(Xe.Z,{style:{width:"100%"},min:0})}),(0,e.jsx)(ce.A.Item,{name:"desc",label:"\u63CF\u8FF0",children:(0,e.jsx)(me.Z.TextArea,{autoComplete:"off"})})]})})},Pa=Za,we=a(78098),Te=a(71975),Ze=a(2093),qe=a(99138),Na=function(h){var F=h.visible,N=h.onCancel,K=h.onFinish,g=(0,i.useState)(!1),R=f()(g,2),w=R[0],b=R[1],G=(0,i.useState)([]),U=f()(G,2),W=U[0],Q=U[1],J=(0,i.useState)([]),L=f()(J,2),Z=L[0],E=L[1],P=(0,i.useState)(),C=f()(P,2),z=C[0],D=C[1],ae=(0,i.useState)([]),x=f()(ae,2),te=x[0],k=x[1],S=(0,i.useState)(!1),p=f()(S,2),o=p[0],t=p[1],s=function(){var l=j()(r()().mark(function n(){var u,y,v;return r()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return b(!0),I.next=3,(0,T.mB)();case 3:if(I.t0=I.sent,I.t0){I.next=6;break}I.t0={};case 6:u=I.t0,y=u.success,v=u.result,b(!1),y&&v&&(Q([v]),D([]),E([v.id]),k([v.id]),t(!0));case 11:case"end":return I.stop()}},n)}));return function(){return l.apply(this,arguments)}}();(0,Ze.Z)(j()(r()().mark(function l(){return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!F){u.next=3;break}return u.next=3,s();case 3:case"end":return u.stop()}},l)})),[F]);var m=function(){var l=j()(r()().mark(function n(u){var y;return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return b(!0),d.next=3,(0,T.z3)(u);case 3:return y=d.sent,y.success&&Q(function(I){return(0,we.J)(I,u,y.result)}),b(!1),d.abrupt("return",Promise.resolve());case 7:case"end":return d.stop()}},n)}));return function(u){return l.apply(this,arguments)}}();return(0,e.jsxs)(Te.a,{preserve:!1,drawerProps:{maskClosable:!0,destroyOnClose:!0,onClose:function(){Q([]),N()}},onFinish:j()(r()().mark(function l(){return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!(te.length>0)){u.next=4;break}return u.next=3,K(te[0]);case 3:return u.abrupt("return",u.sent);case 4:ne.ZP.warning(" \u8BF7\u9009\u62E9\u8981\u79FB\u52A8\u5230\u7684\u7EC4\u7EC7\u673A\u6784");case 5:case"end":return u.stop()}},l)})),title:"\u79FB\u52A8\u7EC4\u7EC7",width:530,open:F,children:[(0,e.jsx)(qe.Z,{banner:!0,type:"info",message:"\u8BF7\u9009\u62E9\u9700\u8981\u79FB\u52A8\u5230\u7684\u90E8\u95E8\u6216\u7EC4\u7EC7, \u5E76\u70B9\u51FB\u786E\u8BA4\u6309\u94AE\u3002"}),(0,e.jsx)("br",{}),(0,e.jsx)(fe.Z,{spinning:w,children:(0,e.jsx)(ke.Z,{blockNode:!0,fieldNames:{key:"id",title:"name"},showLine:{showLeafIcon:!1},switcherIcon:(0,e.jsx)(Ie.Z,{}),loadData:function(n){return m(n.key)},loadedKeys:z,selectedKeys:te,treeData:W,onExpand:function(n){E(n),t(!1)},expandedKeys:Z,autoExpandParent:o,onSelect:function(n){k(n)}})})]})},Qa=Na,Da=a(32983),Oe="account-organization",Ia=me.Z.Search,ka=function(V){var h=Ye(Oe),F=h.className,N=V.handleTitleRender,K=V.onSearchChange,g=V.onSelect,R=(0,i.useState)([]),w=f()(R,2),b=w[0],G=w[1],U=(0,i.useState)(),W=f()(U,2),Q=W[0],J=W[1],L=(0,i.useState)(),Z=f()(L,2),E=Z[0],P=Z[1],C=(0,i.useState)(),z=f()(C,2),D=z[0],ae=z[1],x=(0,i.useState)(!1),te=f()(x,2),k=te[0],S=te[1],p=(0,i.useState)(!1),o=f()(p,2),t=o[0],s=o[1],m=(0,i.useState)(!1),l=f()(m,2),n=l[0],u=l[1],y=function(){var d=j()(r()().mark(function I(se){var re,ue,le;return r()().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return ve.next=2,(0,T.rl)(se);case 2:return re=ve.sent,ue=re.success,le=re.result,ue&&(G(le),S(!0),J((0,we.h)(le))),ve.abrupt("return",Promise.resolve(le));case 7:case"end":return ve.stop()}},I)}));return function(se){return d.apply(this,arguments)}}(),v=function(){var d=j()(r()().mark(function I(se){var re;return r()().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return s(!0),le.next=3,(0,T.z3)(se);case 3:return re=le.sent,re.success&&G(function(Se){return(0,we.J)(Se,se,re.result)}),s(!1),le.abrupt("return",Promise.resolve());case 7:case"end":return le.stop()}},I)}));return function(se){return d.apply(this,arguments)}}();return(0,e.jsx)("div",{className:F,children:(0,e.jsx)("div",{className:q()("".concat(Oe)),children:(0,e.jsxs)(fe.Z,{spinning:t,children:[(0,e.jsx)(Ia,{allowClear:!0,placeholder:"\u8F93\u5165\u7EC4\u7EC7\u540D\u79F0\u6216\u7EC4\u7EC7\u7F16\u7801",onSearch:function(){var d=j()(r()().mark(function I(se){return r()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(!se){ue.next=8;break}return s(!0),u(!0),K(!0),ue.next=6,y(se);case 6:return s(!1),ue.abrupt("return");case 8:u(!1),K(!1);case 10:case"end":return ue.stop()}},I)}));return function(I){return d.apply(this,arguments)}}()}),n&&(b==null?void 0:b.length)>0?(0,e.jsx)("div",{className:q()("".concat(Oe,"-tree")),children:(0,e.jsx)(ke.Z,{blockNode:!0,fieldNames:{key:"id",title:"name"},titleRender:N,treeData:b,loadData:function(I){return v(I.key)},showLine:{showLeafIcon:!1},switcherIcon:(0,e.jsx)(Ie.Z,{}),selectedKeys:D,loadedKeys:E,onLoad:P,onSelect:function(I,se){var re=se.node;ae(I),g(re.key,re==null?void 0:re.name)},onExpand:function(I){J(I),S(!1)},expandedKeys:Q,autoExpandParent:k})}):n&&!t&&(b==null?void 0:b.length)==0&&(0,e.jsx)(Da.Z,{image:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",imageStyle:{height:60}})]})})})},Ra=function(h){var F=h.visible,N=h.currentNode,K=h.onCancel,g=h.onFinish,R=(0,i.useState)(),w=f()(R,2),b=w[0],G=w[1],U=(0,i.useState)(!1),W=f()(U,2),Q=W[0],J=W[1],L=Fe.Z.useForm(),Z=f()(L,1),E=Z[0];return(0,Ze.Z)(j()(r()().mark(function P(){var C,z,D;return r()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(!(F&&N)){x.next=8;break}return G(!0),x.next=4,(0,T.Xu)(N);case 4:C=x.sent,z=C.success,D=C.result,z&&(E.setFieldsValue(D),G(!1));case 8:case"end":return x.stop()}},P)})),[N,F]),(0,e.jsx)(ze.Y,{form:E,scrollToFirstError:!0,preserve:!1,modalProps:{maskClosable:!1,destroyOnClose:!0,onCancel:function(C){K&&(K(C),E.resetFields())}},layout:"horizontal",labelCol:{span:4},wrapperCol:{span:20},requiredMark:!0,title:"\u7F16\u8F91\u7EC4\u7EC7\u67B6\u6784",width:500,open:F,onFinish:function(){var P=j()(r()().mark(function C(z){var D;return r()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return J(!0),x.next=3,g(z);case 3:return D=x.sent,J(!1),x.abrupt("return",!!D);case 6:case"end":return x.stop()}},C)}));return function(C){return P.apply(this,arguments)}}(),children:(0,e.jsx)(be.Z,{loading:b,active:!0,children:(0,e.jsxs)(fe.Z,{spinning:Q,children:[(0,e.jsx)(ce.A.Item,{name:"id",hidden:!0,children:(0,e.jsx)(me.Z,{})}),(0,e.jsx)(We.Z,{name:"type",label:"\u7EC4\u7EC7\u7C7B\u578B",rules:[{required:!0,message:"\u7EC4\u7EC7\u7C7B\u578B\u4E3A\u5FC5\u586B\u9879"}],options:[{value:"group",label:"\u96C6\u56E2"},{value:"company",label:"\u516C\u53F8"},{value:"department",label:"\u90E8\u95E8"},{value:"unit",label:"\u5355\u4F4D"}]}),(0,e.jsx)(ce.A.Item,{name:"name",label:"\u7EC4\u7EC7\u540D\u79F0",rules:[{required:!0,message:"\u7EC4\u7EC7\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}],children:(0,e.jsx)(me.Z,{autoComplete:"off",placeholder:"\u8BF7\u8F93\u5165\u7EC4\u7EC7\u540D\u79F0"})}),(0,e.jsx)(X.Z,{readonly:!0,name:"code",disabled:!0,label:"\u7EC4\u7EC7\u4EE3\u7801"}),(0,e.jsx)(ce.A.Item,{name:"order",label:"\u6392\u5E8F",children:(0,e.jsx)(Xe.Z,{style:{width:"100%"},min:0})}),(0,e.jsx)(ce.A.Item,{name:"desc",label:"\u63CF\u8FF0",children:(0,e.jsx)(me.Z.TextArea,{autoComplete:"off"})})]})})})},za=Ra,ee="account-organization",Ta=Fa.Z.confirm,Oa=function(h){var F=Ye(ee),N=F.className,K=(0,i.useState)(!1),g=f()(K,2),R=g[0],w=g[1],b=(0,i.useState)(!1),G=f()(b,2),U=G[0],W=G[1],Q=h.onSelect,J=(0,i.useState)([]),L=f()(J,2),Z=L[0],E=L[1],P=(0,i.useState)(),C=f()(P,2),z=C[0],D=C[1],ae=(0,i.useState)(),x=f()(ae,2),te=x[0],k=x[1],S=(0,i.useState)(),p=f()(S,2),o=p[0],t=p[1],s=(0,i.useState)(!1),m=f()(s,2),l=m[0],n=m[1],u=(0,i.useState)(),y=f()(u,2),v=y[0],d=y[1],I=(0,i.useState)(!1),se=f()(I,2),re=se[0],ue=se[1],le=(0,i.useState)(!1),Se=f()(le,2),ve=Se[0],Ue=Se[1],vr=(0,i.useState)(!1),ca=f()(vr,2),pr=ca[0],Ke=ca[1],hr=(0,i.useState)(!1),da=f()(hr,2),gr=da[0],Cr=da[1],je=function(){var M=j()(r()().mark(function A(){var B,H,O;return r()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return w(!0),c.next=3,(0,T.mB)();case 3:if(c.t0=c.sent,c.t0){c.next=6;break}c.t0={};case 6:B=c.t0,H=B.success,O=B.result,H&&O&&(E([O]),k([]),D([O.id]),t([O.id]),n(!0),Q(O.id,O.name),w(!1));case 10:case"end":return c.stop()}},A)}));return function(){return M.apply(this,arguments)}}();(0,wa.Z)(j()(r()().mark(function M(){return r()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return W(!0),B.next=3,je();case 3:W(!1);case 4:case"end":return B.stop()}},M)})));var Er=function(){var M=j()(r()().mark(function A(B){var H;return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return w(!0),_.next=3,(0,T.z3)(B);case 3:return H=_.sent,H!=null&&H.success&&E(function(c){return(0,we.J)(c,B,H.result)}),w(!1),_.abrupt("return",Promise.resolve());case 7:case"end":return _.stop()}},A)}));return function(B){return M.apply(this,arguments)}}(),Ar=function(A){return A?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)(ha.Z,{style:{marginRight:5}})},jr=function(A){var B=function(){var _=[{key:"add",label:(0,e.jsx)("div",{className:N,children:(0,e.jsxs)("div",{className:q()("".concat(ee,"-item-action")),children:[(0,e.jsx)($e.Z,{}),(0,e.jsx)("span",{className:q()("".concat(ee,"-item-action-text")),onClick:function(){d(A),ue(!0)},children:"\u65B0\u589E\u5B50\u7EC4\u7EC7"})]})})}];return A.id!==Re.root?[].concat(_,[{key:"update",label:(0,e.jsx)("div",{className:N,children:(0,e.jsxs)("div",{className:q()("".concat(ee,"-item-action")),children:[(0,e.jsx)(ga.Z,{}),(0,e.jsx)("span",{className:q()("".concat(ee,"-item-action-text")),onClick:function(){d(A),Ke(!0)},children:"\u7F16\u8F91\u7EC4\u7EC7"})]})})},{key:"move",label:(0,e.jsx)("div",{className:N,children:(0,e.jsxs)("div",{className:q()("".concat(ee,"-item-action")),children:[(0,e.jsx)(Ca.Z,{}),(0,e.jsx)("span",{className:q()("".concat(ee,"-item-action-text")),onClick:function(){d(A),Ue(!0)},children:"\u79FB\u52A8\u7EC4\u7EC7"})]})})},{key:"remove",label:(0,e.jsx)("div",{className:N,children:(0,e.jsxs)("div",{className:q()("".concat(ee,"-item-action")),children:[(0,e.jsx)(Ea.Z,{}),(0,e.jsx)("span",{className:q()("".concat(ee,"-item-action-text")),onClick:function(){d(A),Ta({title:"\u8B66\u544A",icon:(0,e.jsx)(Aa.Z,{}),content:"\u5220\u9664\u64CD\u4F5C\u65E0\u6CD5\u6062\u590D\uFF0C\u8BF7\u8C28\u614E\u5220\u9664",okText:"\u786E\u8BA4",centered:!0,okType:"danger",cancelText:"\u53D6\u6D88",onOk:function(){var Le=j()(r()().mark(function xr(){var ma,va;return r()().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.next=2,(0,T.w0)(A.id);case 2:if(ma=pe.sent,va=ma.success,!va){pe.next=9;break}return ne.ZP.success("\u5220\u9664\u6210\u529F"),pe.next=8,je();case 8:return pe.abrupt("return");case 9:case"end":return pe.stop()}},xr)}));function Fr(){return Le.apply(this,arguments)}return Fr}()})},children:"\u5220\u9664\u7EC4\u7EC7"})]})})}]):_},H=function(){return(0,e.jsx)(xa.Z,{className:q()("".concat(ee,"-dropdown")),onClick:function(c){var Le=c.domEvent;Le.stopPropagation()},items:B()})};return(0,e.jsx)(Sa.Z,{dropdownRender:H,placement:"bottom",trigger:["click","contextMenu"],children:(0,e.jsx)("span",{className:q()("".concat(ee,"-dropdown-more")),onClick:function(_){_.stopPropagation()},children:(0,e.jsx)(ja.Z,{})})})},fa=function(A){return(0,e.jsxs)("div",{className:q()("".concat(ee,"-item")),children:[(0,e.jsxs)("div",{className:q()("".concat(ee,"-item-title")),children:[Ar(!!A.isLeaf),(0,e.jsx)(Je.Z,{title:A.name,placement:"topLeft",children:(0,e.jsx)("span",{children:A.name})})]}),jr(A)]})};return(0,e.jsx)("div",{className:N,children:(0,e.jsxs)(He.Z,{style:{height:"calc(100vh - 220px)",overflow:"auto"},bordered:!1,className:q()("".concat(ee)),children:[(0,e.jsx)(be.Z,{loading:U,paragraph:{rows:5},children:(0,e.jsxs)(fe.Z,{spinning:R,children:[(0,e.jsx)(ka,{handleTitleRender:fa,onSearchChange:function(){var M=j()(r()().mark(function A(B){return r()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(B){O.next=3;break}return O.next=3,je();case 3:Cr(B);case 4:case"end":return O.stop()}},A)}));return function(A){return M.apply(this,arguments)}}(),onSelect:Q}),!gr&&(0,e.jsx)("div",{className:q()("".concat(ee,"-tree")),children:(0,e.jsx)(ke.Z,{blockNode:!0,fieldNames:{key:"id",title:"name"},titleRender:fa,treeData:Z,loadData:function(A){return Er(A.key)},showLine:{showLeafIcon:!1},switcherIcon:(0,e.jsx)(Ie.Z,{}),selectedKeys:o,loadedKeys:te,onLoad:k,onSelect:function(A,B){var H=B.node;t(A),Q(H.key,H.name)},onExpand:function(A){D(A),n(!1)},expandedKeys:z,autoExpandParent:l})})]})}),(0,e.jsx)(Pa,{visible:re,onCancel:function(){ue(!1)},onFinish:function(){var M=j()(r()().mark(function A(B){var H,O;return r()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,(0,T.Yi)(B);case 3:if(H=c.sent,O=H.success,!O){c.next=11;break}return ne.ZP.success("\u65B0\u589E\u6210\u529F"),ue(!1),c.next=10,je();case 10:return c.abrupt("return",Promise.resolve(!0));case 11:return c.abrupt("return",Promise.resolve(!1));case 14:return c.prev=14,c.t0=c.catch(0),c.abrupt("return",Promise.resolve(!1));case 17:case"end":return c.stop()}},A,null,[[0,14]])}));return function(A){return M.apply(this,arguments)}}(),currentNode:v}),v&&(0,e.jsx)(za,{visible:pr,onCancel:j()(r()().mark(function M(){return r()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:Ke(!1);case 1:case"end":return B.stop()}},M)})),onFinish:function(){var M=j()(r()().mark(function A(B){var H,O;return r()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,(0,T.FV)($()({},B));case 3:if(H=c.sent,O=H.success,!O){c.next=11;break}return ne.ZP.success("\u7F16\u8F91\u6210\u529F"),Ke(!1),c.next=10,je();case 10:return c.abrupt("return",Promise.resolve(!0));case 11:return c.abrupt("return",Promise.resolve(!1));case 14:return c.prev=14,c.t0=c.catch(0),c.abrupt("return",Promise.resolve(!1));case 17:case"end":return c.stop()}},A,null,[[0,14]])}));return function(A){return M.apply(this,arguments)}}(),currentNode:v.id}),v&&(0,e.jsx)(Qa,{onFinish:function(){var M=j()(r()().mark(function A(B){var H,O;return r()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,T.qb)(v.id,B);case 2:if(H=c.sent,O=H.success,!O){c.next=10;break}return Ue(!1),ne.ZP.success("\u64CD\u4F5C\u6210\u529F"),c.next=9,je();case 9:return c.abrupt("return",Promise.resolve(!0));case 10:return c.abrupt("return",Promise.resolve(!1));case 11:case"end":return c.stop()}},A)}));return function(A){return M.apply(this,arguments)}}(),visible:ve,onCancel:j()(r()().mark(function M(){return r()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:Ue(!1);case 1:case"end":return B.stop()}},M)}))})]})})},Ua=Oa,Ka=Ua,_e=a(84865),xe=a(25035),La=a(93279),Ma=a(1914),ea=a(17057),Ae=a(26713),Pe=a(76521),Ne=a(86738),aa=a(27414),$a=a(32808),ra=a(96074),Qe=a(71577),na=a(52688),ta=a(97462),sa=a(63434),ua=a(50335),la=a(90672),De=a(34041),ia=a(96486),Ja=a(30381),oa=a.n(Ja),Ha=De.Z.Option,Ya=ye.ZP.ConfigContext,Va=function(h){var F=h.visible,N=h.onCancel,K=h.onFinish,g=h.organization,R=Fe.Z.useForm(),w=f()(R,1),b=w[0],G=(0,i.useState)(!1),U=f()(G,2),W=U[0],Q=U[1],J=(0,i.useState)(!1),L=f()(J,2),Z=L[0],E=L[1],P=(0,i.useState)(86),C=f()(P,2),z=C[0],D=C[1],ae=function(t){return t&&t<oa()().endOf("day")},x=function(){return{disabledHours:function(){return(0,ia.range)(0,24).splice(4,20)},disabledMinutes:function(){return(0,ia.range)(30,60)},disabledSeconds:function(){return[55,56]}}},te=(0,i.useContext)(Ya),k=te.getPrefixCls,S=".".concat(k()),p=(0,Be.l)(function(){return Y()({},"".concat(S,"-form-item-control-input"),{width:"100%"})});return(0,e.jsx)(Te.a,$()($()({form:b,className:p,scrollToFirstError:!0,preserve:!1,submitter:{render:function(t,s){return[s[0],(0,e.jsx)(Qe.Z,{loading:W,onClick:function(){E(!0),t.submit()},children:"\u4FDD\u5B58\u5E76\u7EE7\u7EED"},"continue"),s[1]]}},drawerProps:{maskClosable:!0,destroyOnClose:!0,onClose:N,afterOpenChange:function(t){t&&(Q(!0),setTimeout(function(){b.setFieldsValue({organizationName:g==null?void 0:g.name,organizationId:g==null?void 0:g.id}),Q(!1)},90))}},labelAlign:"right",layout:"horizontal"},Ve),{},{title:"\u65B0\u589E\u7528\u6237",width:590,open:F,onFinish:function(){var o=j()(r()().mark(function t(s){var m,l,n,u;return r()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(Q(!0),m=s.phone,l=s.email,!(!m&&!l)){v.next=6;break}return ne.ZP.warning("\u624B\u673A\u53F7\u6216\u90AE\u7BB1\u81F3\u5C11\u586B\u5199\u4E00\u4E2A"),Q(!1),v.abrupt("return");case 6:return v.prev=6,n=$()({},s),s.phone&&(n=$()($()({},s),{},{phone:"".concat(z).concat(s.phone)})),v.next=11,K(n,Z);case 11:u=v.sent,u&&Z&&(E(!1),b.resetFields(),b.setFieldsValue({organizationName:g==null?void 0:g.name,organizationId:g==null?void 0:g.id}),Q(!1));case 13:return v.prev=13,Q(!1),v.finish(13);case 16:case"end":return v.stop()}},t,null,[[6,,13,16]])}));return function(t){return o.apply(this,arguments)}}(),children:(0,e.jsxs)(fe.Z,{spinning:W,children:[(0,e.jsx)(X.Z,{name:"organizationId",hidden:!0}),(0,e.jsx)(X.Z,{label:"\u6240\u5C5E\u7EC4\u7EC7",name:"organizationName",readonly:!0}),(0,e.jsx)(X.Z,{name:"username",label:"\u7528\u6237\u540D",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",rules:[{required:!0,message:"\u7528\u6237\u540D\u4E3A\u5FC5\u586B\u9879"},{pattern:new RegExp("^[a-zA-Z][a-zA-Z0-9_]{3,15}$"),message:"\u7528\u6237\u540D\u683C\u5F0F\u4E0D\u5408\u6CD5"},{validator:function(){var o=j()(r()().mark(function s(m,l){var n,u,y;return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(l){d.next=2;break}return d.abrupt("return",Promise.resolve());case 2:return d.next=4,(0,T.mz)("USERNAME",l);case 4:if(n=d.sent,u=n.success,y=n.result,u){d.next=9;break}return d.abrupt("return",Promise.reject());case 9:if(y){d.next=11;break}return d.abrupt("return",Promise.reject(new Error("\u7528\u6237\u540D\u5DF2\u5B58\u5728")));case 11:case"end":return d.stop()}},s)}));function t(s,m){return o.apply(this,arguments)}return t}(),validateTrigger:["onBlur"]}],fieldProps:{autoComplete:"off"},extra:"\u8D26\u6237\u540D\u79F0\u4E0D\u80FD\u4EE5\u7279\u6B8A\u5B57\u7B26\u5F00\u59CB\uFF0C\u53EF\u5305\u542B\u5927\u5199\u5B57\u6BCD\u3001\u5C0F\u5199\u5B57\u6BCD\u3001\u6570\u5B57\u3001\u4E2D\u5212\u7EBF(-)\u3001\u4E0B\u5212\u7EBF(_)\u3001\u957F\u5EA6\u81F3\u5C11 4 \u4F4D"}),(0,e.jsx)(X.Z,{name:"fullName",label:"\u59D3\u540D",placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D",rules:[{message:"\u59D3\u540D\u4E3A\u5FC5\u586B\u9879",required:!0}],fieldProps:{autoComplete:"off"}}),(0,e.jsx)(X.Z,{name:"nickName",label:"\u8D26\u6237\u6635\u79F0",placeholder:"\u8BF7\u8F93\u5165\u8D26\u6237\u6635\u79F0",fieldProps:{autoComplete:"off"}}),(0,e.jsx)(X.Z.Password,{name:"password",label:"\u767B\u5F55\u5BC6\u7801",placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801",fieldProps:{autoComplete:"new-password"},rules:[{required:!0,message:"\u767B\u5F55\u5BC6\u7801\u4E3A\u5FC5\u586B\u9879"}],addonAfter:(0,e.jsx)(Qe.Z,{onClick:j()(r()().mark(function o(){var t,s,m;return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,T.EJ)();case 2:t=n.sent,s=t.result,m=t.success,m&&b.setFieldValue("password",s);case 6:case"end":return n.stop()}},o)})),children:"\u81EA\u52A8\u751F\u6210"},"autoGeneration")}),(0,e.jsx)(na.Z,{name:["passwordInitializeConfig","enableNotice"],label:"\u5BC6\u7801\u901A\u77E5",extra:"\u52FE\u9009\u540E\uFF0C\u65B0\u5BC6\u7801\u5C06\u53D1\u9001\u7ED9\u7528\u6237"}),(0,e.jsx)(ta.Z,{name:["passwordInitializeConfig","enableNotice"],children:function(t){var s=t.passwordInitializeConfig;return(s==null?void 0:s.enableNotice)&&(0,e.jsx)(sa.Z.Group,{labelCol:{offset:4},initialValue:["mail"],name:["passwordInitializeConfig","noticeChannels"],label:"\u5BC6\u7801\u901A\u77E5\u65B9\u5F0F",fieldProps:{onChange:function(l){if(Array.prototype.isPrototypeOf(l)&&Object.keys(l).length===0){b.setFieldValue(["passwordInitializeConfig","enableNotice"],!1);return}b.setFieldValue(["passwordInitializeConfig","enableNotice"],!0)}},options:[{label:"\u90AE\u4EF6",value:"mail"},{label:"\u77ED\u4FE1",value:"sms"}]})}}),(0,e.jsx)(X.Z,{name:["phone"],label:"\u624B\u673A\u53F7",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",rules:[{pattern:new RegExp(/^1[3-9]\d{9}$/),message:"\u624B\u673A\u53F7\u683C\u5F0F\u4E0D\u6B63\u786E"},{validator:function(){var o=j()(r()().mark(function s(m,l){var n,u,y;return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(l){d.next=2;break}return d.abrupt("return",Promise.resolve());case 2:return d.next=4,(0,T.mz)("PHONE","".concat(z).concat(l));case 4:if(n=d.sent,u=n.success,y=n.result,u){d.next=9;break}return d.abrupt("return",Promise.reject());case 9:if(y){d.next=11;break}return d.abrupt("return",Promise.reject(new Error("\u624B\u673A\u53F7\u5DF2\u5B58\u5728")));case 11:case"end":return d.stop()}},s)}));function t(s,m){return o.apply(this,arguments)}return t}(),validateTrigger:["onBlur"]}],fieldProps:{autoComplete:"off"},addonBefore:(0,e.jsx)(De.Z,{value:z,onChange:D,children:(0,e.jsx)(Ha,{value:86,children:"+86"})}),extra:"\u624B\u673A\u53F7\u6216\u90AE\u7BB1\u81F3\u5C11\u586B\u5199\u4E00\u4E2A\u3002"}),(0,e.jsx)(X.Z,{name:"email",label:"\u90AE\u7BB1",placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1",rules:[{type:"email",message:"\u90AE\u7BB1\u683C\u5F0F\u4E0D\u6B63\u786E"},{validator:function(){var o=j()(r()().mark(function s(m,l){var n,u,y;return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(l){d.next=2;break}return d.abrupt("return",Promise.resolve());case 2:return d.next=4,(0,T.mz)("EMAIL",l);case 4:if(n=d.sent,u=n.success,y=n.result,!(u&&!y)){d.next=9;break}return d.abrupt("return",Promise.reject(new Error("\u90AE\u7BB1\u5DF2\u5B58\u5728")));case 9:case"end":return d.stop()}},s)}));function t(s,m){return o.apply(this,arguments)}return t}(),validateTrigger:["onBlur"]}],fieldProps:{autoComplete:"off"},extra:"\u624B\u673A\u53F7\u6216\u90AE\u7BB1\u81F3\u5C11\u586B\u5199\u4E00\u4E2A\u3002"}),(0,e.jsx)(ua.Z,{name:"expireTime",label:"\u8FC7\u671F\u65F6\u95F4",placeholder:"\u8FC7\u671F\u65F6\u95F4",fieldProps:{disabledDate:ae,disabledTime:x},extra:"\u4E0D\u586B\u5C06\u4F7F\u7528\u7CFB\u7EDF\u9ED8\u8BA4\u8FC7\u671F\u65F6\u95F4 2116-12-31"}),(0,e.jsx)(la.Z,{name:"remark",label:"\u5907\u6CE8",extra:"\u7528\u6237\u5907\u6CE8\u4FE1\u606F",fieldProps:{placeholder:"\u5907\u6CE8",rows:2,maxLength:20,autoComplete:"off",showCount:!0}})]})}))},Ga=Va,Wa=a(52300),Xa=a(57132),qa=ye.ZP.ConfigContext,_a=function(V){var h=V.visible,F=V.onCancel,N=V.id,K=(0,i.useState)(!1),g=f()(K,2),R=g[0],w=g[1],b=Fe.Z.useForm(),G=f()(b,1),U=G[0];(0,Ze.Z)(j()(r()().mark(function Z(){return r()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:h&&U.setFieldValue("id",N);case 1:case"end":return P.stop()}},Z)})),[h,N]);var W=(0,i.useContext)(qa),Q=W.getPrefixCls,J=".".concat(Q()),L=(0,Be.l)(function(){var Z,E;return E={},Y()(E,"".concat(J,"-form-item-control-input"),{width:"100%"}),Y()(E,".notice-channel",(Z={},Y()(Z,"".concat(J,"-form-item"),{marginBottom:0}),Y()(Z,"& + a",{display:"block",marginTop:24}),Y()(Z,"&-alert",Y()({},"".concat(J,"-alert-content ").concat(J,"-alert-message ").concat(J,"-form-item"),{marginBottom:0})),Z)),E});return(0,e.jsx)(ze.Y,{title:"\u91CD\u7F6E\u7528\u6237\u5BC6\u7801",width:"460px",form:U,labelAlign:"right",preserve:!1,layout:"vertical",autoFocusFirstInput:!0,className:L,open:h,modalProps:{destroyOnClose:!0,onCancel:F},onFinish:function(){var Z=j()(r()().mark(function E(P){var C,z,D;return r()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return C=Wa.DS.encode(P.password,!0),w(!0),x.prev=2,x.next=5,(0,T.QV)($()($()({},P),{},{password:C}));case 5:if(z=x.sent,D=z.success,!D){x.next=11;break}return ne.ZP.success("\u64CD\u4F5C\u6210\u529F"),F==null||F(),x.abrupt("return");case 11:return x.prev=11,w(!1),x.finish(11);case 14:case"end":return x.stop()}},E,null,[[2,,11,14]])}));return function(E){return Z.apply(this,arguments)}}(),children:(0,e.jsxs)(fe.Z,{spinning:R,children:[(0,e.jsx)(X.Z,{name:"id",hidden:!0}),(0,e.jsx)(X.Z.Password,{name:"password",label:"\u65B0\u5BC6\u7801",placeholder:"\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801",fieldProps:{autoComplete:"off"},rules:[{required:!0,message:"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A"}],addonAfter:(0,e.jsx)(Qe.Z,{onClick:j()(r()().mark(function Z(){var E,P,C;return r()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,(0,T.EJ)();case 2:E=D.sent,P=E.result,C=E.success,C&&U.setFieldValue("password",P);case 6:case"end":return D.stop()}},Z)})),children:"\u81EA\u52A8\u751F\u6210"},"autoGeneration")}),(0,e.jsx)("div",{className:"notice-channel",children:(0,e.jsx)(na.Z,{name:["passwordResetConfig","enableNotice"],label:"\u5BC6\u7801\u901A\u77E5",extra:"\u52FE\u9009\u540E\uFF0C\u65B0\u5BC6\u7801\u5C06\u53D1\u9001\u7ED9\u7528\u6237"})}),(0,e.jsx)(ta.Z,{name:["passwordResetConfig","enableNotice"],children:function(E){var P=E.passwordResetConfig;return(P==null?void 0:P.enableNotice)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(qe.Z,{className:"notice-channel-alert",style:{backgroundColor:"#f1f1f2",border:"1px solid #f1f1f2"},message:(0,e.jsx)(sa.Z.Group,{labelCol:{offset:4},initialValue:["mail"],name:["passwordResetConfig","noticeChannels"],label:"\u5BC6\u7801\u901A\u77E5\u65B9\u5F0F",fieldProps:{onChange:function(z){if(Array.prototype.isPrototypeOf(z)&&Object.keys(z).length===0){U.setFieldValue(["passwordResetConfig","enableNotice"],!1);return}U.setFieldValue(["passwordResetConfig","enableNotice"],!0)}},options:[{label:"\u90AE\u4EF6",value:"mail"},{label:"\u77ED\u4FE1",value:"sms"}]})}),(0,e.jsx)("br",{})]})}}),(0,e.jsxs)("a",{onClick:j()(r()().mark(function Z(){var E;return r()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return E=U.getFieldValue("password"),C.next=3,(0,Ge.JG)(`TopIAM \u8D26\u6237\u8FDB\u884C\u4E86\u5BC6\u7801\u4FEE\u6539
\u8D26\u6237\u540D\uFF1Aadmin
\u65B0\u5BC6\u7801\uFF1A`.concat(E||""));case 3:case"end":return C.stop()}},Z)})),children:[(0,e.jsx)(Xa.Z,{}),"\u590D\u5236\u8D26\u6237\u5BC6\u7801"]})]})})},er=De.Z.Option,ar=ye.ZP.ConfigContext,rr=function(h){var F=h.visible,N=h.onCancel,K=h.onFinish,g=h.id,R=Fe.Z.useForm(),w=f()(R,1),b=w[0],G=(0,i.useState)(!1),U=f()(G,2),W=U[0],Q=U[1],J=(0,i.useState)(!1),L=f()(J,2),Z=L[0],E=L[1],P=function(o){return o&&o<oa()().endOf("day")},C=(0,i.useState)(86),z=f()(C,2),D=z[0],ae=z[1],x=(0,i.useContext)(ar),te=x.getPrefixCls,k=".".concat(te()),S=(0,Be.l)(function(){return Y()({},"".concat(k,"-form-item-control-input"),{width:"100%"})});return(0,Ze.Z)(j()(r()().mark(function p(){var o,t,s,m,l;return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!(F&&g)){u.next=9;break}return Q(!0),u.next=4,(0,T.PR)(g);case 4:o=u.sent,t=o.success,s=o.result,t&&s&&(b.setFieldsValue($()({},s)),s!=null&&s.phone&&(m=a(93791).PhoneNumberUtil.getInstance(),l=m==null?void 0:m.parse(s.phone,"CN"),ae(l==null?void 0:l.getCountryCode()),b.setFieldsValue({phone:l==null?void 0:l.getNationalNumber()}))),Q(!1);case 9:case"end":return u.stop()}},p)})),[F,g]),(0,e.jsx)(Te.a,$()($()({form:b,className:S,scrollToFirstError:!0,preserve:!1,drawerProps:{maskClosable:!0,destroyOnClose:!0,onClose:N},labelAlign:"right",layout:"horizontal"},Ve),{},{title:"\u4FEE\u6539\u7528\u6237",width:590,open:F,onFinish:function(){var p=j()(r()().mark(function o(t){var s,m,l,n;return r()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(E(!0),s=t.phone,m=t.email,!(!s&&!m)){y.next=6;break}return ne.ZP.warning("\u624B\u673A\u53F7\u6216\u90AE\u7BB1\u81F3\u5C11\u586B\u5199\u4E00\u4E2A"),E(!1),y.abrupt("return",!1);case 6:return l=$()({},t),t.phone&&(l=$()($()({},t),{},{phone:"".concat(D).concat(t.phone)})),y.prev=8,y.next=11,K(l);case 11:return n=y.sent,y.abrupt("return",!!n);case 13:return y.prev=13,E(!1),y.finish(13);case 16:case"end":return y.stop()}},o,null,[[8,,13,16]])}));return function(o){return p.apply(this,arguments)}}(),children:(0,e.jsx)(be.Z,{loading:W,active:!0,children:(0,e.jsxs)(fe.Z,{spinning:Z,children:[(0,e.jsx)(X.Z,{name:"id",hidden:!0}),(0,e.jsx)(X.Z,{label:"\u7528\u6237\u540D",name:"username",readonly:!0}),(0,e.jsx)(X.Z,{name:"fullName",label:"\u59D3\u540D",placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D",rules:[{message:"\u59D3\u540D\u4E3A\u5FC5\u586B\u9879",required:!0}],fieldProps:{autoComplete:"off"}}),(0,e.jsx)(X.Z,{name:"nickName",label:"\u8D26\u6237\u6635\u79F0",placeholder:"\u8BF7\u8F93\u5165\u8D26\u6237\u6635\u79F0",fieldProps:{autoComplete:"off"}}),(0,e.jsx)(X.Z,{name:"phone",label:"\u624B\u673A\u53F7",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",rules:[{pattern:new RegExp(/^1[3-9]\d{9}$/),message:"\u624B\u673A\u53F7\u683C\u5F0F\u4E0D\u6B63\u786E"},{validator:function(){var p=j()(r()().mark(function t(s,m){var l,n,u;return r()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(m){v.next=2;break}return v.abrupt("return",Promise.resolve());case 2:return v.next=4,(0,T.mz)("PHONE","".concat(D).concat(m),g);case 4:if(l=v.sent,n=l.success,u=l.result,n){v.next=9;break}return v.abrupt("return",Promise.reject());case 9:if(u){v.next=11;break}return v.abrupt("return",Promise.reject(new Error("\u624B\u673A\u53F7\u5DF2\u5B58\u5728")));case 11:case"end":return v.stop()}},t)}));function o(t,s){return p.apply(this,arguments)}return o}(),validateTrigger:["onBlur"]}],fieldProps:{autoComplete:"off"},addonBefore:(0,e.jsx)(De.Z,{value:D,onChange:ae,children:(0,e.jsx)(er,{value:86,children:"+86"})}),extra:"\u624B\u673A\u53F7\u6216\u90AE\u7BB1\u81F3\u5C11\u586B\u5199\u4E00\u4E2A\u3002"}),(0,e.jsx)(X.Z,{name:"email",label:"\u90AE\u7BB1",placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1",rules:[{type:"email",message:"\u90AE\u7BB1\u683C\u5F0F\u4E0D\u6B63\u786E"},{validator:function(){var p=j()(r()().mark(function t(s,m){var l,n,u;return r()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(m){v.next=2;break}return v.abrupt("return",Promise.resolve());case 2:return v.next=4,(0,T.mz)("EMAIL",m,g);case 4:if(l=v.sent,n=l.success,u=l.result,!(n&&!u)){v.next=9;break}return v.abrupt("return",Promise.reject(new Error("\u90AE\u7BB1\u5DF2\u5B58\u5728")));case 9:case"end":return v.stop()}},t)}));function o(t,s){return p.apply(this,arguments)}return o}(),validateTrigger:["onBlur"]}],fieldProps:{autoComplete:"off"},extra:"\u624B\u673A\u53F7\u6216\u90AE\u7BB1\u81F3\u5C11\u586B\u5199\u4E00\u4E2A\u3002"}),(0,e.jsx)(ua.Z,{name:"expireDate",label:"\u8FC7\u671F\u65F6\u95F4",placeholder:"\u8FC7\u671F\u65F6\u95F4",fieldProps:{disabledDate:P},extra:"\u4E0D\u586B\u5C06\u4F7F\u7528\u7CFB\u7EDF\u9ED8\u8BA4\u8FC7\u671F\u65F6\u95F4 2116-12-31"}),(0,e.jsx)(la.Z,{name:"remark",label:"\u5907\u6CE8",extra:"\u7528\u6237\u5907\u6CE8\u4FE1\u606F",fieldProps:{placeholder:"\u5907\u6CE8",rows:2,maxLength:20,autoComplete:"off",showCount:!0}})]})})}))},nr=rr,tr=a(21084),sr=ea.Z.Text,ur=ea.Z.Link,lr=function(h){_e.m.push("/account/user/detail?id=".concat(h,"&tab=user-info"))},ir=function(V){var h=V.organization,F=(0,i.useRef)(),N=(0,i.useState)(),K=f()(N,2),g=K[0],R=K[1],w=(0,i.useState)(!0),b=f()(w,2),G=b[0],U=b[1],W=(0,i.useState)(!1),Q=f()(W,2),J=Q[0],L=Q[1],Z=(0,i.useState)(!1),E=f()(Z,2),P=E[0],C=E[1],z=(0,i.useState)(!1),D=f()(z,2),ae=D[0],x=D[1],te=[{title:"\u7528\u6237\u540D\u79F0",dataIndex:"username",width:130,ellipsis:!0,renderText:function(S,p){return(0,e.jsxs)(Ae.Z,{children:[(0,e.jsx)(tr.Z,{avatar:p.avatar,username:p.username}),(0,e.jsx)("a",{onClick:function(){lr(p.id)},children:p.username})]})}},{title:"\u7528\u6237\u59D3\u540D",align:"left",dataIndex:"fullName",ellipsis:!0},{title:"\u624B\u673A\u53F7\u7801",dataIndex:"phone",align:"left",ellipsis:!0,renderText:function(S,p){return S&&(0,e.jsxs)(Ae.Z,{children:[S&&p.phoneVerified?(0,e.jsx)(Pe.Z,{status:"success"}):(0,e.jsx)(Pe.Z,{status:"error"}),S]})}},{title:"\u90AE\u7BB1\u5730\u5740",dataIndex:"email",align:"left",ellipsis:!0,renderText:function(S,p){return S&&(0,e.jsxs)(Ae.Z,{children:[p.emailVerified?(0,e.jsx)(Pe.Z,{status:"success"}):(0,e.jsx)(Pe.Z,{status:"error"}),S]})}},{title:"\u6570\u636E\u6765\u6E90",dataIndex:"dataOrigin",ellipsis:!0,valueEnum:{input:{text:"\u81EA\u5EFA"},dingtalk:{text:"\u9489\u9489\u5BFC\u5165"},wechat:{text:"\u4F01\u4E1A\u5FAE\u4FE1\u5BFC\u5165"},feishu:{text:"\u98DE\u4E66\u5BFC\u5165"},ldap:{text:"LDAP\u5BFC\u5165"}}},{title:"\u6240\u5C5E\u7EC4\u7EC7",dataIndex:"orgDisplayPath",search:!1,ellipsis:!0},{title:"\u72B6\u6001",dataIndex:"status",align:"center",valueEnum:{enabled:{text:"\u542F\u7528",status:"Success"},disabled:{text:"\u7981\u7528",status:"Error"},locked:{text:"\u9501\u5B9A",status:"Warning"},expired_locked:{text:"\u8FC7\u671F\u9501\u5B9A",status:"Warning"},password_expired_locked:{text:"\u5BC6\u7801\u8FC7\u671F\u9501\u5B9A",status:"Warning"}}},{title:"\u6700\u540E\u767B\u5F55\u65F6\u95F4",dataIndex:"lastAuthTime",search:!1,ellipsis:!0},{title:"\u64CD\u4F5C",valueType:"option",width:130,align:"center",fixed:"right",render:function(S,p){return[p.status==="enabled"?(0,e.jsx)(Ne.Z,{title:"\u7981\u7528\u540E\u8BE5\u7528\u6237\u65E0\u6CD5\u4F7F\u7528\uFF0C\u786E\u5B9A\u7981\u7528\u6B64\u7528\u6237\uFF1F",placement:"bottomRight",icon:(0,e.jsx)(xe.Z,{style:{color:"red"}}),onConfirm:j()(r()().mark(function o(){var t,s,m;return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,T.B9)(p.id);case 2:if(t=n.sent,s=t.success,!s){n.next=8;break}return ne.ZP.success("\u64CD\u4F5C\u6210\u529F"),(m=F.current)===null||m===void 0||m.reload(),n.abrupt("return");case 8:case"end":return n.stop()}},o)})),okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)("a",{style:{color:"red"},children:"\u7981\u7528"},"disabled")},"disabled"):(0,e.jsx)(Ne.Z,{title:"\u786E\u5B9A\u542F\u7528\u8BE5\u7528\u6237\u5417\uFF1F",placement:"bottomRight",icon:(0,e.jsx)(xe.Z,{}),onConfirm:j()(r()().mark(function o(){var t,s,m;return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,T.Dx)(p.id);case 2:if(t=n.sent,s=t.success,!s){n.next=8;break}return ne.ZP.success("\u64CD\u4F5C\u6210\u529F"),(m=F.current)===null||m===void 0||m.reload(),n.abrupt("return");case 8:case"end":return n.stop()}},o)})),okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)("a",{children:"\u542F\u7528"},"enabled")},"disabled"),(0,e.jsx)("a",{onClick:function(){R(p.id),C(!0)},children:"\u4FEE\u6539"},"update"),(0,e.jsx)(La.Z,{onSelect:function(t){t==="reset-password"&&(R(p.id),x(!0))},menus:[{key:"delete",name:(0,e.jsx)(Ne.Z,{title:"\u5220\u9664\u540E\u8BE5\u7528\u6237\u65E0\u6CD5\u4F7F\u7528\uFF0C\u786E\u5B9A\u5220\u9664\u6B64\u7528\u6237\uFF1F",placement:"bottomRight",icon:(0,e.jsx)(xe.Z,{style:{color:"red"}}),onConfirm:j()(r()().mark(function o(){var t,s,m;return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,T.kX)(p.id);case 2:if(t=n.sent,s=t.success,!s){n.next=8;break}return ne.ZP.success("\u64CD\u4F5C\u6210\u529F"),(m=F.current)===null||m===void 0||m.reload(),n.abrupt("return");case 8:case"end":return n.stop()}},o)})),okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)("a",{target:"_blank",style:{color:"red"},children:"\u5220\u9664\u7528\u6237"},"remove")},"delete")},{key:"reset-password",name:"\u91CD\u7F6E\u5BC6\u7801"}]},"actionGroup")]}}];return(0,e.jsxs)(e.Fragment,{children:[h?(0,e.jsx)(Ma.Z,{scroll:{x:1200},params:{organizationId:h==null?void 0:h.id,inclSubOrganization:G},style:{height:"calc(100vh - 220px)",overflow:"auto"},cardProps:{style:{minHeight:"calc(100vh - 220px)"}},search:{defaultCollapsed:!0},rowSelection:{selections:[aa.Z.SELECTION_ALL,aa.Z.SELECTION_INVERT]},tableAlertRender:function(S){var p=S.selectedRowKeys,o=S.onCleanSelected;return(0,e.jsx)(Ae.Z,{size:24,children:(0,e.jsxs)("span",{children:["\u5DF2\u9009 ",p.length," \u9879",(0,e.jsx)("a",{style:{marginLeft:8},onClick:o,children:"\u53D6\u6D88\u9009\u62E9"})]})})},tableAlertOptionRender:function(S){return S.selectedRowKeys.length>1?(0,e.jsx)(Ae.Z,{size:16,children:(0,e.jsx)(Ne.Z,{title:"\u60A8\u786E\u5B9A\u8981\u6279\u91CF\u5220\u9664\u9009\u4E2D\u7528\u6237\u5417\uFF1F",placement:"bottomRight",icon:(0,e.jsx)(xe.Z,{style:{color:"red"}}),onConfirm:j()(r()().mark(function p(){var o;return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:ne.ZP.success("\u64CD\u4F5C\u6210\u529F"),S.onCleanSelected(),(o=F.current)===null||o===void 0||o.reload();case 3:case"end":return s.stop()}},p)})),okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)("a",{target:"_blank",style:{color:"red"},children:"\u6279\u91CF\u5220\u9664"},"remove")},"offline")}):(0,e.jsx)(e.Fragment,{})},columns:te,actionRef:F,pagination:{defaultPageSize:10,showQuickJumper:!0},request:T.lE,rowKey:"id",dateFormatter:"string",headerTitle:h.name,form:{syncToUrl:function(S,p){return p==="get"?$()({},S):S}},toolbar:{actions:[(0,e.jsxs)(Ae.Z,{style:{alignItems:"flex-start"},children:[(0,e.jsx)($a.Z,{checked:G,onChange:function(S){var p,o=S.target.checked;U(o),(p=F.current)===null||p===void 0||p.reload()}}),(0,e.jsx)(Je.Z,{title:"\u82E5\u4E0D\u52FE\u9009\uFF0C\u5219\u53EA\u4F1A\u641C\u7D22\u5F53\u524D\u76F4\u5C5E\u8282\u70B9\u7684\u8D26\u6237\uFF0C\u4E0D\u5305\u542B\u4E0B\u7EA7\u8282\u70B9\u8D26\u6237\u3002",children:(0,e.jsxs)(sr,{ellipsis:!0,children:["\u5305\u542B\u8282\u70B9\u4E0B\u5168\u90E8\u8D26\u6237",(0,e.jsx)(xe.Z,{style:{marginInlineStart:3}})]})})]},"checkbox"),(0,e.jsx)(ra.Z,{type:"vertical"},"divider"),(0,e.jsx)(ur,{ellipsis:!0,onClick:function(){_e.m.push("/account/identity-source")},children:"\u8EAB\u4EFD\u6E90\u5BFC\u5165"},"identity-import"),(0,e.jsx)(ra.Z,{type:"vertical"},"divider"),(0,e.jsx)(Qe.Z,{type:"primary",icon:(0,e.jsx)($e.Z,{}),onClick:function(){L(!0)},children:"\u65B0\u589E\u7528\u6237"},"create")]}}):(0,e.jsx)(He.Z,{style:{height:"calc(100vh - 220px)"},bordered:!1,children:(0,e.jsx)(be.Z,{paragraph:{rows:10},active:!0})}),h&&(0,e.jsx)(Ga,{visible:J,onCancel:function(){L(!1)},organization:{id:h.id,name:h.name},onFinish:function(){var k=j()(r()().mark(function S(p,o){var t,s,m,l;return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,T.r4)(p);case 2:if(t=u.sent,s=t.success,m=t.result,!(s&&m)){u.next=10;break}return ne.ZP.success("\u64CD\u4F5C\u6210\u529F"),(l=F.current)===null||l===void 0||l.reload(),o||L(!1),u.abrupt("return",Promise.resolve(!0));case 10:return u.abrupt("return",Promise.resolve(!1));case 11:case"end":return u.stop()}},S)}));return function(S,p){return k.apply(this,arguments)}}()}),g&&(0,e.jsx)(nr,{id:g,visible:P,onCancel:function(){C(!1)},onFinish:function(){var k=j()(r()().mark(function S(p){var o,t,s,m;return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,T.Nq)(p);case 2:if(o=n.sent,t=o.success,s=o.result,!(t&&s)){n.next=10;break}return ne.ZP.success("\u64CD\u4F5C\u6210\u529F"),C(!1),(m=F.current)===null||m===void 0||m.reload(),n.abrupt("return",Promise.resolve(!0));case 10:return n.abrupt("return",Promise.resolve(!1));case 11:case"end":return n.stop()}},S)}));return function(S){return k.apply(this,arguments)}}()}),g&&(0,e.jsx)(_a,{id:g,visible:ae,onCancel:function(){x(!1)}})]})},or=ir,cr={xxl:5,lg:6,md:24,sm:24,xs:24},dr={xxl:19,lg:18,md:24,sm:24,xs:24},fr=function(){var V=(0,i.useState)(),h=f()(V,2),F=h[0],N=h[1],K=function(R,w){N({id:R,name:w})};return(0,e.jsx)(Ee._z,{content:"\u7EC4\u7EC7\u4E0E\u7528\u6237\u7528\u4E8E\u89E3\u51B3\u4F01\u4E1A\u7EC4\u7EC7\u3001\u7528\u6237\u7B49\u5B9E\u4F53\u7684\u7BA1\u7406\u95EE\u9898\u3002\u8FD9\u4E9B\u5B9E\u4F53\u60A8\u53EF\u4EE5\u76F4\u63A5\u5728TopIAM\u4E2D\u8FDB\u884C\u7EF4\u62A4\uFF0C\u4E5F\u53EF\u4EE5\u901A\u8FC7\u914D\u7F6E\u8EAB\u4EFD\u6E90\u540E\uFF0C\u540C\u6B65\u8EAB\u4EFD\u6E90\u7684\u6570\u636E\u3002",children:(0,e.jsxs)(he.Z,{gutter:[16,16],children:[(0,e.jsx)(oe.Z,$()($()({},cr),{},{style:{minHeight:"100%",overflow:"auto"},children:(0,e.jsx)(Ka,{onSelect:K})})),(0,e.jsx)(oe.Z,$()($()({},dr),{},{style:{minHeight:"100%",overflow:"auto"},children:(0,e.jsx)(or,{organization:F})}))]})})},mr=fr},78098:function(Me,ge,a){a.d(ge,{J:function(){return Ee},h:function(){return he}});var Ce=a(64129),$=a.n(Ce),ie=a(11281),f=a.n(ie);function Ee(oe,i,de){return oe.map(function(r){return r.id===i?f()(f()({},r),{},{isLeaf:!1,children:de}):r.children?f()(f()({},r),{},{children:Ee(r.children,i,de)}):r})}function he(oe){var i=[];return oe.forEach(function(de){return i.push(de.id),de.children&&i.push.apply(i,$()(he(de.children))),i}),i}}}]);
